(self.webpackChunkPTT2024=self.webpackChunkPTT2024||[]).push([[179],{1674:(ni,Wt,F)=>{"use strict";F.r(Wt),F.d(Wt,{AuthModule:()=>wt});var p=F(6895),j=F(2409),Q=F(4006),o=F(4144),P=F(4859),st=F(3546),_t=F(3805),ke=F(4385),Ye=F(9549),lt=F(4650);let wt=(()=>{class it{static#e=this.\u0275fac=function(jt){return new(jt||it)};static#t=this.\u0275mod=lt.oAB({type:it});static#n=this.\u0275inj=lt.cJS({imports:[ke.LD,Ye.lN,_t.Bb,o.c,p.ez,j.D,Q.u5,Q.UX,o.c,P.ot,st.QW]})}return it})()},2869:(ni,Wt,F)=>{"use strict";F.d(Wt,{Q:()=>kn});var p=F(4650),j=F(4006),Q=F(8675),o=F(3900),P=F(9300),st=F(4004),_t=F(9898),ke=F.n(_t),Ye=F(2340),lt=F(9664);let wt=(()=>{class an{constructor(){this.geocodingEndpoint="https://api.mapbox.com/geocoding/v5/mapbox.places",this.accessTokem=Ye.N.accessToken}geocode(Gt){const On=`${this.geocodingEndpoint}/${encodeURIComponent(Gt)}.json?cointry=IT&access_token=${this.accessTokem}`;return fetch(On).then(xt=>xt.json())}static#e=this.\u0275fac=function(On){return new(On||an)};static#t=this.\u0275prov=p.Yz7({token:an,factory:an.\u0275fac,providedIn:"root"})}return an})();var it=F(9549),yt=F(3238),pt=F(3805),jt=F(4144),en=F(6895),Ct=F(4859),nn=F(3546);function sn(an,Mn){if(1&an&&(p.TgZ(0,"ul",8)(1,"li",9),p._uU(2," Informazioni aziendali "),p.qZA(),p.TgZ(3,"li",9),p._uU(4," Informazioni di contatto "),p.qZA()()),2&an){const Gt=p.oxw();p.xp6(1),p.Q6J("ngClass",1==Gt.step?"active ":"inactive"),p.xp6(2),p.Q6J("ngClass",Gt.step>=2?"active":"inactive")}}function Cn(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Denominazione is required"),p.qZA())}function kt(an,Mn){if(1&an&&(p.TgZ(0,"mat-option",35),p._uU(1),p.qZA()),2&an){const Gt=Mn.$implicit;p.Q6J("value",Gt.value),p.xp6(1),p.hij(" ",Gt.text," ")}}function Ae(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Indirizzo is required"),p.qZA())}function ct(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Partita IVA is required"),p.qZA())}function ht(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"CAP is required"),p.qZA())}function mt(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1," Maximum length exceeded. "),p.qZA())}function Je(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Sede azienda is required"),p.qZA())}function qt(an,Mn){if(1&an&&(p.TgZ(0,"mat-option",35),p._uU(1),p.qZA()),2&an){const Gt=Mn.$implicit;p.Q6J("value",Gt.value),p.xp6(1),p.hij(" ",Gt.name," ")}}function ln(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Provincia is required"),p.qZA())}function Dn(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Matricola INPS is required"),p.qZA())}function ti(an,Mn){if(1&an&&(p.TgZ(0,"mat-option",35),p._uU(1),p.qZA()),2&an){const Gt=Mn.$implicit;p.Q6J("value",Gt.value),p.xp6(1),p.hij(" ",Gt.name," ")}}function _n(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Citt\xe0 is required"),p.qZA())}function _i(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"PEC is required"),p.qZA())}function ii(an,Mn){if(1&an&&(p.TgZ(0,"option",35),p._uU(1),p.qZA()),2&an){const Gt=Mn.$implicit;p.Q6J("value",Gt.value),p.xp6(1),p.hij(" ",Gt.label," ")}}function vi(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"CCNL is required"),p.qZA())}const Ii=function(an){return{display:an}};function Yt(an,Mn){if(1&an){const Gt=p.EpF();p.TgZ(0,"form",10)(1,"div",11)(2,"div",12),p._uU(3,"Registrazione Azienda"),p.qZA()(),p._UZ(4,"br"),p.TgZ(5,"div",11)(6,"div",13)(7,"div",11)(8,"div",13)(9,"mat-form-field",14)(10,"mat-label"),p._uU(11,"Denominazione"),p.qZA(),p._UZ(12,"input",15),p.TgZ(13,"div"),p.YNc(14,Cn,2,0,"mat-error",16),p.qZA()()(),p.TgZ(15,"div",13)(16,"mat-form-field",14)(17,"mat-label"),p._uU(18,"Indirizzo"),p.qZA(),p.TgZ(19,"input",17),p.NdJ("keyup",function(){p.CHM(Gt);const xt=p.oxw();return p.KtG(xt.onAddressChange())}),p.qZA(),p.TgZ(20,"mat-autocomplete",18,19),p.NdJ("optionSelected",function(xt){p.CHM(Gt);const zt=p.oxw();return p.KtG(zt.onSelectionChange(xt))}),p.YNc(22,kt,2,2,"mat-option",20),p.qZA(),p.TgZ(23,"div"),p.YNc(24,Ae,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(25,"div",11)(26,"div",13)(27,"mat-form-field",14)(28,"mat-label"),p._uU(29,"Partita IVA"),p.qZA(),p._UZ(30,"input",21),p.TgZ(31,"div"),p.YNc(32,ct,2,0,"mat-error",16),p.qZA()()(),p.TgZ(33,"div",13)(34,"mat-form-field",22)(35,"mat-label"),p._uU(36,"CAP"),p.qZA(),p._UZ(37,"input",23),p.TgZ(38,"div"),p.YNc(39,ht,2,0,"mat-error",16),p.YNc(40,mt,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(41,"div",11)(42,"div",13)(43,"mat-form-field",14)(44,"mat-label"),p._uU(45,"Sede azienda"),p.qZA(),p._UZ(46,"input",24),p.TgZ(47,"div"),p.YNc(48,Je,2,0,"mat-error",16),p.qZA()()(),p.TgZ(49,"div",13)(50,"mat-form-field",22)(51,"mat-label"),p._uU(52,"Provincia"),p.qZA(),p._UZ(53,"input",25),p.TgZ(54,"mat-autocomplete",null,26),p.YNc(56,qt,2,2,"mat-option",20),p.ALo(57,"async"),p.qZA(),p.TgZ(58,"div"),p.YNc(59,ln,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(60,"div",11)(61,"div",13)(62,"mat-form-field",14)(63,"mat-label"),p._uU(64,"Matricola INPS"),p.qZA(),p._UZ(65,"input",27),p.TgZ(66,"div"),p.YNc(67,Dn,2,0,"mat-error",16),p.qZA()()(),p.TgZ(68,"div",13)(69,"mat-form-field",22)(70,"mat-label"),p._uU(71,"Citt\xe0"),p.qZA(),p._UZ(72,"input",28),p.TgZ(73,"mat-autocomplete",null,29),p.YNc(75,ti,2,2,"mat-option",20),p.ALo(76,"async"),p.qZA(),p.TgZ(77,"div"),p.YNc(78,_n,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(79,"div",11)(80,"div",13)(81,"mat-form-field",14)(82,"mat-label"),p._uU(83,"PEC"),p.qZA(),p._UZ(84,"input",30),p.TgZ(85,"div"),p.YNc(86,_i,2,0,"mat-error",16),p.qZA()()(),p._UZ(87,"div",13),p.qZA(),p.TgZ(88,"div",11)(89,"div",13)(90,"mat-form-field",14)(91,"mat-label"),p._uU(92,"CCNL"),p.qZA(),p.TgZ(93,"select",31),p.YNc(94,ii,2,2,"option",20),p.qZA(),p.TgZ(95,"div"),p.YNc(96,vi,2,0,"mat-error",16),p.qZA()()(),p._UZ(97,"div",13),p.qZA(),p.TgZ(98,"div",11)(99,"div",32)(100,"button",33),p._uU(101," Annulla "),p.qZA(),p.TgZ(102,"button",34),p.NdJ("click",function(){p.CHM(Gt);const xt=p.oxw();return p.KtG(xt.next())}),p._uU(103," ->Prosegui "),p.qZA()()()()()()}if(2&an){const Gt=p.MAs(21),On=p.MAs(55),xt=p.MAs(74),zt=p.oxw();let Wn,Fn,It,li,je,ce,De,$e,Ft,Qe,Te;p.Q6J("formGroup",zt.companyForm),p.xp6(14),p.Q6J("ngIf",(null==(Wn=zt.companyForm.get("name"))?null:Wn.hasError("required"))&&(null==(Wn=zt.companyForm.get("name"))?null:Wn.touched)),p.xp6(5),p.Q6J("matAutocomplete",Gt),p.xp6(3),p.Q6J("ngForOf",zt.results),p.xp6(2),p.Q6J("ngIf",(null==(Fn=zt.companyForm.get("address"))?null:Fn.hasError("required"))&&(null==(Fn=zt.companyForm.get("address"))?null:Fn.touched)),p.xp6(8),p.Q6J("ngIf",(null==(It=zt.companyForm.get("VAT"))?null:It.hasError("required"))&&(null==(It=zt.companyForm.get("VAT"))?null:It.touched)),p.xp6(2),p.Q6J("ngStyle",p.VKq(26,Ii,zt.isAddress?"block":"none")),p.xp6(5),p.Q6J("ngIf",(null==(li=zt.companyForm.get("ZIP"))?null:li.hasError("required"))&&(null==(li=zt.companyForm.get("ZIP"))?null:li.touched)),p.xp6(1),p.Q6J("ngIf",null==(je=zt.companyForm.get("ZIP"))?null:je.hasError("maxlength")),p.xp6(8),p.Q6J("ngIf",(null==(ce=zt.companyForm.get("registered_office"))?null:ce.hasError("required"))&&(null==(ce=zt.companyForm.get("registered_office"))?null:ce.touched)),p.xp6(2),p.Q6J("ngStyle",p.VKq(28,Ii,zt.isAddress?"block":"none")),p.xp6(3),p.Q6J("matAutocomplete",On),p.xp6(3),p.Q6J("ngForOf",p.lcZ(57,22,zt.filteredOptions)),p.xp6(3),p.Q6J("ngIf",(null==(De=zt.companyForm.get("province"))?null:De.hasError("required"))&&(null==(De=zt.companyForm.get("province"))?null:De.touched)),p.xp6(8),p.Q6J("ngIf",(null==($e=zt.contactForm.get("INPS"))?null:$e.hasError("required"))&&(null==($e=zt.contactForm.get("INPS"))?null:$e.touched)),p.xp6(2),p.Q6J("ngStyle",p.VKq(30,Ii,zt.isAddress?"block":"none")),p.xp6(3),p.Q6J("matAutocomplete",xt),p.xp6(3),p.Q6J("ngForOf",p.lcZ(76,24,zt.filteredOptionsCities)),p.xp6(3),p.Q6J("ngIf",(null==(Ft=zt.companyForm.get("city"))?null:Ft.hasError("required"))&&(null==(Ft=zt.companyForm.get("city"))?null:Ft.touched)),p.xp6(8),p.Q6J("ngIf",(null==(Qe=zt.companyForm.get("PEC"))?null:Qe.hasError("required"))&&(null==(Qe=zt.companyForm.get("PEC"))?null:Qe.touched)),p.xp6(8),p.Q6J("ngForOf",zt.options),p.xp6(2),p.Q6J("ngIf",(null==(Te=zt.contactForm.get("CCNL"))?null:Te.hasError("required"))&&(null==(Te=zt.companyForm.get("CCNL"))?null:Te.touched))}}function Zt(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Referente aziendale is required"),p.qZA())}function ze(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Nome consulente aziendale is required"),p.qZA())}function Ge(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Email referente aziendale is required"),p.qZA())}function Nt(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Email consulente aziendale is required"),p.qZA())}function We(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Telefono Principale is required"),p.qZA())}function Ot(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Telefono Principale is required"),p.qZA())}function Re(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Telefono Secondario is required"),p.qZA())}function ft(an,Mn){1&an&&(p.TgZ(0,"mat-error"),p._uU(1,"Note is required"),p.qZA())}function cn(an,Mn){if(1&an){const Gt=p.EpF();p.TgZ(0,"form",36),p.NdJ("ngSubmit",function(){p.CHM(Gt);const xt=p.oxw();return p.KtG(xt.onSubmit())}),p.TgZ(1,"div",11)(2,"div",12),p._uU(3,"Registrazione Azienda"),p.qZA()(),p._UZ(4,"br"),p.TgZ(5,"div",11)(6,"div",13)(7,"div",11)(8,"div",37),p._uU(9,"Referente"),p.qZA(),p.TgZ(10,"div",37),p._uU(11,"Consulente"),p.qZA()(),p.TgZ(12,"div",11)(13,"div",13)(14,"mat-form-field",14)(15,"mat-label"),p._uU(16,"Referente aziendale"),p.qZA(),p._UZ(17,"input",38),p.TgZ(18,"div"),p.YNc(19,Zt,2,0,"mat-error",16),p.qZA()()(),p.TgZ(20,"div",13)(21,"mat-form-field",14)(22,"mat-label"),p._uU(23,"Nome consulente aziendale"),p.qZA(),p._UZ(24,"input",39),p.TgZ(25,"div"),p.YNc(26,ze,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(27,"div",11)(28,"div",13)(29,"mat-form-field",14)(30,"mat-label"),p._uU(31,"Email referente aziendale"),p.qZA(),p._UZ(32,"input",40),p.TgZ(33,"div"),p.YNc(34,Ge,2,0,"mat-error",16),p.qZA()()(),p.TgZ(35,"div",13)(36,"mat-form-field",14)(37,"mat-label"),p._uU(38,"Email consulente aziendale"),p.qZA(),p._UZ(39,"input",41),p.TgZ(40,"div"),p.YNc(41,Nt,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(42,"div",11)(43,"div",13)(44,"mat-form-field",14)(45,"mat-label"),p._uU(46,"Telefono Principale"),p.qZA(),p._UZ(47,"input",42),p.TgZ(48,"div"),p.YNc(49,We,2,0,"mat-error",16),p.qZA()()(),p.TgZ(50,"div",13)(51,"mat-form-field",14)(52,"mat-label"),p._uU(53,"Telefono Principale"),p.qZA(),p._UZ(54,"input",43),p.TgZ(55,"div"),p.YNc(56,Ot,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(57,"div",11)(58,"div",13)(59,"mat-form-field",14)(60,"mat-label"),p._uU(61,"Telefono Secondario"),p.qZA(),p._UZ(62,"input",44),p.TgZ(63,"div"),p.YNc(64,Re,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(65,"div",11)(66,"div",13)(67,"mat-form-field",14)(68,"mat-label"),p._uU(69,"Note"),p.qZA(),p._UZ(70,"textarea",45),p.TgZ(71,"div"),p.YNc(72,ft,2,0,"mat-error",16),p.qZA()()()(),p.TgZ(73,"div",11)(74,"div",32)(75,"button",46),p.NdJ("click",function(){p.CHM(Gt);const xt=p.oxw();return p.KtG(xt.previous())}),p._uU(76," Indietro "),p.qZA(),p.TgZ(77,"button",47),p._uU(78," Invia "),p.qZA()()()()()()}if(2&an){const Gt=p.oxw();let On,xt,zt,Wn,Fn,It,li,je;p.Q6J("formGroup",Gt.contactForm),p.xp6(19),p.Q6J("ngIf",(null==(On=Gt.contactForm.get("contact_person"))?null:On.hasError("required"))&&(null==(On=Gt.contactForm.get("contact_person"))?null:On.touched)),p.xp6(7),p.Q6J("ngIf",(null==(xt=Gt.contactForm.get("advisor_name"))?null:xt.hasError("required"))&&(null==(xt=Gt.contactForm.get("ZIadvisor_nameP"))?null:xt.touched)),p.xp6(8),p.Q6J("ngIf",(null==(zt=Gt.contactForm.get("contact_mail"))?null:zt.hasError("required"))&&(null==(zt=Gt.contactForm.get("contact_mail"))?null:zt.touched)),p.xp6(7),p.Q6J("ngIf",(null==(Wn=Gt.contactForm.get("advisor_email"))?null:Wn.hasError("required"))&&(null==(Wn=Gt.contactForm.get("advisor_email"))?null:Wn.touched)),p.xp6(8),p.Q6J("ngIf",(null==(Fn=Gt.contactForm.get("contact_phone"))?null:Fn.hasError("required"))&&(null==(Fn=Gt.contactForm.get("contact_phone"))?null:Fn.touched)),p.xp6(7),p.Q6J("ngIf",(null==(It=Gt.contactForm.get("contact_phone2"))?null:It.hasError("required"))&&(null==(It=Gt.contactForm.get("contact_phone2"))?null:It.touched)),p.xp6(8),p.Q6J("ngIf",(null==(li=Gt.contactForm.get("advisor_phone"))?null:li.hasError("required"))&&(null==(li=Gt.contactForm.get("advisor_phone"))?null:li.touched)),p.xp6(8),p.Q6J("ngIf",(null==(je=Gt.contactForm.get("note"))?null:je.hasError("required"))&&(null==(je=Gt.contactForm.get("note"))?null:je.touched))}}let kn=(()=>{class an{constructor(Gt,On,xt){this.fb=Gt,this.service=On,this.mapboxService=xt,this.formSubmit=new p.vpe,this.first_step=!1,this.second_step=!1,this.last_step=!1,this.step=1,this.companyData=null,this.type="",this.options=[{label:"Select CCNL",value:""},{label:"Logistics",value:1},{label:"Goods Transport",value:2},{label:"Shipping",value:3}],this.query="",this.showMap=!1,this.lat=41.8719,this.long=12.5674,this.isAddress=!1}ngOnInit(){this.companyForm=this.fb.group({name:["Test",j.kI.required],VAT:["123456",[j.kI.required,j.kI.maxLength(11)]],address:["",j.kI.required],province:["",j.kI.required],ZIP:["",[j.kI.required,j.kI.maxLength(6)]],registered_office:["Test",j.kI.required],PEC:["Test@gmail.com",[j.kI.required,j.kI.email]],INPS:["123456",[j.kI.required,j.kI.pattern(/^[0-9]+$/),j.kI.maxLength(11)]],city:["",j.kI.required],CCNL:["123456",j.kI.required]}),this.contactForm=this.fb.group({contact_person:["Test 1",j.kI.required],contact_mail:["Test2@gmail.com",[j.kI.required,j.kI.email]],contact_phone:["1231231231",[j.kI.pattern(/^[0-9]+$/)]],contact_phone2:["1231231231",[j.kI.pattern(/^[0-9]+$/)]],advisor_name:["Test"],advisor_email:["Test@gmail.com",j.kI.email],advisor_phone:["2342342342"],note:["Test"]}),this.registerForm=this.fb.group({azienda:["",j.kI.required],email:["",j.kI.required],password:["",j.kI.required],condermaPassword:["",j.kI.required]}),this.filteredOptions=this.companyForm.controls.province.valueChanges.pipe((0,Q.O)(""),(0,o.w)(Gt=>this._filter(Gt))),this.filteredOptionsCities=this.companyForm.controls.city.valueChanges.pipe((0,Q.O)(""),(0,o.w)(Gt=>this._filterCities(Gt))),1==this.step&&this.initializeMap()}initializeMap(){ke().accessToken=Ye.N.accessToken,this.map=new(ke().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[this.lat,this.long],zoom:9}),this.map.on("click",Gt=>{console.log("Clicked location:",Gt.lngLat)}),(new(ke().Marker)).setLngLat([41.8719,12.5674]).addTo(this.map)}onSelectionChange(Gt){this.location=this.addressData.filter(On=>On.id==Gt.option.value),this.lat=this.location[0].center[0],this.long=this.location[0].center[1],this.setAddress(),this.updateMarkerLocation(),this.isAddress=!0}updateMarkerLocation(){const Gt=new _t.LngLat(this.lat,this.long);(new(ke().Marker)).setLngLat(Gt).addTo(this.map),this.map.flyTo({center:Gt})}setAddress(){this.companyForm.controls.address.setValue(this.location[0].place_name),this.companyForm.controls.city.setValue(this.location[0].context.filter(Gt=>Gt.id.includes("place"))[0].text),this.companyForm.controls.ZIP.setValue(this.location[0].context.filter(Gt=>Gt.id.includes("postcode"))[0].text),this.companyForm.controls.province.setValue(this.location[0].context.filter(Gt=>Gt.id.includes("region"))[0].text)}setAddressLatLong(){var Gt=this.location.filter(On=>On.id.includes("poi"))[0].context;this.companyForm.controls.city.setValue(Gt.filter(On=>On.id.includes("place"))[0].text),this.companyForm.controls.ZIP.setValue(Gt.filter(On=>On.id.includes("postcode"))[0].text),this.companyForm.controls.province.setValue(this.location.filter(On=>On.id.includes("region"))[0].text)}onAddressChange(){const Gt=this.companyForm.get("address")?.value;this.query=Gt,this.search()}get companyFormControls(){return this.companyForm.controls}get contactFormControls(){return this.contactForm.controls}get registerFormControls(){return this.registerForm.controls}_filter(Gt){const On=Gt.toLowerCase();return this.service.getProvinces(On).pipe((0,P.h)(xt=>!!xt.Result),(0,st.U)(xt=>xt.Result.filter(zt=>(zt.name+"").toLowerCase().includes(Gt))))}_filterCities(Gt){const On=Gt.toLowerCase();return this.service.getCities(On).pipe((0,P.h)(xt=>!!xt),(0,st.U)(xt=>xt.filter(zt=>(zt.name+"").toLowerCase().includes(Gt))))}next(){if(1==this.step){if(this.first_step=!0,this.second_step=!1,this.companyForm.invalid)return;this.step++}else if(2==this.step){if(this.second_step=!0,this.first_step=!1,this.contactForm.invalid)return;this.step++}}search(){this.query.length>2?this.mapboxService.geocode(this.query).then(Gt=>{this.addressData=Gt.features,this.results=Gt.features.map(On=>({text:On.place_name,value:On.id}))}):this.results=[]}searchLatLong(){this.query.length>2?this.mapboxService.geocode(this.query).then(Gt=>{var On=Gt.features.map(xt=>({text:xt.place_name,value:xt.id}));this.companyForm.controls.address.setValue(On[0].text),this.query=On[0].text,this.mapboxService.geocode(this.query).then(xt=>{this.location=xt.features,this.setAddressLatLong()})}):this.companyForm.controls.address.setValue("")}previous(){this.step--,1==this.step&&(this.second_step=!1),2==this.step&&(this.last_step=!1)}submit(){3==this.step&&(this.last_step=!0)}onSubmit(){if(this.companyForm.valid){var Gt=this.companyForm.value;Gt.province=this.location[0].context.filter(On=>On.id.includes("region"))[0].short_code.split("-")[1],this.companyData={...Gt,...this.contactForm.value},this.formSubmit.emit(this.companyData)}}static#e=this.\u0275fac=function(On){return new(On||an)(p.Y36(j.qu),p.Y36(lt.a),p.Y36(wt))};static#t=this.\u0275cmp=p.Xpm({type:an,selectors:[["app-company-registration"]],outputs:{formSubmit:"formSubmit"},decls:10,vars:9,consts:[[1,"card-login"],[1,"column2"],["id","progressbar",4,"ngIf"],["class","w-600",3,"formGroup",4,"ngIf"],[3,"ngStyle"],["id","map",3,"ngStyle"],["map",""],["class","w-600",3,"formGroup","ngSubmit",4,"ngIf"],["id","progressbar"],[3,"ngClass"],[1,"w-600",3,"formGroup"],[1,"row"],[1,"txt-md"],[1,"col"],[1,"full-length"],["matInput","","placeholder","Denominazione","formControlName","name",1,""],[4,"ngIf"],["matInput","","placeholder","Indirizzo","formControlName","address",1,"",3,"matAutocomplete","keyup"],[3,"optionSelected"],["address","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Partita IVA","formControlName","VAT",1,""],[1,"full-length",3,"ngStyle"],["matInput","","placeholder","CAP","formControlName","ZIP",1,""],["matInput","","placeholder","Sede azienda","formControlName","registered_office",1,""],["matInput","","placeholder","Provincia","formControlName","province",1,"",3,"matAutocomplete"],["auto","matAutocomplete"],["matInput","","placeholder","Matricola INPS","formControlName","INPS",1,""],["matInput","","placeholder","Citt\xe0","formControlName","city",1,"",3,"matAutocomplete"],["auto1","matAutocomplete"],["matInput","","placeholder","PEC","formControlName","PEC",1,""],["matNativeControl","","formControlName","CCNL"],[1,"col","right"],["mat-raised-button","","type","button",1,"back-button"],["mat-raised-button","",1,"save-button",3,"click"],[3,"value"],[1,"w-600",3,"formGroup","ngSubmit"],[1,"col","text-green"],["matInput","","placeholder","Referente aziendale","formControlName","contact_person",1,""],["matInput","","placeholder","Nome consulente aziendale","formControlName","advisor_name",1,""],["matInput","","placeholder","Email referente aziendale","formControlName","contact_mail",1,""],["matInput","","placeholder","Email consulente aziendale","formControlName","advisor_email",1,""],["matInput","","placeholder","Telefono Principale","formControlName","contact_phone",1,""],["matInput","","placeholder","Telefono Principale","formControlName","contact_phone2",1,""],["matInput","","placeholder","Telefono Secondario","formControlName","advisor_phone",1,""],["matInput","","formControlName","note","id","","placeholder","Note"],["mat-raised-button","","type","button",1,"back-button",3,"click"],["mat-raised-button","","type","submit",1,"save-button"]],template:function(On,xt){1&On&&(p.TgZ(0,"mat-card",0)(1,"mat-card-content")(2,"div")(3,"div",1),p.YNc(4,sn,5,2,"ul",2),p.YNc(5,Yt,104,32,"form",3),p.TgZ(6,"div",4),p._UZ(7,"div",5,6),p.qZA(),p.YNc(9,cn,79,9,"form",7),p.qZA()()()()),2&On&&(p.xp6(4),p.Q6J("ngIf",xt.step<=2),p.xp6(1),p.Q6J("ngIf",1==xt.step),p.xp6(1),p.Q6J("ngStyle",p.VKq(5,Ii,1==xt.step?"block":"none")),p.xp6(1),p.Q6J("ngStyle",p.VKq(7,Ii,xt.isAddress?"block":"none")),p.xp6(2),p.Q6J("ngIf",2==xt.step))},dependencies:[it.KE,it.hX,it.TO,yt.ey,pt.XC,pt.ZL,jt.Nt,en.mk,en.sg,en.O5,en.PC,j._Y,j.YN,j.Kr,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u,Ct.lW,nn.a8,nn.dn,en.Ov],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;font-family:Arial,Helvetica,sans-serif}*[_ngcontent-%COMP%]{box-sizing:border-box}.bg-img[_ngcontent-%COMP%]{background-image:url(/assets/Images/background.jpg);min-height:400px;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;object-fit:cover}.column-row[_ngcontent-%COMP%]{overflow:hidden}.right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}#progressbar[_ngcontent-%COMP%]{overflow:hidden;counter-reset:step;padding:10px;margin:0}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;color:#90918c;font-weight:400;font-size:16px;width:50%;float:left;letter-spacing:1px}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step);counter-increment:step;width:30px;height:30px;line-height:21px;font-size:14px;color:#333;border-radius:10px;margin:0 10px 10px auto;padding:5px 10px}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";width:100%;height:2px;position:absolute;left:-50%;top:9px;z-index:-1}#progressbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:after{content:none}#progressbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{background:#4fa249;color:#c9ffbc}#progressbar[_ngcontent-%COMP%]   li.inactive[_ngcontent-%COMP%]:before{background:#c9ffbc;color:#4fa249}.container[_ngcontent-%COMP%]{margin-top:200px}form[_ngcontent-%COMP%]{float:none!important}.mat-mdc-card[_ngcontent-%COMP%]{min-width:518px;max-width:666px;margin-left:15%;margin-top:10%;min-height:711px}.buttonsDiv[_ngcontent-%COMP%]{display:grid}#map[_ngcontent-%COMP%]{width:273px;height:157px;margin-top:-246px;margin-left:339px}.map[_ngcontent-%COMP%]{position:relative}#search[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:1}']})}return an})()},2409:(ni,Wt,F)=>{"use strict";F.d(Wt,{D:()=>Fn});var p=F(9299),j=F(4006),Q=F(2340),o=F(4650),P=F(529);let st=(()=>{class It{constructor(je){this.http=je,this.rootUrl=Q.N.baseUrl}userAuthentication(je){console.log("formdata",je);const ce={username:je.Email,password:je.Password,grant_type:"password"};return new P.WM({"Content-Type":"application/x-www-urlencoded","No-Auth":"True"}),this.http.post(this.rootUrl+"/Authenticate/login",ce)}getCompanyNameByContactMail(je,ce){return this.http.get(this.rootUrl+"/Company/GetCompanyByMail",{params:{ContactMail:je,usertypeid:ce}})}PasswordForgot(je,ce,De,$e){const Ft=new P.WM({"Content-Type":"application/json","No-Auth":"True"});return this.http.get(this.rootUrl+"/ForgetPassword/ForgetPassword?email="+je+"&VAT_CF="+ce+"&userTypeId="+De+"&isMobile="+$e,{headers:Ft})}getMaintenanceStatus(je,ce){if("rcapasso@intelener.com"==je){const $e=new P.WM({"Content-Type":"application/json","No-Auth":"True",value:"0"});return this.http.get(this.rootUrl+"/Home/getMaintenanceStatus?rule="+ce,{headers:$e})}{const $e=new P.WM({"Content-Type":"application/json","No-Auth":"True",value:"1"});return this.http.get(this.rootUrl+"/Home/getMaintenanceStatus?rule="+ce,{headers:$e})}}getMaintenanceStatusbyemail(je){const ce=new P.WM({"Content-Type":"application/json","No-Auth":"True"});return this.http.get(this.rootUrl+"/Home/getMaintenanceStatusbyemail?email="+je,{headers:ce})}AlignCompanyStartDate(je){return this.http.get(this.rootUrl+"/Company/AlignCompanyStartDate",{params:{companyid:je}})}GetAdminSettings(){return new P.WM({"Content-Type":"application/json","No-Auth":"True"}),this.http.get(this.rootUrl+"/Home/getAdminSettings")}getAdminRegistrationSettings(){const je=new P.WM({"Content-Type":"application/json","No-Auth":"True"});return this.http.get(this.rootUrl+"/Home/getAdminRegistrationSettings",{headers:je})}setAllowanceWorkersFee(){const je=new P.WM({"Content-Type":"application/json","No-Auth":"True"});return this.http.get(this.rootUrl+"/Worker/setAllowanceWorkersFee",{headers:je})}manageDashboardFeeOverYrCalc(je){return this.http.post(this.rootUrl+"/WorkerFeeCalc",je)}manageDashboardPaymentquarterly(je){return this.http.post(this.rootUrl+"/PaymentCalc/manageDashboardPaymentquarterly",je)}manageDashboardPaymentOverYrCalc(je){return this.http.post(this.rootUrl+"/PaymentCalc",je)}ManagePanelCounts(){return this.http.get(this.rootUrl+"/Home/ManagePanelCounts")}check2FA(je,ce){return this.http.get(this.rootUrl+"/Account/check2FA?otp="+je+"&userID="+ce)}CheckUserExsist(je){return this.http.get(this.rootUrl+"/Account/CheckUserExsist",{params:{Username:je}})}makeUserInvalid(je){return this.http.post(this.rootUrl+"/Authenticate/SetUserInvalid",{params:{email:je}})}static#e=this.\u0275fac=function(ce){return new(ce||It)(o.LFG(P.eN))};static#t=this.\u0275prov=o.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"})}return It})();var _t=F(9664),ke=F(3648),Ye=F(1135);let lt=(()=>{class It{constructor(){this.loadingSubject=new Ye.X(!1),this.loading$=this.loadingSubject.asObservable()}showLoader(){this.loadingSubject.next(!0)}hideLoader(){this.loadingSubject.next(!1)}static#e=this.\u0275fac=function(ce){return new(ce||It)};static#t=this.\u0275prov=o.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"})}return It})();var wt=F(7023);let it=(()=>{class It{constructor(){}setObjToLocalStorage(je,ce){const De=JSON.stringify(ce);localStorage.setItem(je,De)}getObjFromLocalStorage(je){const ce=localStorage.getItem(je);return ce?JSON.parse(ce):null}static#e=this.\u0275fac=function(ce){return new(ce||It)};static#t=this.\u0275prov=o.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"})}return It})();var yt=F(9549),pt=F(4385),jt=F(3238),en=F(4144),Ct=F(6895),nn=F(4859),sn=F(3546);const Cn=["customLoadingTemplate"];function kt(It,li){1&It&&o._UZ(0,"div",15)}function Ae(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Email is required"),o.qZA())}function ct(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"mat-form-field",16)(1,"input",17),o.NdJ("change",function(){o.CHM(je);const De=o.oxw();return o.KtG(De.ChkEmailExist(De.LoginForm.controls.Email.value))}),o.qZA(),o.TgZ(2,"div"),o.YNc(3,Ae,2,0,"mat-error",14),o.qZA()()}if(2&It){const je=o.oxw();let ce;o.xp6(3),o.Q6J("ngIf",(null==(ce=je.LoginForm.get("Email"))?null:ce.hasError("required"))&&(null==(ce=je.LoginForm.get("Email"))?null:ce.touched))}}function ht(It,li){1&It&&(o.TgZ(0,"div",11)(1,"div",2),o._UZ(2,"img",18),o._uU(3," Sign in with Google "),o.qZA(),o.TgZ(4,"div",2),o._UZ(5,"img",19),o._uU(6,"Sign in with Microsoft "),o.qZA()())}function mt(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Password is required"),o.qZA())}function Je(It,li){if(1&It&&(o.TgZ(0,"mat-option",29),o._uU(1),o.qZA()),2&It){const je=li.$implicit;o.Q6J("value",je.value),o.xp6(1),o.hij(" ",je.text," ")}}function qt(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"div")(1,"div",11)(2,"mat-form-field"),o._UZ(3,"input",20),o.TgZ(4,"div"),o.YNc(5,mt,2,0,"mat-error",14),o.qZA()()(),o.TgZ(6,"div",11)(7,"mat-form-field")(8,"mat-label"),o._uU(9,"Seleziona Azienda"),o.qZA(),o.TgZ(10,"mat-select",21),o.NdJ("ngModelChange",function(De){o.CHM(je);const $e=o.oxw();return o.KtG($e.selectedCompany=De)}),o.YNc(11,Je,2,2,"mat-option",22),o.qZA()()(),o.TgZ(12,"div",11),o._UZ(13,"div",23),o.TgZ(14,"div",23)(15,"div",24),o._uU(16,"Password dimenticata?"),o.qZA()()(),o.TgZ(17,"div",11)(18,"div",25)(19,"div",16)(20,"div",26),o._uU(21," Desideri informazioni sull\u2019iscrizione? "),o.qZA()(),o.TgZ(22,"div",16)(23,"div",26),o._uU(24,"Contattaci"),o.qZA()()(),o.TgZ(25,"div",27)(26,"button",28),o._uU(27," Login "),o.qZA()()()()}if(2&It){const je=o.oxw();let ce;o.xp6(5),o.Q6J("ngIf",(null==(ce=je.LoginForm.get("Password"))?null:ce.hasError("required"))&&(null==(ce=je.LoginForm.get("Password"))?null:ce.touched)),o.xp6(5),o.Q6J("ngModel",je.selectedCompany),o.xp6(1),o.Q6J("ngForOf",je.CompaniesList)}}function ln(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"div")(1,"div",11)(2,"div",30)(3,"button",31),o.NdJ("click",function(){o.CHM(je);const De=o.oxw();return o.KtG(De.redirect("Azienda"))}),o._uU(4," Registrazione Azienda "),o.qZA(),o.TgZ(5,"button",31),o.NdJ("click",function(){o.CHM(je);const De=o.oxw();return o.KtG(De.redirect("Consulente"))}),o._uU(6," Registrazione Consulente "),o.qZA(),o.TgZ(7,"button",31),o.NdJ("click",function(){o.CHM(je);const De=o.oxw();return o.KtG(De.redirect("Lavoratore"))}),o._uU(8," Registrazione Lavoratore "),o.qZA()()()()}}let Dn=(()=>{class It{constructor(je,ce,De,$e,Ft,Qe,Te,xe,ve){this.router=je,this.loginService=ce,this.registerService=De,this.formbulider=$e,this.toastr=Ft,this.loaderService=Qe,this.route=Te,this.alert=xe,this.common=ve,this.mobile_app_url=Q.N.mobile_app_url,this.isMobile=!1,this.isEmail=!0,this.isLoginError=!1,this.MobileTabCheck=!1,this.accessRegister=!1,this.loginLoader=!1,this.UserInfo={userToken:null,userId:null,userTypeId:null,userDetail:null,userName:"",Name:null,companyId:null,previous_login:null,Is2FA:!1},this.Is2FA=!1,this.Is2FAUserID=0,this.Is2FAUsetType=0,this.isMobileLogin=!1,this.PrimaryWhite="#ffffff",this.SecondaryGrey="#ccc",this.PrimaryRed="#dd0031",this.SecondaryBlue="#006ddd",this.isLoading=!1,this.primaryColour=this.PrimaryRed,this.secondaryColour=this.SecondaryBlue,this.coloursEnabled=!1,this.isValid=!1,this.isChecked=!1,this.hasComapnies=!1,this.loginlog={attemp:0,strick:0},this.enablemessage=!1}ngOnInit(){this.loader=this.loaderService,this.clearSession(),this.GetAdminSettings(),this.LoginForm=this.formbulider.group({Email:["",j.kI.compose([j.kI.required,j.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])],Phone:["",[j.kI.required,j.kI.minLength(11)]],Password:["",[j.kI.required,j.kI.minLength(8)]],CompanyID:[""],recaptcha:["",j.kI.required]}),this.UserInfoDetails=JSON.parse(localStorage.getItem("userInfo")||"{}")}OnSubmit(je){if(1==this.isMobileLogin){var De=this.iti_login.getNumber();je.Email=De}if(!1===this.accessRegister)if(this.loginLoader=!0,localStorage.getItem("UserID"),localStorage.getItem("CompanyID"),localStorage.getItem("userInfo")){var Qe=JSON.parse(localStorage.getItem("userInfo")||"{}");"3"===Qe.userTypeId?this.router.navigate(["pannello/supervisore"]):"1"===Qe.userTypeId?1==this.MobileTabCheck?window.location.replace(this.mobile_app_url+"login?uid="+this.UserInfo.userId+"&un="+this.UserInfo.userName+"&ut="+this.UserInfo.userToken+"&n="+this.UserInfo.Name+"&pl="+this.UserInfo.previous_login+"&cid="+this.UserInfo.companyId):this.router.navigate(["pannello/lavoratore"]):"6"===Qe.userTypeId?this.router.navigate(["pannello/consigliere"]):"7"===Qe.userTypeId?this.router.navigate(["pannello/delegato"]):"8"===Qe.userTypeId?this.router.navigate(["pannello/formazione-lavoratori"]):Qe.companyId&&"3"!==Qe.userTypeId?this.loginService.AlignCompanyStartDate(Qe.companyId).subscribe(Te=>{if("Success"===Te.Message){var xe=Te.Result;null==xe||""===xe?(localStorage.setItem("CompanyID",Qe.companyId),this.router.navigate(["pannello/aggiungiazienda"])):this.router.navigate(["pannello/azienda-consulente"])}else this.alert.fire("warning",Te.Message,"Attenzione")},Te=>{}):this.alert.fire("warning","Procedere con la registrazione di una nuova azienda.","Attenzione"),this.loginLoader=!1}else this.loginService.userAuthentication(je).subscribe(Te=>{this.storeUserDataFor2FA=Te,this.Is2FA="True"==Te.Is2FA,this.loginService.getMaintenanceStatus(je.Email,Te.UserTypeID).subscribe(xe=>{"Success"===xe.Message?("1"===xe.Result.value?(this.loginService.MaintenanceMsg=xe.Result.value2,this.loginLoader=!1,this.clearSession(),document.getElementById("ancMaintenance")?.click()):0==this.Is2FA?(this.UserInfo.userId=Te.UserID,this.UserInfo.userTypeId=Te.UserTypeID,this.UserInfo.userName=1==this.isMobileLogin?"+"+Te.userName.trim():Te.userName,this.UserInfo.userToken=Te.access_token,this.UserInfo.Name=Te.Name,this.UserInfo.previous_login=Te.previous_login,this.UserInfo.Is2FA="True"==Te.Is2FA,localStorage.setItem("userInfo",JSON.stringify(this.UserInfo)),this.UserInfoDetails=JSON.parse(localStorage.getItem("userInfo")||"{}"),this.Is2FA="True"==Te.Is2FA,"3"===Te.UserTypeID?(this.loginLoader=!1,this.router.navigate(["pannello/supervisore"])):"6"===Te.UserTypeID?(this.loginLoader=!1,this.router.navigate(["pannello/consigliere"])):"7"===Te.UserTypeID?(this.loginLoader=!1,this.router.navigate(["pannello/delegato"])):"8"===Te.UserTypeID?(this.loginLoader=!1,this.router.navigate(["pannello/formazione-lavoratori"])):"2"===Te.UserTypeID||"4"===Te.UserTypeID||"1"===Te.UserTypeID?this.loginService.getCompanyNameByContactMail(this.UserInfoDetails.userName,this.UserInfoDetails.userTypeId).subscribe(re=>{"Success"===re.Message?null!=re.Result?(this.CompanyList=re.Result,this.LoginForm.patchValue({CompanyID:this.CompanyList[0].CompanyID}),this.UserInfo.companyId=this.CompanyList[0].CompanyID,localStorage.setItem("userInfo",JSON.stringify(this.UserInfo)),localStorage.setItem("CompanyID",this.CompanyList[0].CompanyID),this.UserInfoDetails=JSON.parse(localStorage.getItem("userInfo")||"{}"),this.loginLoader=!1,this.alert.fire("success","Autenticazione avvenuta. Selezionare l'azienda dall'elenco.","Notifica")):(this.accessRegister=!0,this.alert.fire("success","Autenticazione avvenuta. Procedere con la registrazione di una nuova azienda.","Notifica"),this.loginLoader=!1):("GoToaddInfo"!==re.Message&&this.alert.fire("error",re.Message,"Attenzione"),this.loginLoader=!1,"1"===Te.UserTypeID&&this.clearSession())},re=>{this.loginLoader=!1}):this.loginLoader=!1):(this.loginLoader=!1,"2"===Te.UserTypeID||"4"===Te.UserTypeID||"1"===Te.UserTypeID?this.loginService.getCompanyNameByContactMail(Te.userName,Te.UserTypeID).subscribe(re=>{"Success"===re.Message?null!=re.Result?(this.CompanyList=re.Result,this.LoginForm.patchValue({CompanyID:this.CompanyList[0].CompanyID}),this.loginLoader=!1,this.alert.fire("success","Autenticazione avvenuta. Inserire il codice numerico di sicurezza ricevuto via email e Selezionare l'azienda dall'elenco.","Notifica")):(this.accessRegister=!0,this.alert.fire("success","Autenticazione avvenuta. Inserire il codice numerico di sicurezza ricevuto via email e Procedere con la registrazione di una nuova azienda.","Notifica"),this.loginLoader=!1):("GoToaddInfo"!==re.Message&&this.alert.fire("error",re.Message,"Attenzione"),this.loginLoader=!1,"1"===Te.UserTypeID&&this.clearSession())},re=>{this.loginLoader=!1}):this.alert.fire("success","Inserire il codice numerico di sicurezza ricevuto via email","Attenzione")),this.loginlog={},this.common.setObjToLocalStorage("loginLog",{attemp:0,strick:0})):(this.loginlog=this.common.getObjFromLocalStorage("loginLog"),this.loginlog?(this.loginlog.attemp=this.loginlog.attemp+1,3==this.loginlog.attemp&&(this.loginlog.attemp=0,this.loginlog.strick=this.loginlog.strick+1),3==this.loginlog.strick?(this.makeUserInvalid(je.Email),this.loginlog={attemp:1,strick:0},this.common.setObjToLocalStorage("loginLog",this.loginlog)):this.common.setObjToLocalStorage("loginLog",this.loginlog)):(this.loginlog={attemp:1,strick:0},this.common.setObjToLocalStorage("loginLog",this.loginlog)),this.loginLoader=!1)},xe=>{})},Te=>{if("PasswordIncorrect"===Te.error.error&&(this.loginLoader=!1,this.alert.fire("error",Te.error.error_description,"Autenticazione non riuscita")),"EmailIncorrect"===Te.error.error&&(this.loginLoader=!1,this.alert.fire("error",Te.error.error_description,"Autenticazione non riuscita")),"EmailSent"===Te.error.error){const ve=Te.error.error_uri.split("&"),re=ve[0].split("="),Me=ve[1].split("=");this.router.navigate(["/ripristinapassword"],{queryParams:{email:re[1],token:Me[1]}}),this.alert.fire("success",Te.error.error_description,"Notifica"),this.loginLoader=!1}"NotValid"===Te.error.error&&(this.loginLoader=!1,this.alert.fire("error",Te.error.error_description,"Attenzione")),"PasswordExpired"===Te.error.error&&(this.loginLoader=!1,localStorage.setItem("IsPasswordExpired",Te.error.error_description),this.router.navigate(["/passworddimenticata"])),this.isLoginError=!0,this.loginLoader=!1});else this.gotoregister()}makeUserInvalid(je){this.loginService.makeUserInvalid(je).subscribe(ce=>{(ce.Message="Success")&&this.toastr.error(ce.Result)})}redirect(je){this.route.navigate(["/auth/worker-registration",je])}ChkEmailExist(je){this.loaderService.showLoader(),this.registerService.ChkEmailExist(this.LoginForm.controls.Email.value,"").subscribe(ce=>{this.isChecked=!0,ce.ExtraList&&(this.hasComapnies=!0,this.CompaniesList=ce.ExtraList),"Success"===ce.Result?this.isValid=!0:(this.isValid=!1,this.toastr.error("L'e-mail non esiste, registrati")),this.loaderService.hideLoader()},ce=>{})}ChkMobileExist(je){this.loaderService.showLoader(),this.registerService.ChkMobileExist(je,"").subscribe(ce=>{this.isChecked=!0,"Success"===ce.Result?this.isValid=!0:(this.isValid=!1,this.toastr.error("Il numero di telefono non esiste")),this.loaderService.hideLoader()},ce=>{})}onChangeCompany(je){0!==je.target.value&&null!=je.target.value?(localStorage.removeItem("CompanyID"),this.CompanyDetailID=je.target.value,localStorage.setItem("CompanyID",je.target.value),this.UserInfo.companyId=je.target.value,localStorage.setItem("userInfo",JSON.stringify(this.UserInfo))):localStorage.removeItem("CompanyID")}ngAfterViewInit(){var $e;document.querySelector("#phoneCodelogin"),$e=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test($e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test($e.substr(0,4)))&&(this.MobileTabCheck=!0);var De=window.navigator.userAgent;(De.match(/iPad/i)||De.match(/iPhone/i))&&(this.MobileTabCheck=!0)}clearSession(){localStorage.removeItem("UserID"),localStorage.removeItem("UserTypeID"),localStorage.removeItem("UserDetail"),localStorage.removeItem("userToken"),localStorage.removeItem("CompanyID"),localStorage.removeItem("userInfo"),localStorage.removeItem("companyid"),localStorage.removeItem("fcompanyid"),localStorage.removeItem("userName"),localStorage.removeItem("workerid"),localStorage.removeItem("IsWarehouseManager"),localStorage.removeItem("IsPasswordExpired")}gotoregister(){var je=this.LoginForm.value;if(""!==je.Email&&""!==je.Password&&localStorage.getItem("emailvariable"))this.loginLoader=!0,this.loginService.userAuthentication(je).subscribe(De=>{this.UserInfo.userId=De.UserID,this.UserInfo.userTypeId=De.UserTypeID,this.UserInfo.userName=De.userName,this.UserInfo.userToken=De.access_token,this.UserInfo.Name=De.Name,localStorage.setItem("userInfo",JSON.stringify(this.UserInfo)),localStorage.removeItem("emailvariable");var $e=JSON.parse(localStorage.getItem("userInfo")||"{}");"3"===$e.userTypeId?(this.clearSession(),this.loginLoader=!1):this.router.navigate("2"===$e.userTypeId||"4"===$e.userTypeId?["/pannello/aggiungiazienda"]:["/registrazione"])},De=>{this.router.navigate(["/registrazione"])});else if(localStorage.getItem("userInfo")){localStorage.removeItem("emailvariable");var ce=JSON.parse(localStorage.getItem("userInfo")||"{}");"3"===ce.userTypeId?this.clearSession():("2"===ce.userTypeId||"4"===ce.userTypeId)&&this.router.navigate(["/pannello/aggiungiazienda"])}else this.router.navigate(["/registrazione"])}GetAdminSettings(){this.loginService.GetAdminSettings().subscribe(je=>{if("Success"===je.Message)for(var De=je.Result,$e=0;$e<De.length;$e++)"logo"===De[$e].type?this.logoimg=De[$e].value:"backgrounds"===De[$e].type?this.backgroundimg=De[$e].value:"footertext"===De[$e].type?this.footertext=De[$e].value:"LOGIN"===De[$e].type&&"1"===De[$e].value2?je=JSON.parse(De[$e].value3):"LoginScreenText"===De[$e].type&&(this.loginText1=De[$e].value,this.loginText2=De[$e].value2,this.loginText3=De[$e].value3)},je=>{})}check2FA(je){this.loginLoader=!0,""!=je?this.loginService.check2FA(je,this.storeUserDataFor2FA.UserID).subscribe(ce=>{if(1==ce){if(this.UserInfo.userId=this.storeUserDataFor2FA.UserID,this.UserInfo.userTypeId=this.storeUserDataFor2FA.UserTypeID,this.UserInfo.userName=1==this.isMobileLogin?"+"+this.storeUserDataFor2FA.userName.trim():this.storeUserDataFor2FA.userName,this.UserInfo.userToken=this.storeUserDataFor2FA.access_token,this.UserInfo.Name=this.storeUserDataFor2FA.Name,this.UserInfo.previous_login=this.storeUserDataFor2FA.previous_login,this.UserInfo.Is2FA="True"==this.storeUserDataFor2FA.Is2FA,this.UserInfo.companyId=this.LoginForm.value.CompanyID,localStorage.setItem("CompanyID",this.LoginForm.value.CompanyID),localStorage.setItem("userInfo",JSON.stringify(this.UserInfo)),this.UserInfoDetails=JSON.parse(localStorage.getItem("userInfo")||"{}"),localStorage.getItem("userInfo")){var De=JSON.parse(localStorage.getItem("userInfo")||"{}");"3"===De.userTypeId?this.router.navigate(["pannello/supervisore"]):"1"===De.userTypeId?1==this.MobileTabCheck?window.location.replace(this.mobile_app_url+"login?uid="+this.UserInfo.userId+"&un="+this.UserInfo.userName+"&ut="+this.UserInfo.userToken+"&n="+this.UserInfo.Name+"&pl="+this.UserInfo.previous_login+"&cid="+this.UserInfo.companyId):this.router.navigate(["pannello/lavoratore"]):"6"===De.userTypeId?this.router.navigate(["pannello/consigliere"]):"7"===De.userTypeId?this.router.navigate(["pannello/delegato"]):"8"===De.userTypeId?this.router.navigate(["pannello/formazione-lavoratori"]):De.companyId&&"3"!==De.userTypeId?this.loginService.AlignCompanyStartDate(De.companyId).subscribe($e=>{if("Success"===$e.Message){var Ft=$e.Result;null==Ft||""===Ft?(localStorage.setItem("CompanyID",De.companyId),this.router.navigate(["pannello/aggiungiazienda"])):this.router.navigate(["pannello/azienda-consulente"])}else this.alert.fire("warning",$e.Message,"Attenzione")},$e=>{}):this.alert.fire("warning","Procedere con la registrazione di una nuova azienda.","Attenzione"),this.loginLoader=!1}}else this.loginLoader=!1,this.alert.fire("error","\xc8 stato inserito un codice numerico di sicurezza errato","Attenzione")}):(this.loginLoader=!1,this.alert.fire("error","\xc8 stato inserito un codice numerico di sicurezza errato","Attenzione"))}static#e=this.\u0275fac=function(ce){return new(ce||It)(o.Y36(p.F0),o.Y36(st),o.Y36(_t.a),o.Y36(j.QS),o.Y36(ke._W),o.Y36(lt),o.Y36(p.F0),o.Y36(wt.c),o.Y36(it))};static#t=this.\u0275cmp=o.Xpm({type:It,selectors:[["app-login"]],viewQuery:function(ce,De){if(1&ce&&o.Gf(Cn,5),2&ce){let $e;o.iGM($e=o.CRH())&&(De.customLoadingTemplate=$e.first)}},decls:19,vars:8,consts:[[1,"background1"],[1,"row","width-99"],[1,"col-6"],[1,"left-title","center"],["alt","","src","assets/Images/title.png"],[1,"login"],["class","loading-container",4,"ngIf"],[1,"card-login"],["id","login-form",3,"formGroup","ngSubmit"],[1,"row","center"],["alt","","src","assets/Images/logo.png",1,"logo"],[1,"row"],["class","",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,""],["matInput","","placeholder","Email","formControlName","Email",1,"input-md",3,"change"],["alt","","src","assets/Images/Google.svg",1,"logo-sm"],["alt","","src","assets/Images/Microsoft.svg",1,"logo-sm"],["matInput","","type","Password","placeholder","Password","formControlName","Password",1,"input-md"],["formControlName","CompanyID",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col"],[1,"lk-sm"],[1,"col-7"],[1,"lk-sm","left"],[1,"col","right"],["mat-raised-button","","color","primary","type","submit"],[3,"value"],[1,"col","buttonsDiv"],["type","button",1,"button-lg",3,"click"]],template:function(ce,De){1&ce&&(o._UZ(0,"div",0),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.qZA()(),o.TgZ(5,"div",2)(6,"div",5),o.YNc(7,kt,1,0,"div",6),o.ALo(8,"async"),o.TgZ(9,"mat-card",7)(10,"mat-card-content")(11,"form",8),o.NdJ("ngSubmit",function(){return De.OnSubmit(De.LoginForm.value)}),o.TgZ(12,"div",9),o._UZ(13,"img",10),o.qZA(),o.TgZ(14,"div",11),o.YNc(15,ct,4,1,"mat-form-field",12),o.qZA(),o.YNc(16,ht,7,0,"div",13),o.YNc(17,qt,28,3,"div",14),o.YNc(18,ln,9,0,"div",14),o.qZA()()()()()()),2&ce&&(o.xp6(7),o.Q6J("ngIf",o.lcZ(8,6,De.loader.loading$)),o.xp6(4),o.Q6J("formGroup",De.LoginForm),o.xp6(4),o.Q6J("ngIf",De.isEmail),o.xp6(1),o.Q6J("ngIf",De.isEmail&&!De.isChecked),o.xp6(1),o.Q6J("ngIf",De.isValid&&De.isChecked),o.xp6(1),o.Q6J("ngIf",!De.isValid&&De.isChecked))},dependencies:[yt.KE,yt.hX,yt.TO,pt.gD,jt.ey,en.Nt,Ct.sg,Ct.O5,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,nn.lW,sn.a8,sn.dn,Ct.Ov],styles:[".logo[_ngcontent-%COMP%]{display:block;margin:20px auto;display:flex;width:200px;height:81.107px;padding:1.667px 4.094px 1.659px 4.095px;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{float:none!important}.mat-mdc-card[_ngcontent-%COMP%]{min-width:518px;max-width:200px;margin-left:15%}.buttonsDiv[_ngcontent-%COMP%]{display:grid}.left-title[_ngcontent-%COMP%]{margin-top:40%}"]})}return It})();var ti=F(2869);function _n(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"div",5)(1,"div",14)(2,"a",15),o.NdJ("click",function(){o.CHM(je);const De=o.oxw();return De.telefone=!De.telefone,o.KtG(De.change())}),o._uU(3,"Risprinta password con numero di telefono"),o.qZA()()()}}function _i(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Email is required"),o.qZA())}function ii(It,li){if(1&It&&(o.TgZ(0,"div",5)(1,"div",16)(2,"mat-form-field",17),o._UZ(3,"input",18),o.TgZ(4,"div"),o.YNc(5,_i,2,0,"mat-error",19),o.qZA()()()()),2&It){const je=o.oxw();let ce;o.xp6(5),o.Q6J("ngIf",null==(ce=je.resetPasswordForm.get("email"))?null:ce.hasError("required"))}}function vi(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"div",5)(1,"div",20)(2,"a",15),o.NdJ("click",function(){o.CHM(je);const De=o.oxw();return De.telefone=!De.telefone,o.KtG(De.change())}),o._uU(3,"Ripristina password con email"),o.qZA()()()}}function Ii(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Telefono is required"),o.qZA())}function Yt(It,li){if(1&It&&(o.TgZ(0,"div",5)(1,"div",16)(2,"mat-form-field",17),o._UZ(3,"input",21),o.TgZ(4,"div"),o.YNc(5,Ii,2,0,"mat-error",19),o.qZA()()()()),2&It){const je=o.oxw();let ce;o.xp6(5),o.Q6J("ngIf",null==(ce=je.resetPasswordForm.get("telefono"))?null:ce.hasError("required"))}}let Zt=(()=>{class It{constructor(je){this.fb=je,this.telefone=!1}ngOnInit(){this.resetPasswordForm=this.fb.group({email:["",j.kI.required],telefono:[""]})}change(){this.telefone?this.resetPasswordForm.get("telefono")?.setValidators([j.kI.required]):this.resetPasswordForm.get("telefono")?.removeValidators([j.kI.required])}submit(){this.resetPasswordForm.invalid||alert("sdfnms")}static#e=this.\u0275fac=function(ce){return new(ce||It)(o.Y36(j.qu))};static#t=this.\u0275cmp=o.Xpm({type:It,selectors:[["app-reset-password"]],decls:27,vars:5,consts:[[1,"background1"],[1,"box"],[1,"column1"],[1,"w-500","column2"],[3,"formGroup"],[1,"row"],[1,"logo"],["src","/assets/Images/logo.png"],[1,"txt-md"],[1,"para"],["class","row",4,"ngIf"],[1,"col","center"],["mat-raised-button","","type","button",1,"back-button"],["mat-raised-button","",1,"save-button",3,"click"],[1,"col","font14","center"],["href","javascript:void(0)",1,"green-link",3,"click"],[1,"col"],[1,"full-length"],["matInput","","placeholder","Email","formControlName","email",1,""],[4,"ngIf"],[1,"col","font14","right"],["matInput","","placeholder","Telefono","formControlName","telefono",1,""]],template:function(ce,De){1&ce&&(o._UZ(0,"div",0),o.TgZ(1,"div",1)(2,"div",2)(3,"h3"),o._uU(4,"Benvenuti in Area Riservata!"),o.qZA(),o.TgZ(5,"h6"),o._uU(6," La piattaforma sviluppata per lavoratori e aziende del settore Logistica, Trasporto merci e Spedizione. "),o.qZA()(),o.TgZ(7,"div",3)(8,"form",4)(9,"div",5)(10,"div",6),o._UZ(11,"img",7),o.qZA()(),o.TgZ(12,"div",5)(13,"div",8),o._uU(14,"Risprinta Password"),o.qZA(),o.TgZ(15,"p",9),o._uU(16,' Inserire l\'indirizzo email registrato e premere il tasto "Prosegui". '),o.qZA()(),o.YNc(17,_n,4,0,"div",10),o.YNc(18,ii,6,1,"div",10),o.YNc(19,vi,4,0,"div",10),o.YNc(20,Yt,6,1,"div",10),o.TgZ(21,"div",5)(22,"div",11)(23,"button",12),o._uU(24," Indietro "),o.qZA(),o.TgZ(25,"button",13),o.NdJ("click",function(){return De.submit()}),o._uU(26," ->Invia "),o.qZA()()()()()()),2&ce&&(o.xp6(8),o.Q6J("formGroup",De.resetPasswordForm),o.xp6(9),o.Q6J("ngIf",!De.telefone),o.xp6(1),o.Q6J("ngIf",!De.telefone),o.xp6(1),o.Q6J("ngIf",De.telefone),o.xp6(1),o.Q6J("ngIf",De.telefone))},dependencies:[yt.KE,yt.TO,en.Nt,Ct.O5,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,nn.lW]})}return It})();function ze(It,li){1&It&&o._UZ(0,"div",9)}function Ge(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"app-company-registration",10),o.NdJ("formSubmit",function(De){o.CHM(je);const $e=o.oxw();return o.KtG($e.onFormSubmit(De))}),o.qZA()}}function Nt(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Email is required"),o.qZA())}function We(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Password is required"),o.qZA())}function Ot(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Password is required"),o.qZA())}function Re(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"form",13),o.NdJ("ngSubmit",function(){o.CHM(je);const De=o.oxw(2);return o.KtG(De.OnSubmit(De.userForm.value))}),o.TgZ(1,"div",14),o._UZ(2,"img",15),o.qZA(),o.TgZ(3,"div",16),o._uU(4),o.qZA(),o.TgZ(5,"div",17)(6,"mat-form-field",18)(7,"mat-label"),o._uU(8,"Email"),o.qZA(),o.TgZ(9,"input",19),o.NdJ("change",function(De){o.CHM(je);const $e=o.oxw(2);return o.KtG($e.ChkEmailExist(De))}),o.qZA(),o.TgZ(10,"div"),o.YNc(11,Nt,2,0,"mat-error",20),o.qZA()()(),o.TgZ(12,"div",17)(13,"mat-form-field")(14,"mat-label"),o._uU(15,"Password"),o.qZA(),o._UZ(16,"input",21),o.TgZ(17,"div"),o.YNc(18,We,2,0,"mat-error",20),o.qZA()()(),o.TgZ(19,"div",17)(20,"mat-form-field")(21,"mat-label"),o._uU(22,"Confirm Password"),o.qZA(),o._UZ(23,"input",22),o.TgZ(24,"div"),o.YNc(25,Ot,2,0,"mat-error",20),o.qZA()()(),o.TgZ(26,"div",17)(27,"div",23)(28,"button",24),o.NdJ("click",function(){o.CHM(je);const De=o.oxw(2);return o.KtG(De.back())}),o._uU(29," Back "),o.qZA(),o.TgZ(30,"button",25),o._uU(31," Next "),o.qZA()()()()}if(2&It){const je=o.oxw(2);let ce,De,$e;o.Q6J("formGroup",je.userForm),o.xp6(4),o.hij("Register ",je.type,""),o.xp6(7),o.Q6J("ngIf",(null==(ce=je.userForm.get("Email"))?null:ce.hasError("required"))&&(null==(ce=je.WorkerForm.get("Email"))?null:ce.touched)),o.xp6(7),o.Q6J("ngIf",(null==(De=je.userForm.get("Password"))?null:De.hasError("required"))&&(null==(De=je.WorkerForm.get("Password"))?null:De.touched)),o.xp6(7),o.Q6J("ngIf",(null==($e=je.userForm.get("ConfirmPassword"))?null:$e.hasError("required"))&&(null==($e=je.WorkerForm.get("ConfirmPassword"))?null:$e.touched))}}function ft(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Email is required"),o.qZA())}function cn(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"CF is required"),o.qZA())}function kn(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1," Invalid CF input format. Please follow the pattern: Two uppercase letters, two digits, a single uppercase letter, two digits, a single uppercase letter, three digits, and a single uppercase letter. "),o.qZA())}function an(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Password is required"),o.qZA())}function Mn(It,li){1&It&&(o.TgZ(0,"mat-error"),o._uU(1,"Password is required"),o.qZA())}function Gt(It,li){if(1&It&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&It){const je=o.oxw(3);o.xp6(1),o.Oqu(je.error)}}function On(It,li){if(1&It){const je=o.EpF();o.TgZ(0,"form",13),o.NdJ("ngSubmit",function(){o.CHM(je);const De=o.oxw(2);return o.KtG(De.OnSubmit(De.userForm.value))}),o.TgZ(1,"div",14),o._UZ(2,"img",15),o.qZA(),o.TgZ(3,"div",16),o._uU(4),o.qZA(),o.TgZ(5,"div",17)(6,"mat-form-field",18)(7,"input",19),o.NdJ("change",function(De){o.CHM(je);const $e=o.oxw(2);return o.KtG($e.ChkEmailExist(De))}),o.qZA(),o.TgZ(8,"div"),o.YNc(9,ft,2,0,"mat-error",20),o.qZA()()(),o.TgZ(10,"div",17)(11,"div"),o._uU(12,"Inserire Codice Fiscale:"),o.qZA(),o.TgZ(13,"mat-form-field",18)(14,"input",26),o.NdJ("change",function(De){o.CHM(je);const $e=o.oxw(2);return o.KtG($e.isCFexist(De))}),o.qZA(),o.TgZ(15,"div"),o.YNc(16,cn,2,0,"mat-error",20),o.qZA(),o.TgZ(17,"div"),o.YNc(18,kn,2,0,"mat-error",20),o.qZA()()(),o.TgZ(19,"div",17)(20,"mat-form-field"),o._UZ(21,"input",21),o.TgZ(22,"div"),o.YNc(23,an,2,0,"mat-error",20),o.qZA()()(),o.TgZ(24,"div",17)(25,"mat-form-field"),o._UZ(26,"input",22),o.TgZ(27,"div"),o.YNc(28,Mn,2,0,"mat-error",20),o.qZA()()(),o.TgZ(29,"div",17),o.YNc(30,Gt,2,1,"div",27),o.TgZ(31,"div",23)(32,"button",28),o.NdJ("click",function(){o.CHM(je);const De=o.oxw(2);return o.KtG(De.back())}),o._uU(33," Back "),o.qZA(),o.TgZ(34,"button",29),o._uU(35," Next "),o.qZA()()()()}if(2&It){const je=o.oxw(2);let ce,De,$e,Ft;o.Q6J("formGroup",je.WorkerForm),o.xp6(4),o.hij("Register ",je.type,""),o.xp6(5),o.Q6J("ngIf",(null==(ce=je.WorkerForm.get("Email"))?null:ce.hasError("required"))&&(null==(ce=je.WorkerForm.get("Email"))?null:ce.touched)),o.xp6(7),o.Q6J("ngIf",(null==(De=je.WorkerForm.get("CF"))?null:De.hasError("required"))&&(null==(De=je.WorkerForm.get("CF"))?null:De.touched)),o.xp6(2),o.Q6J("ngIf",je.WorkerForm.get("CF").hasError("pattern")&&je.WorkerForm.get("CF").touched),o.xp6(5),o.Q6J("ngIf",(null==($e=je.WorkerForm.get("Password"))?null:$e.hasError("required"))&&(null==($e=je.WorkerForm.get("Password"))?null:$e.touched)),o.xp6(5),o.Q6J("ngIf",(null==(Ft=je.WorkerForm.get("ConfirmPassword"))?null:Ft.hasError("required"))&&(null==(Ft=je.WorkerForm.get("ConfirmPassword"))?null:Ft.touched)),o.xp6(2),o.Q6J("ngIf",je.hasError),o.xp6(4),o.Q6J("disabled",je.hasError)}}function xt(It,li){if(1&It&&(o.TgZ(0,"mat-card",11)(1,"mat-card-content"),o.YNc(2,Re,32,5,"form",12),o.YNc(3,On,36,9,"form",12),o.qZA()()),2&It){const je=o.oxw();o.xp6(2),o.Q6J("ngIf",je.type!=je.Lavoratore),o.xp6(1),o.Q6J("ngIf",je.type==je.Lavoratore)}}const Wn=[{path:"",component:Dn},{path:"login",component:Dn},{path:"worker-registration/:id",component:(()=>{class It{constructor(je,ce,De,$e,Ft,Qe,Te,xe){this.router=je,this.loginService=ce,this.registerService=De,this.formbulider=$e,this.toastr=Ft,this.loaderService=Qe,this.route=Te,this.alert=xe,this.toCompany=!1,this.userSubmitted=!1,this.useInfo=null,this.Lavoratore="Lavoratore",this.UserRules=[{id:"1",type:"Lavoratore"},{id:"2",type:"Azienda"},{id:"4",type:"Consulente"}],this.companyData=null}ngOnInit(){this.route.params.subscribe(je=>{this.type=je.id}),this.loader=this.loaderService,this.userForm=this.formbulider.group({Email:["Arvi.dhaliwal@gmail.com",j.kI.compose([j.kI.required,j.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])],Password:["Rocky@2014",[j.kI.required,j.kI.minLength(8)]],ConfirmPassword:["Rocky@2014",[j.kI.required,j.kI.minLength(8)]],recaptcha:[""]}),this.WorkerForm=this.formbulider.group({Email:["Arvi.dhaliwal@gmail.com",j.kI.compose([j.kI.required,j.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])],Password:["Rocky@2014",[j.kI.required,j.kI.minLength(8)]],ConfirmPassword:["Rocky@2014",[j.kI.required,j.kI.minLength(8)]],recaptcha:[""],CF:["AB12A12A123B",[j.kI.required,j.kI.pattern(/^[A-Z]{6}\d{2}[A-Z]\d{2}[A-Z]\d{3}[A-Z]$/)]]})}back(){this.router.navigateByUrl("/auth/login")}OnSubmit(je){this.type==this.Lavoratore?(je=this.WorkerForm.value,this.useInfo={UserType:this.UserRules.filter(De=>De.type==this.type)[0].id,Email:je.Email,phone:"",Password:je.Password,ConfirmPassword:je.ConfirmPassword,CF:je.CF,IsMobile:!1,IsDesktop:!0},this.registerService.register(this.useInfo).subscribe(De=>{})):(this.userSubmitted=!0,this.data=this.userForm.value)}ChkEmailExist(je){this.loaderService.showLoader(),this.registerService.ChkEmailExist(je.target.value,"").subscribe(ce=>{"Success"===ce.Result&&(this.hasError=!0,this.error=" Email gi\xe0 registrata"),this.loaderService.hideLoader()},ce=>{})}isCFexist(je){this.registerService.isCFexist(je.target.value).subscribe(ce=>{"Success"==ce.Message?this.toastr.info(ce.Result):(this.toastr.error(ce.Message),this.hasError=!0,this.error=ce.Message)})}onFormSubmit(je){if(this.type!=this.Lavoratore){var ce=this.WorkerForm.value;this.useInfo={UserType:this.UserRules.filter(De=>De.type==this.type)[0].id,Email:ce.Email,phone:"",Password:ce.Password,ConfirmPassword:ce.ConfirmPassword,CF:ce.CF,IsMobile:!1,IsDesktop:!0},this.registerService.register(this.useInfo).subscribe(De=>{"Success"==De.Message&&(this.companyData=je,this.registerService.companyRegisteration(this.companyData).subscribe($e=>{"Success"==$e.Message?this.router.navigateByUrl("/auth/login"):this.alert.showError($e.Message)}))})}else this.userSubmitted=!0,this.data=this.userForm.value;console.log(je)}static#e=this.\u0275fac=function(ce){return new(ce||It)(o.Y36(p.F0),o.Y36(st),o.Y36(_t.a),o.Y36(j.QS),o.Y36(ke._W),o.Y36(lt),o.Y36(p.gz),o.Y36(wt.c))};static#t=this.\u0275cmp=o.Xpm({type:It,selectors:[["app-worker-registration"]],decls:11,vars:5,consts:[[1,"background1"],[1,"row","width-99"],[1,"col-6"],[1,"left-title","center"],["alt","","src","assets/Images/title.png"],[1,"container","login"],["class","loading-container",4,"ngIf"],[3,"formSubmit",4,"ngIf"],["class","card-login",4,"ngIf"],[1,"loading-container"],[3,"formSubmit"],[1,"card-login"],["id","user-form",3,"formGroup","ngSubmit",4,"ngIf"],["id","user-form",3,"formGroup","ngSubmit"],[1,"row","center"],["alt","","src","assets/Images/logo.png",1,"logo"],[1,"title"],[1,"row"],[1,""],["matInput","","placeholder","Email","formControlName","Email",1,"input-md",3,"change"],[4,"ngIf"],["matInput","","type","Password","placeholder","Password","formControlName","Password",1,"input-md"],["matInput","","type","Password","placeholder","Confirm Password","formControlName","ConfirmPassword",1,"input-md"],[1,"col","right"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-raised-button","","color","primary","type","submit"],["matInput","","placeholder","CF","formControlName","CF",1,"input-md",3,"change"],["class","errorDiv",4,"ngIf"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"errorDiv"]],template:function(ce,De){1&ce&&(o._UZ(0,"div",0),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.qZA()(),o.TgZ(5,"div",2)(6,"div",5),o.YNc(7,ze,1,0,"div",6),o.ALo(8,"async"),o.YNc(9,Ge,1,0,"app-company-registration",7),o.YNc(10,xt,4,2,"mat-card",8),o.qZA()()()),2&ce&&(o.xp6(7),o.Q6J("ngIf",o.lcZ(8,3,De.loader.loading$)),o.xp6(2),o.Q6J("ngIf",De.userSubmitted),o.xp6(1),o.Q6J("ngIf",!De.userSubmitted))},dependencies:[yt.KE,yt.hX,yt.TO,en.Nt,Ct.O5,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,nn.lW,sn.a8,sn.dn,ti.Q,Ct.Ov],styles:[".logo[_ngcontent-%COMP%]{display:block;margin:20px auto;display:flex;width:200px;height:81.107px;padding:1.667px 4.094px 1.659px 4.095px;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{float:none!important}.mat-mdc-card[_ngcontent-%COMP%]{min-width:518px;max-width:200px;margin-left:15%}.title[_ngcontent-%COMP%]{margin:13px;text-align:CENTER}.errorDiv[_ngcontent-%COMP%]{text-wrap:balance;max-width:246px;color:red}.mat-typography[_ngcontent-%COMP%]{background-image:url(/assets/Images/background.jpg);min-height:400px;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;object-fit:cover}.left-title[_ngcontent-%COMP%]{margin-top:40%}"]})}return It})()},{path:"comp-reg",component:ti.Q},{path:"reset-password",component:Zt}];let Fn=(()=>{class It{static#e=this.\u0275fac=function(ce){return new(ce||It)};static#t=this.\u0275mod=o.oAB({type:It});static#n=this.\u0275inj=o.cJS({imports:[p.Bz.forChild(Wn),p.Bz]})}return It})()},9664:(ni,Wt,F)=>{"use strict";F.d(Wt,{a:()=>P});var p=F(529),j=F(9646),Q=F(2340),o=F(4650);let P=(()=>{class st{constructor(ke){this.http=ke,this.rootUrl=Q.N.baseUrl,this.reqHeader=new p.WM({"Content-Type":"application/json","No-Auth":"True"})}PostRegister(ke){return this.http.post(this.rootUrl+"/Register/Register",ke,{headers:this.reqHeader})}ChkEmailExist(ke,Ye){return this.http.get(this.rootUrl+"/Register/ChkEmail?email="+ke+"&cf="+Ye||"",{headers:this.reqHeader})}ChkMobileExist(ke,Ye=""){return this.http.get(this.rootUrl+"/Register/ChkMobile?phone="+ke+"&cf="+Ye,{headers:this.reqHeader})}ConfirmRegisteration(ke,Ye,lt){return this.http.get(this.rootUrl+"/Register/ConfirmRegisteration?id="+ke+"&tel="+Ye+"&pass="+lt,{headers:this.reqHeader})}companyRegisteration(ke){return this.http.post(this.rootUrl+"/Company/AddCompany",ke)}register(ke){return this.http.post(this.rootUrl+"/Authenticate/register",ke)}isCFexist(ke){return this.http.get(this.rootUrl+"/Worker/isCFexist_new?cf="+ke,{headers:this.reqHeader})}getProvinces(ke){return this.http.get(this.rootUrl+"/Register/GetProvince?value="+ke,{headers:this.reqHeader})}getCities(ke){return(0,j.of)([{name:"City A",value:"1"},{name:"City B",value:"2"},{name:"City C",value:"3"}])}static#e=this.\u0275fac=function(Ye){return new(Ye||st)(o.LFG(p.eN))};static#t=this.\u0275prov=o.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"})}return st})()},7023:(ni,Wt,F)=>{"use strict";F.d(Wt,{c:()=>o});var p=F(5226),j=F.n(p),Q=F(4650);let o=(()=>{class P{constructor(){}fire(_t,ke,Ye){j().fire({icon:_t,title:ke+"",text:""+Ye})}showError(_t){j().fire("Error",_t,"error")}static#e=this.\u0275fac=function(ke){return new(ke||P)};static#t=this.\u0275prov=Q.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})()},2340:(ni,Wt,F)=>{"use strict";F.d(Wt,{N:()=>p});const p={production:!1,baseUrl:"http://15.161.201.54/PTT_API/api",mobile_app_url:"http://15.161.168.236/mobile/",accessToken:"pk.eyJ1IjoiaW50ZWxlbmVyIiwiYSI6ImNscDd5dDR0bzJjbW0yaXFrNnhocnpvYW0ifQ.FqYa6eVK6TuPvwghOk_1Lg"}},9254:(ni,Wt,F)=>{"use strict";var p=F(1481),j=F(529),Q=F(9299),o=F(4650),P=F(7392);let st=(()=>{class V{static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275cmp=o.Xpm({type:V,selectors:[["app-top-nav"]],decls:23,vars:0,consts:[[1,"navbar-breadcrumb","col-xl-12","col-12"],[1,"navbar-menu-wrapper","row"],[1,"navbar-nav","col-md-6"],["aria-hidden","false"],[1,"col-md-6"],[1,"navbar-menu","pull-right"],[1,"ml-10"]],template:function($,be){1&$&&(o.TgZ(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"mat-icon",3),o._uU(5,"menu"),o.qZA(),o._uU(6," Pannello di Controllo del Supervisore "),o.qZA()(),o.TgZ(7,"div",4)(8,"ul",5)(9,"li")(10,"mat-icon",3),o._uU(11,"account_circle"),o.qZA(),o.TgZ(12,"span",6),o._uU(13,"beta@user.com"),o.qZA()(),o.TgZ(14,"li")(15,"mat-icon",3),o._uU(16,"search"),o.qZA()(),o.TgZ(17,"li")(18,"mat-icon",3),o._uU(19,"notifications_active"),o.qZA()(),o.TgZ(20,"li")(21,"mat-icon",3),o._uU(22,"exit_to_app"),o.qZA()()()()()())},dependencies:[P.Hw]})}return V})(),_t=(()=>{class V{static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275cmp=o.Xpm({type:V,selectors:[["app-dashboard-layout"]],decls:3,vars:0,consts:[[1,"container-scroller"]],template:function($,be){1&$&&(o.TgZ(0,"div",0),o._UZ(1,"app-top-nav")(2,"router-outlet"),o.qZA())},dependencies:[Q.lC,st]})}return V})();const lt=[{path:"",component:(()=>{class V{static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275cmp=o.Xpm({type:V,selectors:[["app-auth-layout"]],decls:1,vars:0,template:function($,be){1&$&&o._UZ(0,"router-outlet")},dependencies:[Q.lC]})}return V})(),children:[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",redirectTo:"/login",pathMatch:"full"},{path:"registrazione",component:F(2869).Q,pathMatch:"full"},{path:"auth",loadChildren:()=>Promise.resolve().then(F.bind(F,1674)).then(V=>V.AuthModule)}]},{path:"",component:_t,children:[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"pannello/supervisore",loadChildren:()=>Promise.all([F.e(6),F.e(308)]).then(F.bind(F,7308)).then(V=>V.dashboardModule)}]},{path:"",component:_t,children:[{path:"company",loadChildren:()=>Promise.all([F.e(6),F.e(45)]).then(F.bind(F,8045)).then(V=>V.CompanyPortalModule)}]}];let wt=(()=>{class V{static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275mod=o.oAB({type:V});static#n=this.\u0275inj=o.cJS({imports:[Q.Bz.forRoot(lt),Q.Bz]})}return V})();var it=F(5226),yt=F.n(it);let pt=(()=>{class V{constructor(){this.title="PTT2024"}click(){yt().fire("Good job!","You clicked the button!","success")}static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275cmp=o.Xpm({type:V,selectors:[["app-root"]],decls:1,vars:0,template:function($,be){1&$&&o._UZ(0,"router-outlet")},dependencies:[Q.lC]})}return V})();var jt=F(1674),en=F(2409),Ct=F(7340);function sn(V){return new o.vHH(3e3,!1)}function li(){return typeof window<"u"&&typeof window.document<"u"}function je(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ce(V){switch(V.length){case 0:return new Ct.ZN;case 1:return V[0];default:return new Ct.ZE(V)}}function De(V,C,M,$,be=new Map,Ve=new Map){const Mt=[],Tt=[];let on=-1,pn=null;if($.forEach(si=>{const di=si.get("offset"),Ri=di==on,Vi=Ri&&pn||new Map;si.forEach((Ei,In)=>{let Ui=In,sr=Ei;if("offset"!==In)switch(Ui=C.normalizePropertyName(Ui,Mt),sr){case Ct.k1:sr=be.get(In);break;case Ct.l3:sr=Ve.get(In);break;default:sr=C.normalizeStyleValue(In,Ui,sr,Mt)}Vi.set(Ui,sr)}),Ri||Tt.push(Vi),pn=Vi,on=di}),Mt.length)throw function Re(V){return new o.vHH(3502,!1)}();return Tt}function $e(V,C,M,$){switch(C){case"start":V.onStart(()=>$(M&&Ft(M,"start",V)));break;case"done":V.onDone(()=>$(M&&Ft(M,"done",V)));break;case"destroy":V.onDestroy(()=>$(M&&Ft(M,"destroy",V)))}}function Ft(V,C,M){const Ve=Qe(V.element,V.triggerName,V.fromState,V.toState,C||V.phaseName,M.totalTime??V.totalTime,!!M.disabled),Mt=V._data;return null!=Mt&&(Ve._data=Mt),Ve}function Qe(V,C,M,$,be="",Ve=0,Mt){return{element:V,triggerName:C,fromState:M,toState:$,phaseName:be,totalTime:Ve,disabled:!!Mt}}function Te(V,C,M){let $=V.get(C);return $||V.set(C,$=M),$}function xe(V){const C=V.indexOf(":");return[V.substring(1,C),V.slice(C+1)]}let ve=(V,C)=>!1,re=(V,C,M)=>[],Me=null;function Pe(V){const C=V.parentNode||V.host;return C===Me?null:C}(je()||typeof Element<"u")&&(li()?(Me=(()=>document.documentElement)(),ve=(V,C)=>{for(;C;){if(C===V)return!0;C=Pe(C)}return!1}):ve=(V,C)=>V.contains(C),re=(V,C,M)=>{if(M)return Array.from(V.querySelectorAll(C));const $=V.querySelector(C);return $?[$]:[]});let En=null,Ue=!1;const bt=ve,Pt=re;let ee=(()=>{class V{validateStyleProperty(M){return function ue(V){En||(En=function Ke(){return typeof document<"u"?document.body:null}()||{},Ue=!!En.style&&"WebkitAppearance"in En.style);let C=!0;return En.style&&!function Bn(V){return"ebkit"==V.substring(1,6)}(V)&&(C=V in En.style,!C&&Ue&&(C="Webkit"+V.charAt(0).toUpperCase()+V.slice(1)in En.style)),C}(M)}matchesElement(M,$){return!1}containsElement(M,$){return bt(M,$)}getParentElement(M){return Pe(M)}query(M,$,be){return Pt(M,$,be)}computeStyle(M,$,be){return be||""}animate(M,$,be,Ve,Mt,Tt=[],on){return new Ct.ZN(be,Ve)}}return V.\u0275fac=function(M){return new(M||V)},V.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac}),V})(),U=(()=>{class V{}return V.NOOP=new ee,V})();const we=1e3,Kt="ng-enter",Yn="ng-leave",Hn="ng-trigger",ri=".ng-trigger",zn="ng-animating",Rt=".ng-animating";function Ee(V){if("number"==typeof V)return V;const C=V.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:se(parseFloat(C[1]),C[2])}function se(V,C){return"s"===C?V*we:V}function le(V,C,M){return V.hasOwnProperty("duration")?V:function Fe(V,C,M){let be,Ve=0,Mt="";if("string"==typeof V){const Tt=V.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Tt)return C.push(sn()),{duration:0,delay:0,easing:""};be=se(parseFloat(Tt[1]),Tt[2]);const on=Tt[3];null!=on&&(Ve=se(parseFloat(on),Tt[4]));const pn=Tt[5];pn&&(Mt=pn)}else be=V;if(!M){let Tt=!1,on=C.length;be<0&&(C.push(function Cn(){return new o.vHH(3100,!1)}()),Tt=!0),Ve<0&&(C.push(function kt(){return new o.vHH(3101,!1)}()),Tt=!0),Tt&&C.splice(on,0,sn())}return{duration:be,delay:Ve,easing:Mt}}(V,C,M)}function Et(V,C={}){return Object.keys(V).forEach(M=>{C[M]=V[M]}),C}function rn(V){const C=new Map;return Object.keys(V).forEach(M=>{C.set(M,V[M])}),C}function yr(V,C=new Map,M){if(M)for(let[$,be]of M)C.set($,be);for(let[$,be]of V)C.set($,be);return C}function Rr(V,C,M){return M?C+":"+M+";":""}function Wi(V){let C="";for(let M=0;M<V.style.length;M++){const $=V.style.item(M);C+=Rr(0,$,V.style.getPropertyValue($))}for(const M in V.style)V.style.hasOwnProperty(M)&&!M.startsWith("_")&&(C+=Rr(0,wo(M),V.style[M]));V.setAttribute("style",C)}function oo(V,C,M){V.style&&(C.forEach(($,be)=>{const Ve=Ho(be);M&&!M.has(be)&&M.set(be,V.style[Ve]),V.style[Ve]=$}),je()&&Wi(V))}function vr(V,C){V.style&&(C.forEach((M,$)=>{const be=Ho($);V.style[be]=""}),je()&&Wi(V))}function so(V){return Array.isArray(V)?1==V.length?V[0]:(0,Ct.vP)(V):V}const $i=new RegExp("{{\\s*(.+?)\\s*}}","g");function gr(V){let C=[];if("string"==typeof V){let M;for(;M=$i.exec(V);)C.push(M[1]);$i.lastIndex=0}return C}function br(V,C,M){const $=V.toString(),be=$.replace($i,(Ve,Mt)=>{let Tt=C[Mt];return null==Tt&&(M.push(function ct(V){return new o.vHH(3003,!1)}()),Tt=""),Tt.toString()});return be==$?V:be}function Tr(V){const C=[];let M=V.next();for(;!M.done;)C.push(M.value),M=V.next();return C}const Hr=/-+([a-z0-9])/g;function Ho(V){return V.replace(Hr,(...C)=>C[1].toUpperCase())}function wo(V){return V.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function vt(V,C,M){switch(C.type){case 7:return V.visitTrigger(C,M);case 0:return V.visitState(C,M);case 1:return V.visitTransition(C,M);case 2:return V.visitSequence(C,M);case 3:return V.visitGroup(C,M);case 4:return V.visitAnimate(C,M);case 5:return V.visitKeyframes(C,M);case 6:return V.visitStyle(C,M);case 8:return V.visitReference(C,M);case 9:return V.visitAnimateChild(C,M);case 10:return V.visitAnimateRef(C,M);case 11:return V.visitQuery(C,M);case 12:return V.visitStagger(C,M);default:throw function ht(V){return new o.vHH(3004,!1)}()}}function I(V,C){return window.getComputedStyle(V)[C]}const wi="*";function yi(V,C){const M=[];return"string"==typeof V?V.split(/\s*,\s*/).forEach($=>function xr(V,C,M){if(":"==V[0]){const on=function Ni(V,C){switch(V){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,$)=>parseFloat($)>parseFloat(M);case":decrement":return(M,$)=>parseFloat($)<parseFloat(M);default:return C.push(function Ge(V){return new o.vHH(3016,!1)}()),"* => *"}}(V,M);if("function"==typeof on)return void C.push(on);V=on}const $=V.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==$||$.length<4)return M.push(function ze(V){return new o.vHH(3015,!1)}()),C;const be=$[1],Ve=$[2],Mt=$[3];C.push(_r(be,Mt));"<"==Ve[0]&&!(be==wi&&Mt==wi)&&C.push(_r(Mt,be))}($,M,C)):M.push(V),M}const Qr=new Set(["true","1"]),Ao=new Set(["false","0"]);function _r(V,C){const M=Qr.has(V)||Ao.has(V),$=Qr.has(C)||Ao.has(C);return(be,Ve)=>{let Mt=V==wi||V==be,Tt=C==wi||C==Ve;return!Mt&&M&&"boolean"==typeof be&&(Mt=be?Qr.has(V):Ao.has(V)),!Tt&&$&&"boolean"==typeof Ve&&(Tt=Ve?Qr.has(C):Ao.has(C)),Mt&&Tt}}const rr=new RegExp("s*:selfs*,?","g");function cr(V,C,M,$){return new Es(V).build(C,M,$)}class Es{constructor(C){this._driver=C}build(C,M,$){const be=new ma(M);return this._resetContextStyleTimingState(be),vt(this,so(C),be)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,M){let $=M.queryCount=0,be=M.depCount=0;const Ve=[],Mt=[];return"@"==C.name.charAt(0)&&M.errors.push(function Je(){return new o.vHH(3006,!1)}()),C.definitions.forEach(Tt=>{if(this._resetContextStyleTimingState(M),0==Tt.type){const on=Tt,pn=on.name;pn.toString().split(/\s*,\s*/).forEach(si=>{on.name=si,Ve.push(this.visitState(on,M))}),on.name=pn}else if(1==Tt.type){const on=this.visitTransition(Tt,M);$+=on.queryCount,be+=on.depCount,Mt.push(on)}else M.errors.push(function qt(){return new o.vHH(3007,!1)}())}),{type:7,name:C.name,states:Ve,transitions:Mt,queryCount:$,depCount:be,options:null}}visitState(C,M){const $=this.visitStyle(C.styles,M),be=C.options&&C.options.params||null;if($.containsDynamicStyles){const Ve=new Set,Mt=be||{};$.styles.forEach(Tt=>{Tt instanceof Map&&Tt.forEach(on=>{gr(on).forEach(pn=>{Mt.hasOwnProperty(pn)||Ve.add(pn)})})}),Ve.size&&(Tr(Ve.values()),M.errors.push(function ln(V,C){return new o.vHH(3008,!1)}()))}return{type:0,name:C.name,style:$,options:be?{params:be}:null}}visitTransition(C,M){M.queryCount=0,M.depCount=0;const $=vt(this,so(C.animation),M);return{type:1,matchers:yi(C.expr,M.errors),animation:$,queryCount:M.queryCount,depCount:M.depCount,options:So(C.options)}}visitSequence(C,M){return{type:2,steps:C.steps.map($=>vt(this,$,M)),options:So(C.options)}}visitGroup(C,M){const $=M.currentTime;let be=0;const Ve=C.steps.map(Mt=>{M.currentTime=$;const Tt=vt(this,Mt,M);return be=Math.max(be,M.currentTime),Tt});return M.currentTime=be,{type:3,steps:Ve,options:So(C.options)}}visitAnimate(C,M){const $=function $s(V,C){if(V.hasOwnProperty("duration"))return V;if("number"==typeof V)return ko(le(V,C).duration,0,"");const M=V;if(M.split(/\s+/).some(Ve=>"{"==Ve.charAt(0)&&"{"==Ve.charAt(1))){const Ve=ko(0,0,"");return Ve.dynamic=!0,Ve.strValue=M,Ve}const be=le(M,C);return ko(be.duration,be.delay,be.easing)}(C.timings,M.errors);M.currentAnimateTimings=$;let be,Ve=C.styles?C.styles:(0,Ct.oB)({});if(5==Ve.type)be=this.visitKeyframes(Ve,M);else{let Mt=C.styles,Tt=!1;if(!Mt){Tt=!0;const pn={};$.easing&&(pn.easing=$.easing),Mt=(0,Ct.oB)(pn)}M.currentTime+=$.duration+$.delay;const on=this.visitStyle(Mt,M);on.isEmptyStep=Tt,be=on}return M.currentAnimateTimings=null,{type:4,timings:$,style:be,options:null}}visitStyle(C,M){const $=this._makeStyleAst(C,M);return this._validateStyleAst($,M),$}_makeStyleAst(C,M){const $=[],be=Array.isArray(C.styles)?C.styles:[C.styles];for(let Tt of be)"string"==typeof Tt?Tt===Ct.l3?$.push(Tt):M.errors.push(new o.vHH(3002,!1)):$.push(rn(Tt));let Ve=!1,Mt=null;return $.forEach(Tt=>{if(Tt instanceof Map&&(Tt.has("easing")&&(Mt=Tt.get("easing"),Tt.delete("easing")),!Ve))for(let on of Tt.values())if(on.toString().indexOf("{{")>=0){Ve=!0;break}}),{type:6,styles:$,easing:Mt,offset:C.offset,containsDynamicStyles:Ve,options:null}}_validateStyleAst(C,M){const $=M.currentAnimateTimings;let be=M.currentTime,Ve=M.currentTime;$&&Ve>0&&(Ve-=$.duration+$.delay),C.styles.forEach(Mt=>{"string"!=typeof Mt&&Mt.forEach((Tt,on)=>{const pn=M.collectedStyles.get(M.currentQuerySelector),si=pn.get(on);let di=!0;si&&(Ve!=be&&Ve>=si.startTime&&be<=si.endTime&&(M.errors.push(function _n(V,C,M,$,be){return new o.vHH(3010,!1)}()),di=!1),Ve=si.startTime),di&&pn.set(on,{startTime:Ve,endTime:be}),M.options&&function To(V,C,M){const $=C.params||{},be=gr(V);be.length&&be.forEach(Ve=>{$.hasOwnProperty(Ve)||M.push(function Ae(V){return new o.vHH(3001,!1)}())})}(Tt,M.options,M.errors)})})}visitKeyframes(C,M){const $={type:5,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push(function _i(){return new o.vHH(3011,!1)}()),$;let Ve=0;const Mt=[];let Tt=!1,on=!1,pn=0;const si=C.steps.map(sr=>{const Wr=this._makeStyleAst(sr,M);let co=null!=Wr.offset?Wr.offset:function Gs(V){if("string"==typeof V)return null;let C=null;if(Array.isArray(V))V.forEach(M=>{if(M instanceof Map&&M.has("offset")){const $=M;C=parseFloat($.get("offset")),$.delete("offset")}});else if(V instanceof Map&&V.has("offset")){const M=V;C=parseFloat(M.get("offset")),M.delete("offset")}return C}(Wr.styles),mr=0;return null!=co&&(Ve++,mr=Wr.offset=co),on=on||mr<0||mr>1,Tt=Tt||mr<pn,pn=mr,Mt.push(mr),Wr});on&&M.errors.push(function ii(){return new o.vHH(3012,!1)}()),Tt&&M.errors.push(function vi(){return new o.vHH(3200,!1)}());const di=C.steps.length;let Ri=0;Ve>0&&Ve<di?M.errors.push(function Ii(){return new o.vHH(3202,!1)}()):0==Ve&&(Ri=1/(di-1));const Vi=di-1,Ei=M.currentTime,In=M.currentAnimateTimings,Ui=In.duration;return si.forEach((sr,Wr)=>{const co=Ri>0?Wr==Vi?1:Ri*Wr:Mt[Wr],mr=co*Ui;M.currentTime=Ei+In.delay+mr,In.duration=mr,this._validateStyleAst(sr,M),sr.offset=co,$.styles.push(sr)}),$}visitReference(C,M){return{type:8,animation:vt(this,so(C.animation),M),options:So(C.options)}}visitAnimateChild(C,M){return M.depCount++,{type:9,options:So(C.options)}}visitAnimateRef(C,M){return{type:10,animation:this.visitReference(C.animation,M),options:So(C.options)}}visitQuery(C,M){const $=M.currentQuerySelector,be=C.options||{};M.queryCount++,M.currentQuery=C;const[Ve,Mt]=function fr(V){const C=!!V.split(/\s*,\s*/).find(M=>":self"==M);return C&&(V=V.replace(rr,"")),V=V.replace(/@\*/g,ri).replace(/@\w+/g,M=>ri+"-"+M.slice(1)).replace(/:animating/g,Rt),[V,C]}(C.selector);M.currentQuerySelector=$.length?$+" "+Ve:Ve,Te(M.collectedStyles,M.currentQuerySelector,new Map);const Tt=vt(this,so(C.animation),M);return M.currentQuery=null,M.currentQuerySelector=$,{type:11,selector:Ve,limit:be.limit||0,optional:!!be.optional,includeSelf:Mt,animation:Tt,originalSelector:C.selector,options:So(C.options)}}visitStagger(C,M){M.currentQuery||M.errors.push(function Yt(){return new o.vHH(3013,!1)}());const $="full"===C.timings?{duration:0,delay:0,easing:"full"}:le(C.timings,M.errors,!0);return{type:12,animation:vt(this,so(C.animation),M),timings:$,options:null}}}class ma{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function So(V){return V?(V=Et(V)).params&&(V.params=function Go(V){return V?Et(V):null}(V.params)):V={},V}function ko(V,C,M){return{duration:V,delay:C,easing:M}}function dr(V,C,M,$,be,Ve,Mt=null,Tt=!1){return{type:1,element:V,keyframes:C,preStyleProps:M,postStyleProps:$,duration:be,delay:Ve,totalTime:be+Ve,easing:Mt,subTimeline:Tt}}class Fr{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,M){let $=this._map.get(C);$||this._map.set(C,$=[]),$.push(...M)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const ao=new RegExp(":enter","g"),_s=new RegExp(":leave","g");function zr(V,C,M,$,be,Ve=new Map,Mt=new Map,Tt,on,pn=[]){return(new Sr).buildKeyframes(V,C,M,$,be,Ve,Mt,Tt,on,pn)}class Sr{buildKeyframes(C,M,$,be,Ve,Mt,Tt,on,pn,si=[]){pn=pn||new Fr;const di=new ns(C,M,pn,be,Ve,si,[]);di.options=on;const Ri=on.delay?Ee(on.delay):0;di.currentTimeline.delayNextStep(Ri),di.currentTimeline.setStyles([Mt],null,di.errors,on),vt(this,$,di);const Vi=di.timelines.filter(Ei=>Ei.containsAnimation());if(Vi.length&&Tt.size){let Ei;for(let In=Vi.length-1;In>=0;In--){const Ui=Vi[In];if(Ui.element===M){Ei=Ui;break}}Ei&&!Ei.allowOnlyTimelineStyles()&&Ei.setStyles([Tt],null,di.errors,on)}return Vi.length?Vi.map(Ei=>Ei.buildKeyframes()):[dr(M,[],[],[],0,Ri,"",!1)]}visitTrigger(C,M){}visitState(C,M){}visitTransition(C,M){}visitAnimateChild(C,M){const $=M.subInstructions.get(M.element);if($){const be=M.createSubContext(C.options),Ve=M.currentTimeline.currentTime,Mt=this._visitSubInstructions($,be,be.options);Ve!=Mt&&M.transformIntoNewTimeline(Mt)}M.previousNode=C}visitAnimateRef(C,M){const $=M.createSubContext(C.options);$.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],M,$),this.visitReference(C.animation,$),M.transformIntoNewTimeline($.currentTimeline.currentTime),M.previousNode=C}_applyAnimationRefDelays(C,M,$){for(const be of C){const Ve=be?.delay;if(Ve){const Mt="number"==typeof Ve?Ve:Ee(br(Ve,be?.params??{},M.errors));$.delayNextStep(Mt)}}}_visitSubInstructions(C,M,$){let Ve=M.currentTimeline.currentTime;const Mt=null!=$.duration?Ee($.duration):null,Tt=null!=$.delay?Ee($.delay):null;return 0!==Mt&&C.forEach(on=>{const pn=M.appendInstructionToTimeline(on,Mt,Tt);Ve=Math.max(Ve,pn.duration+pn.delay)}),Ve}visitReference(C,M){M.updateOptions(C.options,!0),vt(this,C.animation,M),M.previousNode=C}visitSequence(C,M){const $=M.subContextCount;let be=M;const Ve=C.options;if(Ve&&(Ve.params||Ve.delay)&&(be=M.createSubContext(Ve),be.transformIntoNewTimeline(),null!=Ve.delay)){6==be.previousNode.type&&(be.currentTimeline.snapshotCurrentStyles(),be.previousNode=Ds);const Mt=Ee(Ve.delay);be.delayNextStep(Mt)}C.steps.length&&(C.steps.forEach(Mt=>vt(this,Mt,be)),be.currentTimeline.applyStylesToKeyframe(),be.subContextCount>$&&be.transformIntoNewTimeline()),M.previousNode=C}visitGroup(C,M){const $=[];let be=M.currentTimeline.currentTime;const Ve=C.options&&C.options.delay?Ee(C.options.delay):0;C.steps.forEach(Mt=>{const Tt=M.createSubContext(C.options);Ve&&Tt.delayNextStep(Ve),vt(this,Mt,Tt),be=Math.max(be,Tt.currentTimeline.currentTime),$.push(Tt.currentTimeline)}),$.forEach(Mt=>M.currentTimeline.mergeTimelineCollectedStyles(Mt)),M.transformIntoNewTimeline(be),M.previousNode=C}_visitTiming(C,M){if(C.dynamic){const $=C.strValue;return le(M.params?br($,M.params,M.errors):$,M.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,M){const $=M.currentAnimateTimings=this._visitTiming(C.timings,M),be=M.currentTimeline;$.delay&&(M.incrementTime($.delay),be.snapshotCurrentStyles());const Ve=C.style;5==Ve.type?this.visitKeyframes(Ve,M):(M.incrementTime($.duration),this.visitStyle(Ve,M),be.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=C}visitStyle(C,M){const $=M.currentTimeline,be=M.currentAnimateTimings;!be&&$.hasCurrentStyleProperties()&&$.forwardFrame();const Ve=be&&be.easing||C.easing;C.isEmptyStep?$.applyEmptyStep(Ve):$.setStyles(C.styles,Ve,M.errors,M.options),M.previousNode=C}visitKeyframes(C,M){const $=M.currentAnimateTimings,be=M.currentTimeline.duration,Ve=$.duration,Tt=M.createSubContext().currentTimeline;Tt.easing=$.easing,C.styles.forEach(on=>{Tt.forwardTime((on.offset||0)*Ve),Tt.setStyles(on.styles,on.easing,M.errors,M.options),Tt.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(Tt),M.transformIntoNewTimeline(be+Ve),M.previousNode=C}visitQuery(C,M){const $=M.currentTimeline.currentTime,be=C.options||{},Ve=be.delay?Ee(be.delay):0;Ve&&(6===M.previousNode.type||0==$&&M.currentTimeline.hasCurrentStyleProperties())&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Ds);let Mt=$;const Tt=M.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!be.optional,M.errors);M.currentQueryTotal=Tt.length;let on=null;Tt.forEach((pn,si)=>{M.currentQueryIndex=si;const di=M.createSubContext(C.options,pn);Ve&&di.delayNextStep(Ve),pn===M.element&&(on=di.currentTimeline),vt(this,C.animation,di),di.currentTimeline.applyStylesToKeyframe(),Mt=Math.max(Mt,di.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(Mt),on&&(M.currentTimeline.mergeTimelineCollectedStyles(on),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=C}visitStagger(C,M){const $=M.parentContext,be=M.currentTimeline,Ve=C.timings,Mt=Math.abs(Ve.duration),Tt=Mt*(M.currentQueryTotal-1);let on=Mt*M.currentQueryIndex;switch(Ve.duration<0?"reverse":Ve.easing){case"reverse":on=Tt-on;break;case"full":on=$.currentStaggerTime}const si=M.currentTimeline;on&&si.delayNextStep(on);const di=si.currentTime;vt(this,C.animation,M),M.previousNode=C,$.currentStaggerTime=be.currentTime-di+(be.startTime-$.currentTimeline.startTime)}}const Ds={};class ns{constructor(C,M,$,be,Ve,Mt,Tt,on){this._driver=C,this.element=M,this.subInstructions=$,this._enterClassName=be,this._leaveClassName=Ve,this.errors=Mt,this.timelines=Tt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ds,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=on||new $o(this._driver,M,0),Tt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,M){if(!C)return;const $=C;let be=this.options;null!=$.duration&&(be.duration=Ee($.duration)),null!=$.delay&&(be.delay=Ee($.delay));const Ve=$.params;if(Ve){let Mt=be.params;Mt||(Mt=this.options.params={}),Object.keys(Ve).forEach(Tt=>{(!M||!Mt.hasOwnProperty(Tt))&&(Mt[Tt]=br(Ve[Tt],Mt,this.errors))})}}_copyOptions(){const C={};if(this.options){const M=this.options.params;if(M){const $=C.params={};Object.keys(M).forEach(be=>{$[be]=M[be]})}}return C}createSubContext(C=null,M,$){const be=M||this.element,Ve=new ns(this._driver,be,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(be,$||0));return Ve.previousNode=this.previousNode,Ve.currentAnimateTimings=this.currentAnimateTimings,Ve.options=this._copyOptions(),Ve.updateOptions(C),Ve.currentQueryIndex=this.currentQueryIndex,Ve.currentQueryTotal=this.currentQueryTotal,Ve.parentContext=this,this.subContextCount++,Ve}transformIntoNewTimeline(C){return this.previousNode=Ds,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,M,$){const be={duration:M??C.duration,delay:this.currentTimeline.currentTime+($??0)+C.delay,easing:""},Ve=new yo(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,be,C.stretchStartingKeyframe);return this.timelines.push(Ve),be}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,M,$,be,Ve,Mt){let Tt=[];if(be&&Tt.push(this.element),C.length>0){C=(C=C.replace(ao,"."+this._enterClassName)).replace(_s,"."+this._leaveClassName);let pn=this._driver.query(this.element,C,1!=$);0!==$&&(pn=$<0?pn.slice(pn.length+$,pn.length):pn.slice(0,$)),Tt.push(...pn)}return!Ve&&0==Tt.length&&Mt.push(function Zt(V){return new o.vHH(3014,!1)}()),Tt}}class $o{constructor(C,M,$,be){this._driver=C,this.element=M,this.startTime=$,this._elementTimelineStylesLookup=be,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const M=1===this._keyframes.size&&this._pendingStyles.size;this.duration||M?(this.forwardTime(this.currentTime+C),M&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,M){return this.applyStylesToKeyframe(),new $o(this._driver,C,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,M){this._localTimelineStyles.set(C,M),this._globalTimelineStyles.set(C,M),this._styleSummary.set(C,{time:this.currentTime,value:M})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[M,$]of this._globalTimelineStyles)this._backFill.set(M,$||Ct.l3),this._currentKeyframe.set(M,Ct.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,M,$,be){M&&this._previousKeyframe.set("easing",M);const Ve=be&&be.params||{},Mt=function Zs(V,C){const M=new Map;let $;return V.forEach(be=>{if("*"===be){$=$||C.keys();for(let Ve of $)M.set(Ve,Ct.l3)}else yr(be,M)}),M}(C,this._globalTimelineStyles);for(let[Tt,on]of Mt){const pn=br(on,Ve,$);this._pendingStyles.set(Tt,pn),this._localTimelineStyles.has(Tt)||this._backFill.set(Tt,this._globalTimelineStyles.get(Tt)??Ct.l3),this._updateStyle(Tt,pn)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,M)=>{this._currentKeyframe.set(M,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,M)=>{this._currentKeyframe.has(M)||this._currentKeyframe.set(M,C)}))}snapshotCurrentStyles(){for(let[C,M]of this._localTimelineStyles)this._pendingStyles.set(C,M),this._updateStyle(C,M)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let M in this._currentKeyframe)C.push(M);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((M,$)=>{const be=this._styleSummary.get($);(!be||M.time>be.time)&&this._updateStyle($,M.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,M=new Set,$=1===this._keyframes.size&&0===this.duration;let be=[];this._keyframes.forEach((Tt,on)=>{const pn=yr(Tt,new Map,this._backFill);pn.forEach((si,di)=>{si===Ct.k1?C.add(di):si===Ct.l3&&M.add(di)}),$||pn.set("offset",on/this.duration),be.push(pn)});const Ve=C.size?Tr(C.values()):[],Mt=M.size?Tr(M.values()):[];if($){const Tt=be[0],on=new Map(Tt);Tt.set("offset",0),on.set("offset",1),be=[Tt,on]}return dr(this.element,be,Ve,Mt,this.duration,this.startTime,this.easing,!1)}}class yo extends $o{constructor(C,M,$,be,Ve,Mt,Tt=!1){super(C,M,Mt.delay),this.keyframes=$,this.preStyleProps=be,this.postStyleProps=Ve,this._stretchStartingKeyframe=Tt,this.timings={duration:Mt.duration,delay:Mt.delay,easing:Mt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:M,duration:$,easing:be}=this.timings;if(this._stretchStartingKeyframe&&M){const Ve=[],Mt=$+M,Tt=M/Mt,on=yr(C[0]);on.set("offset",0),Ve.push(on);const pn=yr(C[0]);pn.set("offset",cs(Tt)),Ve.push(pn);const si=C.length-1;for(let di=1;di<=si;di++){let Ri=yr(C[di]);const Vi=Ri.get("offset");Ri.set("offset",cs((M+Vi*$)/Mt)),Ve.push(Ri)}$=Mt,M=0,be="",C=Ve}return dr(this.element,C,this.preStyleProps,this.postStyleProps,$,M,be,!0)}}function cs(V,C=3){const M=Math.pow(10,C-1);return Math.round(V*M)/M}class Zo{}const Ws=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _a extends Zo{normalizePropertyName(C,M){return Ho(C)}normalizeStyleValue(C,M,$,be){let Ve="";const Mt=$.toString().trim();if(Ws.has(M)&&0!==$&&"0"!==$)if("number"==typeof $)Ve="px";else{const Tt=$.match(/^[+-]?[\d\.]+([a-z]*)$/);Tt&&0==Tt[1].length&&be.push(function mt(V,C){return new o.vHH(3005,!1)}())}return Mt+Ve}}function us(V,C,M,$,be,Ve,Mt,Tt,on,pn,si,di,Ri){return{type:0,element:V,triggerName:C,isRemovalTransition:be,fromState:M,fromStyles:Ve,toState:$,toStyles:Mt,timelines:Tt,queriedElements:on,preStyleProps:pn,postStyleProps:si,totalTime:di,errors:Ri}}const ds={};class Fa{constructor(C,M,$){this._triggerName=C,this.ast=M,this._stateStyles=$}match(C,M,$,be){return function lo(V,C,M,$,be){return V.some(Ve=>Ve(C,M,$,be))}(this.ast.matchers,C,M,$,be)}buildStyles(C,M,$){let be=this._stateStyles.get("*");return void 0!==C&&(be=this._stateStyles.get(C?.toString())||be),be?be.buildStyles(M,$):new Map}build(C,M,$,be,Ve,Mt,Tt,on,pn,si){const di=[],Ri=this.ast.options&&this.ast.options.params||ds,Ei=this.buildStyles($,Tt&&Tt.params||ds,di),In=on&&on.params||ds,Ui=this.buildStyles(be,In,di),sr=new Set,Wr=new Map,co=new Map,mr="void"===be,Qs={params:Ps(In,Ri),delay:this.ast.options?.delay},Yo=si?[]:zr(C,M,this.ast.animation,Ve,Mt,Ei,Ui,Qs,pn,di);let No=0;if(Yo.forEach(Vs=>{No=Math.max(Vs.duration+Vs.delay,No)}),di.length)return us(M,this._triggerName,$,be,mr,Ei,Ui,[],[],Wr,co,No,di);Yo.forEach(Vs=>{const fs=Vs.element,zo=Te(Wr,fs,new Set);Vs.preStyleProps.forEach(Or=>zo.add(Or));const ea=Te(co,fs,new Set);Vs.postStyleProps.forEach(Or=>ea.add(Or)),fs!==M&&sr.add(fs)});const bo=Tr(sr.values());return us(M,this._triggerName,$,be,mr,Ei,Ui,Yo,bo,Wr,co,No)}}function Ps(V,C){const M=Et(C);for(const $ in V)V.hasOwnProperty($)&&null!=V[$]&&(M[$]=V[$]);return M}class hs{constructor(C,M,$){this.styles=C,this.defaultParams=M,this.normalizer=$}buildStyles(C,M){const $=new Map,be=Et(this.defaultParams);return Object.keys(C).forEach(Ve=>{const Mt=C[Ve];null!==Mt&&(be[Ve]=Mt)}),this.styles.styles.forEach(Ve=>{"string"!=typeof Ve&&Ve.forEach((Mt,Tt)=>{Mt&&(Mt=br(Mt,be,M));const on=this.normalizer.normalizePropertyName(Tt,M);Mt=this.normalizer.normalizeStyleValue(Tt,on,Mt,M),$.set(Tt,Mt)})}),$}}class ys{constructor(C,M,$){this.name=C,this.ast=M,this._normalizer=$,this.transitionFactories=[],this.states=new Map,M.states.forEach(be=>{this.states.set(be.name,new hs(be.style,be.options&&be.options.params||{},$))}),aa(this.states,"true","1"),aa(this.states,"false","0"),M.transitions.forEach(be=>{this.transitionFactories.push(new Fa(C,be,this.states))}),this.fallbackTransition=function Ro(V,C,M){return new Fa(V,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Mt,Tt)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,M,$,be){return this.transitionFactories.find(Mt=>Mt.match(C,M,$,be))||null}matchStyles(C,M,$){return this.fallbackTransition.buildStyles(C,M,$)}}function aa(V,C,M){V.has(C)?V.has(M)||V.set(M,V.get(C)):V.has(M)&&V.set(C,V.get(M))}const qs=new Fr;class ya{constructor(C,M,$){this.bodyNode=C,this._driver=M,this._normalizer=$,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,M){const $=[],be=[],Ve=cr(this._driver,M,$,be);if($.length)throw function ft(V){return new o.vHH(3503,!1)}();this._animations.set(C,Ve)}_buildPlayer(C,M,$){const be=C.element,Ve=De(0,this._normalizer,0,C.keyframes,M,$);return this._driver.animate(be,Ve,C.duration,C.delay,C.easing,[],!0)}create(C,M,$={}){const be=[],Ve=this._animations.get(C);let Mt;const Tt=new Map;if(Ve?(Mt=zr(this._driver,M,Ve,Kt,Yn,new Map,new Map,$,qs,be),Mt.forEach(si=>{const di=Te(Tt,si.element,new Map);si.postStyleProps.forEach(Ri=>di.set(Ri,null))})):(be.push(function cn(){return new o.vHH(3300,!1)}()),Mt=[]),be.length)throw function kn(V){return new o.vHH(3504,!1)}();Tt.forEach((si,di)=>{si.forEach((Ri,Vi)=>{si.set(Vi,this._driver.computeStyle(di,Vi,Ct.l3))})});const pn=ce(Mt.map(si=>{const di=Tt.get(si.element);return this._buildPlayer(si,new Map,di)}));return this._playersById.set(C,pn),pn.onDestroy(()=>this.destroy(C)),this.players.push(pn),pn}destroy(C){const M=this._getPlayer(C);M.destroy(),this._playersById.delete(C);const $=this.players.indexOf(M);$>=0&&this.players.splice($,1)}_getPlayer(C){const M=this._playersById.get(C);if(!M)throw function an(V){return new o.vHH(3301,!1)}();return M}listen(C,M,$,be){const Ve=Qe(M,"","","");return $e(this._getPlayer(C),$,Ve,be),()=>{}}command(C,M,$,be){if("register"==$)return void this.register(C,be[0]);if("create"==$)return void this.create(C,M,be[0]||{});const Ve=this._getPlayer(C);switch($){case"play":Ve.play();break;case"pause":Ve.pause();break;case"reset":Ve.reset();break;case"restart":Ve.restart();break;case"finish":Ve.finish();break;case"init":Ve.init();break;case"setPosition":Ve.setPosition(parseFloat(be[0]));break;case"destroy":this.destroy(C)}}}const Ea="ng-animate-queued",Zi="ng-animate-disabled",Ma=[],Nr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ta={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zr="__ng_removed";class wr{get params(){return this.options.params}constructor(C,M=""){this.namespaceId=M;const $=C&&C.hasOwnProperty("value");if(this.value=function Do(V){return V??null}($?C.value:C),$){const Ve=Et(C);delete Ve.value,this.options=Ve}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const M=C.params;if(M){const $=this.options.params;Object.keys(M).forEach(be=>{null==$[be]&&($[be]=M[be])})}}}const Eo="void",Lr=new wr(Eo);class Vr{constructor(C,M,$){this.id=C,this.hostElement=M,this._engine=$,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,vo(M,this._hostClassName)}listen(C,M,$,be){if(!this._triggers.has(M))throw function Mn(V,C){return new o.vHH(3302,!1)}();if(null==$||0==$.length)throw function Gt(V){return new o.vHH(3303,!1)}();if(!function Rs(V){return"start"==V||"done"==V}($))throw function On(V,C){return new o.vHH(3400,!1)}();const Ve=Te(this._elementListeners,C,[]),Mt={name:M,phase:$,callback:be};Ve.push(Mt);const Tt=Te(this._engine.statesByElement,C,new Map);return Tt.has(M)||(vo(C,Hn),vo(C,Hn+"-"+M),Tt.set(M,Lr)),()=>{this._engine.afterFlush(()=>{const on=Ve.indexOf(Mt);on>=0&&Ve.splice(on,1),this._triggers.has(M)||Tt.delete(M)})}}register(C,M){return!this._triggers.has(C)&&(this._triggers.set(C,M),!0)}_getTrigger(C){const M=this._triggers.get(C);if(!M)throw function xt(V){return new o.vHH(3401,!1)}();return M}trigger(C,M,$,be=!0){const Ve=this._getTrigger(M),Mt=new ps(this.id,M,C);let Tt=this._engine.statesByElement.get(C);Tt||(vo(C,Hn),vo(C,Hn+"-"+M),this._engine.statesByElement.set(C,Tt=new Map));let on=Tt.get(M);const pn=new wr($,this.id);if(!($&&$.hasOwnProperty("value"))&&on&&pn.absorbOptions(on.options),Tt.set(M,pn),on||(on=Lr),pn.value!==Eo&&on.value===pn.value){if(!function q(V,C){const M=Object.keys(V),$=Object.keys(C);if(M.length!=$.length)return!1;for(let be=0;be<M.length;be++){const Ve=M[be];if(!C.hasOwnProperty(Ve)||V[Ve]!==C[Ve])return!1}return!0}(on.params,pn.params)){const In=[],Ui=Ve.matchStyles(on.value,on.params,In),sr=Ve.matchStyles(pn.value,pn.params,In);In.length?this._engine.reportError(In):this._engine.afterFlush(()=>{vr(C,Ui),oo(C,sr)})}return}const Ri=Te(this._engine.playersByElement,C,[]);Ri.forEach(In=>{In.namespaceId==this.id&&In.triggerName==M&&In.queued&&In.destroy()});let Vi=Ve.matchTransition(on.value,pn.value,C,pn.params),Ei=!1;if(!Vi){if(!be)return;Vi=Ve.fallbackTransition,Ei=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:M,transition:Vi,fromState:on,toState:pn,player:Mt,isFallbackTransition:Ei}),Ei||(vo(C,Ea),Mt.onStart(()=>{zi(C,Ea)})),Mt.onDone(()=>{let In=this.players.indexOf(Mt);In>=0&&this.players.splice(In,1);const Ui=this._engine.playersByElement.get(C);if(Ui){let sr=Ui.indexOf(Mt);sr>=0&&Ui.splice(sr,1)}}),this.players.push(Mt),Ri.push(Mt),Mt}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(M=>M.delete(C)),this._elementListeners.forEach((M,$)=>{this._elementListeners.set($,M.filter(be=>be.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const M=this._engine.playersByElement.get(C);M&&(M.forEach($=>$.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,M){const $=this._engine.driver.query(C,ri,!0);$.forEach(be=>{if(be[Zr])return;const Ve=this._engine.fetchNamespacesByElement(be);Ve.size?Ve.forEach(Mt=>Mt.triggerLeaveAnimation(be,M,!1,!0)):this.clearElementCache(be)}),this._engine.afterFlushAnimationsDone(()=>$.forEach(be=>this.clearElementCache(be)))}triggerLeaveAnimation(C,M,$,be){const Ve=this._engine.statesByElement.get(C),Mt=new Map;if(Ve){const Tt=[];if(Ve.forEach((on,pn)=>{if(Mt.set(pn,on.value),this._triggers.has(pn)){const si=this.trigger(C,pn,Eo,be);si&&Tt.push(si)}}),Tt.length)return this._engine.markElementAsRemoved(this.id,C,!0,M,Mt),$&&ce(Tt).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const M=this._elementListeners.get(C),$=this._engine.statesByElement.get(C);if(M&&$){const be=new Set;M.forEach(Ve=>{const Mt=Ve.name;if(be.has(Mt))return;be.add(Mt);const on=this._triggers.get(Mt).fallbackTransition,pn=$.get(Mt)||Lr,si=new wr(Eo),di=new ps(this.id,Mt,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Mt,transition:on,fromState:pn,toState:si,player:di,isFallbackTransition:!0})})}}removeNode(C,M){const $=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,M),this.triggerLeaveAnimation(C,M,!0))return;let be=!1;if($.totalAnimations){const Ve=$.players.length?$.playersByQueriedElement.get(C):[];if(Ve&&Ve.length)be=!0;else{let Mt=C;for(;Mt=Mt.parentNode;)if($.statesByElement.get(Mt)){be=!0;break}}}if(this.prepareLeaveAnimationListeners(C),be)$.markElementAsRemoved(this.id,C,!1,M);else{const Ve=C[Zr];(!Ve||Ve===Nr)&&($.afterFlush(()=>this.clearElementCache(C)),$.destroyInnerAnimations(C),$._onRemovalComplete(C,M))}}insertNode(C,M){vo(C,this._hostClassName)}drainQueuedTransitions(C){const M=[];return this._queue.forEach($=>{const be=$.player;if(be.destroyed)return;const Ve=$.element,Mt=this._elementListeners.get(Ve);Mt&&Mt.forEach(Tt=>{if(Tt.name==$.triggerName){const on=Qe(Ve,$.triggerName,$.fromState.value,$.toState.value);on._data=C,$e($.player,Tt.phase,on,Tt.callback)}}),be.markedForDestroy?this._engine.afterFlush(()=>{be.destroy()}):M.push($)}),this._queue=[],M.sort(($,be)=>{const Ve=$.transition.ast.depCount,Mt=be.transition.ast.depCount;return 0==Ve||0==Mt?Ve-Mt:this._engine.driver.containsElement($.element,be.element)?1:-1})}destroy(C){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let M=!1;return this._elementListeners.has(C)&&(M=!0),M=!!this._queue.find($=>$.element===C)||M,M}}class Os{_onRemovalComplete(C,M){this.onRemovalComplete(C,M)}constructor(C,M,$){this.bodyNode=C,this.driver=M,this._normalizer=$,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(be,Ve)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(M=>{M.players.forEach($=>{$.queued&&C.push($)})}),C}createNamespace(C,M){const $=new Vr(C,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList($,M):(this.newHostElements.set(M,$),this.collectEnterElement(M)),this._namespaceLookup[C]=$}_balanceNamespaceList(C,M){const $=this._namespaceList,be=this.namespacesByHostElement;if($.length-1>=0){let Mt=!1,Tt=this.driver.getParentElement(M);for(;Tt;){const on=be.get(Tt);if(on){const pn=$.indexOf(on);$.splice(pn+1,0,C),Mt=!0;break}Tt=this.driver.getParentElement(Tt)}Mt||$.unshift(C)}else $.push(C);return be.set(M,C),C}register(C,M){let $=this._namespaceLookup[C];return $||($=this.createNamespace(C,M)),$}registerTrigger(C,M,$){let be=this._namespaceLookup[C];be&&be.register(M,$)&&this.totalAnimations++}destroy(C,M){if(!C)return;const $=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete($.hostElement),delete this._namespaceLookup[C];const be=this._namespaceList.indexOf($);be>=0&&this._namespaceList.splice(be,1)}),this.afterFlushAnimationsDone(()=>$.destroy(M))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const M=new Set,$=this.statesByElement.get(C);if($)for(let be of $.values())if(be.namespaceId){const Ve=this._fetchNamespace(be.namespaceId);Ve&&M.add(Ve)}return M}trigger(C,M,$,be){if(ks(M)){const Ve=this._fetchNamespace(C);if(Ve)return Ve.trigger(M,$,be),!0}return!1}insertNode(C,M,$,be){if(!ks(M))return;const Ve=M[Zr];if(Ve&&Ve.setForRemoval){Ve.setForRemoval=!1,Ve.setForMove=!0;const Mt=this.collectedLeaveElements.indexOf(M);Mt>=0&&this.collectedLeaveElements.splice(Mt,1)}if(C){const Mt=this._fetchNamespace(C);Mt&&Mt.insertNode(M,$)}be&&this.collectEnterElement(M)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,M){M?this.disabledNodes.has(C)||(this.disabledNodes.add(C),vo(C,Zi)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),zi(C,Zi))}removeNode(C,M,$,be){if(ks(M)){const Ve=C?this._fetchNamespace(C):null;if(Ve?Ve.removeNode(M,be):this.markElementAsRemoved(C,M,!1,be),$){const Mt=this.namespacesByHostElement.get(M);Mt&&Mt.id!==C&&Mt.removeNode(M,be)}}else this._onRemovalComplete(M,be)}markElementAsRemoved(C,M,$,be,Ve){this.collectedLeaveElements.push(M),M[Zr]={namespaceId:C,setForRemoval:be,hasAnimation:$,removedBeforeQueried:!1,previousTriggersValues:Ve}}listen(C,M,$,be,Ve){return ks(M)?this._fetchNamespace(C).listen(M,$,be,Ve):()=>{}}_buildInstruction(C,M,$,be,Ve){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,$,be,C.fromState.options,C.toState.options,M,Ve)}destroyInnerAnimations(C){let M=this.driver.query(C,ri,!0);M.forEach($=>this.destroyActiveAnimationsForElement($)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(C,Rt,!0),M.forEach($=>this.finishActiveQueriedAnimationOnElement($)))}destroyActiveAnimationsForElement(C){const M=this.playersByElement.get(C);M&&M.forEach($=>{$.queued?$.markedForDestroy=!0:$.destroy()})}finishActiveQueriedAnimationOnElement(C){const M=this.playersByQueriedElement.get(C);M&&M.forEach($=>$.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return ce(this.players).onDone(()=>C());C()})}processLeaveNode(C){const M=C[Zr];if(M&&M.setForRemoval){if(C[Zr]=Nr,M.namespaceId){this.destroyInnerAnimations(C);const $=this._fetchNamespace(M.namespaceId);$&&$.clearElementCache(C)}this._onRemovalComplete(C,M.setForRemoval)}C.classList?.contains(Zi)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach($=>{this.markElementAsDisabled($,!1)})}flush(C=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach(($,be)=>this._balanceNamespaceList($,be)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let $=0;$<this.collectedEnterElements.length;$++)vo(this.collectedEnterElements[$],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const $=[];try{M=this._flushAnimations($,C)}finally{for(let be=0;be<$.length;be++)$[be]()}}else for(let $=0;$<this.collectedLeaveElements.length;$++)this.processLeaveNode(this.collectedLeaveElements[$]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach($=>$()),this._flushFns=[],this._whenQuietFns.length){const $=this._whenQuietFns;this._whenQuietFns=[],M.length?ce(M).onDone(()=>{$.forEach(be=>be())}):$.forEach(be=>be())}}reportError(C){throw function zt(V){return new o.vHH(3402,!1)}()}_flushAnimations(C,M){const $=new Fr,be=[],Ve=new Map,Mt=[],Tt=new Map,on=new Map,pn=new Map,si=new Set;this.disabledNodes.forEach(Di=>{si.add(Di);const Fi=this.driver.query(Di,".ng-animate-queued",!0);for(let Hi=0;Hi<Fi.length;Hi++)si.add(Fi[Hi])});const di=this.bodyNode,Ri=Array.from(this.statesByElement.keys()),Vi=Yi(Ri,this.collectedEnterElements),Ei=new Map;let In=0;Vi.forEach((Di,Fi)=>{const Hi=Kt+In++;Ei.set(Fi,Hi),Di.forEach(ar=>vo(ar,Hi))});const Ui=[],sr=new Set,Wr=new Set;for(let Di=0;Di<this.collectedLeaveElements.length;Di++){const Fi=this.collectedLeaveElements[Di],Hi=Fi[Zr];Hi&&Hi.setForRemoval&&(Ui.push(Fi),sr.add(Fi),Hi.hasAnimation?this.driver.query(Fi,".ng-star-inserted",!0).forEach(ar=>sr.add(ar)):Wr.add(Fi))}const co=new Map,mr=Yi(Ri,Array.from(sr));mr.forEach((Di,Fi)=>{const Hi=Yn+In++;co.set(Fi,Hi),Di.forEach(ar=>vo(ar,Hi))}),C.push(()=>{Vi.forEach((Di,Fi)=>{const Hi=Ei.get(Fi);Di.forEach(ar=>zi(ar,Hi))}),mr.forEach((Di,Fi)=>{const Hi=co.get(Fi);Di.forEach(ar=>zi(ar,Hi))}),Ui.forEach(Di=>{this.processLeaveNode(Di)})});const Qs=[],Yo=[];for(let Di=this._namespaceList.length-1;Di>=0;Di--)this._namespaceList[Di].drainQueuedTransitions(M).forEach(Hi=>{const ar=Hi.player,xo=Hi.element;if(Qs.push(ar),this.collectedEnterElements.length){const pe=xo[Zr];if(pe&&pe.setForMove){if(pe.previousTriggersValues&&pe.previousTriggersValues.has(Hi.triggerName)){const At=pe.previousTriggersValues.get(Hi.triggerName),Tn=this.statesByElement.get(Hi.element);if(Tn&&Tn.has(Hi.triggerName)){const ui=Tn.get(Hi.triggerName);ui.value=At,Tn.set(Hi.triggerName,ui)}}return void ar.destroy()}}const qo=!di||!this.driver.containsElement(di,xo),uo=co.get(xo),xs=Ei.get(xo),he=this._buildInstruction(Hi,$,xs,uo,qo);if(he.errors&&he.errors.length)return void Yo.push(he);if(qo)return ar.onStart(()=>vr(xo,he.fromStyles)),ar.onDestroy(()=>oo(xo,he.toStyles)),void be.push(ar);if(Hi.isFallbackTransition)return ar.onStart(()=>vr(xo,he.fromStyles)),ar.onDestroy(()=>oo(xo,he.toStyles)),void be.push(ar);const k=[];he.timelines.forEach(pe=>{pe.stretchStartingKeyframe=!0,this.disabledNodes.has(pe.element)||k.push(pe)}),he.timelines=k,$.append(xo,he.timelines),Mt.push({instruction:he,player:ar,element:xo}),he.queriedElements.forEach(pe=>Te(Tt,pe,[]).push(ar)),he.preStyleProps.forEach((pe,At)=>{if(pe.size){let Tn=on.get(At);Tn||on.set(At,Tn=new Set),pe.forEach((ui,Gi)=>Tn.add(Gi))}}),he.postStyleProps.forEach((pe,At)=>{let Tn=pn.get(At);Tn||pn.set(At,Tn=new Set),pe.forEach((ui,Gi)=>Tn.add(Gi))})});if(Yo.length){const Di=[];Yo.forEach(Fi=>{Di.push(function Fn(V,C){return new o.vHH(3505,!1)}())}),Qs.forEach(Fi=>Fi.destroy()),this.reportError(Di)}const No=new Map,bo=new Map;Mt.forEach(Di=>{const Fi=Di.element;$.has(Fi)&&(bo.set(Fi,Fi),this._beforeAnimationBuild(Di.player.namespaceId,Di.instruction,No))}),be.forEach(Di=>{const Fi=Di.element;this._getPreviousPlayers(Fi,!1,Di.namespaceId,Di.triggerName,null).forEach(ar=>{Te(No,Fi,[]).push(ar),ar.destroy()})});const Vs=Ui.filter(Di=>Le(Di,on,pn)),fs=new Map;Fo(fs,this.driver,Wr,pn,Ct.l3).forEach(Di=>{Le(Di,on,pn)&&Vs.push(Di)});const ea=new Map;Vi.forEach((Di,Fi)=>{Fo(ea,this.driver,new Set(Di),on,Ct.k1)}),Vs.forEach(Di=>{const Fi=fs.get(Di),Hi=ea.get(Di);fs.set(Di,new Map([...Array.from(Fi?.entries()??[]),...Array.from(Hi?.entries()??[])]))});const Or=[],Vo=[],za={};Mt.forEach(Di=>{const{element:Fi,player:Hi,instruction:ar}=Di;if($.has(Fi)){if(si.has(Fi))return Hi.onDestroy(()=>oo(Fi,ar.toStyles)),Hi.disabled=!0,Hi.overrideTotalTime(ar.totalTime),void be.push(Hi);let xo=za;if(bo.size>1){let uo=Fi;const xs=[];for(;uo=uo.parentNode;){const he=bo.get(uo);if(he){xo=he;break}xs.push(uo)}xs.forEach(he=>bo.set(he,xo))}const qo=this._buildAnimation(Hi.namespaceId,ar,No,Ve,ea,fs);if(Hi.setRealPlayer(qo),xo===za)Or.push(Hi);else{const uo=this.playersByElement.get(xo);uo&&uo.length&&(Hi.parentPlayer=ce(uo)),be.push(Hi)}}else vr(Fi,ar.fromStyles),Hi.onDestroy(()=>oo(Fi,ar.toStyles)),Vo.push(Hi),si.has(Fi)&&be.push(Hi)}),Vo.forEach(Di=>{const Fi=Ve.get(Di.element);if(Fi&&Fi.length){const Hi=ce(Fi);Di.setRealPlayer(Hi)}}),be.forEach(Di=>{Di.parentPlayer?Di.syncPlayerEvents(Di.parentPlayer):Di.destroy()});for(let Di=0;Di<Ui.length;Di++){const Fi=Ui[Di],Hi=Fi[Zr];if(zi(Fi,Yn),Hi&&Hi.hasAnimation)continue;let ar=[];if(Tt.size){let qo=Tt.get(Fi);qo&&qo.length&&ar.push(...qo);let uo=this.driver.query(Fi,Rt,!0);for(let xs=0;xs<uo.length;xs++){let he=Tt.get(uo[xs]);he&&he.length&&ar.push(...he)}}const xo=ar.filter(qo=>!qo.destroyed);xo.length?Fs(this,Fi,xo):this.processLeaveNode(Fi)}return Ui.length=0,Or.forEach(Di=>{this.players.push(Di),Di.onDone(()=>{Di.destroy();const Fi=this.players.indexOf(Di);this.players.splice(Fi,1)}),Di.play()}),Or}elementContainsData(C,M){let $=!1;const be=M[Zr];return be&&be.setForRemoval&&($=!0),this.playersByElement.has(M)&&($=!0),this.playersByQueriedElement.has(M)&&($=!0),this.statesByElement.has(M)&&($=!0),this._fetchNamespace(C).elementContainsData(M)||$}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,M,$,be,Ve){let Mt=[];if(M){const Tt=this.playersByQueriedElement.get(C);Tt&&(Mt=Tt)}else{const Tt=this.playersByElement.get(C);if(Tt){const on=!Ve||Ve==Eo;Tt.forEach(pn=>{pn.queued||!on&&pn.triggerName!=be||Mt.push(pn)})}}return($||be)&&(Mt=Mt.filter(Tt=>!($&&$!=Tt.namespaceId||be&&be!=Tt.triggerName))),Mt}_beforeAnimationBuild(C,M,$){const Ve=M.element,Mt=M.isRemovalTransition?void 0:C,Tt=M.isRemovalTransition?void 0:M.triggerName;for(const on of M.timelines){const pn=on.element,si=pn!==Ve,di=Te($,pn,[]);this._getPreviousPlayers(pn,si,Mt,Tt,M.toState).forEach(Vi=>{const Ei=Vi.getRealPlayer();Ei.beforeDestroy&&Ei.beforeDestroy(),Vi.destroy(),di.push(Vi)})}vr(Ve,M.fromStyles)}_buildAnimation(C,M,$,be,Ve,Mt){const Tt=M.triggerName,on=M.element,pn=[],si=new Set,di=new Set,Ri=M.timelines.map(Ei=>{const In=Ei.element;si.add(In);const Ui=In[Zr];if(Ui&&Ui.removedBeforeQueried)return new Ct.ZN(Ei.duration,Ei.delay);const sr=In!==on,Wr=function oe(V){const C=[];return te(V,C),C}(($.get(In)||Ma).map(No=>No.getRealPlayer())).filter(No=>!!No.element&&No.element===In),co=Ve.get(In),mr=Mt.get(In),Qs=De(0,this._normalizer,0,Ei.keyframes,co,mr),Yo=this._buildPlayer(Ei,Qs,Wr);if(Ei.subTimeline&&be&&di.add(In),sr){const No=new ps(C,Tt,In);No.setRealPlayer(Yo),pn.push(No)}return Yo});pn.forEach(Ei=>{Te(this.playersByQueriedElement,Ei.element,[]).push(Ei),Ei.onDone(()=>function vs(V,C,M){let $=V.get(C);if($){if($.length){const be=$.indexOf(M);$.splice(be,1)}0==$.length&&V.delete(C)}return $}(this.playersByQueriedElement,Ei.element,Ei))}),si.forEach(Ei=>vo(Ei,zn));const Vi=ce(Ri);return Vi.onDestroy(()=>{si.forEach(Ei=>zi(Ei,zn)),oo(on,M.toStyles)}),di.forEach(Ei=>{Te(be,Ei,[]).push(Vi)}),Vi}_buildPlayer(C,M,$){return M.length>0?this.driver.animate(C.element,M,C.duration,C.delay,C.easing,$):new Ct.ZN(C.duration,C.delay)}}class ps{constructor(C,M,$){this.namespaceId=C,this.triggerName=M,this.element=$,this._player=new Ct.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((M,$)=>{M.forEach(be=>$e(C,$,void 0,be))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const M=this._player;M.triggerCallback&&C.onStart(()=>M.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,M){Te(this._queuedCallbacks,C,[]).push(M)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const M=this._player;M.triggerCallback&&M.triggerCallback(C)}}function ks(V){return V&&1===V.nodeType}function la(V,C){const M=V.style.display;return V.style.display=C??"none",M}function Fo(V,C,M,$,be){const Ve=[];M.forEach(on=>Ve.push(la(on)));const Mt=[];$.forEach((on,pn)=>{const si=new Map;on.forEach(di=>{const Ri=C.computeStyle(pn,di,be);si.set(di,Ri),(!Ri||0==Ri.length)&&(pn[Zr]=Ta,Mt.push(pn))}),V.set(pn,si)});let Tt=0;return M.forEach(on=>la(on,Ve[Tt++])),Mt}function Yi(V,C){const M=new Map;if(V.forEach(Tt=>M.set(Tt,[])),0==C.length)return M;const $=1,be=new Set(C),Ve=new Map;function Mt(Tt){if(!Tt)return $;let on=Ve.get(Tt);if(on)return on;const pn=Tt.parentNode;return on=M.has(pn)?pn:be.has(pn)?$:Mt(pn),Ve.set(Tt,on),on}return C.forEach(Tt=>{const on=Mt(Tt);on!==$&&M.get(on).push(Tt)}),M}function vo(V,C){V.classList?.add(C)}function zi(V,C){V.classList?.remove(C)}function Fs(V,C,M){ce(M).onDone(()=>V.processLeaveNode(C))}function te(V,C){for(let M=0;M<V.length;M++){const $=V[M];$ instanceof Ct.ZE?te($.players,C):C.push($)}}function Le(V,C,M){const $=M.get(V);if(!$)return!1;let be=C.get(V);return be?$.forEach(Ve=>be.add(Ve)):C.set(V,$),M.delete(V),!0}class xn{constructor(C,M,$){this.bodyNode=C,this._driver=M,this._normalizer=$,this._triggerCache={},this.onRemovalComplete=(be,Ve)=>{},this._transitionEngine=new Os(C,M,$),this._timelineEngine=new ya(C,M,$),this._transitionEngine.onRemovalComplete=(be,Ve)=>this.onRemovalComplete(be,Ve)}registerTrigger(C,M,$,be,Ve){const Mt=C+"-"+be;let Tt=this._triggerCache[Mt];if(!Tt){const on=[],pn=[],si=cr(this._driver,Ve,on,pn);if(on.length)throw function Ot(V,C){return new o.vHH(3404,!1)}();Tt=function sa(V,C,M){return new ys(V,C,M)}(be,si,this._normalizer),this._triggerCache[Mt]=Tt}this._transitionEngine.registerTrigger(M,be,Tt)}register(C,M){this._transitionEngine.register(C,M)}destroy(C,M){this._transitionEngine.destroy(C,M)}onInsert(C,M,$,be){this._transitionEngine.insertNode(C,M,$,be)}onRemove(C,M,$,be){this._transitionEngine.removeNode(C,M,be||!1,$)}disableAnimations(C,M){this._transitionEngine.markElementAsDisabled(C,M)}process(C,M,$,be){if("@"==$.charAt(0)){const[Ve,Mt]=xe($);this._timelineEngine.command(Ve,M,Mt,be)}else this._transitionEngine.trigger(C,M,$,be)}listen(C,M,$,be,Ve){if("@"==$.charAt(0)){const[Mt,Tt]=xe($);return this._timelineEngine.listen(Mt,M,Tt,Ve)}return this._transitionEngine.listen(C,M,$,be,Ve)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ur=(()=>{class V{constructor(M,$,be){this._element=M,this._startStyles=$,this._endStyles=be,this._state=0;let Ve=V.initialStylesByElement.get(M);Ve||V.initialStylesByElement.set(M,Ve=new Map),this._initialStyles=Ve}start(){this._state<1&&(this._startStyles&&oo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oo(this._element,this._initialStyles),this._endStyles&&(oo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(V.initialStylesByElement.delete(this._element),this._startStyles&&(vr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vr(this._element,this._endStyles),this._endStyles=null),oo(this._element,this._initialStyles),this._state=3)}}return V.initialStylesByElement=new WeakMap,V})();function Sn(V){let C=null;return V.forEach((M,$)=>{(function Xi(V){return"display"===V||"position"===V})($)&&(C=C||new Map,C.set($,M))}),C}class bs{constructor(C,M,$,be){this.element=C,this.keyframes=M,this.options=$,this._specialStyles=be,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=$.duration,this._delay=$.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const M=[];return C.forEach($=>{M.push(Object.fromEntries($))}),M}_triggerWebAnimation(C,M,$){return C.animate(this._convertKeyframesToObject(M),$)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach(($,be)=>{"offset"!==be&&C.set(be,this._finished?$:I(this.element,be))}),this.currentSnapshot=C}triggerCallback(C){const M="start"===C?this._onStartFns:this._onDoneFns;M.forEach($=>$()),M.length=0}}class Aa{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,M){return!1}containsElement(C,M){return bt(C,M)}getParentElement(C){return Pe(C)}query(C,M,$){return Pt(C,M,$)}computeStyle(C,M,$){return window.getComputedStyle(C)[M]}animate(C,M,$,be,Ve,Mt=[]){const on={duration:$,delay:be,fill:0==be?"both":"forwards"};Ve&&(on.easing=Ve);const pn=new Map,si=Mt.filter(Vi=>Vi instanceof bs);(function wn(V,C){return 0===V||0===C})($,be)&&si.forEach(Vi=>{Vi.currentSnapshot.forEach((Ei,In)=>pn.set(In,Ei))});let di=function Gn(V){return V.length?V[0]instanceof Map?V:V.map(C=>rn(C)):[]}(M).map(Vi=>yr(Vi));di=function at(V,C,M){if(M.size&&C.length){let $=C[0],be=[];if(M.forEach((Ve,Mt)=>{$.has(Mt)||be.push(Mt),$.set(Mt,Ve)}),be.length)for(let Ve=1;Ve<C.length;Ve++){let Mt=C[Ve];be.forEach(Tt=>Mt.set(Tt,I(V,Tt)))}}return C}(C,di,pn);const Ri=function Ti(V,C){let M=null,$=null;return Array.isArray(C)&&C.length?(M=Sn(C[0]),C.length>1&&($=Sn(C[C.length-1]))):C instanceof Map&&(M=Sn(C)),M||$?new Ur(V,M,$):null}(C,di);return new bs(C,di,on,Ri)}}var Ir=F(6895);let Ya=(()=>{class V extends Ct._j{constructor(M,$){super(),this._nextAnimationId=0,this._renderer=M.createRenderer($.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(M){const $=this._nextAnimationId.toString();this._nextAnimationId++;const be=Array.isArray(M)?(0,Ct.vP)(M):M;return Sa(this._renderer,null,$,"register",[be]),new ca($,this._renderer)}}return V.\u0275fac=function(M){return new(M||V)(o.LFG(o.FYo),o.LFG(Ir.K0))},V.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac}),V})();class ca extends Ct.LC{constructor(C,M){super(),this._id=C,this._renderer=M}create(C,M){return new Lo(this._id,C,M||{},this._renderer)}}class Lo{constructor(C,M,$,be){this.id=C,this.element=M,this._renderer=be,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",$)}_listen(C,M){return this._renderer.listen(this.element,`@@${this.id}:${C}`,M)}_command(C,...M){return Sa(this._renderer,this.element,this.id,C,M)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Sa(V,C,M,$,be){return V.setProperty(C,`@@${M}:${$}`,be)}const qa="@.disabled";let As=(()=>{class V{constructor(M,$,be){this.delegate=M,this.engine=$,this._zone=be,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),$.onRemovalComplete=(Ve,Mt)=>{const Tt=Mt?.parentNode(Ve);Tt&&Mt.removeChild(Tt,Ve)}}createRenderer(M,$){const Ve=this.delegate.createRenderer(M,$);if(!(M&&$&&$.data&&$.data.animation)){let si=this._rendererCache.get(Ve);return si||(si=new va("",Ve,this.engine,()=>this._rendererCache.delete(Ve)),this._rendererCache.set(Ve,si)),si}const Mt=$.id,Tt=$.id+"-"+this._currentId;this._currentId++,this.engine.register(Tt,M);const on=si=>{Array.isArray(si)?si.forEach(on):this.engine.registerTrigger(Mt,Tt,M,si.name,si)};return $.data.animation.forEach(on),new Mo(this,Tt,Ve,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(M,$,be){M>=0&&M<this._microtaskId?this._zone.run(()=>$(be)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ve=>{const[Mt,Tt]=Ve;Mt(Tt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([$,be]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return V.\u0275fac=function(M){return new(M||V)(o.LFG(o.FYo),o.LFG(xn),o.LFG(o.R0b))},V.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac}),V})();class va{constructor(C,M,$,be){this.namespaceId=C,this.delegate=M,this.engine=$,this._onDestroy=be,this.destroyNode=this.delegate.destroyNode?Ve=>M.destroyNode(Ve):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(C,M){return this.delegate.createElement(C,M)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,M){this.delegate.appendChild(C,M),this.engine.onInsert(this.namespaceId,M,C,!1)}insertBefore(C,M,$,be=!0){this.delegate.insertBefore(C,M,$),this.engine.onInsert(this.namespaceId,M,C,be)}removeChild(C,M,$){this.engine.onRemove(this.namespaceId,M,this.delegate,$)}selectRootElement(C,M){return this.delegate.selectRootElement(C,M)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,M,$,be){this.delegate.setAttribute(C,M,$,be)}removeAttribute(C,M,$){this.delegate.removeAttribute(C,M,$)}addClass(C,M){this.delegate.addClass(C,M)}removeClass(C,M){this.delegate.removeClass(C,M)}setStyle(C,M,$,be){this.delegate.setStyle(C,M,$,be)}removeStyle(C,M,$){this.delegate.removeStyle(C,M,$)}setProperty(C,M,$){"@"==M.charAt(0)&&M==qa?this.disableAnimations(C,!!$):this.delegate.setProperty(C,M,$)}setValue(C,M){this.delegate.setValue(C,M)}listen(C,M,$){return this.delegate.listen(C,M,$)}disableAnimations(C,M){this.engine.disableAnimations(C,M)}}class Mo extends va{constructor(C,M,$,be,Ve){super(M,$,be,Ve),this.factory=C,this.namespaceId=M}setProperty(C,M,$){"@"==M.charAt(0)?"."==M.charAt(1)&&M==qa?this.disableAnimations(C,$=void 0===$||!!$):this.engine.process(this.namespaceId,C,M.slice(1),$):this.delegate.setProperty(C,M,$)}listen(C,M,$){if("@"==M.charAt(0)){const be=function Bo(V){switch(V){case"body":return document.body;case"document":return document;case"window":return window;default:return V}}(C);let Ve=M.slice(1),Mt="";return"@"!=Ve.charAt(0)&&([Ve,Mt]=function ua(V){const C=V.indexOf(".");return[V.substring(0,C),V.slice(C+1)]}(Ve)),this.engine.listen(this.namespaceId,be,Ve,Mt,Tt=>{this.factory.scheduleListenerCallback(Tt._data||-1,$,Tt)})}return this.delegate.listen(C,M,$)}}const Bs=[{provide:Ct._j,useClass:Ya},{provide:Zo,useFactory:function Ks(){return new _a}},{provide:xn,useClass:(()=>{class V extends xn{constructor(M,$,be,Ve){super(M.body,$,be)}ngOnDestroy(){this.flush()}}return V.\u0275fac=function(M){return new(M||V)(o.LFG(Ir.K0),o.LFG(U),o.LFG(Zo),o.LFG(o.z2F))},V.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac}),V})()},{provide:o.FYo,useFactory:function Ia(V,C,M){return new As(V,C,M)},deps:[p.se,xn,o.R0b]}],ba=[{provide:U,useFactory:()=>new Aa},{provide:o.QbO,useValue:"BrowserAnimations"},...Bs],cl=[{provide:U,useClass:ee},{provide:o.QbO,useValue:"NoopAnimations"},...Bs];let Pa=(()=>{class V{static withConfig(M){return{ngModule:V,providers:M.disableAnimations?cl:ba}}}return V.\u0275fac=function(M){return new(M||V)},V.\u0275mod=o.oAB({type:V}),V.\u0275inj=o.cJS({providers:ba,imports:[p.b2]}),V})();var Ba=F(2843),Oa=F(262),Xs=F(7023);let Ka=(()=>{class V{constructor(M){this.sweetAlertService=M}intercept(M,$){return $.handle(M).pipe((0,Oa.K)(be=>(this.sweetAlertService.showError((401===be.status?"Unauthorized Access":404===be.status?"Resource not found":"An error occurred")+" \n "+be.error.Message),(0,Ba._)(be))))}static#e=this.\u0275fac=function($){return new($||V)(o.LFG(Xs.c))};static#t=this.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac})}return V})();var Ns=F(3648),hl=F(8423),Xa=F(3238);let Ja=(()=>{class V{}return V.\u0275fac=function(M){return new(M||V)},V.\u0275mod=o.oAB({type:V}),V.\u0275inj=o.cJS({imports:[Ir.ez,Xa.BQ]}),V})();var Ss=F(4385),Qa=F(5412),Na=F(4144),Js=F(4859),zs=F(9602),H=F(9549),ge=F(3162),W=F(3805);let Oe=(()=>{class V{static#e=this.\u0275fac=function($){return new($||V)};static#t=this.\u0275mod=o.oAB({type:V,bootstrap:[pt]});static#n=this.\u0275inj=o.cJS({providers:[Ir.uU,Xs.c,{provide:j.TP,useClass:Ka,multi:!0}],imports:[P.Ps,j.JF,Na.c,p.b2,Js.ot,ge.Cv,wt,H.lN,jt.AuthModule,en.D,Pa,hl.ef,Ja,Ss.LD,Qa.Is,Xa.XK,zs.FA,W.Bb,Ns.Rh.forRoot({positionClass:"toast-top-right"})]})}return V})();p.q6().bootstrapModule(Oe).catch(V=>console.error(V))},9898:function(ni){ni.exports=function(){"use strict";var Wt,F,p;function j(o,P){if(Wt)if(F){var st="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Wt+")(sharedChunk); ("+F+")(sharedChunk); self.onerror = null;",_t={};Wt(_t),p=P(_t),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(p.workerUrl=window.URL.createObjectURL(new Blob([st],{type:"text/javascript"})))}else F=P;else Wt=P}return j(0,function(o){var P=typeof self<"u"?self:{},st="2.15.0";let _t;const ke={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==_t){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{_t=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):n}catch{_t=n}}return _t},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ke.API_URL)return null;try{const n=new URL(ke.API_URL);return"api.mapbox.cn"===n.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===n.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ye={supported:!1,testSupport:function(n){!it&&wt&&(yt?pt(n):lt=n)}};let lt,wt,it=!1,yt=!1;function pt(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,wt),n.isContextLost())return;Ye.supported=!0}catch{}n.deleteTexture(e),it=!0}P.document&&(wt=P.document.createElement("img"),wt.onload=function(){lt&&pt(lt),lt=null,yt=!0},wt.onerror=function(){it=!0,lt=null},wt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const jt="01";function en(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ct=nn;function nn(n,e,i,a){this.cx=3*n,this.bx=3*(i-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=i,this.p2y=a}nn.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(void 0===e&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var i=n,a=0;a<8;a++){var d=this.sampleCurveX(i)-n;if(Math.abs(d)<e)return i;var m=this.sampleCurveDerivativeX(i);if(Math.abs(m)<1e-6)break;i-=d/m}var g=0,v=1;for(i=n,a=0;a<20&&(d=this.sampleCurveX(i),!(Math.abs(d-n)<e));a++)n>d?g=i:v=i,i=.5*(v-g)+g;return i},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};var sn=en(Ct),Cn=kt;function kt(n,e){this.x=n,this.y=e}kt.prototype={clone:function(){return new kt(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,i=n.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),i=Math.sin(n),a=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=a,this},_rotateAround:function(n,e){var i=Math.cos(n),a=Math.sin(n),d=e.y+a*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-a*(this.y-e.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},kt.convert=function(n){return n instanceof kt?n:Array.isArray(n)?new kt(n[0],n[1]):n};var Ae=en(Cn);const ct=Math.PI/180,ht=180/Math.PI;function mt(n){return n*ct}function Je(n){return n*ht}const qt=[[0,0],[1,0],[1,1],[0,1]];function ln(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,i=e*n;return 4*(n<.5?i:3*(n-e)+i-.75)}function Dn(n,e,i,a){const d=new sn(n,e,i,a);return function(m){return d.solve(m)}}const ti=Dn(.25,.1,.25,1);function _n(n,e,i){return Math.min(i,Math.max(e,n))}function _i(n,e,i){return(i=_n((i-n)/(e-n),0,1))*i*(3-2*i)}function ii(n,e,i){const a=i-e,d=((n-e)%a+a)%a+e;return d===e?i:d}function vi(n,e,i){if(!n.length)return i(null,[]);let a=n.length;const d=new Array(n.length);let m=null;n.forEach((g,v)=>{e(g,(w,E)=>{w&&(m=w),d[v]=E,0==--a&&i(m,d)})})}function Ii(n){const e=[];for(const i in n)e.push(n[i]);return e}function Yt(n,...e){for(const i of e)for(const a in i)n[a]=i[a];return n}let Zt=1;function ze(){return Zt++}function Ge(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function Nt(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function We(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Ot(n,e){n.forEach(i=>{e[i]&&(e[i]=e[i].bind(e))})}function Re(n,e){return-1!==n.indexOf(e,n.length-e.length)}function ft(n,e,i){const a={};for(const d in n)a[d]=e.call(i||this,n[d],d,n);return a}function cn(n,e,i){const a={};for(const d in n)e.call(i||this,n[d],d,n)&&(a[d]=n[d]);return a}function kn(n){return Array.isArray(n)?n.map(kn):"object"==typeof n&&n?ft(n,kn):n}const an={};function Mn(n){an[n]||(typeof console<"u"&&console.warn(n),an[n]=!0)}function Gt(n,e,i){return(i.y-n.y)*(e.x-n.x)>(e.y-n.y)*(i.x-n.x)}function On(n){let e=0;for(let i,a,d=0,m=n.length,g=m-1;d<m;g=d++)i=n[d],a=n[g],e+=(a.x-i.x)*(i.y+a.y);return e}function xt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zt(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,a,d,m)=>{const g=d||m;return e[a]=!g||g.toLowerCase(),""}),e["max-age"]){const i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}let Wn=null;function Fn(n){if(null==Wn){const e=n.navigator?n.navigator.userAgent:null;Wn=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Wn}function It(n){try{const e=P[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function li(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}const je="mapbox-tiles";let $e,Ft,ce=500,De=50;function Qe(){try{return P.caches}catch{}}function Te(){Qe()&&!$e&&($e=P.caches.open(je))}function xe(n){const e=n.indexOf("?");if(e<0)return n;const a=function(d){const m=d.indexOf("?");return m>0?d.slice(m+1).split("&"):[]}(n).filter(d=>{const m=d.split("=");return"language"===m[0]||"worldview"===m[0]});return a.length?`${n.slice(0,e)}?${a.join("&")}`:n.slice(0,e)}let ve=1/0;const re={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(re);class Me extends Error{constructor(e,i,a){401===i&&me(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=i,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Pe=xt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===P.location.protocol?P.parent:P).location.href,Ut=function(n,e){if(!(/^file:/.test(i=n.url)||/^file:/.test(Pe())&&!/^\w+:/.test(i))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return function(a,d){const m=new P.AbortController,g=new P.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:Pe(),referrerPolicy:a.referrerPolicy,signal:m.signal});let v=!1,w=!1;const E=(R=g.url).indexOf("sku=")>0&&me(R);var R;"json"===a.type&&g.headers.set("Accept","application/json");const z=(ne,ae,ye)=>{if(w)return;if(ne&&"SecurityError"!==ne.message&&Mn(ne.toString()),ae&&ye)return Y(ae);const Be=Date.now();P.fetch(g).then(rt=>{if(rt.ok){const St=E?rt.clone():null;return Y(rt,St,Be)}return d(new Me(rt.statusText,rt.status,a.url))}).catch(rt=>{"AbortError"!==rt.name&&d(new Error(`${rt.message} ${a.url}`))})},Y=(ne,ae,ye)=>{("arrayBuffer"===a.type?ne.arrayBuffer():"json"===a.type?ne.json():ne.text()).then(Be=>{w||(ae&&ye&&function(rt,St,ot){if(Te(),!$e)return;const Dt={status:St.status,statusText:St.statusText,headers:new P.Headers};St.headers.forEach((gn,un)=>Dt.headers.set(un,gn));const Bt=zt(St.headers.get("Cache-Control")||"");if(Bt["no-store"])return;Bt["max-age"]&&Dt.headers.set("Expires",new Date(ot+1e3*Bt["max-age"]).toUTCString());const Lt=Dt.headers.get("Expires");Lt&&(new Date(Lt).getTime()-ot<42e4||function(gn,un){if(void 0===Ft)try{new Response(new ReadableStream),Ft=!0}catch{Ft=!1}Ft?un(gn.body):gn.blob().then(un)}(St,gn=>{const un=new P.Response(gn,Dt);Te(),$e&&$e.then(Rn=>Rn.put(xe(rt.url),un)).catch(Rn=>Mn(Rn.message))}))}(g,ae,ye),v=!0,d(null,Be,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))}).catch(Be=>{w||d(new Error(Be.message))})};return E?function(ne,ae){if(Te(),!$e)return ae(null);const ye=xe(ne.url);$e.then(Be=>{Be.match(ye).then(rt=>{const St=function(ot){if(!ot)return!1;const Dt=new Date(ot.headers.get("Expires")||0),Bt=zt(ot.headers.get("Cache-Control")||"");return Dt>Date.now()&&!Bt["no-cache"]}(rt);Be.delete(ye),St&&Be.put(ye,rt.clone()),ae(null,rt,St)}).catch(ae)}).catch(ae)}(g,z):z(null,null),{cancel:()=>{w=!0,v||m.abort()}}}(n,e);if(xt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var i;return function(a,d){const m=new P.XMLHttpRequest;m.open(a.method||"GET",a.url,!0),"arrayBuffer"===a.type&&(m.responseType="arraybuffer");for(const g in a.headers)m.setRequestHeader(g,a.headers[g]);return"json"===a.type&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials="include"===a.credentials,m.onerror=()=>{d(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||0===m.status)&&null!==m.response){let g=m.response;if("json"===a.type)try{g=JSON.parse(m.response)}catch(v){return d(v)}d(null,g,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else d(new Me(m.statusText,m.status,a.url))},m.send(a.body),{cancel:()=>m.abort()}}(n,e)},Bn=function(n,e){return Ut(Yt(n,{type:"arrayBuffer"}),e)};function En(n){const e=P.document.createElement("a");return e.href=n,e.protocol===P.document.location.protocol&&e.host===P.document.location.host}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ue,Ce;ue=[],Ce=0;const Ke=function(n,e){if(Ye.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Ce>=ke.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return ue.push(m),m}Ce++;let i=!1;const a=()=>{if(!i)for(i=!0,Ce--;ue.length&&Ce<ke.MAX_PARALLEL_IMAGE_REQUESTS;){const m=ue.shift(),{requestParameters:g,callback:v,cancelled:w}=m;w||(m.cancel=Ke(g,v).cancel)}},d=Bn(n,(m,g,v,w)=>{a(),m?e(m):g&&(P.createImageBitmap?function(E,R){const z=new P.Blob([new Uint8Array(E)],{type:"image/png"});P.createImageBitmap(z).then(Y=>{R(null,Y)}).catch(Y=>{R(new Error(`Could not load image because of ${Y.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(E,R)=>e(E,R,v,w)):function(E,R){const z=new P.Image,Y=P.URL;z.onload=()=>{R(null,z),Y.revokeObjectURL(z.src),z.onload=null,P.requestAnimationFrame(()=>{z.src=Ue})},z.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ne=new P.Blob([new Uint8Array(E)],{type:"image/png"});z.src=E.byteLength?Y.createObjectURL(ne):Ue}(g,(E,R)=>e(E,R,v,w)))});return{cancel:()=>{d.cancel(),a()}}},bt="NO_ACCESS_TOKEN";function Pt(n){return 0===n.indexOf("mapbox:")}function me(n){return ke.API_URL_REGEX.test(n)}function ee(n){return ke.API_CDN_URL_REGEX.test(n)}function U(n){return ke.API_STYLE_REGEX.test(n)&&!we(n)}function we(n){return ke.API_SPRITE_REGEX.test(n)}const nt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Jt(n){const e=n.match(nt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Kt(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}const Yn="mapbox.eventData";function Hn(n){if(!n)return null;const e=n.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(P.atob(e[1]).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ri{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const i=Hn(ke.ACCESS_TOKEN);let a="";return a=i&&i.u?P.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(d,m)=>String.fromCharCode(Number("0x"+m)))):ke.ACCESS_TOKEN||"",e?`${Yn}.${e}:${a}`:`${Yn}:${a}`}fetchEventData(){const e=It("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const d=P.localStorage.getItem(i);d&&(this.eventData=JSON.parse(d));const m=P.localStorage.getItem(a);m&&(this.anonId=m)}catch{Mn("Unable to read from LocalStorage")}}saveEventData(){const e=It("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{P.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{Mn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,i,a,d){if(!ke.EVENTS_URL)return;const m=Jt(ke.EVENTS_URL);m.params.push(`access_token=${d||ke.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(e).toISOString()},v=i?Yt(g,i):g,w={url:Kt(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([v])};var R;this.pendingRequest=(R=E=>{this.pendingRequest=null,a(E),this.saveEventData(),this.processRequests(d)},Ut(Yt(w,{method:"POST"}),R))}queueRequest(e,i){this.queue.push(e),this.processRequests(i)}}const zn=new class extends ri{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){ke.EVENTS_URL&&ke.ACCESS_TOKEN&&Array.isArray(n)&&n.some(i=>Pt(i)||me(i))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Hn(ke.ACCESS_TOKEN),i=e?e.u:ke.ACCESS_TOKEN;let a=i!==this.eventData.tokenU;We(this.anonId)||(this.anonId=Ge(),a=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),g=new Date(d),v=(d-this.eventData.lastSuccess)/864e5;a=a||v>=1||v<-1||m.getDate()!==g.getDate()}else a=!0;a?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:jt,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=d,this.eventData.tokenU=i)},n):this.processRequests()}},Rt=zn.postTurnstileEvent.bind(zn),Ee=new class extends ri{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,i,a){this.skuToken=e,this.errorCb=a,ke.EVENTS_URL&&(i||ke.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},i):this.errorCb(new Error(bt)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),We(this.anonId)||(this.anonId=Ge()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:jt,skuToken:this.skuToken,userId:this.anonId},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n))}},se=Ee.postMapLoadEvent.bind(Ee),le=new class extends ri{constructor(){super("gljs.performance")}postPerformanceEvent(n,e){ke.EVENTS_URL&&(n||ke.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},n)}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,performanceData:i}=this.queue.shift(),a=function(d){const m=P.performance.getEntriesByType("resource"),g=P.performance.getEntriesByType("mark"),v=function(Y){const ne={};if(Y)for(const ae in Y)if("other"!==ae)for(const ye of Y[ae]){const Be=`${ae}ResolveRangeMin`,rt=`${ae}ResolveRangeMax`,St=`${ae}RequestCount`,ot=`${ae}RequestCachedCount`;ne[Be]=Math.min(ne[Be]||1/0,ye.startTime),ne[rt]=Math.max(ne[rt]||-1/0,ye.responseEnd);const Dt=Bt=>{void 0===ne[Bt]&&(ne[Bt]=0),++ne[Bt]};void 0!==ye.transferSize&&0===ye.transferSize&&Dt(ot),Dt(St)}return ne}(function(Y,ne){const ae={};if(Y)for(const ye of Y){const Be=ne(ye);void 0===ae[Be]&&(ae[Be]=[]),ae[Be].push(ye)}return ae}(m,Rr)),w=P.devicePixelRatio,E=P.navigator.connection||P.navigator.mozConnection||P.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},z=(Y,ne,ae)=>{null!=ae&&Y.push({name:ne,value:ae.toString()})};for(const Y in v)z(R.counters,Y,v[Y]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(z(R.counters,"interactionRangeMin",d.interactionRange[0]),z(R.counters,"interactionRangeMax",d.interactionRange[1])),g)for(const Y of Object.keys(Ai)){const ne=Ai[Y],ae=g.find(ye=>ye.name===ne);ae&&z(R.counters,ne,ae.startTime)}return z(R.counters,"visibilityHidden",d.visibilityHidden),z(R.attributes,"style",function(Y){if(Y)for(const ne of Y){const ae=ne.name.split("?")[0];if(U(ae)){const ye=ae.split("/").slice(-2);if(2===ye.length)return`mapbox://styles/${ye[0]}/${ye[1]}`}}}(m)),z(R.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),z(R.attributes,"fogEnabled",d.fogEnabled?"true":"false"),z(R.attributes,"projection",d.projection),z(R.attributes,"zoom",d.zoom),z(R.metadata,"devicePixelRatio",w),z(R.metadata,"connectionEffectiveType",E?E.effectiveType:void 0),z(R.metadata,"navigatorUserAgent",P.navigator.userAgent),z(R.metadata,"screenWidth",P.screen.width),z(R.metadata,"screenHeight",P.screen.height),z(R.metadata,"windowWidth",P.innerWidth),z(R.metadata,"windowHeight",P.innerHeight),z(R.metadata,"mapWidth",d.width/w),z(R.metadata,"mapHeight",d.height/w),z(R.metadata,"webglRenderer",d.renderer),z(R.metadata,"webglVendor",d.vendor),z(R.metadata,"sdkVersion",st),z(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(i);for(const d of a.metadata);for(const d of a.counters);for(const d of a.attributes);this.postEvent(e,a,()=>{},n)}},Fe=le.postPerformanceEvent.bind(le),Et=new class extends ri{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,i,a){if(!ke.API_URL||!ke.SESSION_PATH)return;const d=Jt(ke.API_URL+ke.SESSION_PATH);d.params.push(`sku=${e||""}`),d.params.push(`access_token=${a||ke.ACCESS_TOKEN||""}`);const m={url:Kt(d),headers:{"Content-Type":"text/plain"}};var v;this.pendingRequest=(v=g=>{this.pendingRequest=null,i(g),this.saveEventData(),this.processRequests(a)},Ut(Yt(m,{method:"GET"}),v))}getSessionAPI(n,e,i,a){this.skuToken=e,this.errorCb=a,ke.SESSION_PATH&&ke.API_URL&&(i||ke.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},i):this.errorCb(new Error(bt)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||this.getSession(i,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n)}},rn=Et.getSessionAPI.bind(Et),Gn=new Set,Ai={create:"create",load:"load",fullLoad:"fullLoad"},yr={mark(n){P.performance.mark(n)},measure(n,e,i){P.performance.measure(n,e,i)}};function Rr(n){const e=n.name.split("?")[0];return ee(e)&&e.includes("mapbox-gl.js")?"javascript":ee(e)&&e.includes("mapbox-gl.css")?"css":ke.API_FONTS_REGEX.test(e)?"fontRange":we(e)?"sprite":U(e)?"style":ke.API_TILEJSON_REGEX.test(e)?"tilejson":"other"}const Wi=P.performance;function oo(n){const e=n?n.url.toString():void 0;return Wi.getEntriesByName(e)}let vr,so,To,$i;const gr={now:()=>void 0!==To?To:P.performance.now(),setNow(n){To=n},restoreNow(){To=void 0},frame(n){const e=P.requestAnimationFrame(n);return{cancel:()=>P.cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:i,height:a}=n;$i||($i=P.document.createElement("canvas"));const d=$i.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(i>$i.width||a>$i.height)&&($i.width=i,$i.height=a),d.clearRect(-e,-e,i+2*e,a+2*e),d.drawImage(n,0,0,i,a),d.getImageData(-e,-e,i+2*e,a+2*e)},resolveURL:n=>(vr||(vr=P.document.createElement("a")),vr.href=n,vr.href),get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(null==so&&(so=P.matchMedia("(prefers-reduced-motion: reduce)")),so.matches)}};function br(n,e,i){i[n]&&-1!==i[n].indexOf(e)||(i[n]=i[n]||[],i[n].push(e))}function Tr(n,e,i){if(i&&i[n]){const a=i[n].indexOf(e);-1!==a&&i[n].splice(a,1)}}class Hr{constructor(e,i={}){Yt(this,i),this.type=e}}class Ho extends Hr{constructor(e,i={}){super("error",Yt({error:e},i))}}class wo{on(e,i){return this._listeners=this._listeners||{},br(e,i,this._listeners),this}off(e,i){return Tr(e,i,this._listeners),Tr(e,i,this._oneTimeListeners),this}once(e,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},br(e,i,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,i){"string"==typeof e&&(e=new Hr(e,i||{}));const a=e.type;if(this.listens(a)){e.target=this;const d=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const v of d)v.call(this,e);const m=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const v of m)Tr(a,v,this._oneTimeListeners),v.call(this,e);const g=this._eventedParent;g&&(Yt(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),g.fire(e))}else e instanceof Ho&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,i){return this._eventedParent=e,this._eventedParentData=i,this}}var wn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function at(n,...e){for(const i of e)for(const a in i)n[a]=i[a];return n}function vt(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function I(n){if(Array.isArray(n))return n.map(I);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const i in n)e[i]=I(n[i]);return e}return vt(n)}class ie extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}var Se=ie;class et{constructor(e,i=[]){this.parent=e,this.bindings={};for(const[a,d]of i)this.bindings[a]=d}concat(e){return new et(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var An=et;const mi={kind:"null"},fn={kind:"number"},xi={kind:"string"},wi={kind:"boolean"},yi={kind:"color"},xr={kind:"object"},Ni={kind:"value"},Qr={kind:"collator"},Ao={kind:"formatted"},_r={kind:"resolvedImage"};function mo(n,e){return{kind:"array",itemType:n,N:e}}function rr(n){if("array"===n.kind){const e=rr(n.itemType);return"number"==typeof n.N?`array<${e}, ${n.N}>`:"value"===n.itemType.kind?"array":`array<${e}>`}return n.kind}const cr=[mi,fn,xi,wi,yi,Ao,xr,mo(Ni),_r];function Co(n,e){if("error"===e.kind)return null;if("array"===n.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Co(n.itemType,e.itemType))&&("number"!=typeof n.N||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if("value"===n.kind)for(const i of cr)if(!Co(i,e))return null}return`Expected ${rr(n)} but found ${rr(e)} instead.`}function Es(n,e){return e.some(i=>i.kind===n.kind)}function fr(n,e){return e.some(i=>"null"===i?null===n:"array"===i?Array.isArray(n):"object"===i?n&&!Array.isArray(n)&&"object"==typeof n:i===typeof n)}var Go,ma={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Gs(n){return(n=Math.round(n))<0?0:n>255?255:n}function $s(n){return Gs("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n))}function So(n){return(e="%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function ko(n,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?n+(e-n)*i*6:2*i<1?e:3*i<2?n+(e-n)*(2/3-i)*6:n}try{Go={}.parseCSSColor=function(n){var e,i=n.replace(/ /g,"").toLowerCase();if(i in ma)return ma[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var a=i.indexOf("("),d=i.indexOf(")");if(-1!==a&&d+1===i.length){var m=i.substr(0,a),g=i.substr(a+1,d-(a+1)).split(","),v=1;switch(m){case"rgba":if(4!==g.length)return null;v=So(g.pop());case"rgb":return 3!==g.length?null:[$s(g[0]),$s(g[1]),$s(g[2]),v];case"hsla":if(4!==g.length)return null;v=So(g.pop());case"hsl":if(3!==g.length)return null;var w=(parseFloat(g[0])%360+360)%360/360,E=So(g[1]),R=So(g[2]),z=R<=.5?R*(E+1):R+E-R*E,Y=2*R-z;return[Gs(255*ko(Y,z,w+1/3)),Gs(255*ko(Y,z,w)),Gs(255*ko(Y,z,w-1/3)),v];default:return null}}return null}}catch{}class dr{constructor(e,i,a,d=1){this.r=e,this.g=i,this.b=a,this.a=d}static parse(e){if(!e)return;if(e instanceof dr)return e;if("string"!=typeof e)return;const i=Go(e);return i?new dr(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[e,i,a,d]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(a)},${d})`}toArray(){const{r:e,g:i,b:a,a:d}=this;return 0===d?[0,0,0,0]:[255*e/d,255*i/d,255*a/d,d]}toArray01(){const{r:e,g:i,b:a,a:d}=this;return 0===d?[0,0,0,0]:[e/d,i/d,a/d,d]}toArray01PremultipliedAlpha(){const{r:e,g:i,b:a,a:d}=this;return[e,i,a,d]}}dr.black=new dr(0,0,0,1),dr.white=new dr(1,1,1,1),dr.transparent=new dr(0,0,0,0),dr.red=new dr(1,0,0,1),dr.blue=new dr(0,0,1,1);var Fr=dr;class go{constructor(e,i,a){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class _o{constructor(e,i,a,d,m){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=a,this.fontStack=d,this.textColor=m}}class ao{constructor(e){this.sections=e}static fromString(e){return new ao([new _o(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof ao?e:ao.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const i of this.sections){if(i.image){e.push(["image",i.image.name]);continue}e.push(i.text);const a={};i.fontStack&&(a["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(a["font-scale"]=i.scale),i.textColor&&(a["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(a)}return e}}class Ar{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ar({name:e,available:!1}):null}serialize(){return["image",this.name]}}function _s(n,e,i,a){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:`Invalid rgba value [${[n,e,i,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof a?[n,e,i,a]:[n,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zr(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof Fr||n instanceof go||n instanceof ao||n instanceof Ar)return!0;if(Array.isArray(n)){for(const e of n)if(!zr(e))return!1;return!0}if("object"==typeof n){for(const e in n)if(!zr(n[e]))return!1;return!0}return!1}function Sr(n){if(null===n)return mi;if("string"==typeof n)return xi;if("boolean"==typeof n)return wi;if("number"==typeof n)return fn;if(n instanceof Fr)return yi;if(n instanceof go)return Qr;if(n instanceof ao)return Ao;if(n instanceof Ar)return _r;if(Array.isArray(n)){const e=n.length;let i;for(const a of n){const d=Sr(a);if(i){if(i===d)continue;i=Ni;break}i=d}return mo(i||Ni,e)}return xr}function Ds(n){const e=typeof n;return null===n?"":"string"===e||"number"===e||"boolean"===e?String(n):n instanceof Fr||n instanceof ao||n instanceof Ar?n.toString():JSON.stringify(n)}class ns{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(2!==e.length)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!zr(e[1]))return i.error("invalid value");const a=e[1];let d=Sr(a);const m=i.expectedType;return"array"!==d.kind||0!==d.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(d=m),new ns(d,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Fr?["rgba"].concat(this.value.toArray()):this.value instanceof ao?this.value.serialize():this.value}}var $o=ns,yo=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const cs={string:xi,number:fn,boolean:wi,object:xr};class Zs{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let a,d=1;const m=e[0];if("array"===m){let v,w;if(e.length>2){const E=e[1];if("string"!=typeof E||!(E in cs)||"object"===E)return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=cs[E],d++}else v=Ni;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);w=e[2],d++}a=mo(v,w)}else a=cs[m];const g=[];for(;d<e.length;d++){const v=i.parse(e[d],d,Ni);if(!v)return null;g.push(v)}return new Zs(a,g)}evaluate(e){for(let i=0;i<this.args.length;i++){const a=this.args[i].evaluate(e);if(!Co(this.type,Sr(a)))return a;if(i===this.args.length-1)throw new yo(`Expected value to be of type ${rr(this.type)}, but found ${rr(Sr(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,i=[e.kind];if("array"===e.kind){const a=e.itemType;if("string"===a.kind||"number"===a.kind||"boolean"===a.kind){i.push(a.kind);const d=e.N;("number"==typeof d||this.args.length>1)&&i.push(d)}}return i.concat(this.args.map(a=>a.serialize()))}}var Ms=Zs;class Zo{constructor(e){this.type=Ao,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&"object"==typeof a)return i.error("First argument must be an image or text section.");const d=[];let m=!1;for(let g=1;g<=e.length-1;++g){const v=e[g];if(m&&"object"==typeof v&&!Array.isArray(v)){m=!1;let w=null;if(v["font-scale"]&&(w=i.parse(v["font-scale"],1,fn),!w))return null;let E=null;if(v["text-font"]&&(E=i.parse(v["text-font"],1,mo(xi)),!E))return null;let R=null;if(v["text-color"]&&(R=i.parse(v["text-color"],1,yi),!R))return null;const z=d[d.length-1];z.scale=w,z.font=E,z.textColor=R}else{const w=i.parse(e[g],1,Ni);if(!w)return null;const E=w.type.kind;if("string"!==E&&"value"!==E&&"null"!==E&&"resolvedImage"!==E)return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,d.push({content:w,scale:null,font:null,textColor:null})}}return new Zo(d)}evaluate(e){return new ao(this.sections.map(i=>{const a=i.content.evaluate(e);return Sr(a)===_r?new _o("",a,null,null,null):new _o(Ds(a),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(const i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const i of this.sections){e.push(i.content.serialize());const a={};i.scale&&(a["font-scale"]=i.scale.serialize()),i.font&&(a["text-font"]=i.font.serialize()),i.textColor&&(a["text-color"]=i.textColor.serialize()),e.push(a)}return e}}class ga{constructor(e){this.type=_r,this.input=e}static parse(e,i){if(2!==e.length)return i.error("Expected two arguments.");const a=i.parse(e[1],1,xi);return a?new ga(a):i.error("No image name provided.")}evaluate(e){const i=this.input.evaluate(e),a=Ar.fromString(i);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(i)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ws={"to-boolean":wi,"to-color":yi,"to-number":fn,"to-string":xi};class _a{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const a=e[0];if(("to-boolean"===a||"to-string"===a)&&2!==e.length)return i.error("Expected one argument.");const d=Ws[a],m=[];for(let g=1;g<e.length;g++){const v=i.parse(e[g],g,Ni);if(!v)return null;m.push(v)}return new _a(d,m)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let i,a;for(const d of this.args){if(i=d.evaluate(e),a=null,i instanceof Fr)return i;if("string"==typeof i){const m=e.parseColor(i);if(m)return m}else if(Array.isArray(i)&&(a=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:_s(i[0],i[1],i[2],i[3]),!a))return new Fr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new yo(a||`Could not parse color from value '${"string"==typeof i?i:String(JSON.stringify(i))}'`)}if("number"===this.type.kind){let i=null;for(const a of this.args){if(i=a.evaluate(e),null===i)return 0;const d=Number(i);if(!isNaN(d))return d}throw new yo(`Could not convert ${JSON.stringify(i)} to number.`)}return"formatted"===this.type.kind?ao.fromString(Ds(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ar.fromString(Ds(this.args[0].evaluate(e))):Ds(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Zo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ga(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}var us=_a;const ds=["Unknown","Point","LineString","Polygon"];var Fa=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ds[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*e-n[0])+this.featureDistanceData.bearing[1]*(a*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=Fr.parse(n)),e}};class Ys{constructor(e,i,a,d){this.name=e,this.type=i,this._evaluate=a,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){const a=e[0],d=Ys.definitions[a];if(!d)return i.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(d)?d[0]:d.type,g=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,v=g.filter(([E])=>!Array.isArray(E)||E.length===e.length-1);let w=null;for(const[E,R]of v){w=new Do(i.registry,i.path,null,i.scope);const z=[];let Y=!1;for(let ne=1;ne<e.length;ne++){const ae=e[ne],ye=Array.isArray(E)?E[ne-1]:E.type,Be=w.parse(ae,1+z.length,ye);if(!Be){Y=!0;break}z.push(Be)}if(!Y)if(Array.isArray(E)&&E.length!==z.length)w.error(`Expected ${E.length} arguments, but found ${z.length} instead.`);else{for(let ne=0;ne<z.length;ne++){const ae=Array.isArray(E)?E[ne]:E.type,ye=z[ne];w.concat(ne+1).checkSubtype(ae,ye.type)}if(0===w.errors.length)return new Ys(a,m,R,z)}}if(1===v.length)i.errors.push(...w.errors);else{const E=(v.length?v:g).map(([z])=>{return Y=z,Array.isArray(Y)?`(${Y.map(rr).join(", ")})`:`(${rr(Y.type)}...)`;var Y}).join(" | "),R=[];for(let z=1;z<e.length;z++){const Y=i.parse(e[z],1+R.length);if(!Y)return null;R.push(rr(Y.type))}i.error(`Expected arguments of type ${E}, but found (${R.join(", ")}) instead.`)}return null}static register(e,i){Ys.definitions=i;for(const a in i)e[a]=Ys}}var lo=Ys;class Ps{constructor(e,i,a){this.type=Qr,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(2!==e.length)return i.error("Expected one argument.");const a=e[1];if("object"!=typeof a||Array.isArray(a))return i.error("Collator options argument must be an object.");const d=i.parse(void 0!==a["case-sensitive"]&&a["case-sensitive"],1,wi);if(!d)return null;const m=i.parse(void 0!==a["diacritic-sensitive"]&&a["diacritic-sensitive"],1,wi);if(!m)return null;let g=null;return a.locale&&(g=i.parse(a.locale,1,xi),!g)?null:new Ps(d,m,g)}evaluate(e){return new go(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const hs=8192;function sa(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function ys(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Ro(n,e){const i=(180+n[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(i*d*hs),Math.round(a*d*hs)]}function aa(n,e,i){const a=n[0]-e[0],d=n[1]-e[1],m=n[0]-i[0],g=n[1]-i[1];return a*g-m*d==0&&a*m<=0&&d*g<=0}function qs(n,e){let i=!1;for(let g=0,v=e.length;g<v;g++){const w=e[g];for(let E=0,R=w.length;E<R-1;E++){if(aa(n,w[E],w[E+1]))return!1;(d=w[E])[1]>(a=n)[1]!=(m=w[E+1])[1]>a[1]&&a[0]<(m[0]-d[0])*(a[1]-d[1])/(m[1]-d[1])+d[0]&&(i=!i)}}var a,d,m;return i}function ya(n,e){for(let i=0;i<e.length;i++)if(qs(n,e[i]))return!0;return!1}function Ea(n,e,i,a){const d=a[0]-i[0],m=a[1]-i[1],g=(n[0]-i[0])*m-d*(n[1]-i[1]),v=(e[0]-i[0])*m-d*(e[1]-i[1]);return g>0&&v<0||g<0&&v>0}function Ts(n,e,i){for(const E of i)for(let R=0;R<E.length-1;++R)if((v=[(g=E[R+1])[0]-(m=E[R])[0],g[1]-m[1]])[0]*(w=[(d=e)[0]-(a=n)[0],d[1]-a[1]])[1]-v[1]*w[0]!=0&&Ea(a,d,m,g)&&Ea(m,g,a,d))return!0;var a,d,m,g,v,w;return!1}function Zi(n,e){for(let i=0;i<n.length;++i)if(!qs(n[i],e))return!1;for(let i=0;i<n.length-1;++i)if(Ts(n[i],n[i+1],e))return!1;return!0}function Za(n,e){for(let i=0;i<e.length;i++)if(Zi(n,e[i]))return!0;return!1}function Wa(n,e,i){const a=[];for(let d=0;d<n.length;d++){const m=[];for(let g=0;g<n[d].length;g++){const v=Ro(n[d][g],i);sa(e,v),m.push(v)}a.push(m)}return a}function Da(n,e,i){const a=[];for(let d=0;d<n.length;d++){const m=Wa(n[d],e,i);a.push(m)}return a}function Ma(n,e,i,a){if(n[0]<i[0]||n[0]>i[2]){const d=.5*a;let m=n[0]-i[0]>d?-a:i[0]-n[0]>d?a:0;0===m&&(m=n[0]-i[2]>d?-a:i[2]-n[0]>d?a:0),n[0]+=m}sa(e,n)}function Nr(n,e,i,a){const d=Math.pow(2,a.z)*hs,m=[a.x*hs,a.y*hs],g=[];if(!n)return g;for(const v of n)for(const w of v){const E=[w.x+m[0],w.y+m[1]];Ma(E,e,i,d),g.push(E)}return g}function Ta(n,e,i,a){const d=Math.pow(2,a.z)*hs,m=[a.x*hs,a.y*hs],g=[];if(!n)return g;for(const w of n){const E=[];for(const R of w){const z=[R.x+m[0],R.y+m[1]];sa(e,z),E.push(z)}g.push(E)}if(e[2]-e[0]<=d/2){(v=e)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const w of g)for(const E of w)Ma(E,e,i,d)}var v;return g}class Zr{constructor(e,i){this.type=wi,this.geojson=e,this.geometries=i}static parse(e,i){if(2!==e.length)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(zr(e[1])){const a=e[1];if("FeatureCollection"===a.type)for(let d=0;d<a.features.length;++d){const m=a.features[d].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Zr(a,a.features[d].geometry)}else if("Feature"===a.type){const d=a.geometry.type;if("Polygon"===d||"MultiPolygon"===d)return new Zr(a,a.geometry)}else if("Polygon"===a.type||"MultiPolygon"===a.type)return new Zr(a,a)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(i,a){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=i.canonicalID();if(!g)return!1;if("Polygon"===a.type){const v=Wa(a.coordinates,m,g),w=Nr(i.geometry(),d,m,g);if(!ys(d,m))return!1;for(const E of w)if(!qs(E,v))return!1}if("MultiPolygon"===a.type){const v=Da(a.coordinates,m,g),w=Nr(i.geometry(),d,m,g);if(!ys(d,m))return!1;for(const E of w)if(!ya(E,v))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(i,a){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=i.canonicalID();if(!g)return!1;if("Polygon"===a.type){const v=Wa(a.coordinates,m,g),w=Ta(i.geometry(),d,m,g);if(!ys(d,m))return!1;for(const E of w)if(!Zi(E,v))return!1}if("MultiPolygon"===a.type){const v=Da(a.coordinates,m,g),w=Ta(i.geometry(),d,m,g);if(!ys(d,m))return!1;for(const E of w)if(!Za(E,v))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wr=Zr;function Eo(n){if(n instanceof lo&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof wr)return!1;let e=!0;return n.eachChild(i=>{e&&!Eo(i)&&(e=!1)}),e}function Lr(n){if(n instanceof lo&&"feature-state"===n.name)return!1;let e=!0;return n.eachChild(i=>{e&&!Lr(i)&&(e=!1)}),e}function Vr(n,e){if(n instanceof lo&&e.indexOf(n.name)>=0)return!1;let i=!0;return n.eachChild(a=>{i&&!Vr(a,e)&&(i=!1)}),i}class Os{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(2!==e.length||"string"!=typeof e[1])return i.error("'var' expression requires exactly one string literal argument.");const a=e[1];return i.scope.has(a)?new Os(a,i.scope.get(a)):i.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ps=Os;class vs{constructor(e,i=[],a,d=new An,m=[]){this.registry=e,this.path=i,this.key=i.map(g=>`[${g}]`).join(""),this.scope=d,this.errors=m,this.expectedType=a}parse(e,i,a,d,m={}){return i?this.concat(i,a,d)._parse(e,m):this._parse(e,m)}_parse(e,i){function a(d,m,g){return"assert"===g?new Ms(m,[d]):"coerce"===g?new us(m,[d]):d}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if("string"!=typeof d)return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[d];if(m){let g=m.parse(e,this);if(!g)return null;if(this.expectedType){const v=this.expectedType,w=g.type;if("string"!==v.kind&&"number"!==v.kind&&"boolean"!==v.kind&&"object"!==v.kind&&"array"!==v.kind||"value"!==w.kind)if("color"!==v.kind&&"formatted"!==v.kind&&"resolvedImage"!==v.kind||"value"!==w.kind&&"string"!==w.kind){if(this.checkSubtype(v,w))return null}else g=a(g,v,i.typeAnnotation||"coerce");else g=a(g,v,i.typeAnnotation||"assert")}if(!(g instanceof $o)&&"resolvedImage"!==g.type.kind&&ks(g)){const v=new Fa;try{g=new $o(g.type,g.evaluate(v))}catch(w){return this.error(w.message),null}}return g}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,i,a){const d="number"==typeof e?this.path.concat(e):this.path,m=a?this.scope.concat(a):this.scope;return new vs(this.registry,d,i||null,m,this.errors)}error(e,...i){const a=`${this.key}${i.map(d=>`[${d}]`).join("")}`;this.errors.push(new Se(a,e))}checkSubtype(e,i){const a=Co(e,i);return a&&this.error(a),a}}var Do=vs;function ks(n){if(n instanceof ps)return ks(n.boundExpression);if(n instanceof lo&&"error"===n.name||n instanceof Ps||n instanceof wr)return!1;const e=n instanceof us||n instanceof Ms;let i=!0;return n.eachChild(a=>{i=e?i&&ks(a):i&&a instanceof $o}),!!i&&Eo(n)&&Vr(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Rs(n,e){const i=n.length-1;let a,d,m=0,g=i,v=0;for(;m<=g;)if(v=Math.floor((m+g)/2),a=n[v],d=n[v+1],a<=e){if(v===i||e<d)return v;m=v+1}else{if(!(a>e))throw new yo("Input is not a number.");g=v-1}return 0}class la{constructor(e,i,a){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(const[d,m]of a)this.labels.push(d),this.outputs.push(m)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");const a=i.parse(e[1],1,fn);if(!a)return null;const d=[];let m=null;i.expectedType&&"value"!==i.expectedType.kind&&(m=i.expectedType);for(let g=1;g<e.length;g+=2){const v=1===g?-1/0:e[g],w=e[g+1],E=g,R=g+1;if("number"!=typeof v)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(d.length&&d[d.length-1][0]>=v)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const z=i.parse(w,R,m);if(!z)return null;m=m||z.type,d.push([v,z])}return new la(m,a,d)}evaluate(e){const i=this.labels,a=this.outputs;if(1===i.length)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=i[0])return a[0].evaluate(e);const m=i.length;return d>=i[m-1]?a[m-1].evaluate(e):a[Rs(i,d)].evaluate(e)}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}var Fo=la;function Yi(n,e,i){return n*(1-i)+e*i}var vo=Object.freeze({__proto__:null,array:function(n,e,i){return n.map((a,d)=>Yi(a,e[d],i))},color:function(n,e,i){return new Fr(Yi(n.r,e.r,i),Yi(n.g,e.g,i),Yi(n.b,e.b,i),Yi(n.a,e.a,i))},number:Yi});const zi=.95047,Fs=1.08883,oe=4/29,te=6/29,q=3*te*te,Le=te*te*te,xn=Math.PI/180,Ti=180/Math.PI;function Ur(n){return n>Le?Math.pow(n,1/3):n/q+oe}function Sn(n){return n>te?n*n*n:q*(n-oe)}function Xi(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function bs(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Aa(n){const e=bs(n.r),i=bs(n.g),a=bs(n.b),d=Ur((.4124564*e+.3575761*i+.1804375*a)/zi),m=Ur((.2126729*e+.7151522*i+.072175*a)/1);return{l:116*m-16,a:500*(d-m),b:200*(m-Ur((.0193339*e+.119192*i+.9503041*a)/Fs)),alpha:n.a}}function Ir(n){let e=(n.l+16)/116,i=isNaN(n.a)?e:e+n.a/500,a=isNaN(n.b)?e:e-n.b/200;return e=1*Sn(e),i=zi*Sn(i),a=Fs*Sn(a),new Fr(Xi(3.2404542*i-1.5371385*e-.4985314*a),Xi(-.969266*i+1.8760108*e+.041556*a),Xi(.0556434*i-.2040259*e+1.0572252*a),n.alpha)}function Ya(n,e,i){const a=e-n;return n+i*(a>180||a<-180?a-360*Math.round(a/360):a)}const ca={forward:Aa,reverse:Ir,interpolate:function(n,e,i){return{l:Yi(n.l,e.l,i),a:Yi(n.a,e.a,i),b:Yi(n.b,e.b,i),alpha:Yi(n.alpha,e.alpha,i)}}},Lo={forward:function(n){const{l:e,a:i,b:a}=Aa(n),d=Math.atan2(a,i)*Ti;return{h:d<0?d+360:d,c:Math.sqrt(i*i+a*a),l:e,alpha:n.a}},reverse:function(n){const e=n.h*xn,i=n.c;return Ir({l:n.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:n.alpha})},interpolate:function(n,e,i){return{h:Ya(n.h,e.h,i),c:Yi(n.c,e.c,i),l:Yi(n.l,e.l,i),alpha:Yi(n.alpha,e.alpha,i)}}};var Sa=Object.freeze({__proto__:null,hcl:Lo,lab:ca});class Ls{constructor(e,i,a,d,m){this.type=e,this.operator=i,this.interpolation=a,this.input=d,this.labels=[],this.outputs=[];for(const[g,v]of m)this.labels.push(g),this.outputs.push(v)}static interpolationFactor(e,i,a,d){let m=0;if("exponential"===e.name)m=qa(i,e.base,a,d);else if("linear"===e.name)m=qa(i,1,a,d);else if("cubic-bezier"===e.name){const g=e.controlPoints;m=new sn(g[0],g[1],g[2],g[3]).solve(qa(i,1,a,d))}return m}static parse(e,i){let[a,d,m,...g]=e;if(!Array.isArray(d)||0===d.length)return i.error("Expected an interpolation type expression.",1);if("linear"===d[0])d={name:"linear"};else if("exponential"===d[0]){const E=d[1];if("number"!=typeof E)return i.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:E}}else{if("cubic-bezier"!==d[0])return i.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const E=d.slice(1);if(4!==E.length||E.some(R=>"number"!=typeof R||R<0||R>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:E}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(m=i.parse(m,2,fn),!m)return null;const v=[];let w=null;"interpolate-hcl"===a||"interpolate-lab"===a?w=yi:i.expectedType&&"value"!==i.expectedType.kind&&(w=i.expectedType);for(let E=0;E<g.length;E+=2){const R=g[E],z=g[E+1],Y=E+3,ne=E+4;if("number"!=typeof R)return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(v.length&&v[v.length-1][0]>=R)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ae=i.parse(z,ne,w);if(!ae)return null;w=w||ae.type,v.push([R,ae])}return"number"===w.kind||"color"===w.kind||"array"===w.kind&&"number"===w.itemType.kind&&"number"==typeof w.N?new Ls(w,a,d,m,v):i.error(`Type ${rr(w)} is not interpolatable.`)}evaluate(e){const i=this.labels,a=this.outputs;if(1===i.length)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=i[0])return a[0].evaluate(e);const m=i.length;if(d>=i[m-1])return a[m-1].evaluate(e);const g=Rs(i,d),v=Ls.interpolationFactor(this.interpolation,d,i[g],i[g+1]),w=a[g].evaluate(e),E=a[g+1].evaluate(e);return"interpolate"===this.operator?vo[this.type.kind.toLowerCase()](w,E,v):"interpolate-hcl"===this.operator?Lo.reverse(Lo.interpolate(Lo.forward(w),Lo.forward(E),v)):ca.reverse(ca.interpolate(ca.forward(w),ca.forward(E),v))}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)i.push(this.labels[a],this.outputs[a].serialize());return i}}function qa(n,e,i,a){const d=a-i,m=n-i;return 0===d?0:1===e?m/d:(Math.pow(e,m)-1)/(Math.pow(e,d)-1)}var As=Ls;class va{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let a=null;const d=i.expectedType;d&&"value"!==d.kind&&(a=d);const m=[];for(const v of e.slice(1)){const w=i.parse(v,1+m.length,a,void 0,{typeAnnotation:"omit"});if(!w)return null;a=a||w.type,m.push(w)}const g=d&&m.some(v=>Co(d,v.type));return new va(g?Ni:a,m)}evaluate(e){let i,a=null,d=0;for(const m of this.args){if(d++,a=m.evaluate(e),a&&a instanceof Ar&&!a.available&&(i||(i=a),a=null,d===this.args.length))return i;if(null!==a)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var Mo=va;class Bo{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let m=1;m<e.length-1;m+=2){const g=e[m];if("string"!=typeof g)return i.error(`Expected string, but found ${typeof g} instead.`,m);if(/[^a-zA-Z0-9_]/.test(g))return i.error("Variable names must contain only alphanumeric characters or '_'.",m);const v=i.parse(e[m+1],m+1);if(!v)return null;a.push([g,v])}const d=i.parse(e[e.length-1],e.length-1,i.expectedType,a);return d?new Bo(a,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[i,a]of this.bindings)e.push(i,a.serialize());return e.push(this.result.serialize()),e}}var ua=Bo;class is{constructor(e,i,a){this.type=e,this.index=i,this.input=a}static parse(e,i){if(3!==e.length)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,fn),d=i.parse(e[2],2,mo(i.expectedType||Ni));return a&&d?new is(d.type.itemType,a,d):null}evaluate(e){const i=this.index.evaluate(e),a=this.input.evaluate(e);if(i<0)throw new yo(`Array index out of bounds: ${i} < 0.`);if(i>=a.length)throw new yo(`Array index out of bounds: ${i} > ${a.length-1}.`);if(i!==Math.floor(i))throw new yo(`Array index must be an integer, but found ${i} instead.`);return a[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ks=is;class Ia{constructor(e,i){this.type=wi,this.needle=e,this.haystack=i}static parse(e,i){if(3!==e.length)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Ni),d=i.parse(e[2],2,Ni);return a&&d?Es(a.type,[wi,xi,fn,mi,Ni])?new Ia(a,d):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${rr(a.type)} instead`):null}evaluate(e){const i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(null==a)return!1;if(!fr(i,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${rr(Sr(i))} instead.`);if(!fr(a,["string","array"]))throw new yo(`Expected second argument to be of type array or string, but found ${rr(Sr(a))} instead.`);return a.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Bs=Ia;class ba{constructor(e,i,a){this.type=fn,this.needle=e,this.haystack=i,this.fromIndex=a}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Ni),d=i.parse(e[2],2,Ni);if(!a||!d)return null;if(!Es(a.type,[wi,xi,fn,mi,Ni]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${rr(a.type)} instead`);if(4===e.length){const m=i.parse(e[3],3,fn);return m?new ba(a,d,m):null}return new ba(a,d)}evaluate(e){const i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!fr(i,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${rr(Sr(i))} instead.`);if(!fr(a,["string","array"]))throw new yo(`Expected second argument to be of type array or string, but found ${rr(Sr(a))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(e);return a.indexOf(i,d)}return a.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var cl=ba;class Pa{constructor(e,i,a,d,m,g){this.inputType=e,this.type=i,this.input=a,this.cases=d,this.outputs=m,this.otherwise=g}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let a,d;i.expectedType&&"value"!==i.expectedType.kind&&(d=i.expectedType);const m={},g=[];for(let E=2;E<e.length-1;E+=2){let R=e[E];const z=e[E+1];Array.isArray(R)||(R=[R]);const Y=i.concat(E);if(0===R.length)return Y.error("Expected at least one branch label.");for(const ae of R){if("number"!=typeof ae&&"string"!=typeof ae)return Y.error("Branch labels must be numbers or strings.");if("number"==typeof ae&&Math.abs(ae)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof ae&&Math.floor(ae)!==ae)return Y.error("Numeric branch labels must be integer values.");if(a){if(Y.checkSubtype(a,Sr(ae)))return null}else a=Sr(ae);if(void 0!==m[String(ae)])return Y.error("Branch labels must be unique.");m[String(ae)]=g.length}const ne=i.parse(z,E,d);if(!ne)return null;d=d||ne.type,g.push(ne)}const v=i.parse(e[1],1,Ni);if(!v)return null;const w=i.parse(e[e.length-1],e.length-1,d);return w?"value"!==v.type.kind&&i.concat(1).checkSubtype(a,v.type)?null:new Pa(a,d,v,m,g,w):null}evaluate(e){const i=this.input.evaluate(e);return(Sr(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),a=[],d={};for(const g of i){const v=d[this.cases[g]];void 0===v?(d[this.cases[g]]=a.length,a.push([this.cases[g],[g]])):a[v][1].push(g)}const m=g=>"number"===this.inputType.kind?Number(g):g;for(const[g,v]of a)e.push(1===v.length?m(v[0]):v.map(m)),e.push(this.outputs[g].serialize());return e.push(this.otherwise.serialize()),e}}var ul=Pa;class La{constructor(e,i,a){this.type=e,this.branches=i,this.otherwise=a}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let a;i.expectedType&&"value"!==i.expectedType.kind&&(a=i.expectedType);const d=[];for(let g=1;g<e.length-1;g+=2){const v=i.parse(e[g],g,wi);if(!v)return null;const w=i.parse(e[g+1],g+1,a);if(!w)return null;d.push([v,w]),a=a||w.type}const m=i.parse(e[e.length-1],e.length-1,a);return m?new La(a,d,m):null}evaluate(e){for(const[i,a]of this.branches)if(i.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[i,a]of this.branches)e(i),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var dl=La;class Ba{constructor(e,i,a,d){this.type=e,this.input=i,this.beginIndex=a,this.endIndex=d}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Ni),d=i.parse(e[2],2,fn);if(!a||!d)return null;if(!Es(a.type,[mo(Ni),xi,Ni]))return i.error(`Expected first argument to be of type array or string, but found ${rr(a.type)} instead`);if(4===e.length){const m=i.parse(e[3],3,fn);return m?new Ba(a.type,a,d,m):null}return new Ba(a.type,a,d)}evaluate(e){const i=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!fr(i,["string","array"]))throw new yo(`Expected first argument to be of type array or string, but found ${rr(Sr(i))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(e);return i.slice(a,d)}return i.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Oa=Ba;function Xs(n,e){return"=="===n||"!="===n?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ka(n,e,i,a){return 0===a.compare(e,i)}function Ns(n,e,i){const a="=="!==n&&"!="!==n;return class j0{constructor(m,g,v){this.type=wi,this.lhs=m,this.rhs=g,this.collator=v,this.hasUntypedArgument="value"===m.type.kind||"value"===g.type.kind}static parse(m,g){if(3!==m.length&&4!==m.length)return g.error("Expected two or three arguments.");const v=m[0];let w=g.parse(m[1],1,Ni);if(!w)return null;if(!Xs(v,w.type))return g.concat(1).error(`"${v}" comparisons are not supported for type '${rr(w.type)}'.`);let E=g.parse(m[2],2,Ni);if(!E)return null;if(!Xs(v,E.type))return g.concat(2).error(`"${v}" comparisons are not supported for type '${rr(E.type)}'.`);if(w.type.kind!==E.type.kind&&"value"!==w.type.kind&&"value"!==E.type.kind)return g.error(`Cannot compare types '${rr(w.type)}' and '${rr(E.type)}'.`);a&&("value"===w.type.kind&&"value"!==E.type.kind?w=new Ms(E.type,[w]):"value"!==w.type.kind&&"value"===E.type.kind&&(E=new Ms(w.type,[E])));let R=null;if(4===m.length){if("string"!==w.type.kind&&"string"!==E.type.kind&&"value"!==w.type.kind&&"value"!==E.type.kind)return g.error("Cannot use collator to compare non-string types.");if(R=g.parse(m[3],3,Qr),!R)return null}return new j0(w,E,R)}evaluate(m){const g=this.lhs.evaluate(m),v=this.rhs.evaluate(m);if(a&&this.hasUntypedArgument){const w=Sr(g),E=Sr(v);if(w.kind!==E.kind||"string"!==w.kind&&"number"!==w.kind)throw new yo(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${w.kind}, ${E.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const w=Sr(g),E=Sr(v);if("string"!==w.kind||"string"!==E.kind)return e(m,g,v)}return this.collator?i(m,g,v,this.collator.evaluate(m)):e(m,g,v)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[n];return this.eachChild(g=>{m.push(g.serialize())}),m}}}const hl=Ns("==",function(n,e,i){return e===i},Ka),Xa=Ns("!=",function(n,e,i){return e!==i},function(n,e,i,a){return!Ka(0,e,i,a)}),Il=Ns("<",function(n,e,i){return e<i},function(n,e,i,a){return a.compare(e,i)<0}),Kl=Ns(">",function(n,e,i){return e>i},function(n,e,i,a){return a.compare(e,i)>0}),pc=Ns("<=",function(n,e,i){return e<=i},function(n,e,i,a){return a.compare(e,i)<=0}),Wo=Ns(">=",function(n,e,i){return e>=i},function(n,e,i,a){return a.compare(e,i)>=0});class rs{constructor(e,i,a,d,m,g){this.type=xi,this.number=e,this.locale=i,this.currency=a,this.unit=d,this.minFractionDigits=m,this.maxFractionDigits=g}static parse(e,i){if(3!==e.length)return i.error("Expected two arguments.");const a=i.parse(e[1],1,fn);if(!a)return null;const d=e[2];if("object"!=typeof d||Array.isArray(d))return i.error("NumberFormat options argument must be an object.");let m=null;if(d.locale&&(m=i.parse(d.locale,1,xi),!m))return null;let g=null;if(d.currency&&(g=i.parse(d.currency,1,xi),!g))return null;let v=null;if(d.unit&&(v=i.parse(d.unit,1,xi),!v))return null;let w=null;if(d["min-fraction-digits"]&&(w=i.parse(d["min-fraction-digits"],1,fn),!w))return null;let E=null;return d["max-fraction-digits"]&&(E=i.parse(d["max-fraction-digits"],1,fn),!E)?null:new rs(a,m,g,v,w,E)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Pr{constructor(e){this.type=fn,this.input=e}static parse(e,i){if(2!==e.length)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=i.parse(e[1],1);return a?"array"!==a.type.kind&&"string"!==a.type.kind&&"value"!==a.type.kind?i.error(`Expected argument of type string or array, but found ${rr(a.type)} instead.`):new Pr(a):null}evaluate(e){const i=this.input.evaluate(e);if("string"==typeof i||Array.isArray(i))return i.length;throw new yo(`Expected value to be of type string or array, but found ${rr(Sr(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}const Pl={"==":hl,"!=":Xa,">":Kl,"<":Il,">=":Wo,"<=":pc,array:Ms,at:Ks,boolean:Ms,case:dl,coalesce:Mo,collator:Ps,format:Zo,image:ga,in:Bs,"index-of":cl,interpolate:As,"interpolate-hcl":As,"interpolate-lab":As,length:Pr,let:ua,literal:$o,match:ul,number:Ms,"number-format":rs,object:Ms,slice:Oa,step:Fo,string:Ms,"to-boolean":us,"to-color":us,"to-number":us,"to-string":us,var:ps,within:wr};function Xl(n,[e,i,a,d]){e=e.evaluate(n),i=i.evaluate(n),a=a.evaluate(n);const m=d?d.evaluate(n):1,g=_s(e,i,a,m);if(g)throw new yo(g);return new Fr(e/255*m,i/255*m,a/255*m,m)}function da(n,e){return n in e}function Ja(n,e){const i=e[n];return void 0===i?null:i}function Ss(n){return{type:n}}lo.register(Pl,{error:[{kind:"error"},[xi],(n,[e])=>{throw new yo(e.evaluate(n))}],typeof:[xi,[Ni],(n,[e])=>rr(Sr(e.evaluate(n)))],"to-rgba":[mo(fn,4),[yi],(n,[e])=>e.evaluate(n).toArray()],rgb:[yi,[fn,fn,fn],Xl],rgba:[yi,[fn,fn,fn,fn],Xl],has:{type:wi,overloads:[[[xi],(n,[e])=>da(e.evaluate(n),n.properties())],[[xi,xr],(n,[e,i])=>da(e.evaluate(n),i.evaluate(n))]]},get:{type:Ni,overloads:[[[xi],(n,[e])=>Ja(e.evaluate(n),n.properties())],[[xi,xr],(n,[e,i])=>Ja(e.evaluate(n),i.evaluate(n))]]},"feature-state":[Ni,[xi],(n,[e])=>Ja(e.evaluate(n),n.featureState||{})],properties:[xr,[],n=>n.properties()],"geometry-type":[xi,[],n=>n.geometryType()],id:[Ni,[],n=>n.id()],zoom:[fn,[],n=>n.globals.zoom],pitch:[fn,[],n=>n.globals.pitch||0],"distance-from-center":[fn,[],n=>n.distanceFromCenter()],"heatmap-density":[fn,[],n=>n.globals.heatmapDensity||0],"line-progress":[fn,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[fn,[],n=>n.globals.skyRadialProgress||0],accumulated:[Ni,[],n=>void 0===n.globals.accumulated?null:n.globals.accumulated],"+":[fn,Ss(fn),(n,e)=>{let i=0;for(const a of e)i+=a.evaluate(n);return i}],"*":[fn,Ss(fn),(n,e)=>{let i=1;for(const a of e)i*=a.evaluate(n);return i}],"-":{type:fn,overloads:[[[fn,fn],(n,[e,i])=>e.evaluate(n)-i.evaluate(n)],[[fn],(n,[e])=>-e.evaluate(n)]]},"/":[fn,[fn,fn],(n,[e,i])=>e.evaluate(n)/i.evaluate(n)],"%":[fn,[fn,fn],(n,[e,i])=>e.evaluate(n)%i.evaluate(n)],ln2:[fn,[],()=>Math.LN2],pi:[fn,[],()=>Math.PI],e:[fn,[],()=>Math.E],"^":[fn,[fn,fn],(n,[e,i])=>Math.pow(e.evaluate(n),i.evaluate(n))],sqrt:[fn,[fn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[fn,[fn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[fn,[fn],(n,[e])=>Math.log(e.evaluate(n))],log2:[fn,[fn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[fn,[fn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[fn,[fn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[fn,[fn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[fn,[fn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[fn,[fn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[fn,[fn],(n,[e])=>Math.atan(e.evaluate(n))],min:[fn,Ss(fn),(n,e)=>Math.min(...e.map(i=>i.evaluate(n)))],max:[fn,Ss(fn),(n,e)=>Math.max(...e.map(i=>i.evaluate(n)))],abs:[fn,[fn],(n,[e])=>Math.abs(e.evaluate(n))],round:[fn,[fn],(n,[e])=>{const i=e.evaluate(n);return i<0?-Math.round(-i):Math.round(i)}],floor:[fn,[fn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[fn,[fn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[wi,[xi,Ni],(n,[e,i])=>n.properties()[e.value]===i.value],"filter-id-==":[wi,[Ni],(n,[e])=>n.id()===e.value],"filter-type-==":[wi,[xi],(n,[e])=>n.geometryType()===e.value],"filter-<":[wi,[xi,Ni],(n,[e,i])=>{const a=n.properties()[e.value],d=i.value;return typeof a==typeof d&&a<d}],"filter-id-<":[wi,[Ni],(n,[e])=>{const i=n.id(),a=e.value;return typeof i==typeof a&&i<a}],"filter->":[wi,[xi,Ni],(n,[e,i])=>{const a=n.properties()[e.value],d=i.value;return typeof a==typeof d&&a>d}],"filter-id->":[wi,[Ni],(n,[e])=>{const i=n.id(),a=e.value;return typeof i==typeof a&&i>a}],"filter-<=":[wi,[xi,Ni],(n,[e,i])=>{const a=n.properties()[e.value],d=i.value;return typeof a==typeof d&&a<=d}],"filter-id-<=":[wi,[Ni],(n,[e])=>{const i=n.id(),a=e.value;return typeof i==typeof a&&i<=a}],"filter->=":[wi,[xi,Ni],(n,[e,i])=>{const a=n.properties()[e.value],d=i.value;return typeof a==typeof d&&a>=d}],"filter-id->=":[wi,[Ni],(n,[e])=>{const i=n.id(),a=e.value;return typeof i==typeof a&&i>=a}],"filter-has":[wi,[Ni],(n,[e])=>e.value in n.properties()],"filter-has-id":[wi,[],n=>null!==n.id()&&void 0!==n.id()],"filter-type-in":[wi,[mo(xi)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[wi,[mo(Ni)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[wi,[xi,mo(Ni)],(n,[e,i])=>i.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[wi,[xi,mo(Ni)],(n,[e,i])=>function(a,d,m,g){for(;m<=g;){const v=m+g>>1;if(d[v]===a)return!0;d[v]>a?g=v-1:m=v+1}return!1}(n.properties()[e.value],i.value,0,i.value.length-1)],all:{type:wi,overloads:[[[wi,wi],(n,[e,i])=>e.evaluate(n)&&i.evaluate(n)],[Ss(wi),(n,e)=>{for(const i of e)if(!i.evaluate(n))return!1;return!0}]]},any:{type:wi,overloads:[[[wi,wi],(n,[e,i])=>e.evaluate(n)||i.evaluate(n)],[Ss(wi),(n,e)=>{for(const i of e)if(i.evaluate(n))return!0;return!1}]]},"!":[wi,[wi],(n,[e])=>!e.evaluate(n)],"is-supported-script":[wi,[xi],(n,[e])=>{const i=n.globals&&n.globals.isSupportedScript;return!i||i(e.evaluate(n))}],upcase:[xi,[xi],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[xi,[xi],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[xi,Ss(Ni),(n,e)=>e.map(i=>Ds(i.evaluate(n))).join("")],"resolved-locale":[xi,[Qr],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Qa=Pl;function Na(n){return{result:"success",value:n}}function Js(n){return{result:"error",value:n}}function zs(n){return"data-driven"===n["property-type"]}function H(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function ge(n){return!!n.expression&&n.expression.interpolated}function W(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function Oe(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function V(n){return n}function C(n,e){const i="color"===e.type,a=n.stops&&"object"==typeof n.stops[0][0],d=a||!(a||void 0!==n.property),m=n.type||(ge(e)?"exponential":"interval");if(i&&((n=at({},n)).stops&&(n.stops=n.stops.map(E=>[E[0],Fr.parse(E[1])])),n.default=Fr.parse(n.default?n.default:e.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!Sa[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let g,v,w;if("exponential"===m)g=Ve;else if("interval"===m)g=be;else if("categorical"===m){g=$,v=Object.create(null);for(const E of n.stops)v[E[0]]=E[1];w=typeof n.stops[0][0]}else{if("identity"!==m)throw new Error(`Unknown function type "${m}"`);g=Mt}if(a){const E={},R=[];for(let ne=0;ne<n.stops.length;ne++){const ae=n.stops[ne],ye=ae[0].zoom;void 0===E[ye]&&(E[ye]={zoom:ye,type:n.type,property:n.property,default:n.default,stops:[]},R.push(ye)),E[ye].stops.push([ae[0].value,ae[1]])}const z=[];for(const ne of R)z.push([E[ne].zoom,C(E[ne],e)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:As.interpolationFactor.bind(void 0,Y),zoomStops:z.map(ne=>ne[0]),evaluate:({zoom:ne},ae)=>Ve({stops:z,base:n.base},e,ne).evaluate(ne,ae)}}if(d){const E="exponential"===m?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:As.interpolationFactor.bind(void 0,E),zoomStops:n.stops.map(R=>R[0]),evaluate:({zoom:R})=>g(n,e,R,v,w)}}return{kind:"source",evaluate(E,R){const z=R&&R.properties?R.properties[n.property]:void 0;return void 0===z?M(n.default,e.default):g(n,e,z,v,w)}}}function M(n,e,i){return void 0!==n?n:void 0!==e?e:void 0!==i?i:void 0}function $(n,e,i,a,d){return M(typeof i===d?a[i]:void 0,n.default,e.default)}function be(n,e,i){if("number"!==W(i))return M(n.default,e.default);const a=n.stops.length;if(1===a||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[a-1][0])return n.stops[a-1][1];const d=Rs(n.stops.map(m=>m[0]),i);return n.stops[d][1]}function Ve(n,e,i){const a=void 0!==n.base?n.base:1;if("number"!==W(i))return M(n.default,e.default);const d=n.stops.length;if(1===d||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[d-1][0])return n.stops[d-1][1];const m=Rs(n.stops.map(R=>R[0]),i),g=function(R,z,Y,ne){const ae=ne-Y,ye=R-Y;return 0===ae?0:1===z?ye/ae:(Math.pow(z,ye)-1)/(Math.pow(z,ae)-1)}(i,a,n.stops[m][0],n.stops[m+1][0]),v=n.stops[m][1],w=n.stops[m+1][1];let E=vo[e.type]||V;if(n.colorSpace&&"rgb"!==n.colorSpace){const R=Sa[n.colorSpace];E=(z,Y)=>R.reverse(R.interpolate(R.forward(z),R.forward(Y),g))}return"function"==typeof v.evaluate?{evaluate(...R){const z=v.evaluate.apply(void 0,R),Y=w.evaluate.apply(void 0,R);if(void 0!==z&&void 0!==Y)return E(z,Y,g)}}:E(v,w,g)}function Mt(n,e,i){return"color"===e.type?i=Fr.parse(i):"formatted"===e.type?i=ao.fromString(i.toString()):"resolvedImage"===e.type?i=Ar.fromString(i.toString()):W(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),M(i,n.default,e.default)}class Tt{constructor(e,i){var a;this.expression=e,this._warningHistory={},this._evaluator=new Fa,this._defaultValue=i?"color"===(a=i).type&&(Oe(a.default)||Array.isArray(a.default))?new Fr(0,0,0,0):"color"===a.type?Fr.parse(a.default)||null:void 0===a.default?null:a.default:null,this._enumValues=i&&"enum"===i.type?i.values:null}evaluateWithoutErrorHandling(e,i,a,d,m,g,v,w){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=a,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=w||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,a,d,m,g,v,w){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=a||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=w||null;try{const E=this.expression.evaluate(this._evaluator);if(null==E||"number"==typeof E&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new yo(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function on(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Qa}function pn(n,e){const i=new Do(Qa,[],e?function(d){const m={color:yi,string:xi,number:fn,enum:xi,boolean:wi,formatted:Ao,resolvedImage:_r};return"array"===d.type?mo(m[d.value]||Ni,d.length):m[d.type]}(e):void 0),a=i.parse(n,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return a?Na(new Tt(a,e)):Js(i.errors)}class si{constructor(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent="constant"!==e&&!Lr(i.expression)}evaluateWithoutErrorHandling(e,i,a,d,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,d,m,g)}evaluate(e,i,a,d,m,g){return this._styleExpression.evaluate(e,i,a,d,m,g)}}class di{constructor(e,i,a,d){this.kind=e,this.zoomStops=a,this._styleExpression=i,this.isStateDependent="camera"!==e&&!Lr(i.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,i,a,d,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,d,m,g)}evaluate(e,i,a,d,m,g){return this._styleExpression.evaluate(e,i,a,d,m,g)}interpolationFactor(e,i,a){return this.interpolationType?As.interpolationFactor(this.interpolationType,e,i,a):0}}function Ri(n,e){if("error"===(n=pn(n,e)).result)return n;const i=n.value.expression,a=Eo(i);if(!a&&!zs(e))return Js([new Se("","data expressions not supported")]);const d=Vr(i,["zoom","pitch","distance-from-center"]);if(!d&&!H(e))return Js([new Se("","zoom expressions not supported")]);const m=Ei(i);return m||d?m instanceof Se?Js([m]):m instanceof As&&!ge(e)?Js([new Se("",'"interpolate" expressions cannot be used with this property')]):Na(m?new di(a?"camera":"composite",n.value,m.labels,m instanceof As?m.interpolation:void 0):new si(a?"constant":"source",n.value)):Js([new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vi{constructor(e,i){this._parameters=e,this._specification=i,at(this,C(this._parameters,this._specification))}static deserialize(e){return new Vi(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ei(n){let e=null;if(n instanceof ua)e=Ei(n.result);else if(n instanceof Mo){for(const i of n.args)if(e=Ei(i),e)break}else(n instanceof Fo||n instanceof As)&&n.input instanceof lo&&"zoom"===n.input.name&&(e=n);return e instanceof Se||n.eachChild(i=>{const a=Ei(i);a instanceof Se?e=a:!e&&a?e=new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new Se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class In{constructor(e,i,a,d){this.message=(e?`${e}: `:"")+a,d&&(this.identifier=d),null!=i&&i.__line__&&(this.line=i.__line__)}}function Ui(n){const e=n.key,i=n.value,a=n.valueSpec||{},d=n.objectElementValidators||{},m=n.style,g=n.styleSpec;let v=[];const w=W(i);if("object"!==w)return[new In(e,i,`object expected, ${w} found`)];for(const E in i){const R=E.split(".")[0];let z;d[R]?z=d[R]:a[R]?z=ho:d["*"]?z=d["*"]:a["*"]&&(z=ho),z?v=v.concat(z({key:(e&&`${e}.`)+E,value:i[E],valueSpec:a[R]||a["*"],style:m,styleSpec:g,object:i,objectKey:E},i)):v.push(new In(e,i[E],`unknown property "${E}"`))}for(const E in a)d[E]||a[E].required&&void 0===a[E].default&&void 0===i[E]&&v.push(new In(e,i,`missing required property "${E}"`));return v}function sr(n){const e=n.value,i=n.valueSpec,a=n.style,d=n.styleSpec,m=n.key,g=n.arrayElementValidator||ho;if("array"!==W(e))return[new In(m,e,`array expected, ${W(e)} found`)];if(i.length&&e.length!==i.length)return[new In(m,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new In(m,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let v={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};d.$version<7&&(v.function=i.function),"object"===W(i.value)&&(v=i.value);let w=[];for(let E=0;E<e.length;E++)w=w.concat(g({array:e,arrayIndex:E,value:e[E],valueSpec:v,style:a,styleSpec:d,key:`${m}[${E}]`}));return w}function Wr(n){const e=n.key,i=n.value,a=n.valueSpec;let d=W(i);if("number"===d&&i!=i&&(d="NaN"),"number"!==d)return[new In(e,i,`number expected, ${d} found`)];if("minimum"in a){let m=a.minimum;if("array"===W(a.minimum)&&(m=a.minimum[n.arrayIndex]),i<m)return[new In(e,i,`${i} is less than the minimum value ${m}`)]}if("maximum"in a){let m=a.maximum;if("array"===W(a.maximum)&&(m=a.maximum[n.arrayIndex]),i>m)return[new In(e,i,`${i} is greater than the maximum value ${m}`)]}return[]}function co(n){const e=n.valueSpec,i=vt(n.value.type);let a,d,m,g={};const v="categorical"!==i&&void 0===n.value.property,w=!v,E="array"===W(n.value.stops)&&"array"===W(n.value.stops[0])&&"object"===W(n.value.stops[0][0]),R=Ui({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(ne){if("identity"===i)return[new In(ne.key,ne.value,'identity function may not have a "stops" property')];let ae=[];const ye=ne.value;return ae=ae.concat(sr({key:ne.key,value:ye,valueSpec:ne.valueSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:z})),"array"===W(ye)&&0===ye.length&&ae.push(new In(ne.key,ye,"array must have at least one stop")),ae},default:function(ne){return ho({key:ne.key,value:ne.value,valueSpec:e,style:ne.style,styleSpec:ne.styleSpec})}}});return"identity"===i&&v&&R.push(new In(n.key,n.value,'missing required property "property"')),"identity"===i||n.value.stops||R.push(new In(n.key,n.value,'missing required property "stops"')),"exponential"===i&&n.valueSpec.expression&&!ge(n.valueSpec)&&R.push(new In(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(w&&!zs(n.valueSpec)?R.push(new In(n.key,n.value,"property functions not supported")):v&&!H(n.valueSpec)&&R.push(new In(n.key,n.value,"zoom functions not supported"))),"categorical"!==i&&!E||void 0!==n.value.property||R.push(new In(n.key,n.value,'"property" property is required')),R;function z(ne){let ae=[];const ye=ne.value,Be=ne.key;if("array"!==W(ye))return[new In(Be,ye,`array expected, ${W(ye)} found`)];if(2!==ye.length)return[new In(Be,ye,`array length 2 expected, length ${ye.length} found`)];if(E){if("object"!==W(ye[0]))return[new In(Be,ye,`object expected, ${W(ye[0])} found`)];if(void 0===ye[0].zoom)return[new In(Be,ye,"object stop key must have zoom")];if(void 0===ye[0].value)return[new In(Be,ye,"object stop key must have value")];const rt=vt(ye[0].zoom);if("number"!=typeof rt)return[new In(Be,ye[0].zoom,"stop zoom values must be numbers")];if(m&&m>rt)return[new In(Be,ye[0].zoom,"stop zoom values must appear in ascending order")];rt!==m&&(m=rt,d=void 0,g={}),ae=ae.concat(Ui({key:`${Be}[0]`,value:ye[0],valueSpec:{zoom:{}},style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:Wr,value:Y}}))}else ae=ae.concat(Y({key:`${Be}[0]`,value:ye[0],valueSpec:{},style:ne.style,styleSpec:ne.styleSpec},ye));return on(I(ye[1]))?ae.concat([new In(`${Be}[1]`,ye[1],"expressions are not allowed in function stops.")]):ae.concat(ho({key:`${Be}[1]`,value:ye[1],valueSpec:e,style:ne.style,styleSpec:ne.styleSpec}))}function Y(ne,ae){const ye=W(ne.value),Be=vt(ne.value),rt=null!==ne.value?ne.value:ae;if(a){if(ye!==a)return[new In(ne.key,rt,`${ye} stop domain type must match previous stop domain type ${a}`)]}else a=ye;if("number"!==ye&&"string"!==ye&&"boolean"!==ye&&"number"!=typeof Be&&"string"!=typeof Be&&"boolean"!=typeof Be)return[new In(ne.key,rt,"stop domain value must be a number, string, or boolean")];if("number"!==ye&&"categorical"!==i){let St=`number expected, ${ye} found`;return zs(e)&&void 0===i&&(St+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new In(ne.key,rt,St)]}return"categorical"!==i||"number"!==ye||"number"==typeof Be&&isFinite(Be)&&Math.floor(Be)===Be?"categorical"!==i&&"number"===ye&&"number"==typeof Be&&"number"==typeof d&&void 0!==d&&Be<d?[new In(ne.key,rt,"stop domain values must appear in ascending order")]:(d=Be,"categorical"===i&&Be in g?[new In(ne.key,rt,"stop domain values must be unique")]:(g[Be]=!0,[])):[new In(ne.key,rt,`integer expected, found ${String(Be)}`)]}}function mr(n){const e=("property"===n.expressionContext?Ri:pn)(I(n.value),n.valueSpec);if("error"===e.result)return e.value.map(a=>new In(`${n.key}${a.key}`,n.value,a.message));const i=e.value.expression||e.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!i.outputDefined())return[new In(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===n.expressionContext&&"layout"===n.propertyType&&!Lr(i))return[new In(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext)return Qs(i,n);if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!Vr(i,["zoom","feature-state"]))return[new In(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!Eo(i))return[new In(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qs(n,e){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const d of e.valueSpec.expression.parameters)i.delete(d);if(0===i.size)return[];const a=[];return n instanceof lo&&i.has(n.name)?[new In(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(d=>{a.push(...Qs(d,e))}),a)}function Yo(n){const e=n.key,i=n.value,a=n.valueSpec,d=[];return Array.isArray(a.values)?-1===a.values.indexOf(vt(i))&&d.push(new In(e,i,`expected one of [${a.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(a.values).indexOf(vt(i))&&d.push(new In(e,i,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(i)} found`)),d}function No(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!No(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function bo(n,e="fill"){if(null==n)return{filter:()=>!0,needGeometry:!1,needFeature:!1};No(n)||(n=za(n));const i=n;let a=!0;try{a=function(E){if(!zo(E))return E;let R=I(E);return fs(R),R=Vs(R),R}(i)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(i,null,2)}\n        `)}const d=wn[`filter_${e}`],m=pn(a,d);let g=null;if("error"===m.result)throw new Error(m.value.map(E=>`${E.key}: ${E.message}`).join(", "));g=(E,R,z)=>m.value.evaluate(E,R,{},z);let v=null,w=null;if(a!==i){const E=pn(i,d);if("error"===E.result)throw new Error(E.value.map(R=>`${R.key}: ${R.message}`).join(", "));v=(R,z,Y,ne,ae)=>E.value.evaluate(R,z,{},Y,void 0,void 0,ne,ae),w=!Eo(E.value.expression)}return{filter:g,dynamicFilter:v||void 0,needGeometry:Vo(a),needFeature:!!w}}function Vs(n){if(!Array.isArray(n))return n;const e=function(i){if(ea.has(i[0]))for(let a=1;a<i.length;a++)if(zo(i[a]))return!0;return i}(n);return!0===e?e:e.map(i=>Vs(i))}function fs(n){let e=!1;const i=[];if("case"===n[0]){for(let a=1;a<n.length-1;a+=2)e=e||zo(n[a]),i.push(n[a+1]);i.push(n[n.length-1])}else if("match"===n[0]){e=e||zo(n[1]);for(let a=2;a<n.length-1;a+=2)i.push(n[a+1]);i.push(n[n.length-1])}else if("step"===n[0]){e=e||zo(n[1]);for(let a=1;a<n.length-1;a+=2)i.push(n[a+1])}e&&(n.length=0,n.push("any",...i));for(let a=1;a<n.length;a++)fs(n[a])}function zo(n){if(!Array.isArray(n))return!1;if("pitch"===(e=n[0])||"distance-from-center"===e)return!0;var e;for(let i=1;i<n.length;i++)if(zo(n[i]))return!0;return!1}const ea=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Or(n,e){return n<e?-1:n>e?1:0}function Vo(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let e=1;e<n.length;e++)if(Vo(n[e]))return!0;return!1}function za(n){if(!n)return!0;const e=n[0];return n.length<=1?"any"!==e:"=="===e?Di(n[1],n[2],"=="):"!="===e?ar(Di(n[1],n[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Di(n[1],n[2],e):"any"===e?(i=n.slice(1),["any"].concat(i.map(za))):"all"===e?["all"].concat(n.slice(1).map(za)):"none"===e?["all"].concat(n.slice(1).map(za).map(ar)):"in"===e?Fi(n[1],n.slice(2)):"!in"===e?ar(Fi(n[1],n.slice(2))):"has"===e?Hi(n[1]):"!has"===e?ar(Hi(n[1])):"within"!==e||n;var i}function Di(n,e,i){switch(n){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,n,e]}}function Fi(n,e){if(0===e.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(i=>typeof i!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Or)]]:["filter-in-small",n,["literal",e]]}}function Hi(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function ar(n){return["!",n]}function xo(n){return No(I(n.value))?mr(at({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):qo(n)}function qo(n){const e=n.value,i=n.key;if("array"!==W(e))return[new In(i,e,`array expected, ${W(e)} found`)];const a=n.styleSpec;let d,m=[];if(e.length<1)return[new In(i,e,"filter array must have at least 1 element")];switch(m=m.concat(Yo({key:`${i}[0]`,value:e[0],valueSpec:a.filter_operator,style:n.style,styleSpec:n.styleSpec})),vt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===vt(e[1])&&m.push(new In(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&m.push(new In(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=W(e[1]),"string"!==d&&m.push(new In(`${i}[1]`,e[1],`string expected, ${d} found`)));for(let g=2;g<e.length;g++)d=W(e[g]),"$type"===vt(e[1])?m=m.concat(Yo({key:`${i}[${g}]`,value:e[g],valueSpec:a.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==d&&"number"!==d&&"boolean"!==d&&m.push(new In(`${i}[${g}]`,e[g],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let g=1;g<e.length;g++)m=m.concat(qo({key:`${i}[${g}]`,value:e[g],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":d=W(e[1]),2!==e.length?m.push(new In(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==d&&m.push(new In(`${i}[1]`,e[1],`string expected, ${d} found`));break;case"within":d=W(e[1]),2!==e.length?m.push(new In(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==d&&m.push(new In(`${i}[1]`,e[1],`object expected, ${d} found`))}return m}function uo(n,e){const i=n.key,a=n.style,d=n.styleSpec,m=n.value,g=n.objectKey,v=d[`${e}_${n.layerType}`];if(!v)return[];const w=g.match(/^(.*)-transition$/);if("paint"===e&&w&&v[w[1]]&&v[w[1]].transition)return ho({key:i,value:m,valueSpec:d.transition,style:a,styleSpec:d});const E=n.valueSpec||v[g];if(!E)return[new In(i,m,`unknown property "${g}"`)];let R;if("string"===W(m)&&zs(E)&&!E.tokens&&(R=/^{([^}]+)}$/.exec(m))){const Y=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new In(i,m,`"${g}" does not support interpolation syntax\nUse an identity property function instead: ${Y}.`)]}const z=[];return"symbol"===n.layerType&&("text-field"===g&&a&&!a.glyphs&&z.push(new In(i,m,'use of "text-field" requires a style "glyphs" property')),"text-font"===g&&Oe(I(m))&&"identity"===vt(m.type)&&z.push(new In(i,m,'"text-font" does not support identity functions'))),z.concat(ho({key:n.key,value:m,valueSpec:E,style:a,styleSpec:d,expressionContext:"property",propertyType:e,propertyKey:g}))}function xs(n){return uo(n,"paint")}function he(n){return uo(n,"layout")}function k(n){let e=[];const i=n.value,a=n.key,d=n.style,m=n.styleSpec;i.type||i.ref||e.push(new In(a,i,'either "type" or "ref" is required'));let g=vt(i.type);const v=vt(i.ref);if(i.id){const w=vt(i.id);for(let E=0;E<n.arrayIndex;E++){const R=d.layers[E];vt(R.id)===w&&e.push(new In(a,i.id,`duplicate layer id "${i.id}", previously used at line ${R.id.__line__}`))}}if("ref"in i){let w;["type","source","source-layer","filter","layout"].forEach(E=>{E in i&&e.push(new In(a,i[E],`"${E}" is prohibited for ref layers`))}),d.layers.forEach(E=>{vt(E.id)===v&&(w=E)}),w?w.ref?e.push(new In(a,i.ref,"ref cannot reference another ref layer")):g=vt(w.type):"string"==typeof v&&e.push(new In(a,i.ref,`ref layer "${v}" not found`))}else if("background"!==g&&"sky"!==g)if(i.source){const w=d.sources&&d.sources[i.source],E=w&&vt(w.type);w?"vector"===E&&"raster"===g?e.push(new In(a,i.source,`layer "${i.id}" requires a raster source`)):"raster"===E&&"raster"!==g?e.push(new In(a,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==E||i["source-layer"]?"raster-dem"===E&&"hillshade"!==g?e.push(new In(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==g||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||"geojson"===E&&w.lineMetrics||e.push(new In(a,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new In(a,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new In(a,i.source,`source "${i.source}" not found`))}else e.push(new In(a,i,'missing required property "source"'));return e=e.concat(Ui({key:a,value:i,valueSpec:m.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ho({key:`${a}.type`,value:i.type,valueSpec:m.layer.type,style:n.style,styleSpec:n.styleSpec,object:i,objectKey:"type"}),filter:w=>xo(at({layerType:g},w)),layout:w=>Ui({layer:i,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":E=>he(at({layerType:g},E))}}),paint:w=>Ui({layer:i,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":E=>xs(at({layerType:g},E))}})}})),e}function Z(n){const e=n.value,i=n.key,a=W(e);return"string"!==a?[new In(i,e,`string expected, ${a} found`)]:[]}const pe={promoteId:function({key:n,value:e}){if("string"===W(e))return Z({key:n,value:e});{const i=[];for(const a in e)i.push(...Z({key:`${n}.${a}`,value:e[a]}));return i}}};function At(n){const e=n.value,i=n.key,a=n.styleSpec,d=n.style;if(!e.type)return[new In(i,e,'"type" is required')];const m=vt(e.type);let g;switch(m){case"vector":case"raster":case"raster-dem":return g=Ui({key:i,value:e,valueSpec:a[`source_${m.replace("-","_")}`],style:n.style,styleSpec:a,objectElementValidators:pe}),g;case"geojson":if(g=Ui({key:i,value:e,valueSpec:a.source_geojson,style:d,styleSpec:a,objectElementValidators:pe}),e.cluster)for(const v in e.clusterProperties){const[w,E]=e.clusterProperties[v],R="string"==typeof w?[w,["accumulated"],["get",v]]:w;g.push(...mr({key:`${i}.${v}.map`,value:E,expressionContext:"cluster-map"})),g.push(...mr({key:`${i}.${v}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return g;case"video":return Ui({key:i,value:e,valueSpec:a.source_video,style:d,styleSpec:a});case"image":return Ui({key:i,value:e,valueSpec:a.source_image,style:d,styleSpec:a});case"canvas":return[new In(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yo({key:`${i}.type`,value:e.type,valueSpec:{values:Tn(a)},style:d,styleSpec:a})}}function Tn(n){return n.source.reduce((e,i)=>{const a=n[i];return"enum"===a.type.type&&(e=e.concat(Object.keys(a.type.values))),e},[])}function ui(n){const e=n.value,i=n.styleSpec,a=i.light,d=n.style;let m=[];const g=W(e);if(void 0===e)return m;if("object"!==g)return m=m.concat([new In("light",e,`object expected, ${g} found`)]),m;for(const v in e){const w=v.match(/^(.*)-transition$/);m=m.concat(w&&a[w[1]]&&a[w[1]].transition?ho({key:v,value:e[v],valueSpec:i.transition,style:d,styleSpec:i}):a[v]?ho({key:v,value:e[v],valueSpec:a[v],style:d,styleSpec:i}):[new In(v,e[v],`unknown property "${v}"`)])}return m}function Gi(n){const e=n.value,i=n.key,a=n.style,d=n.styleSpec,m=d.terrain;let g=[];const v=W(e);if(void 0===e)return g;if("object"!==v)return g=g.concat([new In("terrain",e,`object expected, ${v} found`)]),g;for(const w in e){const E=w.match(/^(.*)-transition$/);g=g.concat(E&&m[E[1]]&&m[E[1]].transition?ho({key:w,value:e[w],valueSpec:d.transition,style:a,styleSpec:d}):m[w]?ho({key:w,value:e[w],valueSpec:m[w],style:a,styleSpec:d}):[new In(w,e[w],`unknown property "${w}"`)])}if(e.source){const w=a.sources&&a.sources[e.source],E=w&&vt(w.type);w?"raster-dem"!==E&&g.push(new In(i,e.source,`terrain cannot be used with a source of type ${String(E)}, it only be used with a "raster-dem" source type`)):g.push(new In(i,e.source,`source "${e.source}" not found`))}else g.push(new In(i,e,'terrain is missing required property "source"'));return g}function or(n){const e=n.value,i=n.style,a=n.styleSpec,d=a.fog;let m=[];const g=W(e);if(void 0===e)return m;if("object"!==g)return m=m.concat([new In("fog",e,`object expected, ${g} found`)]),m;for(const v in e){const w=v.match(/^(.*)-transition$/);m=m.concat(w&&d[w[1]]&&d[w[1]].transition?ho({key:v,value:e[v],valueSpec:a.transition,style:i,styleSpec:a}):d[v]?ho({key:v,value:e[v],valueSpec:d[v],style:i,styleSpec:a}):[new In(v,e[v],`unknown property "${v}"`)])}return m}const Br={"*":()=>[],array:sr,boolean:function(n){const e=n.value,i=n.key,a=W(e);return"boolean"!==a?[new In(i,e,`boolean expected, ${a} found`)]:[]},number:Wr,color:function(n){const e=n.key,i=n.value,a=W(i);return"string"!==a?[new In(e,i,`color expected, ${a} found`)]:null===Go(i)?[new In(e,i,`color expected, "${i}" found`)]:[]},enum:Yo,filter:xo,function:co,layer:k,object:Ui,source:At,light:ui,terrain:Gi,fog:or,string:Z,formatted:function(n){return 0===Z(n).length?[]:mr(n)},resolvedImage:function(n){return 0===Z(n).length?[]:mr(n)},projection:function(n){const e=n.value,i=n.styleSpec,a=i.projection,d=n.style;let m=[];const g=W(e);if("object"===g)for(const v in e)m=m.concat(ho({key:v,value:e[v],valueSpec:a[v],style:d,styleSpec:i}));else"string"!==g&&(m=m.concat([new In("projection",e,`object or string expected, ${g} found`)]));return m}};function ho(n){const e=n.value,i=n.valueSpec,a=n.styleSpec;return i.expression&&Oe(vt(e))?co(n):i.expression&&on(I(e))?mr(n):i.type&&Br[i.type]?Br[i.type](n):Ui(at({},n,{valueSpec:i.type?a[i.type]:i}))}function Ol(n){const e=n.value,i=n.key,a=Z(n);return a.length||(-1===e.indexOf("{fontstack}")&&a.push(new In(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&a.push(new In(i,e,'"glyphs" url must include a "{range}" token'))),a}function Oc(n,e=wn){return Va(ho({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:Ol,"*":()=>[]}}))}const fc=n=>Va(xs(n)),Jl=n=>Va(he(n));function Va(n){return n.slice().sort((e,i)=>e.line&&i.line?e.line-i.line:0)}function Bu(n,e){let i=!1;if(e&&e.length)for(const a of e)n.fire(new Ho(new Error(a.message))),i=!0;return i}var eo=wl,el=3;function wl(n,e,i){var a=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var d=new Int32Array(this.arrayBuffer);n=d[0],this.d=(e=d[1])+2*(i=d[2]);for(var m=0;m<this.d*this.d;m++){var g=d[el+m],v=d[el+m+1];a.push(g===v?null:d.subarray(g,v))}var w=d[el+a.length+1];this.keys=d.subarray(d[el+a.length],w),this.bboxes=d.subarray(w),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var E=0;E<this.d*this.d;E++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=i,this.scale=e/n,this.uid=0;var R=i/e*n;this.min=-R,this.max=n+R}wl.prototype.insert=function(n,e,i,a,d){this._forEachCell(e,i,a,d,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(d)},wl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wl.prototype._insertCell=function(n,e,i,a,d,m){this.cells[d].push(m)},wl.prototype.query=function(n,e,i,a,d){var m=this.min,g=this.max;if(n<=m&&e<=m&&g<=i&&g<=a&&!d)return Array.prototype.slice.call(this.keys);var v=[];return this._forEachCell(n,e,i,a,this._queryCell,v,{},d),v},wl.prototype._queryCell=function(n,e,i,a,d,m,g,v){var w=this.cells[d];if(null!==w)for(var E=this.keys,R=this.bboxes,z=0;z<w.length;z++){var Y=w[z];if(void 0===g[Y]){var ne=4*Y;(v?v(R[ne+0],R[ne+1],R[ne+2],R[ne+3]):n<=R[ne+2]&&e<=R[ne+3]&&i>=R[ne+0]&&a>=R[ne+1])?(g[Y]=!0,m.push(E[Y])):g[Y]=!1}}},wl.prototype._forEachCell=function(n,e,i,a,d,m,g,v){for(var w=this._convertToCellCoord(n),E=this._convertToCellCoord(e),R=this._convertToCellCoord(i),z=this._convertToCellCoord(a),Y=w;Y<=R;Y++)for(var ne=E;ne<=z;ne++){var ae=this.d*ne+Y;if((!v||v(this._convertFromCellCoord(Y),this._convertFromCellCoord(ne),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ne+1)))&&d.call(this,n,e,i,a,ae,m,g,v))return}},wl.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},wl.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},wl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=el+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var d=new Int32Array(e+i+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var m=e,g=0;g<n.length;g++){var v=n[g];d[el+g]=m,d.set(v,m),m+=v.length}return d[el+n.length]=m,d.set(this.keys,m),d[el+n.length+1]=m+=this.keys.length,d.set(this.bboxes,m),m+=this.bboxes.length,d.buffer};var mc=en(eo);const Nu={};function gi(n,e,i={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),Nu[e]={klass:n,omit:i.omit||[]}}gi(Object,"Object"),mc.serialize=function(n,e){const i=n.toArrayBuffer();return e&&e.push(i),{buffer:i}},mc.deserialize=function(n){return new mc(n.buffer)},Object.defineProperty(mc,"name",{value:"Grid"}),gi(mc,"Grid"),gi(Fr,"Color"),gi(Error,"Error"),gi(Me,"AJAXError"),gi(Ar,"ResolvedImage"),gi(Vi,"StylePropertyFunction"),gi(Tt,"StyleExpression",{omit:["_evaluator"]}),gi(di,"ZoomDependentExpression"),gi(si,"ZoomConstantExpression"),gi(lo,"CompoundExpression",{omit:["_evaluate"]});for(const n in Qa)Nu[Qa[n]._classRegistryKey]||gi(Qa[n],`Expression${n}`);function Ed(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function su(n){return P.ImageBitmap&&n instanceof P.ImageBitmap}function tl(n,e){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(Ed(n)||su(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const i=n;return e&&e.push(i.buffer),i}if(n instanceof P.ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const i=[];for(const a of n)i.push(tl(a,e));return i}if("object"==typeof n){const i=n.constructor,a=i._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const d=i.serialize?i.serialize(n,e):{};if(!i.serialize){for(const m in n)n.hasOwnProperty(m)&&(Nu[a].omit.indexOf(m)>=0||(d[m]=tl(n[m],e)));n instanceof Error&&(d.message=n.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==a&&(d.$name=a),d}throw new Error("can't serialize object of type "+typeof n)}function Ql(n){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||Ed(n)||su(n)||ArrayBuffer.isView(n)||n instanceof P.ImageData)return n;if(Array.isArray(n))return n.map(Ql);if("object"==typeof n){const e=n.$name||"Object",{klass:i}=Nu[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(n);const a=Object.create(i.prototype);for(const d of Object.keys(n))"$name"!==d&&(a[d]=Ql(n[d]));return a}throw new Error("can't deserialize object of type "+typeof n)}const hi={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Ko(n){for(const e of n)if(lu(e.charCodeAt(0)))return!0;return!1}function au(n){for(const e of n)if(!ec(e.charCodeAt(0)))return!1;return!0}function ec(n){return!(hi.Arabic(n)||hi["Arabic Supplement"](n)||hi["Arabic Extended-A"](n)||hi["Arabic Presentation Forms-A"](n)||hi["Arabic Presentation Forms-B"](n))}function lu(n){return!(746!==n&&747!==n&&(n<4352||!(hi["Bopomofo Extended"](n)||hi.Bopomofo(n)||hi["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||hi["CJK Compatibility Ideographs"](n)||hi["CJK Compatibility"](n)||hi["CJK Radicals Supplement"](n)||hi["CJK Strokes"](n)||!(!hi["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||hi["CJK Unified Ideographs Extension A"](n)||hi["CJK Unified Ideographs"](n)||hi["Enclosed CJK Letters and Months"](n)||hi["Hangul Compatibility Jamo"](n)||hi["Hangul Jamo Extended-A"](n)||hi["Hangul Jamo Extended-B"](n)||hi["Hangul Jamo"](n)||hi["Hangul Syllables"](n)||hi.Hiragana(n)||hi["Ideographic Description Characters"](n)||hi.Kanbun(n)||hi["Kangxi Radicals"](n)||hi["Katakana Phonetic Extensions"](n)||hi.Katakana(n)&&12540!==n||!(!hi["Halfwidth and Fullwidth Forms"](n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!hi["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||hi["Unified Canadian Aboriginal Syllabics"](n)||hi["Unified Canadian Aboriginal Syllabics Extended"](n)||hi["Vertical Forms"](n)||hi["Yijing Hexagram Symbols"](n)||hi["Yi Syllables"](n)||hi["Yi Radicals"](n))))}function xa(n){return!(lu(n)||(e=n,hi["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||hi["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||hi["Letterlike Symbols"](e)||hi["Number Forms"](e)||hi["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||hi["Control Pictures"](e)&&9251!==e||hi["Optical Character Recognition"](e)||hi["Enclosed Alphanumerics"](e)||hi["Geometric Shapes"](e)||hi["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||hi["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||hi["CJK Symbols and Punctuation"](e)||hi.Katakana(e)||hi["Private Use Area"](e)||hi["CJK Compatibility Forms"](e)||hi["Small Form Variants"](e)||hi["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function pl(n){return n>=1424&&n<=2303||hi["Arabic Presentation Forms-A"](n)||hi["Arabic Presentation Forms-B"](n)}function zu(n,e){return!(!e&&pl(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||hi.Khmer(n))}function cu(n){for(const e of n)if(pl(e.charCodeAt(0)))return!0;return!1}const O="deferred",L="loading",T="loaded";let G=null,u="unavailable",t=null;const l=function(n){n&&"string"==typeof n&&n.indexOf("NetworkError")>-1&&(u="error"),G&&G(n)};function h(){_.fire(new Hr("pluginStateChange",{pluginStatus:u,pluginURL:t}))}const _=new wo,b=function(){return u},D=function(){if(u!==O||!t)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");u=L,h(),t&&Bn({url:t},n=>{n?l(n):(u=T,h())})},A={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>u===T||null!=A.applyArabicShaping,isLoading:()=>u===L,setState(n){u=n.pluginStatus,t=n.pluginURL},isParsed:()=>null!=A.applyArabicShaping&&null!=A.processBidirectionalText&&null!=A.processStyledBidirectionalText,getPluginURL:()=>t};class B{constructor(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(i,a){for(const d of i)if(!zu(d.charCodeAt(0),a))return!1;return!0}(e,A.isLoaded())}}class J{constructor(e,i){this.property=e,this.value=i,this.expression=function(a,d){if(Oe(a))return new Vi(a,d);if(on(a)){const m=Ri(a,d);if("error"===m.result)throw new Error(m.value.map(g=>`${g.key}: ${g.message}`).join(", "));return m.value}{let m=a;return"string"==typeof a&&"color"===d.type&&(m=Fr.parse(a)),{kind:"constant",evaluate:()=>m}}}(void 0===i?e.specification.default:i,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,i,a){return this.property.possiblyEvaluate(this,e,i,a)}}class K{constructor(e){this.property=e,this.value=new J(e,void 0)}transitioned(e,i){return new Ie(this.property,this.value,i,Yt({},e.transition,this.transition),e.now)}untransitioned(){return new Ie(this.property,this.value,null,{},0)}}class de{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return kn(this._values[e].value.value)}setValue(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new K(this._values[e].property)),this._values[e].value=new J(this._values[e].property,null===i?void 0:kn(i))}getTransition(e){return kn(this._values[e].transition)}setTransition(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new K(this._values[e].property)),this._values[e].transition=kn(i)||void 0}serialize(){const e={};for(const i of Object.keys(this._values)){const a=this.getValue(i);void 0!==a&&(e[i]=a);const d=this.getTransition(i);void 0!==d&&(e[`${i}-transition`]=d)}return e}transitioned(e,i){const a=new He(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].transitioned(e,i._values[d]);return a}untransitioned(){const e=new He(this._properties);for(const i of Object.keys(this._values))e._values[i]=this._values[i].untransitioned();return e}}class Ie{constructor(e,i,a,d,m){const g=d.delay||0,v=d.duration||0;m=m||0,this.property=e,this.value=i,this.begin=m+g,this.end=this.begin+v,e.specification.transition&&(d.delay||d.duration)&&(this.prior=a)}possiblyEvaluate(e,i,a){const d=e.now||0,m=this.value.possiblyEvaluate(e,i,a),g=this.prior;if(g){if(d>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(d<this.begin)return g.possiblyEvaluate(e,i,a);{const v=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(e,i,a),m,ln(v))}}return m}}class He{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,i,a){const d=new tt(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(e,i,a);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Xe{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return kn(this._values[e].value)}setValue(e,i){this._values[e]=new J(this._values[e].property,null===i?void 0:kn(i))}serialize(){const e={};for(const i of Object.keys(this._values)){const a=this.getValue(i);void 0!==a&&(e[i]=a)}return e}possiblyEvaluate(e,i,a){const d=new tt(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(e,i,a);return d}}class qe{constructor(e,i,a){this.property=e,this.value=i,this.parameters=a}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,i,a,d){return this.property.evaluate(this.value,this.parameters,e,i,a,d)}}class tt{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class fe{constructor(e){this.specification=e}possiblyEvaluate(e,i){return e.expression.evaluate(i)}interpolate(e,i,a){const d=vo[this.specification.type];return d?d(e,i,a):e}}class Ze{constructor(e,i){this.specification=e,this.overrides=i}possiblyEvaluate(e,i,a,d){return new qe(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(i,null,{},a,d)}:e.expression,i)}interpolate(e,i,a){if("constant"!==e.value.kind||"constant"!==i.value.kind)return e;if(void 0===e.value.value||void 0===i.value.value)return new qe(this,{kind:"constant",value:void 0},e.parameters);const d=vo[this.specification.type];return d?new qe(this,{kind:"constant",value:d(e.value.value,i.value.value,a)},e.parameters):e}evaluate(e,i,a,d,m,g){return"constant"===e.kind?e.value:e.evaluate(i,a,d,m,g)}}class ut{constructor(e){this.specification=e}possiblyEvaluate(e,i,a,d){return!!e.expression.evaluate(i,null,{},a,d)}interpolate(){return!1}}class dt{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const i=new B(0,{});for(const a in e){const d=e[a];d.specification.overridable&&this.overridableProperties.push(a);const m=this.defaultPropertyValues[a]=new J(d,void 0),g=this.defaultTransitionablePropertyValues[a]=new K(d);this.defaultTransitioningPropertyValues[a]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=m.possiblyEvaluate(i)}}}function Vt(n,e){return 256*(n=_n(Math.floor(n),0,255))+_n(Math.floor(e),0,255)}gi(Ze,"DataDrivenProperty"),gi(fe,"DataConstantProperty"),gi(ut,"ColorRampProperty");const $t={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ht{constructor(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Xt(n,e=1){let i=0,a=0;return{members:n.map(d=>{const m=$t[d.type].BYTES_PER_ELEMENT,g=i=hn(i,Math.max(e,m)),v=d.components||1;return a=Math.max(a,m),i+=m*v,{name:d.name,type:d.type,components:v,offset:g}}),size:hn(i,Math.max(a,e)),alignment:e}}function hn(n,e){return Math.ceil(n/e)*e}class Xn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const d=2*e;return this.int16[d+0]=i,this.int16[d+1]=a,e}}Xn.prototype.bytesPerElement=4,gi(Xn,"StructArrayLayout2i4");class dn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a){const d=this.length;return this.resize(d+1),this.emplace(d,e,i,a)}emplace(e,i,a,d){const m=3*e;return this.int16[m+0]=i,this.int16[m+1]=a,this.int16[m+2]=d,e}}dn.prototype.bytesPerElement=6,gi(dn,"StructArrayLayout3i6");class Nn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,i,a,d)}emplace(e,i,a,d,m){const g=4*e;return this.int16[g+0]=i,this.int16[g+1]=a,this.int16[g+2]=d,this.int16[g+3]=m,e}}Nn.prototype.bytesPerElement=8,gi(Nn,"StructArrayLayout4i8");class bn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,i,a,d,m,g,v)}emplace(e,i,a,d,m,g,v,w){const E=6*e,R=12*e,z=3*e;return this.int16[E+0]=i,this.int16[E+1]=a,this.uint8[R+4]=d,this.uint8[R+5]=m,this.uint8[R+6]=g,this.uint8[R+7]=v,this.float32[z+2]=w,e}}bn.prototype.bytesPerElement=12,gi(bn,"StructArrayLayout2i4ub1f12");class qn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,i,a,d)}emplace(e,i,a,d,m){const g=4*e;return this.float32[g+0]=i,this.float32[g+1]=a,this.float32[g+2]=d,this.float32[g+3]=m,e}}qn.prototype.bytesPerElement=16,gi(qn,"StructArrayLayout4f16");class mn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,i,a,d,m)}emplace(e,i,a,d,m,g){const v=6*e,w=3*e;return this.uint16[v+0]=i,this.uint16[v+1]=a,this.uint16[v+2]=d,this.uint16[v+3]=m,this.float32[w+2]=g,e}}mn.prototype.bytesPerElement=12,gi(mn,"StructArrayLayout4ui1f12");class Ln extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,i,a,d)}emplace(e,i,a,d,m){const g=4*e;return this.uint16[g+0]=i,this.uint16[g+1]=a,this.uint16[g+2]=d,this.uint16[g+3]=m,e}}Ln.prototype.bytesPerElement=8,gi(Ln,"StructArrayLayout4ui8");class Jn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,i,a,d,m,g)}emplace(e,i,a,d,m,g,v){const w=6*e;return this.int16[w+0]=i,this.int16[w+1]=a,this.int16[w+2]=d,this.int16[w+3]=m,this.int16[w+4]=g,this.int16[w+5]=v,e}}Jn.prototype.bytesPerElement=12,gi(Jn,"StructArrayLayout6i12");class jn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v,w,E,R,z,Y){const ne=this.length;return this.resize(ne+1),this.emplace(ne,e,i,a,d,m,g,v,w,E,R,z,Y)}emplace(e,i,a,d,m,g,v,w,E,R,z,Y,ne){const ae=12*e;return this.int16[ae+0]=i,this.int16[ae+1]=a,this.int16[ae+2]=d,this.int16[ae+3]=m,this.uint16[ae+4]=g,this.uint16[ae+5]=v,this.uint16[ae+6]=w,this.uint16[ae+7]=E,this.int16[ae+8]=R,this.int16[ae+9]=z,this.int16[ae+10]=Y,this.int16[ae+11]=ne,e}}jn.prototype.bytesPerElement=24,gi(jn,"StructArrayLayout4i4ui4i24");class Qn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,i,a,d,m,g)}emplace(e,i,a,d,m,g,v){const w=10*e,E=5*e;return this.int16[w+0]=i,this.int16[w+1]=a,this.int16[w+2]=d,this.float32[E+2]=m,this.float32[E+3]=g,this.float32[E+4]=v,e}}Qn.prototype.bytesPerElement=20,gi(Qn,"StructArrayLayout3i3f20");class Pi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint32[1*e+0]=i,e}}Pi.prototype.bytesPerElement=4,gi(Pi,"StructArrayLayout1ul4");class qi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v,w,E,R,z,Y,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,e,i,a,d,m,g,v,w,E,R,z,Y,ne)}emplace(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae){const ye=20*e,Be=10*e;return this.int16[ye+0]=i,this.int16[ye+1]=a,this.int16[ye+2]=d,this.int16[ye+3]=m,this.int16[ye+4]=g,this.float32[Be+3]=v,this.float32[Be+4]=w,this.float32[Be+5]=E,this.float32[Be+6]=R,this.int16[ye+14]=z,this.uint32[Be+8]=Y,this.uint16[ye+18]=ne,this.uint16[ye+19]=ae,e}}qi.prototype.bytesPerElement=40,gi(qi,"StructArrayLayout5i4f1i1ul2ui40");class Ci extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,i,a,d,m,g,v)}emplace(e,i,a,d,m,g,v,w){const E=8*e;return this.int16[E+0]=i,this.int16[E+1]=a,this.int16[E+2]=d,this.int16[E+4]=m,this.int16[E+5]=g,this.int16[E+6]=v,this.int16[E+7]=w,e}}Ci.prototype.bytesPerElement=16,gi(Ci,"StructArrayLayout3i2i2i16");class Li extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,i,a,d,m)}emplace(e,i,a,d,m,g){const v=4*e,w=8*e;return this.float32[v+0]=i,this.float32[v+1]=a,this.float32[v+2]=d,this.int16[w+6]=m,this.int16[w+7]=g,e}}Li.prototype.bytesPerElement=16,gi(Li,"StructArrayLayout2f1f2i16");class hr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,i,a,d)}emplace(e,i,a,d,m){const g=12*e,v=3*e;return this.uint8[g+0]=i,this.uint8[g+1]=a,this.float32[v+1]=d,this.float32[v+2]=m,e}}hr.prototype.bytesPerElement=12,gi(hr,"StructArrayLayout2ub2f12");class lr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a){const d=this.length;return this.resize(d+1),this.emplace(d,e,i,a)}emplace(e,i,a,d){const m=3*e;return this.float32[m+0]=i,this.float32[m+1]=a,this.float32[m+2]=d,e}}lr.prototype.bytesPerElement=12,gi(lr,"StructArrayLayout3f12");class Si extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a){const d=this.length;return this.resize(d+1),this.emplace(d,e,i,a)}emplace(e,i,a,d){const m=3*e;return this.uint16[m+0]=i,this.uint16[m+1]=a,this.uint16[m+2]=d,e}}Si.prototype.bytesPerElement=6,gi(Si,"StructArrayLayout3ui6");class kr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt)}emplace(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt,Lt){const gn=30*e,un=15*e,Rn=60*e;return this.int16[gn+0]=i,this.int16[gn+1]=a,this.int16[gn+2]=d,this.float32[un+2]=m,this.float32[un+3]=g,this.uint16[gn+8]=v,this.uint16[gn+9]=w,this.uint32[un+5]=E,this.uint32[un+6]=R,this.uint32[un+7]=z,this.uint16[gn+16]=Y,this.uint16[gn+17]=ne,this.uint16[gn+18]=ae,this.float32[un+10]=ye,this.float32[un+11]=Be,this.uint8[Rn+48]=rt,this.uint8[Rn+49]=St,this.uint8[Rn+50]=ot,this.uint32[un+13]=Dt,this.int16[gn+28]=Bt,this.uint8[Rn+58]=Lt,e}}kr.prototype.bytesPerElement=60,gi(kr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class to extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un,Zn){const ei=this.length;return this.resize(ei+1),this.emplace(ei,e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un,Zn)}emplace(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be,rt,St,ot,Dt,Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un,Zn,ei){const Pn=38*e,ci=19*e;return this.int16[Pn+0]=i,this.int16[Pn+1]=a,this.int16[Pn+2]=d,this.float32[ci+2]=m,this.float32[ci+3]=g,this.int16[Pn+8]=v,this.int16[Pn+9]=w,this.int16[Pn+10]=E,this.int16[Pn+11]=R,this.int16[Pn+12]=z,this.int16[Pn+13]=Y,this.uint16[Pn+14]=ne,this.uint16[Pn+15]=ae,this.uint16[Pn+16]=ye,this.uint16[Pn+17]=Be,this.uint16[Pn+18]=rt,this.uint16[Pn+19]=St,this.uint16[Pn+20]=ot,this.uint16[Pn+21]=Dt,this.uint16[Pn+22]=Bt,this.uint16[Pn+23]=Lt,this.uint16[Pn+24]=gn,this.uint16[Pn+25]=un,this.uint16[Pn+26]=Rn,this.uint16[Pn+27]=Kn,this.uint16[Pn+28]=vn,this.uint32[ci+15]=Vn,this.float32[ci+16]=Un,this.float32[ci+17]=Zn,this.float32[ci+18]=ei,e}}to.prototype.bytesPerElement=76,gi(to,"StructArrayLayout3i2f6i15ui1ul3f76");class no extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.float32[1*e+0]=i,e}}no.prototype.bytesPerElement=4,gi(no,"StructArrayLayout1f4");class jr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,d,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,i,a,d,m)}emplace(e,i,a,d,m,g){const v=5*e;return this.float32[v+0]=i,this.float32[v+1]=a,this.float32[v+2]=d,this.float32[v+3]=m,this.float32[v+4]=g,e}}jr.prototype.bytesPerElement=20,gi(jr,"StructArrayLayout5f20");class wa extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,i,a,d)}emplace(e,i,a,d,m){const g=6*e;return this.uint32[3*e+0]=i,this.uint16[g+2]=a,this.uint16[g+3]=d,this.uint16[g+4]=m,e}}wa.prototype.bytesPerElement=12,gi(wa,"StructArrayLayout1ul3ui12");class ta extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const d=2*e;return this.uint16[d+0]=i,this.uint16[d+1]=a,e}}ta.prototype.bytesPerElement=4,gi(ta,"StructArrayLayout2ui4");class fl extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint16[1*e+0]=i,e}}fl.prototype.bytesPerElement=2,gi(fl,"StructArrayLayout1ui2");class kl extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const d=2*e;return this.float32[d+0]=i,this.float32[d+1]=a,e}}kl.prototype.bytesPerElement=8,gi(kl,"StructArrayLayout2f8");class Io extends Ht{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Io.prototype.size=40;class Yr extends qi{get(e){return new Io(this,e)}}gi(Yr,"CollisionBoxArray");class Cr extends Ht{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Cr.prototype.size=60;class Xo extends kr{get(e){return new Cr(this,e)}}gi(Xo,"PlacedSymbolArray");class ha extends Ht{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ha.prototype.size=76;class po extends to{get(e){return new ha(this,e)}}gi(po,"SymbolInstanceArray");class Ca extends no{getoffsetX(e){return this.float32[1*e+0]}}gi(Ca,"GlyphOffsetArray");class Ua extends Xn{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}gi(Ua,"SymbolLineVertexArray");class gc extends Ht{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}gc.prototype.size=12;class uu extends wa{get(e){return new gc(this,e)}}gi(uu,"FeatureIndexArray");class Rl extends ta{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}gi(Rl,"FillExtrusionCentroidArray");const Fl=Xt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ll=Xt([{name:"a_dash",components:4,type:"Uint16"}]);var Vu={exports:{}},sm=function(n,e){var i,a,d,m,g,v,w,E;for(a=n.length-(i=3&n.length),d=e,g=3432918353,v=461845907,E=0;E<a;)w=255&n.charCodeAt(E)|(255&n.charCodeAt(++E))<<8|(255&n.charCodeAt(++E))<<16|(255&n.charCodeAt(++E))<<24,++E,d=27492+(65535&(m=5*(65535&(d=(d^=w=(65535&(w=(w=(65535&w)*g+(((w>>>16)*g&65535)<<16)&4294967295)<<15|w>>>17))*v+(((w>>>16)*v&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(w=0,i){case 3:w^=(255&n.charCodeAt(E+2))<<16;case 2:w^=(255&n.charCodeAt(E+1))<<8;case 1:d^=w=(65535&(w=(w=(65535&(w^=255&n.charCodeAt(E)))*g+(((w>>>16)*g&65535)<<16)&4294967295)<<15|w>>>17))*v+(((w>>>16)*v&65535)<<16)&4294967295}return d^=n.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0},Xg=function(n,e){for(var i,a=n.length,d=e^a,m=0;a>=4;)i=1540483477*(65535&(i=255&n.charCodeAt(m)|(255&n.charCodeAt(++m))<<8|(255&n.charCodeAt(++m))<<16|(255&n.charCodeAt(++m))<<24))+((1540483477*(i>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++m;switch(a){case 3:d^=(255&n.charCodeAt(m+2))<<16;case 2:d^=(255&n.charCodeAt(m+1))<<8;case 1:d=1540483477*(65535&(d^=255&n.charCodeAt(m)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};Vu.exports=sm,Vu.exports.murmur3=sm,Vu.exports.murmur2=Xg;var ka=en(Vu.exports);class Uu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,i,a,d){this.ids.push(yp(e)),this.positions.push(i,a,d)}getPositions(e){const i=yp(e);let a=0,d=this.ids.length-1;for(;a<d;){const g=a+d>>1;this.ids[g]>=i?d=g:a=g+1}const m=[];for(;this.ids[a]===i;)m.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return m}static serialize(e,i){const a=new Float64Array(e.ids),d=new Uint32Array(e.positions);return Md(a,d,0,a.length-1),i&&i.push(a.buffer,d.buffer),{ids:a,positions:d}}static deserialize(e){const i=new Uu;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i}}function yp(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:ka(String(n))}function Md(n,e,i,a){for(;i<a;){const d=n[i+a>>1];let m=i-1,g=a+1;for(;;){do{m++}while(n[m]<d);do{g--}while(n[g]>d);if(m>=g)break;na(n,m,g),na(e,3*m,3*g),na(e,3*m+1,3*g+1),na(e,3*m+2,3*g+2)}g-i<a-g?(Md(n,e,i,g),i=g+1):(Md(n,e,g+1,a),a=g)}}function na(n,e,i){const a=n[e];n[e]=n[i],n[i]=a}gi(Uu,"FeaturePositionMap");class ml{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,i),this.initialized=!0),!!this.location}}class Td extends ml{constructor(e){super(e),this.current=0}set(e,i,a){this.fetchUniformLocation(e,i)&&this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class vp extends ml{constructor(e){super(e),this.current=[0,0,0,0]}set(e,i,a){this.fetchUniformLocation(e,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3])))}}class am extends ml{constructor(e){super(e),this.current=Fr.transparent}set(e,i,a){this.fetchUniformLocation(e,i)&&(a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a)))}}const lm=new Float32Array(16),Jg=new Float32Array(9),cm=new Float32Array(4);function bp(n){return[Vt(255*n.r,255*n.g),Vt(255*n.b,255*n.a)]}class ju{constructor(e,i,a){this.value=e,this.uniformNames=i.map(d=>`u_${d}`),this.type=a}setUniform(e,i,a,d,m){i.set(e,m,d.constantOr(this.value))}getBinding(e,i){return"color"===this.type?new am(e):new Td(e)}}class Hu{constructor(e,i){this.uniformNames=i.map(a=>`u_${a}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,i,a,d,m){const g="u_pattern"===m||"u_dash"===m?this.pattern:"u_pixel_ratio"===m?this.pixelRatio:null;g&&i.set(e,m,g)}getBinding(e,i){return"u_pattern"===i||"u_dash"===i?new vp(e):new Td(e)}}class _c{constructor(e,i,a,d){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=i.map(m=>({name:`a_${m}`,type:"Float32",components:"color"===a?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(e,i,a,d,m,g){const v=this.paintVertexArray.length,w=this.expression.evaluate(new B(0),i,{},m,d,g);this.paintVertexArray.resize(e),this._setPaintValue(v,e,w)}updatePaintArray(e,i,a,d,m){const g=this.expression.evaluate({zoom:0},a,d,void 0,m);this._setPaintValue(e,i,g)}_setPaintValue(e,i,a){if("color"===this.type){const d=bp(a);for(let m=e;m<i;m++)this.paintVertexArray.emplace(m,d[0],d[1])}else{for(let d=e;d<i;d++)this.paintVertexArray.emplace(d,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gl{constructor(e,i,a,d,m,g){this.expression=e,this.uniformNames=i.map(v=>`u_${v}_t`),this.type=a,this.useIntegerZoom=d,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(v=>({name:`a_${v}`,type:"Float32",components:"color"===a?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,i,a,d,m,g){const v=this.expression.evaluate(new B(this.zoom),i,{},m,d,g),w=this.expression.evaluate(new B(this.zoom+1),i,{},m,d,g),E=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(E,e,v,w)}updatePaintArray(e,i,a,d,m){const g=this.expression.evaluate({zoom:this.zoom},a,d,void 0,m),v=this.expression.evaluate({zoom:this.zoom+1},a,d,void 0,m);this._setPaintValue(e,i,g,v)}_setPaintValue(e,i,a,d){if("color"===this.type){const m=bp(a),g=bp(d);for(let v=e;v<i;v++)this.paintVertexArray.emplace(v,m[0],m[1],g[0],g[1])}else{for(let m=e;m<i;m++)this.paintVertexArray.emplace(m,a,d);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,i,a,d,m){const g=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,v=_n(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);i.set(e,m,v)}getBinding(e,i){return new Td(e)}}class tc{constructor(e,i,a,d,m){this.expression=e,this.layerId=m,this.paintVertexAttributes=("array"===a?Ll:Fl).members;for(let g=0;g<i.length;++g);this.paintVertexArray=new d}populatePaintArray(e,i,a){const d=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(d,e,i.patterns&&i.patterns[this.layerId],a)}updatePaintArray(e,i,a,d,m,g){this._setPaintValues(e,i,a.patterns&&a.patterns[this.layerId],g)}_setPaintValues(e,i,a,d){if(!d||!a)return;const m=d[a];if(!m)return;const{tl:g,br:v,pixelRatio:w}=m;for(let E=e;E<i;E++)this.paintVertexArray.emplace(E,g[0],g[1],v[0],v[1],w)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class kc{constructor(e,i,a=(()=>!0)){this.binders={},this._buffers=[];const d=[];for(const m in e.paint._values){if(!a(m))continue;const g=e.paint.get(m);if(!(g instanceof qe&&zs(g.property.specification)))continue;const v=e_(m,e.type),w=g.value,E=g.property.specification.type,R=!!g.property.useIntegerZoom,z="line-dasharray"===m||m.endsWith("pattern"),Y="line-dasharray"===m&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==w.kind||Y)if("source"===w.kind||Y||z){const ne=Cp(m,E,"source");this.binders[m]=z?new tc(w,v,E,ne,e.id):new _c(w,v,E,ne),d.push(`/a_${m}`)}else{const ne=Cp(m,E,"composite");this.binders[m]=new gl(w,v,E,R,i,ne),d.push(`/z_${m}`)}else this.binders[m]=z?new Hu(w.value,v):new ju(w.value,v,E),d.push(`/u_${m}`)}this.cacheKey=d.sort().join("")}getMaxValue(e){const i=this.binders[e];return i instanceof _c||i instanceof gl?i.maxValue:0}populatePaintArrays(e,i,a,d,m,g){for(const v in this.binders){const w=this.binders[v];(w instanceof _c||w instanceof gl||w instanceof tc)&&w.populatePaintArray(e,i,a,d,m,g)}}setConstantPatternPositions(e){for(const i in this.binders){const a=this.binders[i];a instanceof Hu&&a.setConstantPatternPositions(e)}}updatePaintArrays(e,i,a,d,m,g){let v=!1;for(const w in e){const E=i.getPositions(w);for(const R of E){const z=a.feature(R.index);for(const Y in this.binders){const ne=this.binders[Y];if((ne instanceof _c||ne instanceof gl||ne instanceof tc)&&!0===ne.expression.isStateDependent){const ae=d.paint.get(Y);ne.expression=ae.value,ne.updatePaintArray(R.start,R.end,z,e[w],m,g),v=!0}}}}return v}defines(){const e=[];for(const i in this.binders){const a=this.binders[i];(a instanceof ju||a instanceof Hu)&&e.push(...a.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return e}getBinderAttributes(){const e=[];for(const i in this.binders){const a=this.binders[i];if(a instanceof _c||a instanceof gl||a instanceof tc)for(let d=0;d<a.paintVertexAttributes.length;d++)e.push(a.paintVertexAttributes[d].name)}return e}getBinderUniforms(){const e=[];for(const i in this.binders){const a=this.binders[i];if(a instanceof ju||a instanceof Hu||a instanceof gl)for(const d of a.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const i=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof ju||d instanceof Hu||d instanceof gl)for(const m of d.uniformNames)i.push({name:m,property:a,binding:d.getBinding(e,m)})}return i}setUniforms(e,i,a,d,m){for(const{name:g,property:v,binding:w}of a)this.binders[v].setUniform(e,w,m,d.get(v),g)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const i=this.binders[e];(i instanceof _c||i instanceof gl||i instanceof tc)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(const i in this.binders){const a=this.binders[i];(a instanceof _c||a instanceof gl||a instanceof tc)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const i=this.binders[e];(i instanceof _c||i instanceof gl||i instanceof tc)&&i.destroy()}}}class Bl{constructor(e,i,a=(()=>!0)){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new kc(d,i,a);this.needsUpload=!1,this._featureMap=new Uu,this._bufferOffset=0}populatePaintArrays(e,i,a,d,m,g,v){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,i,d,m,g,v);void 0!==i.id&&this._featureMap.add(i.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,i,a,d,m){for(const g of a)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,i,g,d,m)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Qg={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function e_(n,e){return Qg[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const xp={"line-pattern":{source:mn,composite:mn},"fill-pattern":{source:mn,composite:mn},"fill-extrusion-pattern":{source:mn,composite:mn},"line-dasharray":{source:Ln,composite:Ln}},wp={color:{source:kl,composite:qn},number:{source:no,composite:kl}};function Cp(n,e,i){const a=xp[n];return a&&a[i]||wp[e][i]}gi(ju,"ConstantBinder"),gi(Hu,"PatternConstantBinder"),gi(_c,"SourceExpressionBinder"),gi(tc,"PatternCompositeBinder"),gi(gl,"CompositeExpressionBinder"),gi(kc,"ProgramConfiguration",{omit:["_buffers"]}),gi(Bl,"ProgramConfigurationSet");const hu="-transition";class _l extends wo{constructor(e,i){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new Xe(i.layout)),i.paint)){this._transitionablePaint=new de(i.paint);for(const a in e.paint)this.setPaintProperty(a,e.paint[a],{validate:!1});for(const a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tt(i.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,i,a={}){null!=i&&this._validate(Jl,`layers.${this.id}.layout.${e}`,e,i,a)||("visibility"!==e?this._unevaluatedLayout.setValue(e,i):this.visibility=i)}getPaintProperty(e){return Re(e,hu)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,i,a={}){if(null!=i&&this._validate(fc,`layers.${this.id}.paint.${e}`,e,i,a))return!1;if(Re(e,hu))return this._transitionablePaint.setTransition(e.slice(0,-11),i||void 0),!1;{const d=this._transitionablePaint._values[e],m=d.value.isDataDriven(),g=d.value;this._transitionablePaint.setValue(e,i),this._handleSpecialPaintPropertyUpdate(e);const v=this._transitionablePaint._values[e].value,w=v.isDataDriven(),E=Re(e,"pattern")||"line-dasharray"===e;return w||m||E||this._handleOverridablePaintPropertyUpdate(e,g,v)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,i,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),cn(e,(i,a)=>!(void 0===i||"layout"===a&&!Object.keys(i).length||"paint"===a&&!Object.keys(i).length))}_validate(e,i,a,d,m={}){return(!m||!1!==m.validate)&&Bu(this,e.call(Oc,{key:i,layerType:this.type,objectKey:a,value:d,styleSpec:wn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const i=this.paint.get(e);if(i instanceof qe&&zs(i.property.specification)&&("source"===i.value.kind||"composite"===i.value.kind)&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=bo(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const um=Xt([{name:"a_pos",components:2,type:"Int16"}],4),t_=Xt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Jo{constructor(e=[]){this.segments=e}prepareSegment(e,i,a,d){let m=this.segments[this.segments.length-1];return e>Jo.MAX_VERTEX_ARRAY_LENGTH&&Mn(`Max vertices per segment is ${Jo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!m||m.vertexLength+e>Jo.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==d)&&(m={vertexOffset:i.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},void 0!==d&&(m.sortKey=d),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const e of this.segments)for(const i in e.vaos)e.vaos[i].destroy()}static simpleSegment(e,i,a,d){return new Jo([{vertexOffset:e,primitiveOffset:i,vertexLength:a,primitiveLength:d,vaos:{},sortKey:0}])}}Jo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gi(Jo,"SegmentVector");var ki=8192;class Rc{constructor(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof qr?new qr(e.lng,e.lat):qr.convert(e),this}setSouthWest(e){return this._sw=e instanceof qr?new qr(e.lng,e.lat):qr.convert(e),this}extend(e){const i=this._sw,a=this._ne;let d,m;if(e instanceof qr)d=e,m=e;else{if(!(e instanceof Rc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Rc.convert(e)):this.extend(qr.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(qr.convert(e)):this;if(d=e._sw,m=e._ne,!d||!m)return this}return i||a?(i.lng=Math.min(d.lng,i.lng),i.lat=Math.min(d.lat,i.lat),a.lng=Math.max(m.lng,a.lng),a.lat=Math.max(m.lat,a.lat)):(this._sw=new qr(d.lng,d.lat),this._ne=new qr(m.lng,m.lat)),this}getCenter(){return new qr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new qr(this.getWest(),this.getNorth())}getSouthEast(){return new qr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:i,lat:a}=qr.convert(e);let d=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&d}static convert(e){return!e||e instanceof Rc?e:new Rc(e)}}var ih=1e-6,nl=typeof Float32Array<"u"?Float32Array:Array;function dm(){var n=new nl(9);return nl!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function hm(n,e,i){var a=e[0],d=e[1],m=e[2],g=e[3],v=e[4],w=e[5],E=e[6],R=e[7],z=e[8],Y=i[0],ne=i[1],ae=i[2],ye=i[3],Be=i[4],rt=i[5],St=i[6],ot=i[7],Dt=i[8];return n[0]=Y*a+ne*g+ae*E,n[1]=Y*d+ne*v+ae*R,n[2]=Y*m+ne*w+ae*z,n[3]=ye*a+Be*g+rt*E,n[4]=ye*d+Be*v+rt*R,n[5]=ye*m+Be*w+rt*z,n[6]=St*a+ot*g+Dt*E,n[7]=St*d+ot*v+Dt*R,n[8]=St*m+ot*w+Dt*z,n}function Cl(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ad(n,e){var i=e[0],a=e[1],d=e[2],m=e[3],g=e[4],v=e[5],w=e[6],E=e[7],R=e[8],z=e[9],Y=e[10],ne=e[11],ae=e[12],ye=e[13],Be=e[14],rt=e[15],St=i*v-a*g,ot=i*w-d*g,Dt=i*E-m*g,Bt=a*w-d*v,Lt=a*E-m*v,gn=d*E-m*w,un=R*ye-z*ae,Rn=R*Be-Y*ae,Kn=R*rt-ne*ae,vn=z*Be-Y*ye,Vn=z*rt-ne*ye,Un=Y*rt-ne*Be,Zn=St*Un-ot*Vn+Dt*vn+Bt*Kn-Lt*Rn+gn*un;return Zn?(n[0]=(v*Un-w*Vn+E*vn)*(Zn=1/Zn),n[1]=(d*Vn-a*Un-m*vn)*Zn,n[2]=(ye*gn-Be*Lt+rt*Bt)*Zn,n[3]=(Y*Lt-z*gn-ne*Bt)*Zn,n[4]=(w*Kn-g*Un-E*Rn)*Zn,n[5]=(i*Un-d*Kn+m*Rn)*Zn,n[6]=(Be*Dt-ae*gn-rt*ot)*Zn,n[7]=(R*gn-Y*Dt+ne*ot)*Zn,n[8]=(g*Vn-v*Kn+E*un)*Zn,n[9]=(a*Kn-i*Vn-m*un)*Zn,n[10]=(ae*Lt-ye*Dt+rt*St)*Zn,n[11]=(z*Dt-R*Lt-ne*St)*Zn,n[12]=(v*Rn-g*vn-w*un)*Zn,n[13]=(i*vn-a*Rn+d*un)*Zn,n[14]=(ye*ot-ae*Bt-Be*St)*Zn,n[15]=(R*Bt-z*ot+Y*St)*Zn,n):null}function Fc(n,e,i){var a=e[0],d=e[1],m=e[2],g=e[3],v=e[4],w=e[5],E=e[6],R=e[7],z=e[8],Y=e[9],ne=e[10],ae=e[11],ye=e[12],Be=e[13],rt=e[14],St=e[15],ot=i[0],Dt=i[1],Bt=i[2],Lt=i[3];return n[0]=ot*a+Dt*v+Bt*z+Lt*ye,n[1]=ot*d+Dt*w+Bt*Y+Lt*Be,n[2]=ot*m+Dt*E+Bt*ne+Lt*rt,n[3]=ot*g+Dt*R+Bt*ae+Lt*St,n[4]=(ot=i[4])*a+(Dt=i[5])*v+(Bt=i[6])*z+(Lt=i[7])*ye,n[5]=ot*d+Dt*w+Bt*Y+Lt*Be,n[6]=ot*m+Dt*E+Bt*ne+Lt*rt,n[7]=ot*g+Dt*R+Bt*ae+Lt*St,n[8]=(ot=i[8])*a+(Dt=i[9])*v+(Bt=i[10])*z+(Lt=i[11])*ye,n[9]=ot*d+Dt*w+Bt*Y+Lt*Be,n[10]=ot*m+Dt*E+Bt*ne+Lt*rt,n[11]=ot*g+Dt*R+Bt*ae+Lt*St,n[12]=(ot=i[12])*a+(Dt=i[13])*v+(Bt=i[14])*z+(Lt=i[15])*ye,n[13]=ot*d+Dt*w+Bt*Y+Lt*Be,n[14]=ot*m+Dt*E+Bt*ne+Lt*rt,n[15]=ot*g+Dt*R+Bt*ae+Lt*St,n}function pu(n,e,i){var a,d,m,g,v,w,E,R,z,Y,ne,ae,ye=i[0],Be=i[1],rt=i[2];return e===n?(n[12]=e[0]*ye+e[4]*Be+e[8]*rt+e[12],n[13]=e[1]*ye+e[5]*Be+e[9]*rt+e[13],n[14]=e[2]*ye+e[6]*Be+e[10]*rt+e[14],n[15]=e[3]*ye+e[7]*Be+e[11]*rt+e[15]):(d=e[1],m=e[2],g=e[3],v=e[4],w=e[5],E=e[6],R=e[7],z=e[8],Y=e[9],ne=e[10],ae=e[11],n[0]=a=e[0],n[1]=d,n[2]=m,n[3]=g,n[4]=v,n[5]=w,n[6]=E,n[7]=R,n[8]=z,n[9]=Y,n[10]=ne,n[11]=ae,n[12]=a*ye+v*Be+z*rt+e[12],n[13]=d*ye+w*Be+Y*rt+e[13],n[14]=m*ye+E*Be+ne*rt+e[14],n[15]=g*ye+R*Be+ae*rt+e[15]),n}function fu(n,e,i){var a=i[0],d=i[1],m=i[2];return n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a,n[3]=e[3]*a,n[4]=e[4]*d,n[5]=e[5]*d,n[6]=e[6]*d,n[7]=e[7]*d,n[8]=e[8]*m,n[9]=e[9]*m,n[10]=e[10]*m,n[11]=e[11]*m,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Ep(n,e,i){var a=Math.sin(i),d=Math.cos(i),m=e[4],g=e[5],v=e[6],w=e[7],E=e[8],R=e[9],z=e[10],Y=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=m*d+E*a,n[5]=g*d+R*a,n[6]=v*d+z*a,n[7]=w*d+Y*a,n[8]=E*d-m*a,n[9]=R*d-g*a,n[10]=z*d-v*a,n[11]=Y*d-w*a,n}function Sd(n,e,i){var a=Math.sin(i),d=Math.cos(i),m=e[0],g=e[1],v=e[2],w=e[3],E=e[8],R=e[9],z=e[10],Y=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=m*d-E*a,n[1]=g*d-R*a,n[2]=v*d-z*a,n[3]=w*d-Y*a,n[8]=m*a+E*d,n[9]=g*a+R*d,n[10]=v*a+z*d,n[11]=w*a+Y*d,n}function Dp(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Lc(n,e,i){var a,d,m,g=i[0],v=i[1],w=i[2],E=Math.hypot(g,v,w);return E<ih?null:(g*=E=1/E,v*=E,w*=E,a=Math.sin(e),d=Math.cos(e),n[0]=g*g*(m=1-d)+d,n[1]=v*g*m+w*a,n[2]=w*g*m-v*a,n[3]=0,n[4]=g*v*m-w*a,n[5]=v*v*m+d,n[6]=w*v*m+g*a,n[7]=0,n[8]=g*w*m+v*a,n[9]=v*w*m-g*a,n[10]=w*w*m+d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var pm=Fc;function rh(){var n=new nl(3);return nl!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function fm(n){var e=new nl(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function oh(n){return Math.hypot(n[0],n[1],n[2])}function yc(n,e,i){var a=new nl(3);return a[0]=n,a[1]=e,a[2]=i,a}function vc(n,e,i){return n[0]=e[0]+i[0],n[1]=e[1]+i[1],n[2]=e[2]+i[2],n}function sh(n,e,i){return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],n}function Mp(n,e,i){return n[0]=e[0]*i[0],n[1]=e[1]*i[1],n[2]=e[2]*i[2],n}function Gu(n,e,i){return n[0]=Math.min(e[0],i[0]),n[1]=Math.min(e[1],i[1]),n[2]=Math.min(e[2],i[2]),n}function mu(n,e,i){return n[0]=Math.max(e[0],i[0]),n[1]=Math.max(e[1],i[1]),n[2]=Math.max(e[2],i[2]),n}function il(n,e,i){return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n}function Bc(n,e,i,a){return n[0]=e[0]+i[0]*a,n[1]=e[1]+i[1]*a,n[2]=e[2]+i[2]*a,n}function ia(n,e){var i=e[0],a=e[1],d=e[2],m=i*i+a*a+d*d;return m>0&&(m=1/Math.sqrt(m)),n[0]=e[0]*m,n[1]=e[1]*m,n[2]=e[2]*m,n}function yl(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Id(n,e,i){var a=e[0],d=e[1],m=e[2],g=i[0],v=i[1],w=i[2];return n[0]=d*w-m*v,n[1]=m*g-a*w,n[2]=a*v-d*g,n}function Uo(n,e,i){var a=e[0],d=e[1],m=e[2],g=i[3]*a+i[7]*d+i[11]*m+i[15];return n[0]=(i[0]*a+i[4]*d+i[8]*m+i[12])/(g=g||1),n[1]=(i[1]*a+i[5]*d+i[9]*m+i[13])/g,n[2]=(i[2]*a+i[6]*d+i[10]*m+i[14])/g,n}function ah(n,e,i){var a=i[0],d=i[1],m=i[2],g=e[0],v=e[1],w=e[2],E=d*w-m*v,R=m*g-a*w,z=a*v-d*g,Y=d*z-m*R,ne=m*E-a*z,ae=a*R-d*E,ye=2*i[3];return R*=ye,z*=ye,ne*=2,ae*=2,n[0]=g+(E*=ye)+(Y*=2),n[1]=v+R+ne,n[2]=w+z+ae,n}var bc,Nl=sh,mm=Mp,n_=oh;function gm(n,e,i){return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n}function _m(n,e){var i=e[0],a=e[1],d=e[2],m=e[3],g=i*i+a*a+d*d+m*m;return g>0&&(g=1/Math.sqrt(g)),n[0]=i*g,n[1]=a*g,n[2]=d*g,n[3]=m*g,n}function Nc(n,e,i){var a=e[0],d=e[1],m=e[2],g=e[3];return n[0]=i[0]*a+i[4]*d+i[8]*m+i[12]*g,n[1]=i[1]*a+i[5]*d+i[9]*m+i[13]*g,n[2]=i[2]*a+i[6]*d+i[10]*m+i[14]*g,n[3]=i[3]*a+i[7]*d+i[11]*m+i[15]*g,n}function Tp(){var n=new nl(4);return nl!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Pd(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function lh(n,e,i){i*=.5;var a=e[0],d=e[1],m=e[2],g=e[3],v=Math.sin(i),w=Math.cos(i);return n[0]=a*w+g*v,n[1]=d*w+m*v,n[2]=m*w-d*v,n[3]=g*w-a*v,n}function gu(n,e,i){i*=.5;var a=e[0],d=e[1],m=e[2],g=e[3],v=Math.sin(i),w=Math.cos(i);return n[0]=a*w-m*v,n[1]=d*w+g*v,n[2]=m*w+a*v,n[3]=g*w-d*v,n}rh(),bc=new nl(4),nl!=Float32Array&&(bc[0]=0,bc[1]=0,bc[2]=0,bc[3]=0);var i_=_m;rh(),yc(1,0,0),yc(0,1,0),Tp(),Tp(),dm();const r_=Xt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:o_}=r_,ym=Xt([{name:"a_pos_3",components:3,type:"Int16"}]);var _u=Xt([{name:"a_pos",type:"Int16",components:2}]);class Ap{constructor(e,i){this.pos=e,this.dir=i}intersectsPlane(e,i,a){const d=yl(i,this.dir);if(Math.abs(d)<1e-6)return!1;const m=((e[0]-this.pos[0])*i[0]+(e[1]-this.pos[1])*i[1]+(e[2]-this.pos[2])*i[2])/d;return a[0]=this.pos[0]+this.dir[0]*m,a[1]=this.pos[1]+this.dir[1]*m,a[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(e,i,a){if(ye=(ne=this.pos)[0],Be=ne[1],rt=ne[2],St=(ae=e)[0],ot=ae[1],Dt=ae[2],Math.abs(ye-St)<=ih*Math.max(1,Math.abs(ye),Math.abs(St))&&Math.abs(Be-ot)<=ih*Math.max(1,Math.abs(Be),Math.abs(ot))&&Math.abs(rt-Dt)<=ih*Math.max(1,Math.abs(rt),Math.abs(Dt))||0===i)return a[0]=a[1]=a[2]=0,!1;var ne,ae,ye,Be,rt,St,ot,Dt;const[d,m,g]=this.dir,v=this.pos[0]-e[0],w=this.pos[1]-e[1],E=this.pos[2]-e[2],R=d*d+m*m+g*g,z=2*(v*d+w*m+E*g),Y=z*z-4*R*(v*v+w*w+E*E-i*i);if(Y<0){const ne=Math.max(-z/2,0),ae=v+d*ne,ye=w+m*ne,Be=E+g*ne,rt=Math.hypot(ae,ye,Be);return a[0]=ae*i/rt,a[1]=ye*i/rt,a[2]=Be*i/rt,!1}{const ne=(-z-Math.sqrt(Y))/(2*R);if(ne<0){const ae=Math.hypot(v,w,E);return a[0]=v*i/ae,a[1]=w*i/ae,a[2]=E*i/ae,!1}return a[0]=v+d*ne,a[1]=w+m*ne,a[2]=E+g*ne,!0}}}class ch{constructor(e,i,a,d,m){this.TL=e,this.TR=i,this.BR=a,this.BL=d,this.horizon=m}static fromInvProjectionMatrix(e,i,a){const d=[-1,1,1],m=[1,1,1],g=[1,-1,1],v=[-1,-1,1],w=Uo(d,d,e),E=Uo(m,m,e),R=Uo(g,g,e),z=Uo(v,v,e);return new ch(w,E,R,z,i/a)}}class $u{constructor(e,i){this.points=e,this.planes=i}static fromInvProjectionMatrix(e,i,a,d){const m=Math.pow(2,a),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const E=Nc([],w,e),R=1/E[3]/i*m;return(z=E)[0]=(Y=E)[0]*(ne=[R,R,d?1/E[3]:R,R])[0],z[1]=Y[1]*ne[1],z[2]=Y[2]*ne[2],z[3]=Y[3]*ne[3],z;var z,Y,ne}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const E=ia([],Id([],Nl([],g[w[0]],g[w[1]]),Nl([],g[w[2]],g[w[1]]))),R=-yl(E,g[w[1]]);return E.concat(R)});return new $u(g,v)}}class pa{static fromPoints(e){const i=[1/0,1/0,1/0],a=[-1/0,-1/0,-1/0];for(const d of e)Gu(i,i,d),mu(a,a,d);return new pa(i,a)}static applyTransform(e,i){const a=e.getCorners();for(let d=0;d<a.length;++d)Uo(a[d],a[d],i);return pa.fromPoints(a)}constructor(e,i){this.min=e,this.max=i,this.center=il([],vc([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],a=fm(this.min),d=fm(this.max);for(let m=0;m<i.length;m++)a[m]=i[m]?this.min[m]:this.center[m],d[m]=i[m]?this.center[m]:this.max[m];return d[2]=this.max[2],new pa(a,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,i=this.max;return[[e[0],e[1],e[2]],[i[0],e[1],e[2]],[i[0],i[1],e[2]],[e[0],i[1],e[2]],[e[0],e[1],i[2]],[i[0],e[1],i[2]],[i[0],i[1],i[2]],[e[0],i[1],i[2]]]}intersects(e){const i=this.getCorners();let a=!0;for(let d=0;d<e.planes.length;d++){const m=e.planes[d];let g=0;for(let v=0;v<i.length;v++)g+=yl(m,i[v])+m[3]>=0;if(0===g)return 0;g!==i.length&&(a=!1)}if(a)return 2;for(let d=0;d<3;d++){let m=Number.MAX_VALUE,g=-Number.MAX_VALUE;for(let v=0;v<e.points.length;v++){const w=e.points[v][d]-this.min[d];m=Math.min(m,w),g=Math.max(g,w)}if(g<0||m>this.max[d]-this.min[d])return 0}return 1}}const uh=5,Sp=6,zl=ki/Math.PI/2,yu=16383,Od=[64,32,16],El=-zl,Dl=zl,s_=[new pa([El,El,El],[Dl,Dl,Dl]),new pa([El,El,El],[0,0,Dl]),new pa([0,El,El],[Dl,0,Dl]),new pa([El,0,El],[0,Dl,Dl]),new pa([0,0,El],[Dl,Dl,Dl])];function Ml(n){return n*zl/fh}function bu(n,e,i,a=!0){const d=il([],n._camera.position,n.worldSize),m=[e,i,1,1];Nc(m,m,n.pixelMatrixInverse),gm(m,m,1/m[3]);const g=ia([],Nl([],m,d)),v=n.globeMatrix,w=[v[12],v[13],v[14]],E=Nl([],w,d),R=oh(E),z=ia([],E),Y=n.worldSize/(2*Math.PI),ne=yl(z,g),ae=Math.asin(Y/R);if(ae<Math.acos(ne)){if(!a)return null;const Kn=[],vn=[];il(Kn,g,R/ne),ia(vn,Nl(vn,Kn,E)),ia(g,vc(g,E,il(g,vn,Math.tan(ae)*R)))}const ye=[];new Ap(d,g).closestPointOnSphere(w,Y,ye);const Be=ia([],li(v,0)),rt=ia([],li(v,1)),St=ia([],li(v,2)),ot=yl(Be,ye),Dt=yl(rt,ye),Bt=yl(St,ye),Lt=Je(Math.asin(-Dt/Y));let gn=Je(Math.atan2(ot,Bt));gn=n.center.lng+function(Kn,vn){const Vn=(vn-Kn+180)%360-180;return Vn<-180?Vn+360:Vn}(n.center.lng,gn);const un=ic(gn),Rn=_n(Vl(Lt),0,1);return new Ku(un,Rn)}class a_{constructor(e,i,a){this.a=Nl([],e,a),this.b=Nl([],i,a),this.center=a;const d=ia([],this.a),m=ia([],this.b);this.angle=Math.acos(yl(d,m))}}function Ip(n,e){if(0===n.angle)return null;let i;return i=0===n.a[e]?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),i<0||i>1?null:function(a,d,m,g){const v=Math.sin(m);return a*(Math.sin((1-g)*m)/v)+d*(Math.sin(g*m)/v)}(n.a[e],n.b[e],n.angle,_n(i,0,1))+n.center[e]}function nc(n){if(n.z<=1)return s_[n.z+2*n.y+n.x];const e=Pp(dh(n));return pa.fromPoints(e)}function xu(n,e,i){return il(n,n,1-i),Bc(n,n,e,i)}function vm(n,e){const i=kd(e.zoom);if(0===i)return nc(n);const a=dh(n),d=Pp(a),m=ic(a.getWest())*e.worldSize,g=ic(a.getEast())*e.worldSize,v=Vl(a.getNorth())*e.worldSize,w=Vl(a.getSouth())*e.worldSize,E=[m,v,0],R=[g,v,0],z=[m,w,0],Y=[g,w,0],ne=Ad([],e.globeMatrix);return Uo(E,E,ne),Uo(R,R,ne),Uo(z,z,ne),Uo(Y,Y,ne),d[0]=xu(d[0],z,i),d[1]=xu(d[1],Y,i),d[2]=xu(d[2],R,i),d[3]=xu(d[3],E,i),pa.fromPoints(d)}function bm(n,e,i){for(const a of n)Uo(a,a,e),il(a,a,i)}function dh({x:n,y:e,z:i}){const a=1/(1<<i),d=new qr(ol(n*a),Us((e+1)*a)),m=new qr(ol((n+1)*a),Us(e*a));return new Rc(d,m)}function Pp(n){const e=mt(n.getNorth()),i=mt(n.getSouth()),a=Math.cos(e),d=Math.cos(i),m=Math.sin(e),g=Math.sin(i),v=n.getWest(),w=n.getEast();return[Zu(d,g,v),Zu(d,g,w),Zu(a,m,w),Zu(a,m,v)]}function Zu(n,e,i,a=zl){return i=mt(i),[n*Math.sin(i)*a,-e*a,n*Math.cos(i)*a]}function Wu(n,e,i){return Zu(Math.cos(mt(n)),Math.sin(mt(n)),e,i)}function zc(n,e,i,a){const d=1<<i.z,m=(n/ki+i.x)/d;return Wu(Us((e/ki+i.y)/d),ol(m),a)}function Tl({min:n,max:e}){return yu/Math.max(e[0]-n[0],e[1]-n[1],e[2]-n[2])}const Yu=new Float64Array(16);function qu(n){const e=Tl(n),i=Dp(Yu,[e,e,e]);return pu(i,i,((a=[])[0]=-(d=n.min)[0],a[1]=-d[1],a[2]=-d[2],a));var a,d}function hh(n){const e=(a=n.min,(i=Yu)[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=a[0],i[13]=a[1],i[14]=a[2],i[15]=1,i);var i,a;const d=1/Tl(n);return fu(e,e,[d,d,d])}function Op(n,e,i,a,d){const m=function(w){const E=ki/(2*Math.PI);return w/(2*Math.PI)/E}(i),g=[n,e,-i/(2*Math.PI)],v=Cl(new Float64Array(16));return pu(v,v,g),fu(v,v,[m,m,m]),Ep(v,v,mt(-d)),Sd(v,v,mt(-a)),v}function kd(n){return _i(uh,Sp,n)}function l_(n,e){const i=Wu(e.lat,e.lng);return g=(d=sh([],function(ae){const ye=Wu(ae._center.lat,ae._center.lng);let Be=Id([],yc(0,1,0),ye);const rt=Lc([],-ae.angle,ye);Be=Uo(Be,Be,rt),Lc(rt,-ae._pitch,Be);const St=ia([],ye);return il(St,St,Ml(ae.cameraToCenterDistance/ae.pixelsPerMeter)),Uo(St,St,rt),vc([],ye,St)}(n),i))[0],v=d[1],w=d[2],E=(m=i)[0],R=m[1],z=m[2],ne=(Y=Math.sqrt(g*g+v*v+w*w)*Math.sqrt(E*E+R*R+z*z))&&yl(d,m)/Y,Math.acos(Math.min(Math.max(ne,-1),1));var d,m,g,v,w,E,R,z,Y,ne}function wm(n,e){return l_(n,e)>Math.PI/2*1.01}const ph=mt(85),kp=Math.cos(ph),Vy=Math.sin(ph),fh=6371008.8,Rp=2*Math.PI*fh;class Vc{constructor(e,i){if(isNaN(e)||isNaN(i))throw new Error(`Invalid LngLat object: (${e}, ${i})`);if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vc(ii(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const i=Math.PI/180,a=this.lat*i,d=e.lat*i,m=Math.sin(a)*Math.sin(d)+Math.cos(a)*Math.cos(d)*Math.cos((e.lng-this.lng)*i);return fh*Math.acos(Math.min(m,1))}toBounds(e=0){const i=360*e/40075017,a=i/Math.cos(Math.PI/180*this.lat);return new Rc(new Vc(this.lng-a,this.lat-i),new Vc(this.lng+a,this.lat+i))}toEcef(e){const i=Ml(e);return Wu(this.lat,this.lng,zl+i)}static convert(e){if(e instanceof Vc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Vc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Vc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var qr=Vc;function Fp(n){return Rp*Math.cos(n*Math.PI/180)}function ic(n){return(180+n)/360}function Vl(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function rl(n,e){return n/Fp(e)}function ol(n){return 360*n-180}function Us(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function Cm(n,e){return n*Fp(Us(e))}const Er=85.051129;function Lp(n){return 1/Math.cos(n*Math.PI/180)}class Ku{constructor(e,i,a=0){this.x=+e,this.y=+i,this.z=+a}static fromLngLat(e,i=0){const a=qr.convert(e);return new Ku(ic(a.lng),Vl(a.lat),rl(i,a.lat))}toLngLat(){return new qr(ol(this.x),Us(this.y))}toAltitude(){return Cm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Rp*Lp(Us(this.y))}}function mh(n,e,i,a,d,m,g,v,w){const E=(e+a)/2,R=(i+d)/2,z=new Ae(E,R);v(z),function(Y,ne,ae,ye,Be,rt){const St=ae-Be,ot=ye-rt;return Math.abs((ye-ne)*St-(ae-Y)*ot)/Math.hypot(St,ot)}(z.x,z.y,m.x,m.y,g.x,g.y)>=w?(mh(n,e,i,E,R,m,z,v,w),mh(n,E,R,a,d,z,g,v,w)):n.push(g)}function Bp(n,e,i){let a=n[0],d=a.x,m=a.y;e(a);const g=[a];for(let v=1;v<n.length;v++){const w=n[v],{x:E,y:R}=w;e(w),mh(g,d,m,E,R,a,w,e,i),d=E,m=R,a=w}return g}function Np(n,e,i,a){if(a(e,i)){const d=e.add(i)._mult(.5);Np(n,e,d,a),Np(n,d,i,a)}else n.push(i)}function c_(n,e){let i=n[0];const a=[i];for(let d=1;d<n.length;d++){const m=n[d];Np(a,i,m,e),i=m}return a}const zp=Math.pow(2,14)-1,Em=-zp-1;function Dm(n,e){const i=Math.round(n.x*e),a=Math.round(n.y*e);return n.x=_n(i,Em,zp),n.y=_n(a,Em,zp),(i<n.x||i>n.x+1||a<n.y||a>n.y+1)&&Mn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function Uc(n,e,i){const a=n.loadGeometry(),d=n.extent,m=ki/d;if(e&&i&&i.projection.isReprojectedInTileSpace){const g=1<<e.z,{scale:v,x:w,y:E,projection:R}=i,z=Y=>{const ne=ol((e.x+Y.x/d)/g),ae=Us((e.y+Y.y/d)/g),ye=R.project(ne,ae);Y.x=(ye.x*v-w)*d,Y.y=(ye.y*v-E)*d};for(let Y=0;Y<a.length;Y++)if(1!==n.type)a[Y]=Bp(a[Y],z,1);else{const ne=[];for(const ae of a[Y])ae.x<0||ae.x>=d||ae.y<0||ae.y>=d||(z(ae),ne.push(ae));a[Y]=ne}}for(const g of a)for(const v of g)Dm(v,m);return a}function Xu(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?Uc(n):[]}}function jc(n,e,i,a,d){n.emplaceBack(2*e+(a+1)/2,2*i+(d+1)/2)}function Ju(n,e,i){n.emplaceBack(e.x,e.y,e.z,16384*i[0],16384*i[1],16384*i[2])}class gh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Xn,this.indexArray=new Si,this.segments=new Jo,this.programConfigurations=new Bl(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(e,i,a,d){const m=this.layers[0],g=[];let v=null;"circle"===m.type&&(v=m.layout.get("circle-sort-key"));for(const{feature:E,id:R,index:z,sourceLayerIndex:Y}of e){const ne=this.layers[0]._featureFilter.needGeometry,ae=Xu(E,ne);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),ae,a))continue;const ye=v?v.evaluate(ae,{},a):void 0,Be={id:R,properties:E.properties,type:E.type,sourceLayerIndex:Y,index:z,geometry:ne?ae.geometry:Uc(E,a,d),patterns:{},sortKey:ye};g.push(Be)}v&&g.sort((E,R)=>E.sortKey-R.sortKey);let w=null;"globe"===d.projection.name&&(this.globeExtVertexArray=new Jn,w=d.projection);for(const E of g){const{geometry:R,index:z,sourceLayerIndex:Y}=E,ne=e[z].feature;this.addFeature(E,R,z,i.availableImages,a,w),i.featureIndex.insert(ne,R,z,Y,this.index)}}update(e,i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a,d)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,um.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,t_.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,i,a,d,m,g){for(const v of i)for(const w of v){const E=w.x,R=w.y;if(E<0||E>=ki||R<0||R>=ki)continue;if(g){const ne=g.projectTilePoint(E,R,m),ae=g.upVector(m,E,R),ye=this.globeExtVertexArray;Ju(ye,ne,ae),Ju(ye,ne,ae),Ju(ye,ne,ae),Ju(ye,ne,ae)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),Y=z.vertexLength;jc(this.layoutVertexArray,E,R,-1,-1),jc(this.layoutVertexArray,E,R,1,-1),jc(this.layoutVertexArray,E,R,1,1),jc(this.layoutVertexArray,E,R,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+2,Y+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},d,m)}}function Vp(n,e){for(let i=0;i<n.length;i++)if(wu(e,n[i]))return!0;for(let i=0;i<e.length;i++)if(wu(n,e[i]))return!0;return!!_h(n,e)}function Mm(n,e,i){return!!wu(n,e)||!!Rd(e,n,i)}function Tm(n,e){if(1===n.length)return yh(e,n[0]);for(let i=0;i<e.length;i++){const a=e[i];for(let d=0;d<a.length;d++)if(wu(n,a[d]))return!0}for(let i=0;i<n.length;i++)if(yh(e,n[i]))return!0;for(let i=0;i<e.length;i++)if(_h(n,e[i]))return!0;return!1}function u_(n,e,i){if(n.length>1){if(_h(n,e))return!0;for(let a=0;a<e.length;a++)if(Rd(e[a],n,i))return!0}for(let a=0;a<n.length;a++)if(Rd(n[a],e,i))return!0;return!1}function _h(n,e){if(0===n.length||0===e.length)return!1;for(let i=0;i<n.length-1;i++){const a=n[i],d=n[i+1];for(let m=0;m<e.length-1;m++)if(Am(a,d,e[m],e[m+1]))return!0}return!1}function Am(n,e,i,a){return Gt(n,i,a)!==Gt(e,i,a)&&Gt(n,e,i)!==Gt(n,e,a)}function Rd(n,e,i){const a=i*i;if(1===e.length)return n.distSqr(e[0])<a;for(let d=1;d<e.length;d++)if(d_(n,e[d-1],e[d])<a)return!0;return!1}function d_(n,e,i){const a=e.distSqr(i);if(0===a)return n.distSqr(e);const d=((n.x-e.x)*(i.x-e.x)+(n.y-e.y)*(i.y-e.y))/a;return n.distSqr(d<0?e:d>1?i:i.sub(e)._mult(d)._add(e))}function yh(n,e){let i,a,d,m=!1;for(let g=0;g<n.length;g++){i=n[g];for(let v=0,w=i.length-1;v<i.length;w=v++)a=i[v],d=i[w],a.y>e.y!=d.y>e.y&&e.x<(d.x-a.x)*(e.y-a.y)/(d.y-a.y)+a.x&&(m=!m)}return m}function wu(n,e){let i=!1;for(let a=0,d=n.length-1;a<n.length;d=a++){const m=n[a],g=n[d];m.y>e.y!=g.y>e.y&&e.x<(g.x-m.x)*(e.y-m.y)/(g.y-m.y)+m.x&&(i=!i)}return i}function vh(n,e,i,a,d){for(const g of n)if(e<=g.x&&i<=g.y&&a>=g.x&&d>=g.y)return!0;const m=[new Ae(e,i),new Ae(e,d),new Ae(a,d),new Ae(a,i)];if(n.length>2)for(const g of m)if(wu(n,g))return!0;for(let g=0;g<n.length-1;g++)if(Sm(n[g],n[g+1],m))return!0;return!1}function Sm(n,e,i){const a=i[0],d=i[2];if(n.x<a.x&&e.x<a.x||n.x>d.x&&e.x>d.x||n.y<a.y&&e.y<a.y||n.y>d.y&&e.y>d.y)return!1;const m=Gt(n,e,i[0]);return m!==Gt(n,e,i[1])||m!==Gt(n,e,i[2])||m!==Gt(n,e,i[3])}function Cu(n,e,i){const a=e.paint.get(n).value;return"constant"===a.kind?a.value:i.programConfigurations.get(e.id).getMaxValue(n)}function rc(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Im(n,e,i,a,d){if(!e[0]&&!e[1])return n;const m=Ae.convert(e)._mult(d);"viewport"===i&&m._rotate(-a);const g=[];for(let v=0;v<n.length;v++)g.push(n[v].sub(m));return g}function bh(n,e,i,a){const d=Ae.convert(n)._mult(a);return"viewport"===e&&d._rotate(-i),d}gi(gh,"CircleBucket",{omit:["layers"]});const xh=new dt({"circle-sort-key":new Ze(wn.layout_circle["circle-sort-key"])});var h_={paint:new dt({"circle-radius":new Ze(wn.paint_circle["circle-radius"]),"circle-color":new Ze(wn.paint_circle["circle-color"]),"circle-blur":new Ze(wn.paint_circle["circle-blur"]),"circle-opacity":new Ze(wn.paint_circle["circle-opacity"]),"circle-translate":new fe(wn.paint_circle["circle-translate"]),"circle-translate-anchor":new fe(wn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fe(wn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fe(wn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ze(wn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ze(wn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ze(wn.paint_circle["circle-stroke-opacity"])}),layout:xh};function wh(n,e,i,a,d,m,g,v,w){if(m&&n.queryGeometry.isAboveHorizon)return!1;m&&(w*=n.pixelToTileUnitsFactor);const E=n.tileID.canonical,R=i.projection.upVectorScale(E,i.center.lat,i.worldSize).metersToTile;for(const z of e)for(const Y of z){const ne=Y.add(v),ae=d&&i.elevation?i.elevation.exaggeration()*d.getElevationAt(ne.x,ne.y,!0):0,ye=i.projection.projectTilePoint(ne.x,ne.y,E);if(ae>0){const ot=i.projection.upVector(E,ne.x,ne.y);ye.x+=ot[0]*R*ae,ye.y+=ot[1]*R*ae,ye.z+=ot[2]*R*ae}const Be=m?ne:Ch(ye.x,ye.y,ye.z,a),rt=m?n.tilespaceRays.map(ot=>Up(ot,ae)):n.queryGeometry.screenGeometry,St=Nc([],[ye.x,ye.y,ye.z,1],a);if(!g&&m?w*=St[3]/i.cameraToCenterDistance:g&&!m&&(w*=i.cameraToCenterDistance/St[3]),m){const ot=Us((Y.y/ki+E.y)/(1<<E.z));w/=i.projection.pixelsPerMeter(ot,1)/rl(1,ot)}if(Mm(rt,Be,w))return!0}return!1}function Ch(n,e,i,a){const d=Nc([],[n,e,i,1],a);return new Ae(d[0]/d[3],d[1]/d[3])}const Hc=yc(0,0,0),Pm=yc(0,0,1);function Up(n,e){const i=rh();return Hc[2]=e,n.intersectsPlane(Hc,Pm,i),new Ae(i[0],i[1])}class Om extends gh{}function km(n,{width:e,height:i},a,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*i*a)throw new RangeError("mismatched image size")}else d=new Uint8Array(e*i*a);return n.width=e,n.height=i,n.data=d,n}function jp(n,e,i){const{width:a,height:d}=e;a===n.width&&d===n.height||(Gc(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,a),height:Math.min(n.height,d)},i),n.width=a,n.height=d,n.data=e.data)}function Gc(n,e,i,a,d,m){if(0===d.width||0===d.height)return e;if(d.width>n.width||d.height>n.height||i.x>n.width-d.width||i.y>n.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||a.x>e.width-d.width||a.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const g=n.data,v=e.data;for(let w=0;w<d.height;w++){const E=((i.y+w)*n.width+i.x)*m,R=((a.y+w)*e.width+a.x)*m;for(let z=0;z<d.width*m;z++)v[R+z]=g[E+z]}return e}gi(Om,"HeatmapBucket",{omit:["layers"]});class xc{constructor(e,i){km(this,e,1,i)}resize(e){jp(this,new xc(e),1)}clone(){return new xc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,a,d,m){Gc(e,i,a,d,m,1)}}class sl{constructor(e,i){km(this,e,4,i)}resize(e){jp(this,new sl(e),4)}replace(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,a,d,m){Gc(e,i,a,d,m,4)}}gi(xc,"AlphaImage"),gi(sl,"RGBAImage");var p_={paint:new dt({"heatmap-radius":new Ze(wn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ze(wn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fe(wn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ut(wn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fe(wn.paint_heatmap["heatmap-opacity"])})};function Fd(n){const e={},i=n.resolution||256,a=n.clips?n.clips.length:1,d=n.image||new sl({width:i,height:a}),m=(g,v,w)=>{e[n.evaluationKey]=w;const E=n.expression.evaluate(e);d.data[g+v+0]=Math.floor(255*E.r/E.a),d.data[g+v+1]=Math.floor(255*E.g/E.a),d.data[g+v+2]=Math.floor(255*E.b/E.a),d.data[g+v+3]=Math.floor(255*E.a)};if(n.clips)for(let g=0,v=0;g<a;++g,v+=4*i)for(let w=0,E=0;w<i;w++,E+=4){const R=w/(i-1),{start:z,end:Y}=n.clips[g];m(v,E,z*(1-R)+Y*R)}else for(let g=0,v=0;g<i;g++,v+=4)m(0,v,g/(i-1));return d}var f_={paint:new dt({"hillshade-illumination-direction":new fe(wn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fe(wn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fe(wn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fe(wn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fe(wn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fe(wn.paint_hillshade["hillshade-accent-color"])})};const Rm=Xt([{name:"a_pos",components:2,type:"Int16"}],4),{members:m_}=Rm;var Eh={exports:{}};function Hp(n,e,i){i=i||2;var a,d,m,g,v,w,E,R=e&&e.length,z=R?e[0]*i:n.length,Y=Fm(n,0,z,i,!0),ne=[];if(!Y||Y.next===Y.prev)return ne;if(R&&(Y=function(ye,Be,rt,St){var ot,Dt,Bt,Lt=[];for(ot=0,Dt=Be.length;ot<Dt;ot++)(Bt=Fm(ye,Be[ot]*St,ot<Dt-1?Be[ot+1]*St:ye.length,St,!1))===Bt.next&&(Bt.steiner=!0),Lt.push(b_(Bt));for(Lt.sort(__),ot=0;ot<Lt.length;ot++)rt=y_(Lt[ot],rt);return rt}(n,e,Y,i)),n.length>80*i){a=m=n[0],d=g=n[1];for(var ae=i;ae<z;ae+=i)(v=n[ae])<a&&(a=v),(w=n[ae+1])<d&&(d=w),v>m&&(m=v),w>g&&(g=w);E=0!==(E=Math.max(m-a,g-d))?32767/E:0}return Ld(Y,ne,i,a,d,E,0),ne}function Fm(n,e,i,a,d){var m,g;if(d===Zc(n,e,i,a)>0)for(m=e;m<i;m+=a)g=Nm(m,n[m],n[m+1],g);else for(m=i-a;m>=e;m-=a)g=Nm(m,n[m],n[m+1],g);return g&&ed(g,g.next)&&(nd(g),g=g.next),g}function Ul(n,e){if(!n)return n;e||(e=n);var i,a=n;do{if(i=!1,a.steiner||!ed(a,a.next)&&0!==ms(a.prev,a,a.next))a=a.next;else{if(nd(a),(a=e=a.prev)===a.next)break;i=!0}}while(i||a!==e);return e}function Ld(n,e,i,a,d,m,g){if(n){!g&&m&&function(R,z,Y,ne){var ae=R;do{0===ae.z&&(ae.z=Dh(ae.x,ae.y,z,Y,ne)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next}while(ae!==R);ae.prevZ.nextZ=null,ae.prevZ=null,function(ye){var Be,rt,St,ot,Dt,Bt,Lt,gn,un=1;do{for(rt=ye,ye=null,Dt=null,Bt=0;rt;){for(Bt++,St=rt,Lt=0,Be=0;Be<un&&(Lt++,St=St.nextZ);Be++);for(gn=un;Lt>0||gn>0&&St;)0!==Lt&&(0===gn||!St||rt.z<=St.z)?(ot=rt,rt=rt.nextZ,Lt--):(ot=St,St=St.nextZ,gn--),Dt?Dt.nextZ=ot:ye=ot,ot.prevZ=Dt,Dt=ot;rt=St}Dt.nextZ=null,un*=2}while(Bt>1)}(ae)}(n,a,d,m);for(var v,w,E=n;n.prev!==n.next;)if(v=n.prev,w=n.next,m?Bd(n,a,d,m):Qu(n))e.push(v.i/i|0),e.push(n.i/i|0),e.push(w.i/i|0),nd(n),n=w.next,E=w.next;else if((n=w)===E){g?1===g?Ld(n=g_(Ul(n),e,i),e,i,a,d,m,2):2===g&&Lm(n,e,i,a,d,m):Ld(Ul(n),e,i,a,d,m,1);break}}}function Qu(n){var e=n.prev,i=n,a=n.next;if(ms(e,i,a)>=0)return!1;for(var d=e.x,m=i.x,g=a.x,v=e.y,w=i.y,E=a.y,R=d<m?d<g?d:g:m<g?m:g,z=v<w?v<E?v:E:w<E?w:E,Y=d>m?d>g?d:g:m>g?m:g,ne=v>w?v>E?v:E:w>E?w:E,ae=a.next;ae!==e;){if(ae.x>=R&&ae.x<=Y&&ae.y>=z&&ae.y<=ne&&$c(d,v,m,w,g,E,ae.x,ae.y)&&ms(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function Bd(n,e,i,a){var d=n.prev,m=n,g=n.next;if(ms(d,m,g)>=0)return!1;for(var v=d.x,w=m.x,E=g.x,R=d.y,z=m.y,Y=g.y,ne=v<w?v<E?v:E:w<E?w:E,ae=R<z?R<Y?R:Y:z<Y?z:Y,ye=v>w?v>E?v:E:w>E?w:E,Be=R>z?R>Y?R:Y:z>Y?z:Y,rt=Dh(ne,ae,e,i,a),St=Dh(ye,Be,e,i,a),ot=n.prevZ,Dt=n.nextZ;ot&&ot.z>=rt&&Dt&&Dt.z<=St;){if(ot.x>=ne&&ot.x<=ye&&ot.y>=ae&&ot.y<=Be&&ot!==d&&ot!==g&&$c(v,R,w,z,E,Y,ot.x,ot.y)&&ms(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,Dt.x>=ne&&Dt.x<=ye&&Dt.y>=ae&&Dt.y<=Be&&Dt!==d&&Dt!==g&&$c(v,R,w,z,E,Y,Dt.x,Dt.y)&&ms(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;ot&&ot.z>=rt;){if(ot.x>=ne&&ot.x<=ye&&ot.y>=ae&&ot.y<=Be&&ot!==d&&ot!==g&&$c(v,R,w,z,E,Y,ot.x,ot.y)&&ms(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;Dt&&Dt.z<=St;){if(Dt.x>=ne&&Dt.x<=ye&&Dt.y>=ae&&Dt.y<=Be&&Dt!==d&&Dt!==g&&$c(v,R,w,z,E,Y,Dt.x,Dt.y)&&ms(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function g_(n,e,i){var a=n;do{var d=a.prev,m=a.next.next;!ed(d,m)&&td(d,a,a.next,m)&&Nd(d,m)&&Nd(m,d)&&(e.push(d.i/i|0),e.push(a.i/i|0),e.push(m.i/i|0),nd(a),nd(a.next),a=n=m),a=a.next}while(a!==n);return Ul(a)}function Lm(n,e,i,a,d,m){var g=n;do{for(var v=g.next.next;v!==g.prev;){if(g.i!==v.i&&Gp(g,v)){var w=Bm(g,v);return g=Ul(g,g.next),w=Ul(w,w.next),Ld(g,e,i,a,d,m,0),void Ld(w,e,i,a,d,m,0)}v=v.next}g=g.next}while(g!==n)}function __(n,e){return n.x-e.x}function y_(n,e){var i=function(d,m){var g,v=m,w=d.x,E=d.y,R=-1/0;do{if(E<=v.y&&E>=v.next.y&&v.next.y!==v.y){var z=v.x+(E-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(z<=w&&z>R&&(R=z,g=v.x<v.next.x?v:v.next,z===w))return g}v=v.next}while(v!==m);if(!g)return null;var Y,ne=g,ae=g.x,ye=g.y,Be=1/0;v=g;do{w>=v.x&&v.x>=ae&&w!==v.x&&$c(E<ye?w:R,E,ae,ye,E<ye?R:w,E,v.x,v.y)&&(Y=Math.abs(E-v.y)/(w-v.x),Nd(v,d)&&(Y<Be||Y===Be&&(v.x>g.x||v.x===g.x&&v_(g,v)))&&(g=v,Be=Y)),v=v.next}while(v!==ne);return g}(n,e);if(!i)return e;var a=Bm(i,n);return Ul(a,a.next),Ul(i,i.next)}function v_(n,e){return ms(n.prev,n,e.prev)<0&&ms(e.next,n,n.next)<0}function Dh(n,e,i,a,d){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-i)*d|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*d|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function b_(n){var e=n,i=n;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==n);return i}function $c(n,e,i,a,d,m,g,v){return(d-g)*(e-v)>=(n-g)*(m-v)&&(n-g)*(a-v)>=(i-g)*(e-v)&&(i-g)*(m-v)>=(d-g)*(a-v)}function Gp(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(i,a){var d=i;do{if(d.i!==i.i&&d.next.i!==i.i&&d.i!==a.i&&d.next.i!==a.i&&td(d,d.next,i,a))return!0;d=d.next}while(d!==i);return!1}(n,e)&&(Nd(n,e)&&Nd(e,n)&&function(i,a){var d=i,m=!1,g=(i.x+a.x)/2,v=(i.y+a.y)/2;do{d.y>v!=d.next.y>v&&d.next.y!==d.y&&g<(d.next.x-d.x)*(v-d.y)/(d.next.y-d.y)+d.x&&(m=!m),d=d.next}while(d!==i);return m}(n,e)&&(ms(n.prev,n,e.prev)||ms(n,e.prev,e))||ed(n,e)&&ms(n.prev,n,n.next)>0&&ms(e.prev,e,e.next)>0)}function ms(n,e,i){return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)}function ed(n,e){return n.x===e.x&&n.y===e.y}function td(n,e,i,a){var d=Th(ms(n,e,i)),m=Th(ms(n,e,a)),g=Th(ms(i,a,n)),v=Th(ms(i,a,e));return d!==m&&g!==v||!(0!==d||!Mh(n,i,e))||!(0!==m||!Mh(n,a,e))||!(0!==g||!Mh(i,n,a))||!(0!==v||!Mh(i,e,a))}function Mh(n,e,i){return e.x<=Math.max(n.x,i.x)&&e.x>=Math.min(n.x,i.x)&&e.y<=Math.max(n.y,i.y)&&e.y>=Math.min(n.y,i.y)}function Th(n){return n>0?1:n<0?-1:0}function Nd(n,e){return ms(n.prev,n,n.next)<0?ms(n,e,n.next)>=0&&ms(n,n.prev,e)>=0:ms(n,e,n.prev)<0||ms(n,n.next,e)<0}function Bm(n,e){var i=new $p(n.i,n.x,n.y),a=new $p(e.i,e.x,e.y),d=n.next,m=e.prev;return n.next=e,e.prev=n,i.next=d,d.prev=i,a.next=i,i.prev=a,m.next=a,a.prev=m,a}function Nm(n,e,i,a){var d=new $p(n,e,i);return a?(d.next=a.next,d.prev=a,a.next.prev=d,a.next=d):(d.prev=d,d.next=d),d}function nd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $p(n,e,i){this.i=n,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zc(n,e,i,a){for(var d=0,m=e,g=i-a;m<i;m+=a)d+=(n[g]-n[m])*(n[m+1]+n[g+1]),g=m;return d}Eh.exports=Hp,Eh.exports.default=Hp,Hp.deviation=function(n,e,i,a){var d=e&&e.length,m=Math.abs(Zc(n,0,d?e[0]*i:n.length,i));if(d)for(var g=0,v=e.length;g<v;g++)m-=Math.abs(Zc(n,e[g]*i,g<v-1?e[g+1]*i:n.length,i));var w=0;for(g=0;g<a.length;g+=3){var E=a[g]*i,R=a[g+1]*i,z=a[g+2]*i;w+=Math.abs((n[E]-n[z])*(n[R+1]-n[E+1])-(n[E]-n[R])*(n[z+1]-n[E+1]))}return 0===m&&0===w?0:Math.abs((w-m)/m)},Hp.flatten=function(n){for(var e=n[0][0].length,i={vertices:[],holes:[],dimensions:e},a=0,d=0;d<n.length;d++){for(var m=0;m<n[d].length;m++)for(var g=0;g<e;g++)i.vertices.push(n[d][m][g]);d>0&&i.holes.push(a+=n[d-1].length)}return i};var jl=en(Eh.exports);function x_(n,e,i,a,d){zm(n,e,i||0,a||n.length-1,d||Uy)}function zm(n,e,i,a,d){for(;a>i;){if(a-i>600){var m=a-i+1,g=e-i+1,v=Math.log(m),w=.5*Math.exp(2*v/3),E=.5*Math.sqrt(v*w*(m-w)/m)*(g-m/2<0?-1:1);zm(n,e,Math.max(i,Math.floor(e-g*w/m+E)),Math.min(a,Math.floor(e+(m-g)*w/m+E)),d)}var R=n[e],z=i,Y=a;for(Ah(n,i,e),d(n[a],R)>0&&Ah(n,i,a);z<Y;){for(Ah(n,z,Y),z++,Y--;d(n[z],R)<0;)z++;for(;d(n[Y],R)>0;)Y--}0===d(n[i],R)?Ah(n,i,Y):Ah(n,++Y,a),Y<=e&&(i=Y+1),e<=Y&&(a=Y-1)}}function Ah(n,e,i){var a=n[e];n[e]=n[i],n[i]=a}function Uy(n,e){return n<e?-1:n>e?1:0}function Sh(n,e){const i=n.length;if(i<=1)return[n];const a=[];let d,m;for(let g=0;g<i;g++){const v=On(n[g]);0!==v&&(n[g].area=Math.abs(v),void 0===m&&(m=v<0),m===v<0?(d&&a.push(d),d=[n[g]]):d.push(n[g]))}if(d&&a.push(d),e>1)for(let g=0;g<a.length;g++)a[g].length<=e||(x_(a[g],e,1,a[g].length-1,jy),a[g]=a[g].slice(0,e));return a}function jy(n,e){return e.area-n.area}function Ih(n,e,i){const a=i.patternDependencies;let d=!1;for(const m of e){const g=m.paint.get(`${n}-pattern`);g.isConstant()||(d=!0);const v=g.constantOr(null);v&&(d=!0,a[v]=!0)}return d}function Ph(n,e,i,a,d){const m=d.patternDependencies;for(const g of e){const v=g.paint.get(`${n}-pattern`).value;if("constant"!==v.kind){let w=v.evaluate({zoom:a},i,{},d.availableImages);w=w&&w.name?w.name:w,m[w]=!0,i.patterns[g.id]=w}}return i}class Oh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xn,this.indexArray=new Si,this.indexArray2=new ta,this.programConfigurations=new Bl(e.layers,e.zoom),this.segments=new Jo,this.segments2=new Jo,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.projection=e.projection}populate(e,i,a,d){this.hasPattern=Ih("fill",this.layers,i);const m=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:v,id:w,index:E,sourceLayerIndex:R}of e){const z=this.layers[0]._featureFilter.needGeometry,Y=Xu(v,z);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),Y,a))continue;const ne=m?m.evaluate(Y,{},a,i.availableImages):void 0,ae={id:w,properties:v.properties,type:v.type,sourceLayerIndex:R,index:E,geometry:z?Y.geometry:Uc(v,a,d),patterns:{},sortKey:ne};g.push(ae)}m&&g.sort((v,w)=>v.sortKey-w.sortKey);for(const v of g){const{geometry:w,index:E,sourceLayerIndex:R}=v;if(this.hasPattern){const z=Ph("fill",this.layers,v,this.zoom,i);this.patternFeatures.push(z)}else this.addFeature(v,w,E,a,{},i.availableImages);i.featureIndex.insert(e[E].feature,w,E,R,this.index)}}update(e,i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a,d)}addFeatures(e,i,a,d,m){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,a,d)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,m_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,i,a,d,m,g=[]){for(const v of Sh(i,500)){let w=0;for(const ae of v)w+=ae.length;const E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),R=E.vertexLength,z=[],Y=[];for(const ae of v){if(0===ae.length)continue;ae!==v[0]&&Y.push(z.length/2);const ye=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),Be=ye.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(Be+ae.length-1,Be),z.push(ae[0].x),z.push(ae[0].y);for(let rt=1;rt<ae.length;rt++)this.layoutVertexArray.emplaceBack(ae[rt].x,ae[rt].y),this.indexArray2.emplaceBack(Be+rt-1,Be+rt),z.push(ae[rt].x),z.push(ae[rt].y);ye.vertexLength+=ae.length,ye.primitiveLength+=ae.length}const ne=jl(z,Y);for(let ae=0;ae<ne.length;ae+=3)this.indexArray.emplaceBack(R+ne[ae],R+ne[ae+1],R+ne[ae+2]);E.vertexLength+=w,E.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,g,d)}}gi(Oh,"FillBucket",{omit:["layers","patternFeatures"]});const Vm=new dt({"fill-sort-key":new Ze(wn.layout_fill["fill-sort-key"])});var w_={paint:new dt({"fill-antialias":new fe(wn.paint_fill["fill-antialias"]),"fill-opacity":new Ze(wn.paint_fill["fill-opacity"]),"fill-color":new Ze(wn.paint_fill["fill-color"]),"fill-outline-color":new Ze(wn.paint_fill["fill-outline-color"]),"fill-translate":new fe(wn.paint_fill["fill-translate"]),"fill-translate-anchor":new fe(wn.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ze(wn.paint_fill["fill-pattern"])}),layout:Vm};const C_=Xt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Hl=Xt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),E_=Xt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Um}=C_;var kh={},D_=Cn,jm=id;function id(n,e,i,a,d){this.properties={},this.extent=i,this.type=0,this._pbf=n,this._geometry=-1,this._keys=a,this._values=d,n.readFields(Hm,this,e)}function Hm(n,e,i){1==n?e.id=i.readVarint():2==n?function(a,d){for(var m=a.readVarint()+a.pos;a.pos<m;){var g=d._keys[a.readVarint()],v=d._values[a.readVarint()];d.properties[g]=v}}(i,e):3==n?e.type=i.readVarint():4==n&&(e._geometry=i.pos)}function M_(n){for(var e,i,a=0,d=0,m=n.length,g=m-1;d<m;g=d++)a+=((i=n[g]).x-(e=n[d]).x)*(e.y+i.y);return a}id.types=["Unknown","Point","LineString","Polygon"],id.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,i=n.readVarint()+n.pos,a=1,d=0,m=0,g=0,v=[];n.pos<i;){if(d<=0){var w=n.readVarint();a=7&w,d=w>>3}if(d--,1===a||2===a)m+=n.readSVarint(),g+=n.readSVarint(),1===a&&(e&&v.push(e),e=[]),e.push(new D_(m,g));else{if(7!==a)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&v.push(e),v},id.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,i=1,a=0,d=0,m=0,g=1/0,v=-1/0,w=1/0,E=-1/0;n.pos<e;){if(a<=0){var R=n.readVarint();i=7&R,a=R>>3}if(a--,1===i||2===i)(d+=n.readSVarint())<g&&(g=d),d>v&&(v=d),(m+=n.readSVarint())<w&&(w=m),m>E&&(E=m);else if(7!==i)throw new Error("unknown command "+i)}return[g,w,v,E]},id.prototype.toGeoJSON=function(n,e,i){var a,d,m=this.extent*Math.pow(2,i),g=this.extent*n,v=this.extent*e,w=this.loadGeometry(),E=id.types[this.type];function R(ne){for(var ae=0;ae<ne.length;ae++){var ye=ne[ae];ne[ae]=[360*(ye.x+g)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(ye.y+v)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(a=0;a<w.length;a++)z[a]=w[a][0];R(w=z);break;case 2:for(a=0;a<w.length;a++)R(w[a]);break;case 3:for(w=function(ne){var ae=ne.length;if(ae<=1)return[ne];for(var ye,Be,rt=[],St=0;St<ae;St++){var ot=M_(ne[St]);0!==ot&&(void 0===Be&&(Be=ot<0),Be===ot<0?(ye&&rt.push(ye),ye=[ne[St]]):ye.push(ne[St]))}return ye&&rt.push(ye),rt}(w),a=0;a<w.length;a++)for(d=0;d<w[a].length;d++)R(w[a][d])}1===w.length?w=w[0]:E="Multi"+E;var Y={type:"Feature",geometry:{type:E,coordinates:w},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var T_=jm,Gm=ur;function ur(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields($m,this,e),this.length=this._features.length}function $m(n,e,i){15===n?e.version=i.readVarint():1===n?e.name=i.readString():5===n?e.extent=i.readVarint():2===n?e._features.push(i.pos):3===n?e._keys.push(i.readString()):4===n&&e._values.push(function(a){for(var d=null,m=a.readVarint()+a.pos;a.pos<m;){var g=a.readVarint()>>3;d=1===g?a.readString():2===g?a.readFloat():3===g?a.readDouble():4===g?a.readVarint64():5===g?a.readVarint():6===g?a.readSVarint():7===g?a.readBoolean():null}return d}(i))}ur.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new T_(this._pbf,e,this.extent,this._keys,this._values)};var Zm=Gm;function Wm(n,e,i){if(3===n){var a=new Zm(i,i.readVarint()+i.pos);a.length&&(e[a.name]=a)}}var Zp=kh.VectorTile=function(n,e){this.layers=n.readFields(Wm,{},e)},Rh=kh.VectorTileFeature=jm;function zd(n,e,i,a){const d=[],m=0===a?(g,v,w,E,R,z)=>{g.push(new Ae(z,w+(z-v)/(E-v)*(R-w)))}:(g,v,w,E,R,z)=>{g.push(new Ae(v+(z-w)/(R-w)*(E-v),z))};for(const g of n){const v=[];for(const w of g){if(w.length<=2)continue;const E=[];for(let Y=0;Y<w.length-1;Y++){const ne=w[Y].x,ae=w[Y].y,ye=w[Y+1].x,Be=w[Y+1].y,rt=0===a?ne:ae,St=0===a?ye:Be;rt<e?St>e&&m(E,ne,ae,ye,Be,e):rt>i?St<i&&m(E,ne,ae,ye,Be,i):E.push(w[Y]),St<e&&rt>=e&&m(E,ne,ae,ye,Be,e),St>i&&rt<=i&&m(E,ne,ae,ye,Be,i)}let R=w[w.length-1];const z=0===a?R.x:R.y;z>=e&&z<=i&&E.push(R),E.length&&(R=E[E.length-1],E[0].x===R.x&&E[0].y===R.y||E.push(E[0]),v.push(E))}v.length&&d.push(v)}return d}kh.VectorTileLayer=Gm;const A_=Rh.types,Ym=Math.pow(2,13);function Vd(n,e,i,a,d,m,g,v){n.emplaceBack((e<<1)+g,(i<<1)+m,(Math.floor(a*Ym)<<1)+d,Math.round(v))}function Ud(n,e,i){n.emplaceBack(e.x,e.y,e.z,16384*i[0],16384*i[1],16384*i[2])}class S_{constructor(){this.acc=new Ae(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Ae(e.x,e.y),this.max=new Ae(e.x,e.y))}append(e,i){this.currentPolyCount.edges++,this.acc._add(e);const a=this.min,d=this.max;e.x<a.x?a.x=e.x:e.x>d.x&&(d.x=e.x),e.y<a.y?a.y=e.y:e.y>d.y&&(d.y=e.y),((0===e.x||e.x===ki)&&e.x===i.x)!=((0===e.y||e.y===ki)&&e.y===i.y)&&this.processBorderOverlap(e,i),i.x<0!=e.x<0&&this.addBorderIntersection(0,Yi(i.y,e.y,(0-i.x)/(e.x-i.x))),i.x>ki!=e.x>ki&&this.addBorderIntersection(1,Yi(i.y,e.y,(ki-i.x)/(e.x-i.x))),i.y<0!=e.y<0&&this.addBorderIntersection(2,Yi(i.x,e.x,(0-i.y)/(e.y-i.y))),i.y>ki!=e.y>ki&&this.addBorderIntersection(3,Yi(i.x,e.x,(ki-i.y)/(e.y-i.y)))}addBorderIntersection(e,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];i<a[0]&&(a[0]=i),i>a[1]&&(a[1]=i)}processBorderOverlap(e,i){if(e.x===i.x){if(e.y===i.y)return;const a=0===e.x?0:1;this.addBorderIntersection(a,i.y),this.addBorderIntersection(a,e.y)}else{const a=0===e.y?2:3;this.addBorderIntersection(a,i.x),this.addBorderIntersection(a,e.x)}}centroid(){const e=this.polyCount.reduce((i,a)=>i+a.edges,0);return 0!==e?this.acc.div(e)._round():new Ae(0,0)}span(){return new Ae(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,i)=>e+ +(i[0]!==Number.MAX_VALUE),0)}}class rd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Nn,this.centroidVertexArray=new Rl,this.indexArray=new Si,this.programConfigurations=new Bl(e.layers,e.zoom),this.segments=new Jo,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.enableTerrain=e.enableTerrain}populate(e,i,a,d){this.features=[],this.hasPattern=Ih("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const g=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*g/(g*g+1)/ki/(1<<m.z)}(a),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:g,index:v,sourceLayerIndex:w}of e){const E=this.layers[0]._featureFilter.needGeometry,R=Xu(m,E);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),R,a))continue;const z={id:g,sourceLayerIndex:w,index:v,geometry:E?R.geometry:Uc(m,a,d),properties:m.properties,type:m.type,patterns:{}},Y=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ph("fill-extrusion",this.layers,z,this.zoom,i)):this.addFeature(z,z.geometry,v,a,{},i.availableImages,d),i.featureIndex.insert(m,z.geometry,v,w,this.index,Y)}this.sortBorders()}addFeatures(e,i,a,d,m){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,i,a,d,m)}this.sortBorders()}update(e,i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a,d)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Um),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,E_.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Hl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,i,a,d,m,g,v){const w=[new Ae(0,0),new Ae(ki,ki)],E=v.projection,R="globe"===E.name,z=this.enableTerrain&&!R?new S_:null,Y="Polygon"===A_[e.type];R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Jn);const ne=Sh(i,500);for(let rt=ne.length-1;rt>=0;rt--){const St=ne[rt];(0===St.length||(ae=St[0]).every(ot=>ot.x<=0)||ae.every(ot=>ot.x>=ki)||ae.every(ot=>ot.y<=0)||ae.every(ot=>ot.y>=ki))&&ne.splice(rt,1)}var ae;let ye;if(R)ye=P_(ne,w,d);else{ye=[];for(const rt of ne)ye.push({polygon:rt,bounds:w})}const Be=Y?this.edgeRadius:0;for(const{polygon:rt,bounds:St}of ye){let ot=0,Dt=0;for(const Lt of rt)Y&&!Lt[0].equals(Lt[Lt.length-1])&&Lt.push(Lt[0]),Dt+=Y?Lt.length-1:Lt.length;const Bt=this.segments.prepareSegment((Y?5:4)*Dt,this.layoutVertexArray,this.indexArray);if(Y){const Lt=[],gn=[];ot=Bt.vertexLength;for(const Rn of rt){let Kn,vn;Rn.length&&Rn!==rt[0]&&gn.push(Lt.length/2),Kn=Rn[1].sub(Rn[0])._perp()._unit();for(let Vn=1;Vn<Rn.length;Vn++){const Un=Rn[Vn],Zn=Rn[Vn===Rn.length-1?1:Vn+1];let{x:ei,y:Pn}=Un;if(Be){vn=Zn.sub(Un)._perp()._unit();const ci=Kn.add(vn)._unit(),bi=Be*Math.min(4,1/(Kn.x*ci.x+Kn.y*ci.y));ei+=bi*ci.x,Pn+=bi*ci.y,Kn=vn}Vd(this.layoutVertexArray,ei,Pn,0,0,1,1,0),Bt.vertexLength++,Lt.push(Un.x,Un.y),R&&Ud(this.layoutVertexExtArray,E.projectTilePoint(ei,Pn,d),E.upVector(d,ei,Pn))}}const un=jl(Lt,gn);for(let Rn=0;Rn<un.length;Rn+=3)this.indexArray.emplaceBack(ot+un[Rn],ot+un[Rn+2],ot+un[Rn+1]),Bt.primitiveLength++}for(const Lt of rt){z&&Lt.length&&z.startRing(Lt[0]);let gn,un,Rn,Kn=Lt.length>4&&Lh(Lt[Lt.length-2],Lt[0],Lt[1]),vn=Be?Eu(Lt[Lt.length-2],Lt[0],Lt[1],Be):0;un=Lt[1].sub(Lt[0])._perp()._unit();let Vn=!0;for(let Un=1,Zn=0;Un<Lt.length;Un++){let ei=Lt[Un-1],Pn=Lt[Un];const ci=Lt[Un===Lt.length-1?1:Un+1];if(z&&Y&&z.currentPolyCount.top++,Fh(Pn,ei,St)){Be&&(un=ci.sub(Pn)._perp()._unit(),Vn=!Vn);continue}z&&z.append(Pn,ei);const bi=Pn.sub(ei)._perp(),pi=bi.x/(Math.abs(bi.x)+Math.abs(bi.y)),Ji=bi.y>0?1:0,oi=ei.dist(Pn);if(Zn+oi>32768&&(Zn=0),Be){Rn=ci.sub(Pn)._perp()._unit();let er=qm(ei,Pn,ci,Wp(un,Rn),Be);isNaN(er)&&(er=0);const ji=Pn.sub(ei)._unit();ei=ei.add(ji.mult(vn))._round(),Pn=Pn.add(ji.mult(-er))._round(),vn=er,un=Rn}const Oi=Bt.vertexLength,Qi=Lt.length>4&&Lh(ei,Pn,ci);let Dr=Km(Zn,Kn,Vn);if(Vd(this.layoutVertexArray,ei.x,ei.y,pi,Ji,0,0,Dr),Vd(this.layoutVertexArray,ei.x,ei.y,pi,Ji,0,1,Dr),Zn+=oi,Dr=Km(Zn,Qi,!Vn),Kn=Qi,Vd(this.layoutVertexArray,Pn.x,Pn.y,pi,Ji,0,0,Dr),Vd(this.layoutVertexArray,Pn.x,Pn.y,pi,Ji,0,1,Dr),Bt.vertexLength+=4,this.indexArray.emplaceBack(Oi+0,Oi+1,Oi+2),this.indexArray.emplaceBack(Oi+1,Oi+3,Oi+2),Bt.primitiveLength+=2,Be){const er=ot+(1===Un?Lt.length-2:Un-2),ji=1===Un?ot:er+1;if(this.indexArray.emplaceBack(Oi+1,er,Oi+3),this.indexArray.emplaceBack(er,ji,Oi+3),Bt.primitiveLength+=2,void 0===gn&&(gn=Oi),!Fh(ci,Lt[Un],St)){const fo=Un===Lt.length-1?gn:Bt.vertexLength;this.indexArray.emplaceBack(Oi+2,Oi+3,fo),this.indexArray.emplaceBack(Oi+3,fo+1,fo),this.indexArray.emplaceBack(Oi+3,ji,fo+1),Bt.primitiveLength+=3}Vn=!Vn}if(R){const er=this.layoutVertexExtArray,ji=E.projectTilePoint(ei.x,ei.y,d),fo=E.projectTilePoint(Pn.x,Pn.y,d),tr=E.upVector(d,ei.x,ei.y),nr=E.upVector(d,Pn.x,Pn.y);Ud(er,ji,tr),Ud(er,ji,tr),Ud(er,fo,nr),Ud(er,fo,nr)}}Y&&(ot+=Lt.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const rt=z.borders,St=this.featuresOnBorder.push(z)-1;for(let ot=0;ot<4;ot++)rt[ot][0]!==Number.MAX_VALUE&&this.borders[ot].push(St)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,g,d)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((i,a)=>this.featuresOnBorder[i].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,i,a=!0){let d,m;if(e)if(0!==e.y){const v=i.span()._mult(this.tileToMeter);d=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(v.x/10)),m=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(v.y/10))}else d=Math.ceil(7*(e.x+450)),m=0;else d=0,m=+a;let g=a?this.centroidVertexArray.length:i.vertexArrayOffset;for(const v of i.polyCount){a&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*v.edges+v.top);for(let w=0;w<v.top;w++)this.centroidVertexArray.emplace(g++,d,m);for(let w=0;w<2*v.edges;w++)this.centroidVertexArray.emplace(g++,0,m),this.centroidVertexArray.emplace(g++,d,m)}}}function Wp(n,e){const i=n.add(e)._unit();return n.x*i.x+n.y*i.y}function Eu(n,e,i,a){const d=e.sub(n)._perp()._unit(),m=i.sub(e)._perp()._unit();return qm(n,e,i,Wp(d,m),a)}function qm(n,e,i,a,d){const m=Math.sqrt(1-a*a);return Math.min(n.dist(e)/3,e.dist(i)/3,d*m/a)}function Fh(n,e,i){return n.x<i[0].x&&e.x<i[0].x||n.x>i[1].x&&e.x>i[1].x||n.y<i[0].y&&e.y<i[0].y||n.y>i[1].y&&e.y>i[1].y}function Lh(n,e,i){if(n.x<0||n.x>=ki||e.x<0||e.x>=ki||i.x<0||i.x>=ki)return!1;const a=i.sub(e),d=a.perp(),m=n.sub(e);return(a.x*m.x+a.y*m.y)/Math.sqrt((a.x*a.x+a.y*a.y)*(m.x*m.x+m.y*m.y))>-.866&&d.x*m.x+d.y*m.y<0}function Km(n,e,i){const a=e?2|n:-3&n;return i?1|a:-2&a}function I_(){const n=Math.PI/32,e=Math.tan(n),i=fh;return i*Math.sqrt(1+2*e*e)-i}function P_(n,e,i){const a=1<<i.z,d=ol(i.x/a),m=ol((i.x+1)/a),g=Us(i.y/a),v=Us((i.y+1)/a);return function(w,E,R,z,Y=0,ne){const ae=[];if(!w.length||!R||!z)return ae;const ye=(Lt,gn)=>{for(const un of Lt)ae.push({polygon:un,bounds:gn})},Be=Math.ceil(Math.log2(R)),rt=Math.ceil(Math.log2(z)),St=Be-rt,ot=[];for(let Lt=0;Lt<Math.abs(St);Lt++)ot.push(St>0?0:1);for(let Lt=0;Lt<Math.min(Be,rt);Lt++)ot.push(0),ot.push(1);let Dt=w;if(Dt=zd(Dt,E[0].y-Y,E[1].y+Y,1),Dt=zd(Dt,E[0].x-Y,E[1].x+Y,0),!Dt.length)return ae;const Bt=[];for(ot.length?Bt.push({polygons:Dt,bounds:E,depth:0}):ye(Dt,E);Bt.length;){const Lt=Bt.pop(),gn=Lt.depth,un=ot[gn],Rn=Lt.bounds[0],Kn=Lt.bounds[1],vn=0===un?Rn.x:Rn.y,Vn=0===un?Kn.x:Kn.y,Un=ne?ne(un,vn,Vn):.5*(vn+Vn),Zn=zd(Lt.polygons,vn-Y,Un+Y,un),ei=zd(Lt.polygons,Un-Y,Vn+Y,un);if(Zn.length){const Pn=[Rn,new Ae(0===un?Un:Kn.x,1===un?Un:Kn.y)];ot.length>gn+1?Bt.push({polygons:Zn,bounds:Pn,depth:gn+1}):ye(Zn,Pn)}if(ei.length){const Pn=[new Ae(0===un?Un:Rn.x,1===un?Un:Rn.y),Kn];ot.length>gn+1?Bt.push({polygons:ei,bounds:Pn,depth:gn+1}):ye(ei,Pn)}}return ae}(n,e,Math.ceil((m-d)/11.25),Math.ceil((g-v)/11.25),1,(w,E,R)=>{if(0===w)return.5*(E+R);{const z=Us((i.y+E/ki)/a);return(Vl(.5*(Us((i.y+R/ki)/a)+z))*a-i.y)*ki}})}gi(rd,"FillExtrusionBucket",{omit:["layers","features"]}),gi(S_,"PartMetadata");const Hy=new dt({"fill-extrusion-edge-radius":new fe(wn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var O_={paint:new dt({"fill-extrusion-opacity":new fe(wn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ze(wn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fe(wn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fe(wn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ze(wn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ze(wn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ze(wn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fe(wn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new fe(wn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new fe(wn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new fe(wn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Hy};function Yp(n,e,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[n*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}class qp{constructor(e,i,a){this.z=e,this.x=i,this.y=a,this.key=jd(0,e,e,i,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,i){const a=(g=this.y,v=this.z,w=Yp(256*(m=this.x),256*(g=Math.pow(2,v)-g-1),v),E=Yp(256*(m+1),256*(g+1),v),w[0]+","+w[1]+","+E[0]+","+E[1]),d=function(m,g,v){let w,E="";for(let R=m;R>0;R--)w=1<<R-1,E+=(g&w?1:0)+(v&w?2:0);return E}(this.z,this.x,this.y);var m,g,v,w,E;return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xm{constructor(e,i){this.wrap=e,this.canonical=i,this.key=jd(e,i.z,i.z,i.x,i.y)}}class Is{constructor(e,i,a,d,m){this.overscaledZ=e,this.wrap=i,this.canonical=new qp(a,+d,+m),this.key=0===i&&e===a?this.canonical.key:jd(i,e,a,d,m)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const i=this.canonical.z-e;return e>this.canonical.z?new Is(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Is(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(e,i=!0){if(this.overscaledZ===e&&i)return this.key;if(e>this.canonical.z)return jd(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return jd(this.wrap*+i,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const i=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i}children(e){if(this.overscaledZ>=e)return[new Is(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,a=2*this.canonical.x,d=2*this.canonical.y;return[new Is(i,this.wrap,i,a,d),new Is(i,this.wrap,i,a+1,d),new Is(i,this.wrap,i,a,d+1),new Is(i,this.wrap,i,a+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Is(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Is(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function jd(n,e,i,a,d){const m=1<<Math.min(i,22);let g=m*(d%m)+a%m;return n&&i<22&&(g+=m*m*((n<0?-2*n-1:2*n)%(1<<2*(22-i)))),16*(32*g+i)+(e-i)}gi(qp,"CanonicalTileID"),gi(Is,"OverscaledTileID",{omit:["projMatrix"]});class Du extends Ae{constructor(e,i,a){super(e,i),this.z=a}}function Wc(n,e){return n.x*e.x+n.y*e.y}function Jm(n,e){if(1===n.length){let i=0;const a=e[i++];let d;for(;!d||a.equals(d);)if(d=e[i++],!d)return 1/0;for(;i<e.length;i++){const m=e[i],g=n[0],v=d.sub(a),w=m.sub(a),E=g.sub(a),R=Wc(v,v),z=Wc(v,w),Y=Wc(w,w),ne=Wc(E,v),ae=Wc(E,w),ye=R*Y-z*z,Be=(Y*ne-z*ae)/ye,rt=(R*ae-z*ne)/ye,St=a.z*(1-Be-rt)+d.z*Be+m.z*rt;if(isFinite(St))return St}return 1/0}{let i=1/0;for(const a of e)i=Math.min(i,a.z);return i}}function Kp(n,e,i,a,d,m,g,v){const w=g*d.getElevationAt(n,e,!0,!0),E=0!==m[0],R=E?0===m[1]?g*(m[0]/7-450):g*function(z,Y,ne){const ae=Math.floor(Y[0]/8),ye=Math.floor(Y[1]/8),Be=10*(Y[0]-8*ae),rt=10*(Y[1]-8*ye),St=z.getElevationAt(ae,ye,!0,!0),ot=z.getMeterToDEM(ne),Dt=Math.floor(.5*(Be*ot-1)),Bt=Math.floor(.5*(rt*ot-1)),Lt=z.tileCoordToPixel(ae,ye),gn=2*Dt+1,un=2*Bt+1,Rn=(bi=gn,pi=un,[(ei=z).getElevationAtPixel(Pn=Lt.x-Dt,ci=Lt.y-Bt,!0),ei.getElevationAtPixel(Pn+pi,ci,!0),ei.getElevationAtPixel(Pn,ci+pi,!0),ei.getElevationAtPixel(Pn+bi,ci+pi,!0)]),Kn=Math.abs(Rn[0]-Rn[1]),vn=Math.abs(Rn[2]-Rn[3]),Vn=Math.abs(Rn[0]-Rn[2])+Math.abs(Rn[1]-Rn[3]),Un=Math.min(.25,.5*ot*(Kn+vn)/gn),Zn=Math.min(.25,.5*ot*Vn/un);var ei,Pn,ci,bi,pi;return St+Math.max(Un*Be,Zn*rt)}(d,m,v):w;return{base:w+(0===i)?-1:i,top:E?Math.max(R+a,w+i+2):w+a}}const k_=Xt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:R_}=k_,F_=Xt([{name:"a_packed",components:4,type:"Float32"}]),{members:L_}=F_,B_=Rh.types,Qm=Math.cos(Math.PI/180*37.5);class Bh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new bn,this.layoutVertexArray2=new qn,this.indexArray=new Si,this.programConfigurations=new Bl(e.layers,e.zoom),this.segments=new Jo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(e,i,a,d){this.hasPattern=Ih("line",this.layers,i);const m=this.layers[0].layout.get("line-sort-key"),g=[];for(const{feature:R,id:z,index:Y,sourceLayerIndex:ne}of e){const ae=this.layers[0]._featureFilter.needGeometry,ye=Xu(R,ae);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),ye,a))continue;const Be=m?m.evaluate(ye,{},a):void 0,rt={id:z,properties:R.properties,type:R.type,sourceLayerIndex:ne,index:Y,geometry:ae?ye.geometry:Uc(R,a,d),patterns:{},sortKey:Be};g.push(rt)}m&&g.sort((R,z)=>R.sortKey-z.sortKey);const{lineAtlas:v,featureIndex:w}=i,E=this.addConstantDashes(v);for(const R of g){const{geometry:z,index:Y,sourceLayerIndex:ne}=R;if(E&&this.addFeatureDashes(R,v),this.hasPattern){const ae=Ph("line",this.layers,R,this.zoom,i);this.patternFeatures.push(ae)}else this.addFeature(R,z,Y,a,v.positions,i.availableImages);w.insert(e[Y].feature,z,Y,ne,this.index)}}addConstantDashes(e){let i=!1;for(const a of this.layers){const d=a.paint.get("line-dasharray").value,m=a.layout.get("line-cap").value;if("constant"!==d.kind||"constant"!==m.kind)i=!0;else{const g=m.value,v=d.value;if(!v)continue;e.addDash(v,g)}}return i}addFeatureDashes(e,i){const a=this.zoom;for(const d of this.layers){const m=d.paint.get("line-dasharray").value,g=d.layout.get("line-cap").value;if("constant"===m.kind&&"constant"===g.kind)continue;let v,w;if("constant"===m.kind){if(v=m.value,!v)continue}else v=m.evaluate({zoom:a},e);w="constant"===g.kind?g.value:g.evaluate({zoom:a},e),i.addDash(v,w),e.patterns[d.id]=i.getKey(v,w)}}update(e,i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a,d)}addFeatures(e,i,a,d,m){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,a,d)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,L_)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,i,a,d,m,g){const v=this.layers[0].layout,w=v.get("line-join").evaluate(e,{}),E=v.get("line-cap").evaluate(e,{}),R=v.get("line-miter-limit"),z=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const Y of i)this.addLine(Y,e,w,E,R,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,g,d)}addLine(e,i,a,d,m,g){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let rt=0;rt<e.length-1;rt++)this.totalDistance+=e[rt].dist(e[rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const v="Polygon"===B_[i.type];let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let E=0;for(;E<w-1&&e[E].equals(e[E+1]);)E++;if(w<(v?3:2))return;"bevel"===a&&(m=1.05);const R=this.overscaling<=16?15*ki/(512*this.overscaling):0,z=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let Y,ne,ae,ye,Be;this.e1=this.e2=-1,v&&(Y=e[w-2],Be=e[E].sub(Y)._unit()._perp());for(let rt=E;rt<w;rt++){if(ae=rt===w-1?v?e[E+1]:void 0:e[rt+1],ae&&e[rt].equals(ae))continue;Be&&(ye=Be),Y&&(ne=Y),Y=e[rt],Be=ae?ae.sub(Y)._unit()._perp():ye,ye=ye||Be;let St=ye.add(Be);0===St.x&&0===St.y||St._unit();const ot=ye.x*Be.x+ye.y*Be.y,Dt=St.x*Be.x+St.y*Be.y,Bt=0!==Dt?1/Dt:1/0,Lt=2*Math.sqrt(2-2*Dt),gn=Dt<Qm&&ne&&ae,un=ye.x*Be.y-ye.y*Be.x>0;if(gn&&rt>E){const vn=Y.dist(ne);if(vn>2*R){const Vn=Y.sub(Y.sub(ne)._mult(R/vn)._round());this.updateDistance(ne,Vn),this.addCurrentVertex(Vn,ye,0,0,z),ne=Vn}}const Rn=ne&&ae;let Kn=Rn?a:v?"butt":d;if(Rn&&"round"===Kn&&(Bt<g?Kn="miter":Bt<=2&&(Kn="fakeround")),"miter"===Kn&&Bt>m&&(Kn="bevel"),"bevel"===Kn&&(Bt>2&&(Kn="flipbevel"),Bt<m&&(Kn="miter")),ne&&this.updateDistance(ne,Y),"miter"===Kn)St._mult(Bt),this.addCurrentVertex(Y,St,0,0,z);else if("flipbevel"===Kn){if(Bt>100)St=Be.mult(-1);else{const vn=Bt*ye.add(Be).mag()/ye.sub(Be).mag();St._perp()._mult(vn*(un?-1:1))}this.addCurrentVertex(Y,St,0,0,z),this.addCurrentVertex(Y,St.mult(-1),0,0,z)}else if("bevel"===Kn||"fakeround"===Kn){const vn=-Math.sqrt(Bt*Bt-1),Vn=un?vn:0,Un=un?0:vn;if(ne&&this.addCurrentVertex(Y,ye,Vn,Un,z),"fakeround"===Kn){const Zn=Math.round(180*Lt/Math.PI/20);for(let ei=1;ei<Zn;ei++){let Pn=ei/Zn;if(.5!==Pn){const bi=Pn-.5;Pn+=Pn*bi*(Pn-1)*((1.0904+ot*(ot*(3.55645-1.43519*ot)-3.2452))*bi*bi+(.848013+ot*(.215638*ot-1.06021)))}const ci=Be.sub(ye)._mult(Pn)._add(ye)._unit()._mult(un?-1:1);this.addHalfVertex(Y,ci.x,ci.y,!1,un,0,z)}}ae&&this.addCurrentVertex(Y,Be,-Vn,-Un,z)}else if("butt"===Kn)this.addCurrentVertex(Y,St,0,0,z);else if("square"===Kn){const vn=ne?1:-1;ne||this.addCurrentVertex(Y,St,vn,vn,z),this.addCurrentVertex(Y,St,0,0,z),ne&&this.addCurrentVertex(Y,St,vn,vn,z)}else"round"===Kn&&(ne&&(this.addCurrentVertex(Y,ye,0,0,z),this.addCurrentVertex(Y,ye,1,1,z,!0)),ae&&(this.addCurrentVertex(Y,Be,-1,-1,z,!0),this.addCurrentVertex(Y,Be,0,0,z)));if(gn&&rt<w-1){const vn=Y.dist(ae);if(vn>2*R){const Vn=Y.add(ae.sub(Y)._mult(R/vn)._round());this.updateDistance(Y,Vn),this.addCurrentVertex(Vn,Be,0,0,z),Y=Vn}}}}addCurrentVertex(e,i,a,d,m,g=!1){const v=i.y*d-i.x,w=-i.y-i.x*d;this.addHalfVertex(e,i.x+i.y*a,i.y-i.x*a,g,!1,a,m),this.addHalfVertex(e,v,w,g,!0,-d,m)}addHalfVertex({x:e,y:i},a,d,m,g,v,w){this.layoutVertexArray.emplaceBack((e<<1)+(m?1:0),(i<<1)+(g?1:0),Math.round(63*a)+128,Math.round(63*d)+128,1+(0===v?0:v<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const E=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),w.primitiveLength++),g?this.e2=E:this.e1=E}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,i){this.distance+=e.dist(i),this.updateScaledDistance()}}gi(Bh,"LineBucket",{omit:["layers","patternFeatures"]});const eg=new dt({"line-cap":new Ze(wn.layout_line["line-cap"]),"line-join":new Ze(wn.layout_line["line-join"]),"line-miter-limit":new fe(wn.layout_line["line-miter-limit"]),"line-round-limit":new fe(wn.layout_line["line-round-limit"]),"line-sort-key":new Ze(wn.layout_line["line-sort-key"])});var Xp={paint:new dt({"line-opacity":new Ze(wn.paint_line["line-opacity"]),"line-color":new Ze(wn.paint_line["line-color"]),"line-translate":new fe(wn.paint_line["line-translate"]),"line-translate-anchor":new fe(wn.paint_line["line-translate-anchor"]),"line-width":new Ze(wn.paint_line["line-width"]),"line-gap-width":new Ze(wn.paint_line["line-gap-width"]),"line-offset":new Ze(wn.paint_line["line-offset"]),"line-blur":new Ze(wn.paint_line["line-blur"]),"line-dasharray":new Ze(wn.paint_line["line-dasharray"]),"line-pattern":new Ze(wn.paint_line["line-pattern"]),"line-gradient":new ut(wn.paint_line["line-gradient"]),"line-trim-offset":new fe(wn.paint_line["line-trim-offset"])}),layout:eg};const Nh=new class extends Ze{possiblyEvaluate(n,e){return e=new B(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,i,a){return e=Yt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,i,a)}}(Xp.paint.properties["line-width"].specification);function N_(n,e){return e>0?e+2*n:n}Nh.useIntegerZoom=!0;const Jp=Xt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),z_=Xt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Gy=Xt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Xt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const od=Xt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),tg=Xt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Xt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ng=Xt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ig=Xt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Xt([{name:"triangle",components:3,type:"Uint16"}]),Xt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Xt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xt([{type:"Float32",name:"offsetX"}]),Xt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ra=24;const Gl=128;function sd(n,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new B(n+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:a,interpolationType:d}=i;let m=0;for(;m<a.length&&a[m]<=n;)m++;m=Math.max(0,m-1);let g=m;for(;g<a.length&&a[g]<n+1;)g++;g=Math.min(a.length-1,g);const v=a[m],w=a[g];return"composite"===i.kind?{kind:"composite",minZoom:v,maxZoom:w,interpolationType:d}:{kind:"camera",minZoom:v,maxZoom:w,minSize:i.evaluate(new B(v)),maxSize:i.evaluate(new B(w)),interpolationType:d}}}function wc(n,{uSize:e,uSizeT:i},{lowerSize:a,upperSize:d}){return"source"===n.kind?a/Gl:"composite"===n.kind?Yi(a/Gl,d/Gl,i):e}function Yc(n,e){let i=0,a=0;if("constant"===n.kind)a=n.layoutSize;else if("source"!==n.kind){const{interpolationType:d,minZoom:m,maxZoom:g}=n,v=d?_n(As.interpolationFactor(d,e,m,g),0,1):0;"camera"===n.kind?a=Yi(n.minSize,n.maxSize,v):i=v}return{uSizeT:i,uSize:a}}var Hd=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Gl,evaluateSizeForFeature:wc,evaluateSizeForZoom:Yc,getSizeData:sd});function Qp(n,e,i){return n.sections.forEach(a=>{a.text=function(d,m,g){const v=m.layout.get("text-transform").evaluate(g,{});return"uppercase"===v?d=d.toLocaleUpperCase():"lowercase"===v&&(d=d.toLocaleLowerCase()),A.applyArabicShaping&&(d=A.applyArabicShaping(d)),d}(a.text,e,i)}),n}const qc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function rg(n){return"\ufe36"===n||"\ufe48"===n||"\ufe38"===n||"\ufe44"===n||"\ufe42"===n||"\ufe3e"===n||"\ufe3c"===n||"\ufe3a"===n||"\ufe18"===n||"\ufe40"===n||"\ufe10"===n||"\ufe13"===n||"\ufe14"===n||"\uff40"===n||"\uffe3"===n||"\ufe11"===n||"\ufe12"===n}function ef(n){return"\ufe35"===n||"\ufe47"===n||"\ufe37"===n||"\ufe43"===n||"\ufe41"===n||"\ufe3d"===n||"\ufe3b"===n||"\ufe39"===n||"\ufe17"===n||"\ufe3f"===n}var zh=Gr,Vh=function(n,e,i,a,d){var m,g,v=8*d-a-1,w=(1<<v)-1,E=w>>1,R=-7,z=i?d-1:0,Y=i?-1:1,ne=n[e+z];for(z+=Y,m=ne&(1<<-R)-1,ne>>=-R,R+=v;R>0;m=256*m+n[e+z],z+=Y,R-=8);for(g=m&(1<<-R)-1,m>>=-R,R+=a;R>0;g=256*g+n[e+z],z+=Y,R-=8);if(0===m)m=1-E;else{if(m===w)return g?NaN:1/0*(ne?-1:1);g+=Math.pow(2,a),m-=E}return(ne?-1:1)*g*Math.pow(2,m-a)},tf=function(n,e,i,a,d,m){var g,v,w,E=8*m-d-1,R=(1<<E)-1,z=R>>1,Y=23===d?Math.pow(2,-24)-Math.pow(2,-77):0,ne=a?0:m-1,ae=a?1:-1,ye=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(v=isNaN(e)?1:0,g=R):(g=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-g))<1&&(g--,w*=2),(e+=g+z>=1?Y/w:Y*Math.pow(2,1-z))*w>=2&&(g++,w/=2),g+z>=R?(v=0,g=R):g+z>=1?(v=(e*w-1)*Math.pow(2,d),g+=z):(v=e*Math.pow(2,z-1)*Math.pow(2,d),g=0));d>=8;n[i+ne]=255&v,ne+=ae,v/=256,d-=8);for(g=g<<d|v,E+=d;E>0;n[i+ne]=255&g,ne+=ae,g/=256,E-=8);n[i+ne-ae]|=128*ye};function Gr(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Gr.Varint=0,Gr.Fixed64=1,Gr.Bytes=2,Gr.Fixed32=5;var nf=4294967296,og=1/nf,rf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cc(n){return n.type===Gr.Bytes?n.readVarint()+n.pos:n.pos+1}function sf(n,e,i){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(a);for(var d=i.pos-1;d>=n;d--)i.buf[d+a]=i.buf[d]}function V_(n,e){for(var i=0;i<n.length;i++)e.writeVarint(n[i])}function U_(n,e){for(var i=0;i<n.length;i++)e.writeSVarint(n[i])}function vl(n,e){for(var i=0;i<n.length;i++)e.writeFloat(n[i])}function j_(n,e){for(var i=0;i<n.length;i++)e.writeDouble(n[i])}function H_(n,e){for(var i=0;i<n.length;i++)e.writeBoolean(n[i])}function $y(n,e){for(var i=0;i<n.length;i++)e.writeFixed32(n[i])}function af(n,e){for(var i=0;i<n.length;i++)e.writeSFixed32(n[i])}function sg(n,e){for(var i=0;i<n.length;i++)e.writeFixed64(n[i])}function G_(n,e){for(var i=0;i<n.length;i++)e.writeSFixed64(n[i])}function Uh(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function ad(n,e,i){n[i]=e,n[i+1]=e>>>8,n[i+2]=e>>>16,n[i+3]=e>>>24}function lf(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}Gr.prototype={destroy:function(){this.buf=null},readFields:function(n,e,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),d=a>>3,m=this.pos;this.type=7&a,n(d,e,this),this.pos===m&&this.skip(a)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=Uh(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=lf(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Uh(this.buf,this.pos)+Uh(this.buf,this.pos+4)*nf;return this.pos+=8,n},readSFixed64:function(){var n=Uh(this.buf,this.pos)+lf(this.buf,this.pos+4)*nf;return this.pos+=8,n},readFloat:function(){var n=Vh(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Vh(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,i,a=this.buf;return e=127&(i=a[this.pos++]),i<128?e:(e|=(127&(i=a[this.pos++]))<<7,i<128?e:(e|=(127&(i=a[this.pos++]))<<14,i<128?e:(e|=(127&(i=a[this.pos++]))<<21,i<128?e:function(d,m,g){var v,w,E=g.buf;if(v=(112&(w=E[g.pos++]))>>4,w<128||(v|=(127&(w=E[g.pos++]))<<3,w<128)||(v|=(127&(w=E[g.pos++]))<<10,w<128)||(v|=(127&(w=E[g.pos++]))<<17,w<128)||(v|=(127&(w=E[g.pos++]))<<24,w<128)||(v|=(1&(w=E[g.pos++]))<<31,w<128))return function Mu(n,e,i){return i?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}(d,v,m);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=a[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&rf?rf.decode(this.buf.subarray(e,n)):function(i,a,d){for(var m="",g=a;g<d;){var v,w,E,R=i[g],z=null,Y=R>239?4:R>223?3:R>191?2:1;if(g+Y>d)break;1===Y?R<128&&(z=R):2===Y?128==(192&(v=i[g+1]))&&(z=(31&R)<<6|63&v)<=127&&(z=null):3===Y?(w=i[g+2],128==(192&(v=i[g+1]))&&128==(192&w)&&((z=(15&R)<<12|(63&v)<<6|63&w)<=2047||z>=55296&&z<=57343)&&(z=null)):4===Y&&(w=i[g+2],E=i[g+3],128==(192&(v=i[g+1]))&&128==(192&w)&&128==(192&E)&&((z=(15&R)<<18|(63&v)<<12|(63&w)<<6|63&E)<=65535||z>=1114112)&&(z=null)),null===z?(z=65533,Y=1):z>65535&&(z-=65536,m+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),m+=String.fromCharCode(z),g+=Y}return m}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==Gr.Bytes)return n.push(this.readVarint(e));var i=Cc(this);for(n=n||[];this.pos<i;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==Gr.Bytes)return n.push(this.readSVarint());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Gr.Bytes)return n.push(this.readBoolean());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Gr.Bytes)return n.push(this.readFloat());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Gr.Bytes)return n.push(this.readDouble());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Gr.Bytes)return n.push(this.readFixed32());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Gr.Bytes)return n.push(this.readSFixed32());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Gr.Bytes)return n.push(this.readFixed64());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Gr.Bytes)return n.push(this.readSFixed64());var e=Cc(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===Gr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Gr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Gr.Fixed32)this.pos+=4;else{if(e!==Gr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),ad(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),ad(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),ad(this.buf,-1&n,this.pos),ad(this.buf,Math.floor(n*og),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),ad(this.buf,-1&n,this.pos),ad(this.buf,Math.floor(n*og),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,i){var a,d,m,v;if(e>=0?(a=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,d=d+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),m=a,(v=i).buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,v.buf[v.pos]=127&(m>>>=7),function(m,g){var v=(7&m)<<4;g.buf[g.pos++]|=v|((m>>>=3)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m)))))}(d,i)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(a,d,m){for(var g,v,w=0;w<d.length;w++){if((g=d.charCodeAt(w))>55295&&g<57344){if(!v){g>56319||w+1===d.length?(a[m++]=239,a[m++]=191,a[m++]=189):v=g;continue}if(g<56320){a[m++]=239,a[m++]=191,a[m++]=189,v=g;continue}g=v-55296<<10|g-56320|65536,v=null}else v&&(a[m++]=239,a[m++]=191,a[m++]=189,v=null);g<128?a[m++]=g:(g<2048?a[m++]=g>>6|192:(g<65536?a[m++]=g>>12|224:(a[m++]=g>>18|240,a[m++]=g>>12&63|128),a[m++]=g>>6&63|128),a[m++]=63&g|128)}return m}(this.buf,n,this.pos);var i=this.pos-e;i>=128&&sf(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(n){this.realloc(4),tf(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),tf(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=n[i]},writeRawMessage:function(n,e){this.pos++;var i=this.pos;n(e,this);var a=this.pos-i;a>=128&&sf(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(n,e,i){this.writeTag(n,Gr.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,V_,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,U_,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,H_,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,vl,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,j_,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,$y,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,af,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,sg,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,G_,e)},writeBytesField:function(n,e){this.writeTag(n,Gr.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,Gr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,Gr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,Gr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,Gr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,Gr.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,Gr.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,Gr.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,Gr.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,Gr.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,Boolean(e))}};var jh=en(zh);const cf=3;function uf(n,e,i){e.glyphs=[],1===n&&i.readMessage($_,e)}function $_(n,e,i){if(3===n){const{id:a,bitmap:d,width:m,height:g,left:v,top:w,advance:E}=i.readMessage(Z_,{});e.glyphs.push({id:a,bitmap:new xc({width:m+2*cf,height:g+2*cf},d),metrics:{width:m,height:g,left:v,top:w,advance:E}})}else 4===n?e.ascender=i.readSVarint():5===n&&(e.descender=i.readSVarint())}function Z_(n,e,i){1===n?e.id=i.readVarint():2===n?e.bitmap=i.readBytes():3===n?e.width=i.readVarint():4===n?e.height=i.readVarint():5===n?e.left=i.readSVarint():6===n?e.top=i.readSVarint():7===n&&(e.advance=i.readVarint())}const ag=cf;function df(n){let e=0,i=0;for(const g of n)e+=g.w*g.h,i=Math.max(i,g.w);n.sort((g,v)=>v.h-g.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let d=0,m=0;for(const g of n)for(let v=a.length-1;v>=0;v--){const w=a[v];if(!(g.w>w.w||g.h>w.h)){if(g.x=w.x,g.y=w.y,m=Math.max(m,g.y+g.h),d=Math.max(d,g.x+g.w),g.w===w.w&&g.h===w.h){const E=a.pop();v<a.length&&(a[v]=E)}else g.h===w.h?(w.x+=g.w,w.w-=g.w):g.w===w.w?(w.y+=g.h,w.h-=g.h):(a.push({x:w.x+g.w,y:w.y,w:w.w-g.w,h:g.h}),w.y+=g.h,w.h-=g.h);break}}return{w:d,h:m,fill:e/(d*m)||0}}const ja=1;class Al{constructor(e,{pixelRatio:i,version:a,stretchX:d,stretchY:m,content:g}){this.paddedRect=e,this.pixelRatio=i,this.stretchX=d,this.stretchY=m,this.content=g,this.version=a}get tl(){return[this.paddedRect.x+ja,this.paddedRect.y+ja]}get br(){return[this.paddedRect.x+this.paddedRect.w-ja,this.paddedRect.y+this.paddedRect.h-ja]}get displaySize(){return[(this.paddedRect.w-2*ja)/this.pixelRatio,(this.paddedRect.h-2*ja)/this.pixelRatio]}}class Hh{constructor(e,i){const a={},d={};this.haveRenderCallbacks=[];const m=[];this.addImages(e,a,m),this.addImages(i,d,m);const{w:g,h:v}=df(m),w=new sl({width:g||1,height:v||1});for(const E in e){const R=e[E],z=a[E].paddedRect;sl.copy(R.data,w,{x:0,y:0},{x:z.x+ja,y:z.y+ja},R.data)}for(const E in i){const R=i[E],z=d[E].paddedRect,Y=z.x+ja,ne=z.y+ja,ae=R.data.width,ye=R.data.height;sl.copy(R.data,w,{x:0,y:0},{x:Y,y:ne},R.data),sl.copy(R.data,w,{x:0,y:ye-1},{x:Y,y:ne-1},{width:ae,height:1}),sl.copy(R.data,w,{x:0,y:0},{x:Y,y:ne+ye},{width:ae,height:1}),sl.copy(R.data,w,{x:ae-1,y:0},{x:Y-1,y:ne},{width:1,height:ye}),sl.copy(R.data,w,{x:0,y:0},{x:Y+ae,y:ne},{width:1,height:ye})}this.image=w,this.iconPositions=a,this.patternPositions=d}addImages(e,i,a){for(const d in e){const m=e[d],g={x:0,y:0,w:m.data.width+2*ja,h:m.data.height+2*ja};a.push(g),i[d]=new Al(g,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(a=>e.hasImage(a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const a in e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),i),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),i)}patchUpdatedImage(e,i,a){if(!e||!i||e.version===i.version)return;e.version=i.version;const[d,m]=e.tl;a.update(i.data,void 0,{x:d,y:m})}}gi(Al,"ImagePosition"),gi(Hh,"ImageAtlas");const bl={horizontal:1,vertical:2,horizontalOnly:3},lg=-17;class ld{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,i){const a=new ld;return a.scale=e||1,a.fontStack=i,a}static forImage(e){const i=new ld;return i.imageName=e,i}}class cd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,i){const a=new cd;for(let d=0;d<e.sections.length;d++){const m=e.sections[d];m.image?a.addImageSection(m):a.addTextSection(m,i)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(i,a){let d="";for(let m=0;m<i.length;m++){const g=i.charCodeAt(m+1)||null,v=i.charCodeAt(m-1)||null;d+=!a&&(g&&xa(g)&&!qc[i[m+1]]||v&&xa(v)&&!qc[i[m-1]])||!qc[i[m]]?i[m]:qc[i[m]]}return d}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&Gh[this.text.charCodeAt(a)];a++)e++;let i=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&Gh[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)}substring(e,i){const a=new cd;return a.text=this.text.substring(e,i),a.sectionIndex=this.sectionIndex.slice(e,i),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,i)=>Math.max(e,this.sections[i].scale),0)}addTextSection(e,i){this.text+=e.text,this.sections.push(ld.forText(e.scale,e.fontStack||i));const a=this.sections.length-1;for(let d=0;d<e.text.length;++d)this.sectionIndex.push(a)}addImageSection(e){const i=e.image?e.image.name:"";if(0===i.length)return void Mn("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(ld.forImage(i)),this.sectionIndex.push(this.sections.length-1)):Mn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hf(n,e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae){const ye=cd.fromFeature(n,d);z===bl.vertical&&ye.verticalizePunctuation(Y);let Be=[];const rt=function(Lt,gn,un,Rn,Kn,vn){if(!Lt)return[];const Vn=[],Un=function(ci,bi,pi,Ji,oi,Oi){let Qi=0;for(let Dr=0;Dr<ci.length();Dr++){const er=ci.getSection(Dr);Qi+=cg(ci.getCharCode(Dr),er,Ji,oi,bi,Oi)}return Qi/Math.max(1,Math.ceil(Qi/pi))}(Lt,gn,un,Rn,Kn,vn),Zn=Lt.text.indexOf("\u200b")>=0;let ei=0;for(let ci=0;ci<Lt.length();ci++){const bi=Lt.getSection(ci),pi=Lt.getCharCode(ci);if(Gh[pi]||(ei+=cg(pi,bi,Rn,Kn,gn,vn)),ci<Lt.length()-1){const Ji=!((Pn=pi)<11904||!(hi["Bopomofo Extended"](Pn)||hi.Bopomofo(Pn)||hi["CJK Compatibility Forms"](Pn)||hi["CJK Compatibility Ideographs"](Pn)||hi["CJK Compatibility"](Pn)||hi["CJK Radicals Supplement"](Pn)||hi["CJK Strokes"](Pn)||hi["CJK Symbols and Punctuation"](Pn)||hi["CJK Unified Ideographs Extension A"](Pn)||hi["CJK Unified Ideographs"](Pn)||hi["Enclosed CJK Letters and Months"](Pn)||hi["Halfwidth and Fullwidth Forms"](Pn)||hi.Hiragana(Pn)||hi["Ideographic Description Characters"](Pn)||hi["Kangxi Radicals"](Pn)||hi["Katakana Phonetic Extensions"](Pn)||hi.Katakana(Pn)||hi["Vertical Forms"](Pn)||hi["Yi Radicals"](Pn)||hi["Yi Syllables"](Pn)));(pf[pi]||Ji||bi.imageName)&&Vn.push(Gd(ci+1,ei,Un,Vn,$h(pi,Lt.getCharCode(ci+1),Ji&&Zn),!1))}}var Pn;return $d(Gd(Lt.length(),ei,Un,Vn,0,!0))}(ye,E,m,e,a,ne),{processBidirectionalText:St,processStyledBidirectionalText:ot}=A;if(St&&1===ye.sections.length){const Lt=St(ye.toString(),rt);for(const gn of Lt){const un=new cd;un.text=gn,un.sections=ye.sections;for(let Rn=0;Rn<gn.length;Rn++)un.sectionIndex.push(0);Be.push(un)}}else if(ot){const Lt=ot(ye.text,ye.sectionIndex,rt);for(const gn of Lt){const un=new cd;un.text=gn[0],un.sectionIndex=gn[1],un.sections=ye.sections,Be.push(un)}}else Be=function(Lt,gn){const un=[],Rn=Lt.text;let Kn=0;for(const vn of gn)un.push(Lt.substring(Kn,vn)),Kn=vn;return Kn<Rn.length&&un.push(Lt.substring(Kn,Rn.length)),un}(ye,rt);const Dt=[],Bt={positionedLines:Dt,text:ye.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Lt,gn,un,Rn,Kn,vn,Vn,Un,Zn,ei,Pn,ci){let bi=0,pi=0,Ji=0;const oi="right"===Un?1:"left"===Un?0:.5;let Oi=!1;for(const tr of Kn){const nr=tr.getSections();for(const Kr of nr){if(Kr.imageName)continue;const io=gn[Kr.fontStack];if(io&&(Oi=void 0!==io.ascender&&void 0!==io.descender,!Oi))break}if(!Oi)break}let Qi=0;for(const tr of Kn){tr.trim();const nr=tr.getMaxScale(),Kr=(nr-1)*ra,io={positionedGlyphs:[],lineOffset:0};Lt.positionedLines[Qi]=io;const ro=io.positionedGlyphs;let Xr=0;if(!tr.length()){pi+=vn,++Qi;continue}let Po=0,jo=0;for(let $r=0;$r<tr.length();$r++){const gs=tr.getSection($r),ss=tr.getSectionIndex($r),Oo=tr.getCharCode($r);let Mr=gs.scale,as=null,Jr=null,fa=null,Qo=ra,es=0;const Hs=!(Zn===bl.horizontal||!Pn&&!lu(Oo)||Pn&&(Gh[Oo]||(Dr=Oo,hi.Arabic(Dr)||hi["Arabic Supplement"](Dr)||hi["Arabic Extended-A"](Dr)||hi["Arabic Presentation Forms-A"](Dr)||hi["Arabic Presentation Forms-B"](Dr))));if(gs.imageName){const Ra=Rn[gs.imageName];if(!Ra)continue;fa=gs.imageName,Lt.iconsInText=Lt.iconsInText||!0,Jr=Ra.paddedRect;const ts=Ra.displaySize;Mr=Mr*ra/ci,as={width:ts[0],height:ts[1],left:ja,top:-ag,advance:Hs?ts[1]:ts[0],localGlyph:!1},es=Oi?-as.height*Mr:lg+nr*ra-ts[1]*Mr,Qo=as.advance;const uc=(Hs?ts[0]:ts[1])*Mr-ra*nr;uc>0&&uc>Xr&&(Xr=uc)}else{const Ra=un[gs.fontStack];if(!Ra)continue;Ra[Oo]&&(Jr=Ra[Oo]);const ts=gn[gs.fontStack];if(!ts)continue;const uc=ts.glyphs[Oo];if(!uc)continue;if(as=uc.metrics,Qo=8203!==Oo?ra:0,Oi){const ru=void 0!==ts.ascender?Math.abs(ts.ascender):0,dp=void 0!==ts.descender?Math.abs(ts.descender):0,bd=(ru+dp)*Mr;Po<bd&&(Po=bd,jo=(ru-dp)/2*Mr),es=-ru*Mr}else es=lg+(nr-Mr)*ra}Hs?(Lt.verticalizable=!0,ro.push({glyph:Oo,imageName:fa,x:bi,y:pi+es,vertical:Hs,scale:Mr,localGlyph:as.localGlyph,fontStack:gs.fontStack,sectionIndex:ss,metrics:as,rect:Jr}),bi+=Qo*Mr+ei):(ro.push({glyph:Oo,imageName:fa,x:bi,y:pi+es,vertical:Hs,scale:Mr,localGlyph:as.localGlyph,fontStack:gs.fontStack,sectionIndex:ss,metrics:as,rect:Jr}),bi+=as.advance*Mr+ei)}0!==ro.length&&(Ji=Math.max(bi-ei,Ji),Oi?Zh(ro,oi,Xr,jo,vn*nr/2):Zh(ro,oi,Xr,0,vn/2)),bi=0;const os=vn*nr+Xr;io.lineOffset=Math.max(Xr,Kr),pi+=os,++Qi}var Dr;const er=pi,{horizontalAlign:ji,verticalAlign:fo}=dg(Vn);(function(tr,nr,Kr,io,ro,Xr){const Po=(nr-Kr)*ro,jo=-Xr*io;for(const os of tr)for(const $r of os.positionedGlyphs)$r.x+=Po,$r.y+=jo})(Lt.positionedLines,oi,ji,fo,Ji,er),Lt.top+=-fo*er,Lt.bottom=Lt.top+er,Lt.left+=-ji*Ji,Lt.right=Lt.left+Ji,Lt.hasBaseline=Oi}(Bt,e,i,a,Be,g,v,w,z,E,Y,ae),!function(Lt){for(const gn of Lt)if(0!==gn.positionedGlyphs.length)return!1;return!0}(Dt)&&Bt}const Gh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cg(n,e,i,a,d,m){if(e.imageName){const g=a[e.imageName];return g?g.displaySize[0]*e.scale*ra/m+d:0}{const g=i[e.fontStack],v=g&&g.glyphs[n];return v?v.metrics.advance*e.scale+d:0}}function ug(n,e,i,a){const d=Math.pow(n-e,2);return a?n<e?d/2:2*d:d+Math.abs(i)*i}function $h(n,e,i){let a=0;return 10===n&&(a-=1e4),i&&(a+=150),40!==n&&65288!==n||(a+=50),41!==e&&65289!==e||(a+=50),a}function Gd(n,e,i,a,d,m){let g=null,v=ug(e,i,d,m);for(const w of a){const E=ug(e-w.x,i,d,m)+w.badness;E<=v&&(g=w,v=E)}return{index:n,x:e,priorBreak:g,badness:v}}function $d(n){return n?$d(n.priorBreak).concat(n.index):[]}function dg(n){let e=.5,i=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Zh(n,e,i,a,d){if(!(e||i||a||d))return;const m=n.length-1,g=n[m],v=(g.x+g.metrics.advance*g.scale)*e;for(let w=0;w<=m;w++)n[w].x-=v,n[w].y+=i+a+d}function Zy(n,e,i){const{horizontalAlign:a,verticalAlign:d}=dg(i),m=e[0]-n.displaySize[0]*a,g=e[1]-n.displaySize[1]*d;return{image:n,top:g,bottom:g+n.displaySize[1],left:m,right:m+n.displaySize[0]}}function ff(n,e,i,a,d,m){const g=n.image;let v;if(g.content){const Be=g.content,rt=g.pixelRatio||1;v=[Be[0]/rt,Be[1]/rt,g.displaySize[0]-Be[2]/rt,g.displaySize[1]-Be[3]/rt]}const w=e.left*m,E=e.right*m;let R,z,Y,ne;"width"===i||"both"===i?(ne=d[0]+w-a[3],z=d[0]+E+a[1]):(ne=d[0]+(w+E-g.displaySize[0])/2,z=ne+g.displaySize[0]);const ae=e.top*m,ye=e.bottom*m;return"height"===i||"both"===i?(R=d[1]+ae-a[0],Y=d[1]+ye+a[2]):(R=d[1]+(ae+ye-g.displaySize[1])/2,Y=R+g.displaySize[1]),{image:g,top:R,right:z,bottom:Y,left:ne,collisionPadding:v}}class oc extends Ae{constructor(e,i,a,d,m){super(e,i),this.angle=d,this.z=a,void 0!==m&&(this.segment=m)}clone(){return new oc(this.x,this.y,this.z,this.angle,this.segment)}}function mf(n,e,i,a,d){if(void 0===e.segment)return!0;let m=e,g=e.segment+1,v=0;for(;v>-i/2;){if(g--,g<0)return!1;v-=n[g].dist(m),m=n[g]}v+=n[g].dist(n[g+1]),g++;const w=[];let E=0;for(;v<i/2;){const R=n[g],z=n[g+1];if(!z)return!1;let Y=n[g-1].angleTo(R)-R.angleTo(z);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:v,angleDelta:Y}),E+=Y;v-w[0].distance>a;)E-=w.shift().angleDelta;if(E>d)return!1;g++,v+=R.dist(z)}return!0}function gf(n){let e=0;for(let i=0;i<n.length-1;i++)e+=n[i].dist(n[i+1]);return e}function Wh(n,e,i){return n?.6*e*i:0}function sc(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function Yh(n,e,i,a,d,m){const g=Wh(i,d,m),v=sc(i,a)*m;let w=0;const E=gf(n)/2;for(let R=0;R<n.length-1;R++){const z=n[R],Y=n[R+1],ne=z.dist(Y);if(w+ne>E){const ae=(E-w)/ne,ye=Yi(z.x,Y.x,ae),Be=Yi(z.y,Y.y,ae),rt=new oc(ye,Be,0,Y.angleTo(z),R);return!g||mf(n,rt,v,g,e)?rt:void 0}w+=ne}}function qh(n,e,i,a,d,m,g,v,w){const E=Wh(a,m,g),R=sc(a,d),z=R*g,Y=0===n[0].x||n[0].x===w||0===n[0].y||n[0].y===w;return e-z<e/4&&(e=z+e/4),ud(n,Y?e/2*v%e:(R/2+2*m)*g*v%e,e,E,i,z,Y,!1,w)}function ud(n,e,i,a,d,m,g,v,w){const E=m/2,R=gf(n);let z=0,Y=e-i,ne=[];for(let ae=0;ae<n.length-1;ae++){const ye=n[ae],Be=n[ae+1],rt=ye.dist(Be),St=Be.angleTo(ye);for(;Y+i<z+rt;){Y+=i;const ot=(Y-z)/rt,Dt=Yi(ye.x,Be.x,ot),Bt=Yi(ye.y,Be.y,ot);if(Dt>=0&&Dt<w&&Bt>=0&&Bt<w&&Y-E>=0&&Y+E<=R){const Lt=new oc(Dt,Bt,0,St,ae);Lt._round(),a&&!mf(n,Lt,m,a,d)||ne.push(Lt)}}z+=rt}return v||ne.length||g||(ne=ud(n,z/2,i,a,d,m,g,!0,w)),ne}function hg(n,e,i,a,d){const m=[];for(let g=0;g<n.length;g++){const v=n[g];let w;for(let E=0;E<v.length-1;E++){let R=v[E],z=v[E+1];R.x<e&&z.x<e||(R.x<e?R=new Ae(e,R.y+(e-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x<e&&(z=new Ae(e,R.y+(e-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y<i&&z.y<i||(R.y<i?R=new Ae(R.x+(i-R.y)/(z.y-R.y)*(z.x-R.x),i)._round():z.y<i&&(z=new Ae(R.x+(i-R.y)/(z.y-R.y)*(z.x-R.x),i)._round()),R.x>=a&&z.x>=a||(R.x>=a?R=new Ae(a,R.y+(a-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x>=a&&(z=new Ae(a,R.y+(a-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y>=d&&z.y>=d||(R.y>=d?R=new Ae(R.x+(d-R.y)/(z.y-R.y)*(z.x-R.x),d)._round():z.y>=d&&(z=new Ae(R.x+(d-R.y)/(z.y-R.y)*(z.x-R.x),d)._round()),w&&R.equals(w[w.length-1])||(w=[R],m.push(w)),w.push(z)))))}}return m}gi(oc,"Anchor");const dd=1e20;function _f(n,e,i,a,d,m,g,v,w){for(let E=e;E<e+a;E++)pg(n,i*m+E,m,d,g,v,w);for(let E=i;E<i+d;E++)pg(n,E*m+e,1,a,g,v,w)}function pg(n,e,i,a,d,m,g){m[0]=0,g[0]=-dd,g[1]=dd,d[0]=n[e];for(let v=1,w=0,E=0;v<a;v++){d[v]=n[e+v*i];const R=v*v;do{const z=m[w];E=(d[v]-d[z]+R-z*z)/(v-z)/2}while(E<=g[w]&&--w>-1);w++,m[w]=v,g[w]=E,g[w+1]=dd}for(let v=0,w=0;v<a;v++){for(;g[w+1]<v;)w++;const E=m[w],R=v-E;n[e+v*i]=d[E]+R*R}}const $l=2,Tu={none:0,ideographs:1,all:2};class hd{constructor(e,i,a){this.requestManager=e,this.localGlyphMode=i,this.localFontFamily=a,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,i){const a=[];for(const d in e)for(const m of e[d])a.push({stack:d,id:m});vi(a,({stack:d,id:m},g)=>{let v=this.entries[d];v||(v=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=v.glyphs[m];if(void 0!==w)return void g(null,{stack:d,id:m,glyph:w});if(w=this._tinySDF(v,d,m),w)return v.glyphs[m]=w,void g(null,{stack:d,id:m,glyph:w});const E=Math.floor(m/256);if(256*E>65535)return void g(new Error("glyphs > 65535 not supported"));if(v.ranges[E])return void g(null,{stack:d,id:m,glyph:w});let R=v.requests[E];R||(R=v.requests[E]=[],hd.loadGlyphRange(d,E,this.url,this.requestManager,(z,Y)=>{if(Y){v.ascender=Y.ascender,v.descender=Y.descender;for(const ne in Y.glyphs)this._doesCharSupportLocalGlyph(+ne)||(v.glyphs[+ne]=Y.glyphs[+ne]);v.ranges[E]=!0}for(const ne of R)ne(z,Y);delete v.requests[E]})),R.push((z,Y)=>{z?g(z):Y&&g(null,{stack:d,id:m,glyph:Y.glyphs[m]||null})})},(d,m)=>{if(d)i(d);else if(m){const g={};for(const{stack:v,id:w,glyph:E}of m)void 0===g[v]&&(g[v]={}),void 0===g[v].glyphs&&(g[v].glyphs={}),g[v].glyphs[w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics},g[v].ascender=this.entries[v].ascender,g[v].descender=this.entries[v].descender;i(null,g)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Tu.none&&(this.localGlyphMode===Tu.all?!!this.localFontFamily:!!this.localFontFamily&&(hi["CJK Unified Ideographs"](e)||hi["Hangul Syllables"](e)||hi.Hiragana(e)||hi.Katakana(e)||hi["CJK Symbols and Punctuation"](e)))}_tinySDF(e,i,a){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(a))return;let m=e.tinySDF;if(!m){let ye="400";/bold/i.test(i)?ye="900":/medium/i.test(i)?ye="500":/light/i.test(i)&&(ye="200"),m=e.tinySDF=new hd.TinySDF({fontFamily:d,fontWeight:ye,fontSize:24*$l,buffer:3*$l,radius:8*$l}),m.fontWeight=ye}if(this.localGlyphs[m.fontWeight][a])return this.localGlyphs[m.fontWeight][a];const g=String.fromCharCode(a),{data:v,width:w,height:E,glyphWidth:R,glyphHeight:z,glyphLeft:Y,glyphTop:ne,glyphAdvance:ae}=m.draw(g);return this.localGlyphs[m.fontWeight][a]={id:a,bitmap:new xc({width:w,height:E},v),metrics:{width:R/$l,height:z/$l,left:Y/$l,top:ne/$l-27,advance:ae/$l,localGlyph:!0}}}}hd.loadGlyphRange=function(n,e,i,a,d){const m=256*e,g=m+255,v=a.transformRequest(a.normalizeGlyphsURL(i).replace("{fontstack}",n).replace("{range}",`${m}-${g}`),re.Glyphs);Bn(v,(w,E)=>{if(w)d(w);else if(E){const R={},z=new jh(E).readFields(uf,{});for(const Y of z.glyphs)R[Y.id]=Y;d(null,{glyphs:R,ascender:z.ascender,descender:z.descender})}})},hd.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:i=8,cutoff:a=.25,fontFamily:d="sans-serif",fontWeight:m="normal",fontStyle:g="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=i;const v=this.size=n+4*e,w=this._createCanvas(v),E=this.ctx=w.getContext("2d",{willReadFrequently:!0});E.font=`${g} ${m} ${n}px ${d}`,E.textBaseline="alphabetic",E.textAlign="left",E.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:a,actualBoundingBoxLeft:d,actualBoundingBoxRight:m}=this.ctx.measureText(n),g=Math.ceil(i),v=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-d))),w=Math.min(this.size-this.buffer,g+Math.ceil(a)),E=v+2*this.buffer,R=w+2*this.buffer,z=Math.max(E*R,0),Y=new Uint8ClampedArray(z),ne={data:Y,width:E,height:R,glyphWidth:v,glyphHeight:w,glyphTop:g,glyphLeft:0,glyphAdvance:e};if(0===v||0===w)return ne;const{ctx:ae,buffer:ye,gridInner:Be,gridOuter:rt}=this;ae.clearRect(ye,ye,v,w),ae.fillText(n,ye,ye+g);const St=ae.getImageData(ye,ye,v,w);rt.fill(dd,0,z),Be.fill(0,0,z);for(let ot=0;ot<w;ot++)for(let Dt=0;Dt<v;Dt++){const Bt=St.data[4*(ot*v+Dt)+3]/255;if(0===Bt)continue;const Lt=(ot+ye)*E+Dt+ye;if(1===Bt)rt[Lt]=0,Be[Lt]=dd;else{const gn=.5-Bt;rt[Lt]=gn>0?gn*gn:0,Be[Lt]=gn<0?gn*gn:0}}_f(rt,0,0,E,R,E,this.f,this.v,this.z),_f(Be,ye,ye,v,w,E,this.f,this.v,this.z);for(let ot=0;ot<z;ot++){const Dt=Math.sqrt(rt[ot])-Math.sqrt(Be[ot]);Y[ot]=Math.round(255-255*(Dt/this.radius+this.cutoff))}return ne}};const Zd=ja;function fg(n,e,i,a){const d=[],m=n.image,g=m.pixelRatio,v=m.paddedRect.w-2*Zd,w=m.paddedRect.h-2*Zd,E=n.right-n.left,R=n.bottom-n.top,z=m.stretchX||[[0,v]],Y=m.stretchY||[[0,w]],ne=(vn,Vn)=>vn+Vn[1]-Vn[0],ae=z.reduce(ne,0),ye=Y.reduce(ne,0),Be=v-ae,rt=w-ye;let St=0,ot=ae,Dt=0,Bt=ye,Lt=0,gn=Be,un=0,Rn=rt;if(m.content&&a){const vn=m.content;St=Kh(z,0,vn[0]),Dt=Kh(Y,0,vn[1]),ot=Kh(z,vn[0],vn[2]),Bt=Kh(Y,vn[1],vn[3]),Lt=vn[0]-St,un=vn[1]-Dt,gn=vn[2]-vn[0]-ot,Rn=vn[3]-vn[1]-Bt}const Kn=(vn,Vn,Un,Zn)=>{const ei=Xh(vn.stretch-St,ot,E,n.left),Pn=Jh(vn.fixed-Lt,gn,vn.stretch,ae),ci=Xh(Vn.stretch-Dt,Bt,R,n.top),bi=Jh(Vn.fixed-un,Rn,Vn.stretch,ye),pi=Xh(Un.stretch-St,ot,E,n.left),Ji=Jh(Un.fixed-Lt,gn,Un.stretch,ae),oi=Xh(Zn.stretch-Dt,Bt,R,n.top),Oi=Jh(Zn.fixed-un,Rn,Zn.stretch,ye),Qi=new Ae(ei,ci),Dr=new Ae(pi,ci),er=new Ae(pi,oi),ji=new Ae(ei,oi),fo=new Ae(Pn/g,bi/g),tr=new Ae(Ji/g,Oi/g),nr=e*Math.PI/180;if(nr){const ro=Math.sin(nr),Xr=Math.cos(nr),Po=[Xr,-ro,ro,Xr];Qi._matMult(Po),Dr._matMult(Po),ji._matMult(Po),er._matMult(Po)}const Kr=vn.stretch+vn.fixed,io=Vn.stretch+Vn.fixed;return{tl:Qi,tr:Dr,bl:ji,br:er,tex:{x:m.paddedRect.x+Zd+Kr,y:m.paddedRect.y+Zd+io,w:Un.stretch+Un.fixed-Kr,h:Zn.stretch+Zn.fixed-io},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fo,pixelOffsetBR:tr,minFontScaleX:gn/g/E,minFontScaleY:Rn/g/R,isSDF:i}};if(a&&(m.stretchX||m.stretchY)){const vn=mg(z,Be,ae),Vn=mg(Y,rt,ye);for(let Un=0;Un<vn.length-1;Un++){const Zn=vn[Un],ei=vn[Un+1];for(let Pn=0;Pn<Vn.length-1;Pn++)d.push(Kn(Zn,Vn[Pn],ei,Vn[Pn+1]))}}else d.push(Kn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:w+1}));return d}function Kh(n,e,i){let a=0;for(const d of n)a+=Math.max(e,Math.min(i,d[1]))-Math.max(e,Math.min(i,d[0]));return a}function mg(n,e,i){const a=[{fixed:-Zd,stretch:0}];for(const[d,m]of n){const g=a[a.length-1];a.push({fixed:d-g.stretch,stretch:g.stretch}),a.push({fixed:d-g.stretch,stretch:g.stretch+(m-d)})}return a.push({fixed:e+Zd,stretch:i}),a}function Xh(n,e,i,a){return n/e*i+a}function Jh(n,e,i,a){return n-e*i/a}function W_(n,e,i,a){const d=e+n.positionedLines[a].lineOffset;return 0===a?i+d/2:i+(d+(e+n.positionedLines[a-1].lineOffset))/2}class Y_{constructor(e=[],i=gg){if(this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:i,compare:a}=this,d=i[e];for(;e>0;){const m=e-1>>1,g=i[m];if(a(d,g)>=0)break;i[e]=g,e=m}i[e]=d}_down(e){const{data:i,compare:a}=this,d=this.length>>1,m=i[e];for(;e<d;){let g=1+(e<<1),v=i[g];const w=g+1;if(w<this.length&&a(i[w],v)<0&&(g=w,v=i[w]),a(v,m)>=0)break;i[e]=v,e=g}i[e]=m}}function gg(n,e){return n<e?-1:n>e?1:0}function yf(n,e=1,i=!1){let a=1/0,d=1/0,m=-1/0,g=-1/0;const v=n[0];for(let ne=0;ne<v.length;ne++){const ae=v[ne];(!ne||ae.x<a)&&(a=ae.x),(!ne||ae.y<d)&&(d=ae.y),(!ne||ae.x>m)&&(m=ae.x),(!ne||ae.y>g)&&(g=ae.y)}const w=Math.min(m-a,g-d);let E=w/2;const R=new Y_([],q_);if(0===w)return new Ae(a,d);for(let ne=a;ne<m;ne+=w)for(let ae=d;ae<g;ae+=w)R.push(new Kc(ne+E,ae+E,E,n));let z=function(ne){let ae=0,ye=0,Be=0;const rt=ne[0];for(let St=0,ot=rt.length,Dt=ot-1;St<ot;Dt=St++){const Bt=rt[St],Lt=rt[Dt],gn=Bt.x*Lt.y-Lt.x*Bt.y;ye+=(Bt.x+Lt.x)*gn,Be+=(Bt.y+Lt.y)*gn,ae+=3*gn}return new Kc(ye/ae,Be/ae,0,ne)}(n),Y=R.length;for(;R.length;){const ne=R.pop();(ne.d>z.d||!z.d)&&(z=ne,i&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,Y)),ne.max-z.d<=e||(E=ne.h/2,R.push(new Kc(ne.p.x-E,ne.p.y-E,E,n)),R.push(new Kc(ne.p.x+E,ne.p.y-E,E,n)),R.push(new Kc(ne.p.x-E,ne.p.y+E,E,n)),R.push(new Kc(ne.p.x+E,ne.p.y+E,E,n)),Y+=4)}return i&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${z.d}`)),z.p}function q_(n,e){return e.max-n.max}class Kc{constructor(e,i,a,d){this.p=new Ae(e,i),this.h=a,this.d=function(m,g){let v=!1,w=1/0;for(let E=0;E<g.length;E++){const R=g[E];for(let z=0,Y=R.length,ne=Y-1;z<Y;ne=z++){const ae=R[z],ye=R[ne];ae.y>m.y!=ye.y>m.y&&m.x<(ye.x-ae.x)*(m.y-ae.y)/(ye.y-ae.y)+ae.x&&(v=!v),w=Math.min(w,d_(m,ae,ye))}}return(v?1:-1)*Math.sqrt(w)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const pd=7,vf=Number.POSITIVE_INFINITY,K_=Math.sqrt(2);function _g(n,[e,i]){let a=0,d=0;if(i===vf){e<0&&(e=0);const m=e/K_;switch(n){case"top-right":case"top-left":d=m-pd;break;case"bottom-right":case"bottom-left":d=-m+pd;break;case"bottom":d=-e+pd;break;case"top":d=e-pd}switch(n){case"top-right":case"bottom-right":a=-m;break;case"top-left":case"bottom-left":a=m;break;case"left":a=e;break;case"right":a=-e}}else{switch(e=Math.abs(e),i=Math.abs(i),n){case"top-right":case"top-left":case"top":d=i-pd;break;case"bottom-right":case"bottom-left":case"bottom":d=-i+pd}switch(n){case"top-right":case"bottom-right":case"right":a=-e;break;case"top-left":case"bottom-left":case"left":a=e}}return[a,d]}function X_(n,e,i,a,d,m,g,v,w,E){n.createArrays(),n.tilePixelRatio=ki/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const R=n.layers[0].layout,z=n.layers[0]._unevaluatedLayout._values,Y={};if("composite"===n.textSizeData.kind){const{minZoom:ye,maxZoom:Be}=n.textSizeData;Y.compositeTextSizes=[z["text-size"].possiblyEvaluate(new B(ye),v),z["text-size"].possiblyEvaluate(new B(Be),v)]}if("composite"===n.iconSizeData.kind){const{minZoom:ye,maxZoom:Be}=n.iconSizeData;Y.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new B(ye),v),z["icon-size"].possiblyEvaluate(new B(Be),v)]}Y.layoutTextSize=z["text-size"].possiblyEvaluate(new B(w+1),v),Y.layoutIconSize=z["icon-size"].possiblyEvaluate(new B(w+1),v),Y.textMaxSize=z["text-size"].possiblyEvaluate(new B(18),v);const ne="map"===R.get("text-rotation-alignment")&&"point"!==R.get("symbol-placement"),ae=R.get("text-size");for(const ye of n.features){const Be=R.get("text-font").evaluate(ye,{},v).join(","),rt=ae.evaluate(ye,{},v),St=Y.layoutTextSize.evaluate(ye,{},v),ot=(Y.layoutIconSize.evaluate(ye,{},v),{horizontal:{},vertical:void 0}),Dt=ye.text;let Bt,Lt=[0,0];if(Dt){const Rn=Dt.toString(),Kn=R.get("text-letter-spacing").evaluate(ye,{},v)*ra,vn=R.get("text-line-height").evaluate(ye,{},v)*ra,Vn=au(Rn)?Kn:0,Un=R.get("text-anchor").evaluate(ye,{},v),Zn=R.get("text-variable-anchor");if(!Zn){const pi=R.get("text-radial-offset").evaluate(ye,{},v);Lt=pi?_g(Un,[pi*ra,vf]):R.get("text-offset").evaluate(ye,{},v).map(Ji=>Ji*ra)}let ei=ne?"center":R.get("text-justify").evaluate(ye,{},v);const Pn="point"===R.get("symbol-placement"),ci=Pn?R.get("text-max-width").evaluate(ye,{},v)*ra:1/0,bi=pi=>{n.allowVerticalPlacement&&Ko(Rn)&&(ot.vertical=hf(Dt,e,i,d,Be,ci,vn,Un,pi,Vn,Lt,bl.vertical,!0,St,rt))};if(!ne&&Zn){const pi="auto"===ei?Zn.map(oi=>bf(oi)):[ei];let Ji=!1;for(let oi=0;oi<pi.length;oi++){const Oi=pi[oi];if(!ot.horizontal[Oi])if(Ji)ot.horizontal[Oi]=ot.horizontal[0];else{const Qi=hf(Dt,e,i,d,Be,ci,vn,"center",Oi,Vn,Lt,bl.horizontal,!1,St,rt);Qi&&(ot.horizontal[Oi]=Qi,Ji=1===Qi.positionedLines.length)}}bi("left")}else{if("auto"===ei&&(ei=bf(Un)),Pn||R.get("text-writing-mode").indexOf("horizontal")>=0||!Ko(Rn)){const pi=hf(Dt,e,i,d,Be,ci,vn,Un,ei,Vn,Lt,bl.horizontal,!1,St,rt);pi&&(ot.horizontal[ei]=pi)}bi(Pn?"left":ei)}}let gn=!1;if(ye.icon&&ye.icon.name){const Rn=a[ye.icon.name];Rn&&(Bt=Zy(d[ye.icon.name],R.get("icon-offset").evaluate(ye,{},v),R.get("icon-anchor").evaluate(ye,{},v)),gn=Rn.sdf,void 0===n.sdfIcons?n.sdfIcons=Rn.sdf:n.sdfIcons!==Rn.sdf&&Mn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Rn.pixelRatio!==n.pixelRatio||0!==R.get("icon-rotate").constantOr(1))&&(n.iconsNeedLinear=!0))}const un=Q_(ot.horizontal)||ot.vertical;n.iconsInText||(n.iconsInText=!!un&&un.iconsInText),(un||Bt)&&J_(n,ye,ot,Bt,a,Y,St,0,Lt,gn,g,v,E)}m&&n.generateCollisionDebugBuffers(w,n.collisionBoxArray)}function bf(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function J_(n,e,i,a,d,m,g,v,w,E,R,z,Y){let ne=m.textMaxSize.evaluate(e,{},z);void 0===ne&&(ne=g);const ae=n.layers[0].layout,ye=ae.get("icon-offset").evaluate(e,{},z),Be=Q_(i.horizontal)||i.vertical,rt="globe"===Y.name,St=ra,ot=g/St,Dt=n.tilePixelRatio*ne/St,Bt=(Un=n.overscaling,n.zoom>18&&Un>2&&(Un>>=1),Math.max(ki/(512*Un),1)*ae.get("symbol-spacing")),Lt=ae.get("text-padding")*n.tilePixelRatio,gn=ae.get("icon-padding")*n.tilePixelRatio,un=mt(ae.get("text-max-angle")),Rn="map"===ae.get("text-rotation-alignment")&&"point"!==ae.get("symbol-placement"),Kn="map"===ae.get("icon-rotation-alignment")&&"point"!==ae.get("symbol-placement"),vn=ae.get("symbol-placement"),Vn=Bt/2;var Un;const Zn=ae.get("icon-text-fit");let ei;a&&"none"!==Zn&&(n.allowVerticalPlacement&&i.vertical&&(ei=ff(a,i.vertical,Zn,ae.get("icon-text-fit-padding"),ye,ot)),Be&&(a=ff(a,Be,Zn,ae.get("icon-text-fit-padding"),ye,ot)));const Pn=(ci,bi,pi)=>{if(bi.x<0||bi.x>=ki||bi.y<0||bi.y>=ki)return;let Ji=null;if(rt){const{x:oi,y:Oi,z:Qi}=Y.projectTilePoint(bi.x,bi.y,pi);Ji={anchor:new oc(oi,Oi,Qi,0,void 0),up:Y.upVector(pi,bi.x,bi.y)}}!function(oi,Oi,Qi,Dr,er,ji,fo,tr,nr,Kr,io,ro,Xr,Po,jo,os,$r,gs,ss,Oo,Mr,as,Jr,fa,Qo){const es=oi.addToLineVertexArray(Oi,Dr);let Hs,Ra,ts,uc,ru,dp,bd,Wf=0,oy=0,Ki=0,Fg=0,Yf=-1,qf=-1;const Ga={};let Lg=ka("");const dc=Qi?Qi.anchor:Oi;let xd=0,ls=0;if(void 0===nr._unevaluatedLayout.getValue("text-radial-offset")?[xd,ls]=nr.layout.get("text-offset").evaluate(Mr,{},Qo).map(ll=>ll*ra):(xd=nr.layout.get("text-radial-offset").evaluate(Mr,{},Qo)*ra,ls=vf),oi.allowVerticalPlacement&&er.vertical){const ll=er.vertical;if(jo)dp=vg(ll),tr&&(bd=vg(tr));else{const $a=nr.layout.get("text-rotate").evaluate(Mr,{},Qo)+90;ts=Wd(Kr,dc,Oi,io,ro,Xr,ll,Po,$a,os),tr&&(uc=Wd(Kr,dc,Oi,io,ro,Xr,tr,gs,$a))}}if(ji){const ll=nr.layout.get("icon-rotate").evaluate(Mr,{},Qo),$a="none"!==nr.layout.get("icon-text-fit"),wd=fg(ji,ll,Jr,$a),pp=tr?fg(tr,ll,Jr,$a):void 0;Ra=Wd(Kr,dc,Oi,io,ro,Xr,ji,gs,ll),Wf=4*wd.length;const Kf=oi.iconSizeData;let Fu=null;"source"===Kf.kind?(Fu=[Gl*nr.layout.get("icon-size").evaluate(Mr,{},Qo)],Fu[0]>Ec&&Mn(`${oi.layerIds[0]}: Value for "icon-size" is >= ${fd}. Reduce your "icon-size".`)):"composite"===Kf.kind&&(Fu=[Gl*as.compositeIconSizes[0].evaluate(Mr,{},Qo),Gl*as.compositeIconSizes[1].evaluate(Mr,{},Qo)],(Fu[0]>Ec||Fu[1]>Ec)&&Mn(`${oi.layerIds[0]}: Value for "icon-size" is >= ${fd}. Reduce your "icon-size".`)),oi.addSymbols(oi.icon,wd,Fu,Oo,ss,Mr,!1,Qi,Oi,es.lineStartIndex,es.lineLength,-1,fa,Qo),Yf=oi.icon.placedSymbolArray.length-1,pp&&(oy=4*pp.length,oi.addSymbols(oi.icon,pp,Fu,Oo,ss,Mr,bl.vertical,Qi,Oi,es.lineStartIndex,es.lineLength,-1,fa,Qo),qf=oi.icon.placedSymbolArray.length-1)}for(const ll in er.horizontal){const $a=er.horizontal[ll];Hs||(Lg=ka($a.text),jo?ru=vg($a):Hs=Wd(Kr,dc,Oi,io,ro,Xr,$a,Po,nr.layout.get("text-rotate").evaluate(Mr,{},Qo),os));const wd=1===$a.positionedLines.length;if(Ki+=yg(oi,Qi,Oi,$a,fo,nr,jo,Mr,os,es,er.vertical?bl.horizontal:bl.horizontalOnly,wd?Object.keys(er.horizontal):[ll],Ga,Yf,as,fa,Qo),wd)break}er.vertical&&(Fg+=yg(oi,Qi,Oi,er.vertical,fo,nr,jo,Mr,os,es,bl.vertical,["vertical"],Ga,qf,as,fa,Qo));let Ru=-1;const hp=(ll,$a)=>ll?Math.max(ll,$a):$a;Ru=hp(ru,Ru),Ru=hp(dp,Ru),Ru=hp(bd,Ru);const Bg=Ru>-1?1:0;oi.glyphOffsetArray.length>=Tc.MAX_GLYPHS&&Mn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Mr.sortKey&&oi.addToSortKeyRanges(oi.symbolInstances.length,Mr.sortKey),oi.symbolInstances.emplaceBack(dc.x,dc.y,dc.z,Oi.x,Oi.y,Ga.right>=0?Ga.right:-1,Ga.center>=0?Ga.center:-1,Ga.left>=0?Ga.left:-1,Ga.vertical>=0?Ga.vertical:-1,Yf,qf,Lg,void 0!==Hs?Hs:oi.collisionBoxArray.length,void 0!==Hs?Hs+1:oi.collisionBoxArray.length,void 0!==ts?ts:oi.collisionBoxArray.length,void 0!==ts?ts+1:oi.collisionBoxArray.length,void 0!==Ra?Ra:oi.collisionBoxArray.length,void 0!==Ra?Ra+1:oi.collisionBoxArray.length,uc||oi.collisionBoxArray.length,uc?uc+1:oi.collisionBoxArray.length,io,Ki,Fg,Wf,oy,Bg,0,xd,ls,Ru)}(n,bi,Ji,ci,i,a,d,ei,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,Lt,Rn,w,0,gn,Kn,ye,e,m,E,R,z)};if("line"===vn)for(const ci of hg(e.geometry,0,0,ki,ki)){const bi=qh(ci,Bt,un,i.vertical||Be,a,St,Dt,n.overscaling,ki);for(const pi of bi)Be&&Qh(n,Be.text,Vn,pi)||Pn(ci,pi,z)}else if("line-center"===vn){for(const ci of e.geometry)if(ci.length>1){const bi=Yh(ci,un,i.vertical||Be,a,St,Dt);bi&&Pn(ci,bi,z)}}else if("Polygon"===e.type)for(const ci of Sh(e.geometry,0)){const bi=yf(ci,16);Pn(ci[0],new oc(bi.x,bi.y,0,0,void 0),z)}else if("LineString"===e.type)for(const ci of e.geometry)Pn(ci,new oc(ci[0].x,ci[0].y,0,0,void 0),z);else if("Point"===e.type)for(const ci of e.geometry)for(const bi of ci)Pn([bi],new oc(bi.x,bi.y,0,0,void 0),z)}const fd=255,Ec=fd*Gl;function yg(n,e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae,ye,Be){const rt=function(Dt,Bt,Lt,gn,un,Rn,Kn,vn){const Vn=[];if(0===Bt.positionedLines.length)return Vn;const Un=gn.layout.get("text-rotate").evaluate(Rn,{})*Math.PI/180,Zn=function(pi){const Ji=pi[0],oi=pi[1],Oi=Ji*oi;return Oi>0?[Ji,-oi]:Oi<0?[-Ji,oi]:0===Ji?[oi,Ji]:[oi,-Ji]}(Lt);let ei=Math.abs(Bt.top-Bt.bottom);for(const pi of Bt.positionedLines)ei-=pi.lineOffset;const Pn=Bt.positionedLines.length,ci=ei/Pn;let bi=Bt.top-Lt[1];for(let pi=0;pi<Pn;++pi){const Ji=Bt.positionedLines[pi];bi=W_(Bt,ci,bi,pi);for(const oi of Ji.positionedGlyphs){if(!oi.rect)continue;const Oi=oi.rect||{};let Qi=ag+1,Dr=!0,er=1,ji=0;if(oi.imageName){const Jr=Kn[oi.imageName];if(!Jr)continue;if(Jr.sdf){Mn("SDF images are not supported in formatted text and will be ignored.");continue}Dr=!1,er=Jr.pixelRatio,Qi=ja/er}const fo=(un||vn)&&oi.vertical,tr=oi.metrics.advance*oi.scale/2,nr=oi.metrics,Kr=oi.rect;if(null===Kr)continue;vn&&Bt.verticalizable&&(ji=oi.imageName?tr-oi.metrics.width*oi.scale/2:0);const io=un?[oi.x+tr,oi.y]:[0,0];let ro=[0,0],Xr=[0,0],Po=!1;un||(fo?(Xr=[oi.x+tr+Zn[0],oi.y+Zn[1]-ji],Po=!0):ro=[oi.x+tr+Lt[0],oi.y+Lt[1]-ji]);const jo=Kr.w*oi.scale/(er*(oi.localGlyph?$l:1)),os=Kr.h*oi.scale/(er*(oi.localGlyph?$l:1));let $r,gs,ss,Oo;if(fo){const Jr=oi.y-bi,fa=new Ae(-tr,tr-Jr),Qo=-Math.PI/2,es=new Ae(...Xr);$r=new Ae(-tr+ro[0],ro[1]),$r._rotateAround(Qo,fa)._add(es),$r.x+=-Jr+tr,$r.y-=(nr.left-Qi)*oi.scale;const Hs=oi.imageName?nr.advance*oi.scale:ra*oi.scale,Ra=String.fromCharCode(oi.glyph);rg(Ra)?$r.x+=(1-Qi)*oi.scale:ef(Ra)?$r.x+=Hs-nr.height*oi.scale+(-Qi-1)*oi.scale:$r.x+=oi.imageName||nr.width+2*Qi===Kr.w&&nr.height+2*Qi===Kr.h?(Hs-os)/2:(Hs-(nr.height+2*Qi)*oi.scale)/2,gs=new Ae($r.x,$r.y-jo),ss=new Ae($r.x+os,$r.y),Oo=new Ae($r.x+os,$r.y-jo)}else{const Jr=(nr.left-Qi)*oi.scale-tr+ro[0],fa=(-nr.top-Qi)*oi.scale+ro[1],Qo=Jr+jo,es=fa+os;$r=new Ae(Jr,fa),gs=new Ae(Qo,fa),ss=new Ae(Jr,es),Oo=new Ae(Qo,es)}if(Un){let Jr;Jr=un?new Ae(0,0):Po?new Ae(Zn[0],Zn[1]):new Ae(Lt[0],Lt[1]),$r._rotateAround(Un,Jr),gs._rotateAround(Un,Jr),ss._rotateAround(Un,Jr),Oo._rotateAround(Un,Jr)}const Mr=new Ae(0,0),as=new Ae(0,0);Vn.push({tl:$r,tr:gs,bl:ss,br:Oo,tex:Oi,writingMode:Bt.writingMode,glyphOffset:io,sectionIndex:oi.sectionIndex,isSDF:Dr,pixelOffsetTL:Mr,pixelOffsetBR:as,minFontScaleX:0,minFontScaleY:0})}}return Vn}(0,a,w,m,g,v,d,n.allowVerticalPlacement),St=n.textSizeData;let ot=null;"source"===St.kind?(ot=[Gl*m.layout.get("text-size").evaluate(v,{},Be)],ot[0]>Ec&&Mn(`${n.layerIds[0]}: Value for "text-size" is >= ${fd}. Reduce your "text-size".`)):"composite"===St.kind&&(ot=[Gl*ae.compositeTextSizes[0].evaluate(v,{},Be),Gl*ae.compositeTextSizes[1].evaluate(v,{},Be)],(ot[0]>Ec||ot[1]>Ec)&&Mn(`${n.layerIds[0]}: Value for "text-size" is >= ${fd}. Reduce your "text-size".`)),n.addSymbols(n.text,rt,ot,w,g,v,R,e,i,E.lineStartIndex,E.lineLength,ne,ye,Be);for(const Dt of z)Y[Dt]=n.text.placedSymbolArray.length-1;return 4*rt.length}function Q_(n){for(const e in n)return n[e];return null}function Wd(n,e,i,a,d,m,g,v,w,E){let R=g.top,z=g.bottom,Y=g.left,ne=g.right;const ae=g.collisionPadding;if(ae&&(Y-=ae[0],R-=ae[1],ne+=ae[2],z+=ae[3]),w){const ye=new Ae(Y,R),Be=new Ae(ne,R),rt=new Ae(Y,z),St=new Ae(ne,z),ot=mt(w);let Dt=new Ae(0,0);E&&(Dt=new Ae(E[0],E[1])),ye._rotateAround(ot,Dt),Be._rotateAround(ot,Dt),rt._rotateAround(ot,Dt),St._rotateAround(ot,Dt),Y=Math.min(ye.x,Be.x,rt.x,St.x),ne=Math.max(ye.x,Be.x,rt.x,St.x),R=Math.min(ye.y,Be.y,rt.y,St.y),z=Math.max(ye.y,Be.y,rt.y,St.y)}return n.emplaceBack(e.x,e.y,e.z,i.x,i.y,Y,R,ne,z,v,a,d,m),n.length-1}function vg(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function Qh(n,e,i,a){const d=n.compareText;if(e in d){const m=d[e];for(let g=m.length-1;g>=0;g--)if(a.dist(m[g])<i)return!0}else d[e]=[];return d[e].push(a),!1}function bg(n,e){const i=n.fovAboveCenter,a=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,d=(n._camera.position[2]*n.worldSize-a)/Math.cos(n._pitch),m=Math.sin(i)*d/Math.sin(Math.max(Math.PI/2-n._pitch-i,.01)),g=Math.sin(n._pitch)*m+d;return Math.min(1.01*g,d*(1/n._horizonShift))}function Au(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const i=Math.pow(2,-n.z),a=n.x*i,d=(n.x+1)*i,m=n.y*i,g=(n.y+1)*i,v=ol(a),w=ol(d),E=Us(m),R=Us(g),z=e.project(v,E),Y=e.project(w,E),ne=e.project(w,R),ae=e.project(v,R);let ye=Math.min(z.x,Y.x,ne.x,ae.x),Be=Math.min(z.y,Y.y,ne.y,ae.y),rt=Math.max(z.x,Y.x,ne.x,ae.x),St=Math.max(z.y,Y.y,ne.y,ae.y);const ot=i/16;function Dt(Lt,gn,un,Rn,Kn,vn){const Vn=(un+Kn)/2,Un=(Rn+vn)/2,Zn=e.project(ol(Vn),Us(Un)),ei=Math.max(0,ye-Zn.x,Be-Zn.y,Zn.x-rt,Zn.y-St);ye=Math.min(ye,Zn.x),rt=Math.max(rt,Zn.x),Be=Math.min(Be,Zn.y),St=Math.max(St,Zn.y),ei>ot&&(Dt(Lt,Zn,un,Rn,Vn,Un),Dt(Zn,gn,Vn,Un,Kn,vn))}Dt(z,Y,a,m,d,m),Dt(Y,ne,d,m,d,g),Dt(ne,ae,d,g,a,g),Dt(ae,z,a,g,a,m),ye-=ot,Be-=ot,rt+=ot,St+=ot;const Bt=1/Math.max(rt-ye,St-Be);return{scale:Bt,x:ye*Bt,y:Be*Bt,x2:rt*Bt,y2:St*Bt,projection:e}}const xf=Cl(new Float32Array(16));class Xc{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,i){return{x:0,y:0,z:0}}unproject(e,i){return new qr(0,0)}projectTilePoint(e,i,a){return{x:e,y:i,z:0}}locationPoint(e,i,a=!0){return e._coordinatePoint(e.locationCoordinate(i),a)}pixelsPerMeter(e,i){return rl(1,e)*i}pixelSpaceConversion(e,i,a){return 1}farthestPixelDistance(e){return bg(e,e.pixelsPerMeter)}pointCoordinate(e,i,a,d){const m=e.horizonLineFromTop(!1),g=new Ae(i,Math.max(m,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(g,d))}pointCoordinate3D(e,i,a){const d=new Ae(i,a);if(e.elevation)return e.elevation.pointCoordinate(d);{const m=this.pointCoordinate(e,d.x,d.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(e,i){if(e.elevation)return!this.pointCoordinate3D(e,i.x,i.y);const a=e.horizonLineFromTop();return i.y<a}createInversionMatrix(e,i){return xf}createTileMatrix(e,i,a){let d,m,g;const v=a.canonical,w=Cl(new Float64Array(16));if(this.isReprojectedInTileSpace){const E=Au(v,this);d=1,m=E.x+a.wrap*E.scale,g=E.y,fu(w,w,[d/E.scale,d/E.scale,e.pixelsPerMeter/i])}else d=i/e.zoomScale(v.z),m=(v.x+Math.pow(2,v.z)*a.wrap)*d,g=v.y*d;return pu(w,w,[m,g,0]),fu(w,w,[d/ki,d/ki,1]),w}upVector(e,i,a){return[0,0,1]}upVectorScale(e,i,a){return{metersToTile:1}}}class ac extends Xc{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[i,a]=this.parallels=e.parallels||[29.5,45.5],d=Math.sin(mt(i));this.n=(d+Math.sin(mt(a)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(e,i){const{n:a,c:d,r0:m}=this,g=mt(e-this.center[0]),v=mt(i),w=Math.sqrt(d-2*a*Math.sin(v))/a;return{x:w*Math.sin(g*a),y:w*Math.cos(g*a)-m,z:0}}unproject(e,i){const{n:a,c:d,r0:m}=this,g=m+i;let v=Math.atan2(e,Math.abs(g))*Math.sign(g);g*a<0&&(v-=Math.PI*Math.sign(e)*Math.sign(g));const w=mt(this.center[0])*a;v=ii(v,-Math.PI-w,Math.PI-w);const E=_n(Je(v/a)+this.center[0],-180,180),R=Math.asin(_n((d-(e*e+g*g)*a*a)/(2*a),-1,1)),z=_n(Je(R),-Er,Er);return new qr(E,z)}}const Dc=1.340264,js=-.081106,Zl=893e-6,Jc=.003796,Ha=Math.sqrt(3)/2;class wf extends Xc{project(e,i){i=i/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(Ha*Math.sin(i)),d=a*a,m=d*d*d;return{x:.5*(e*Math.cos(a)/(Ha*(Dc+3*js*d+m*(7*Zl+9*Jc*d)))/Math.PI+.5),y:1-.5*(a*(Dc+js*d+m*(Zl+Jc*d))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let a=i=(2*(1-i)-1)*Math.PI,d=a*a,m=d*d*d;for(let R,z,Y,ne=0;ne<12&&(z=a*(Dc+js*d+m*(Zl+Jc*d))-i,Y=Dc+3*js*d+m*(7*Zl+9*Jc*d),R=z/Y,a=_n(a-R,-Math.PI/3,Math.PI/3),d=a*a,m=d*d*d,!(Math.abs(R)<1e-12));++ne);const g=Ha*e*(Dc+3*js*d+m*(7*Zl+9*Jc*d))/Math.cos(a),v=Math.asin(Math.sin(a)/Ha),w=_n(180*g/Math.PI,-180,180),E=_n(180*v/Math.PI,-Er,Er);return new qr(w,E)}}class md extends Xc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){return{x:.5+e/360,y:.5-i/360,z:0}}unproject(e,i){const a=360*(e-.5),d=_n(360*(.5-i),-Er,Er);return new qr(a,d)}}const Wl=Math.PI/2;function Mc(n){return Math.tan((Wl+n)/2)}class gd extends Xc{constructor(e){super(e),this.center=e.center||[0,30];const[i,a]=this.parallels=e.parallels||[30,30];let d=mt(i),m=mt(a);this.southernCenter=d+m<0,this.southernCenter&&(d=-d,m=-m);const g=Math.cos(d),v=Mc(d);this.n=d===m?Math.sin(d):Math.log(g/Math.cos(m))/Math.log(Mc(m)/v),this.f=g*Math.pow(Mc(d),this.n)/this.n}project(e,i){i=mt(i),this.southernCenter&&(i=-i),e=mt(e-this.center[0]);const a=1e-6,{n:d,f:m}=this;m>0?i<-Wl+a&&(i=-Wl+a):i>Wl-a&&(i=Wl-a);const g=m/Math.pow(Mc(i),d);let v=g*Math.sin(d*e),w=m-g*Math.cos(d*e);return v=.5*(v/Math.PI+.5),w=.5*(w/Math.PI+.5),{x:v,y:this.southernCenter?w:1-w,z:0}}unproject(e,i){e=(2*e-.5)*Math.PI,this.southernCenter&&(i=1-i),i=(2*(1-i)-.5)*Math.PI;const{n:a,f:d}=this,m=d-i,g=Math.sign(m),v=Math.sign(a)*Math.sqrt(e*e+m*m);let w=Math.atan2(e,Math.abs(m))*g;m*a<0&&(w-=Math.PI*Math.sign(e)*g);const E=_n(Je(w/a)+this.center[0],-180,180),R=_n(Je(2*Math.atan(Math.pow(d/v,1/a))-Wl),-Er,Er);return new qr(E,this.southernCenter?-R:R)}}class Su extends Xc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,i){return{x:ic(e),y:Vl(i),z:0}}unproject(e,i){const a=ol(e),d=Us(i);return new qr(a,d)}}const Iu=mt(Er);class _d extends Xc{project(e,i){const a=(i=mt(i))*i,d=a*a;return{x:.5*((e=mt(e))*(.8707-.131979*a+d*(d*(.003971*a-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+a*(.015085+d*(.028874*a-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let a=i=(2*(1-i)-1)*Math.PI,d=25,m=0,g=a*a;do{g=a*a;const E=g*g;m=(a*(1.007226+g*(.015085+E*(.028874*g-.044475-.005916*E)))-i)/(1.007226+g*(.045255+E*(.259866*g-.311325-.005916*11*E))),a=_n(a-m,-Iu,Iu)}while(Math.abs(m)>1e-6&&--d>0);g=a*a;const v=_n(Je(e/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),w=Je(a);return new qr(v,w)}}const Pu=mt(Er);class yd extends Xc{project(e,i){i=mt(i),e=mt(e);const a=Math.cos(i),d=2/Math.PI,m=Math.acos(a*Math.cos(e/2)),g=Math.sin(m)/m,v=.5*(e*d+2*a*Math.sin(e/2)/g)||0,w=.5*(i+Math.sin(i)/g)||0;return{x:.5*(v/Math.PI+.5),y:1-.5*(w/Math.PI+1),z:0}}unproject(e,i){let a=e=(2*e-.5)*Math.PI,d=i=(2*(1-i)-1)*Math.PI,m=25;const g=1e-6;let v=0,w=0;do{const E=Math.cos(d),R=Math.sin(d),z=2*R*E,Y=R*R,ne=E*E,ae=Math.cos(a/2),ye=Math.sin(a/2),Be=2*ae*ye,rt=ye*ye,St=1-ne*ae*ae,ot=St?1/St:0,Dt=St?Math.acos(E*ae)*Math.sqrt(1/St):0,Bt=.5*(2*Dt*E*ye+2*a/Math.PI)-e,Lt=.5*(Dt*R+d)-i,gn=.5*ot*(ne*rt+Dt*E*ae*Y)+1/Math.PI,un=ot*(Be*z/4-Dt*R*ye),Rn=.125*ot*(z*ye-Dt*R*ne*Be),Kn=.5*ot*(Y*ae+Dt*rt*E)+.5,vn=un*Rn-Kn*gn;v=(Lt*un-Bt*Kn)/vn,w=(Bt*Rn-Lt*gn)/vn,a=_n(a-v,-Math.PI,Math.PI),d=_n(d-w,-Pu,Pu)}while((Math.abs(v)>g||Math.abs(w)>g)&&--m>0);return new qr(Je(a),Je(d))}}class Cf extends Xc{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(mt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){const{scale:a,cosPhi:d}=this;return{x:mt(e)*d*a+.5,y:-Math.sin(mt(i))/d*a+.5,z:0}}unproject(e,i){const{scale:a,cosPhi:d}=this,m=-(i-.5)/a,g=_n(Je((e-.5)/a)/d,-180,180),v=Math.asin(_n(m*d,-1,1)),w=_n(Je(v),-Er,Er);return new qr(g,w)}}class xg extends Su{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,i,a){const d=zc(e,i,a);return Uo(d,d,qu(nc(a))),{x:d[0],y:d[1],z:d[2]}}locationPoint(e,i){const a=Wu(i.lat,i.lng),d=ia([],a),m=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(i),e._centerAltitude):e._centerAltitude;Bc(a,a,d,rl(1,0)*ki*m);const g=Cl(new Float64Array(16));return Fc(g,e.pixelMatrix,e.globeMatrix),Uo(a,a,g),new Ae(a[0],a[1])}pixelsPerMeter(e,i){return rl(1,0)*i}pixelSpaceConversion(e,i,a){const d=rl(1,e)*i,m=Yi(rl(1,45)*i,d,a);return this.pixelsPerMeter(e,i)/m}createTileMatrix(e,i,a){const d=hh(nc(a.canonical));return Fc(new Float64Array(16),e.globeMatrix,d)}createInversionMatrix(e,i){const{center:a}=e,d=qu(nc(i));return Sd(d,d,mt(a.lng)),Ep(d,d,mt(a.lat)),fu(d,d,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(e,i,a,d){return bu(e,i,a,!0)||new Ku(0,0)}pointCoordinate3D(e,i,a){const d=this.pointCoordinate(e,i,a,0);return[d.x,d.y,d.z]}isPointAboveHorizon(e,i){return!bu(e,i.x,i.y,!1)}farthestPixelDistance(e){const i=function(d,m){const g=d.cameraToCenterDistance,v=d._centerAltitude*m,w=d._camera,E=d._camera.forward(),R=vc([],il([],E,-g),[0,0,v]),z=d.worldSize/(2*Math.PI),Y=[0,0,-z],ne=d.width/d.height,ae=Math.tan(d.fovAboveCenter),ye=il([],w.up(),ae),Be=il([],w.right(),ae*ne),rt=ia([],vc([],vc([],E,ye),Be)),St=[];let ot;if(new Ap(R,rt).closestPointOnSphere(Y,z,St)){const Dt=vc([],St,Y),Bt=Nl([],Dt,R);ot=Math.cos(d.fovAboveCenter)*oh(Bt)}else{const Dt=Nl([],R,Y),Bt=Nl([],Y,R);ia(Bt,Bt);const Lt=oh(Dt)-z;ot=Math.sqrt(Lt*(Lt+2*z));const gn=Math.acos(ot/(z+Lt))-Math.acos(yl(E,Bt));ot*=Math.cos(gn)}return 1.01*ot}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),a=kd(e.zoom);if(a>0){const d=bg(e,rl(1,e.center.lat)*e.worldSize),m=e.worldSize/(2*Math.PI),g=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Yi(i,d+m*(1-Math.cos(g)),Math.pow(a,10))}return i}upVector(e,i,a){return zc(i,a,e,1)}upVectorScale(e){return{metersToTile:Ml(Tl(nc(e)))}}}function Ef(n){const e=n.parallels,i=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new Su(n);case"equirectangular":return new md(n);case"naturalEarth":return new _d(n);case"equalEarth":return new wf(n);case"winkelTripel":return new yd(n);case"albers":return i?new Cf(n):new ac(n);case"lambertConformalConic":return i?new Cf(n):new gd(n);case"globe":return new xg(n)}throw new Error(`Invalid projection name: ${n.name}`)}const wg=Rh.types,Cg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yd(n,e,i,a,d,m,g,v,w,E,R,z,Y){const ne=v?Math.min(Ec,Math.round(v[0])):0,ae=v?Math.min(Ec,Math.round(v[1])):0;n.emplaceBack(e,i,Math.round(32*a),Math.round(32*d),m,g,(ne<<1)+(w?1:0),ae,16*E,16*R,256*z,256*Y)}function qd(n,e,i,a,d,m,g){n.emplaceBack(e,i,a,d,m,g)}function Kd(n,e,i,a,d){n.emplaceBack(e,i,a,d),n.emplaceBack(e,i,a,d),n.emplaceBack(e,i,a,d),n.emplaceBack(e,i,a,d)}function Eg(n){for(const e of n.sections)if(cu(e.text))return!0;return!1}class Df{constructor(e){this.layoutVertexArray=new jn,this.indexArray=new Si,this.programConfigurations=e,this.segments=new Jo,this.dynamicLayoutVertexArray=new qn,this.opacityVertexArray=new Pi,this.placedSymbolArray=new Xo,this.globeExtVertexArray=new Qn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,i,a,d){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Gy.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Cg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,z_.members,!0)),this.opacityVertexBuffer.itemSize=1),(a||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}gi(Df,"SymbolBuffers");class Mf{constructor(e,i,a){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new a,this.segments=new Jo,this.collisionVertexArray=new hr,this.collisionVertexArrayExt=new lr}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,od.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,tg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}gi(Mf,"CollisionBuffers");class Tc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(g=>g.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cl([]),this.placementViewportMatrix=Cl([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sd(this.zoom,i["text-size"]),this.iconSizeData=sd(this.zoom,i["icon-size"]);const a=this.layers[0].layout,d=a.get("symbol-sort-key"),m=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==d.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(g=>bl[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Df(new Bl(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Df(new Bl(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Ca,this.lineVertexArray=new Ua,this.symbolInstances=new po}calculateGlyphDependencies(e,i,a,d,m){for(let g=0;g<e.length;g++)if(i[e.charCodeAt(g)]=!0,d&&m){const v=qc[e.charAt(g)];v&&(i[v.charCodeAt(0)]=!0)}}populate(e,i,a,d){const m=this.layers[0],g=m.layout,v="globe"===this.projection.name,w=g.get("text-font"),E=g.get("text-field"),R=g.get("icon-image"),z=("constant"!==E.value.kind||E.value.value instanceof ao&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),Y="constant"!==R.value.kind||!!R.value.value||Object.keys(R.parameters).length>0,ne=g.get("symbol-sort-key");if(this.features=[],!z&&!Y)return;const ae=i.iconDependencies,ye=i.glyphDependencies,Be=i.availableImages,rt=new B(this.zoom);for(const{feature:St,id:ot,index:Dt,sourceLayerIndex:Bt}of e){const Lt=m._featureFilter.needGeometry,gn=Xu(St,Lt);if(!m._featureFilter.filter(rt,gn,a))continue;if(Lt||(gn.geometry=Uc(St,a,d)),v&&1!==St.type&&a.z<=5){const vn=gn.geometry,Vn=.98078528056,Un=(Zn,ei)=>yl(zc(Zn.x,Zn.y,a,1),zc(ei.x,ei.y,a,1))<Vn;for(let Zn=0;Zn<vn.length;Zn++)vn[Zn]=c_(vn[Zn],Un)}let un,Rn;if(z){const vn=m.getValueAndResolveTokens("text-field",gn,a,Be),Vn=ao.factory(vn);Eg(Vn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===b()||this.hasRTLText&&A.isParsed())&&(un=Qp(Vn,m,gn))}if(Y){const vn=m.getValueAndResolveTokens("icon-image",gn,a,Be);Rn=vn instanceof Ar?vn:Ar.fromString(vn)}if(!un&&!Rn)continue;const Kn=this.sortFeaturesByKey?ne.evaluate(gn,{},a):void 0;if(this.features.push({id:ot,text:un,icon:Rn,index:Dt,sourceLayerIndex:Bt,geometry:gn.geometry,properties:St.properties,type:wg[St.type],sortKey:Kn}),Rn&&(ae[Rn.name]=!0),un){const vn=w.evaluate(gn,{},a).join(","),Vn="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bl.vertical)>=0;for(const Un of un.sections)if(Un.image)ae[Un.image.name]=!0;else{const Zn=Ko(un.toString()),ei=Un.fontStack||vn,Pn=ye[ei]=ye[ei]||{};this.calculateGlyphDependencies(Un.text,Pn,Vn,this.allowVerticalPlacement,Zn)}}}"line"===g.get("symbol-placement")&&(this.features=function(St){const ot={},Dt={},Bt=[];let Lt=0;function gn(vn){Bt.push(St[vn]),Lt++}function un(vn,Vn,Un){const Zn=Dt[vn];return delete Dt[vn],Dt[Vn]=Zn,Bt[Zn].geometry[0].pop(),Bt[Zn].geometry[0]=Bt[Zn].geometry[0].concat(Un[0]),Zn}function Rn(vn,Vn,Un){const Zn=ot[Vn];return delete ot[Vn],ot[vn]=Zn,Bt[Zn].geometry[0].shift(),Bt[Zn].geometry[0]=Un[0].concat(Bt[Zn].geometry[0]),Zn}function Kn(vn,Vn,Un){const Zn=Un?Vn[0][Vn[0].length-1]:Vn[0][0];return`${vn}:${Zn.x}:${Zn.y}`}for(let vn=0;vn<St.length;vn++){const Vn=St[vn],Un=Vn.geometry,Zn=Vn.text?Vn.text.toString():null;if(!Zn){gn(vn);continue}const ei=Kn(Zn,Un),Pn=Kn(Zn,Un,!0);if(ei in Dt&&Pn in ot&&Dt[ei]!==ot[Pn]){const ci=Rn(ei,Pn,Un),bi=un(ei,Pn,Bt[ci].geometry);delete ot[ei],delete Dt[Pn],Dt[Kn(Zn,Bt[bi].geometry,!0)]=bi,Bt[ci].geometry=null}else ei in Dt?un(ei,Pn,Un):Pn in ot?Rn(ei,Pn,Un):(gn(vn),ot[ei]=Lt-1,Dt[Pn]=Lt-1)}return Bt.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((St,ot)=>St.sortKey-ot.sortKey)}update(e,i,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,a,d),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,a,d))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Ef(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,i){const a=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:d,y:m}of i)this.lineVertexArray.emplaceBack(d,m);return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,i,a,d,m,g,v,w,E,R,z,Y,ne,ae){const ye=e.indexArray,Be=e.layoutVertexArray,rt=e.globeExtVertexArray,St=e.segments.prepareSegment(4*i.length,Be,ye,this.canOverlap?g.sortKey:void 0),ot=this.glyphOffsetArray.length,Dt=St.vertexLength,Bt=this.allowVerticalPlacement&&v===bl.vertical?Math.PI/2:0,Lt=g.text&&g.text.sections;for(let un=0;un<i.length;un++){const{tl:Rn,tr:Kn,bl:vn,br:Vn,tex:Un,pixelOffsetTL:Zn,pixelOffsetBR:ei,minFontScaleX:Pn,minFontScaleY:ci,glyphOffset:bi,isSDF:pi,sectionIndex:Ji}=i[un],oi=St.vertexLength,Oi=bi[1];if(Yd(Be,E.x,E.y,Rn.x,Oi+Rn.y,Un.x,Un.y,a,pi,Zn.x,Zn.y,Pn,ci),Yd(Be,E.x,E.y,Kn.x,Oi+Kn.y,Un.x+Un.w,Un.y,a,pi,ei.x,Zn.y,Pn,ci),Yd(Be,E.x,E.y,vn.x,Oi+vn.y,Un.x,Un.y+Un.h,a,pi,Zn.x,ei.y,Pn,ci),Yd(Be,E.x,E.y,Vn.x,Oi+Vn.y,Un.x+Un.w,Un.y+Un.h,a,pi,ei.x,ei.y,Pn,ci),w){const{x:Qi,y:Dr,z:er}=w.anchor,[ji,fo,tr]=w.up;qd(rt,Qi,Dr,er,ji,fo,tr),qd(rt,Qi,Dr,er,ji,fo,tr),qd(rt,Qi,Dr,er,ji,fo,tr),qd(rt,Qi,Dr,er,ji,fo,tr),Kd(e.dynamicLayoutVertexArray,Qi,Dr,er,Bt)}else Kd(e.dynamicLayoutVertexArray,E.x,E.y,E.z,Bt);ye.emplaceBack(oi,oi+1,oi+2),ye.emplaceBack(oi+1,oi+2,oi+3),St.vertexLength+=4,St.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bi[0]),un!==i.length-1&&Ji===i[un+1].sectionIndex||e.programConfigurations.populatePaintArrays(Be.length,g,g.index,{},ne,ae,Lt&&Lt[Ji])}const gn=w?w.anchor:E;e.placedSymbolArray.emplaceBack(gn.x,gn.y,gn.z,E.x,E.y,ot,this.glyphOffsetArray.length-ot,Dt,R,z,E.segment,a?a[0]:0,a?a[1]:0,d[0],d[1],v,0,!1,0,Y,0)}_commitLayoutVertex(e,i,a,d,m,g,v){e.emplaceBack(i,a,d,m,g,Math.round(v.x),Math.round(v.y))}_addCollisionDebugVertices(e,i,a,d,m,g,v){const w=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),E=w.vertexLength,R=v.tileAnchorX,z=v.tileAnchorY;for(let ne=0;ne<4;ne++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(i,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(i,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(i,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(i,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,d,m,g,R,z,new Ae(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,d,m,g,R,z,new Ae(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,d,m,g,R,z,new Ae(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,d,m,g,R,z,new Ae(e.x1,e.y2)),w.vertexLength+=4;const Y=a.indexArray;Y.emplaceBack(E,E+1),Y.emplaceBack(E+1,E+2),Y.emplaceBack(E+2,E+3),Y.emplaceBack(E+3,E),w.primitiveLength+=4}_addTextDebugCollisionBoxes(e,i,a,d,m,g){for(let v=d;v<m;v++){const w=a.get(v),E=this.getSymbolInstanceTextSize(e,g,i,v);this._addCollisionDebugVertices(w,E,this.textCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(e,i,a,d,m,g){for(let v=d;v<m;v++){const w=a.get(v),E=this.getSymbolInstanceIconSize(e,i,g.placedIconSymbolIndex);this._addCollisionDebugVertices(w,E,this.iconCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,g)}}generateCollisionDebugBuffers(e,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Mf(Ci,ng.members,ta),this.iconCollisionBox=new Mf(Ci,ng.members,ta);const a=Yc(this.iconSizeData,e),d=Yc(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(d,e,i,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(d,e,i,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(a,e,i,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(a,e,i,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(e,i,a,d){const m=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:d),g=wc(this.textSizeData,e,m)/ra;return this.tilePixelRatio*g}getSymbolInstanceIconSize(e,i,a){const d=this.icon.placedSymbolArray.get(a),m=wc(this.iconSizeData,e,d);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(e,i,a){e.emplaceBack(i,-a,-a),e.emplaceBack(i,a,-a),e.emplaceBack(i,a,a),e.emplaceBack(i,-a,a)}_updateTextDebugCollisionBoxes(e,i,a,d,m,g){for(let v=d;v<m;v++){const w=a.get(v),E=this.getSymbolInstanceTextSize(e,g,i,v);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,E,w.padding)}}_updateIconDebugCollisionBoxes(e,i,a,d,m,g){for(let v=d;v<m;v++){const w=a.get(v),E=this.getSymbolInstanceIconSize(e,i,g);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,w.padding)}}updateCollisionDebugBuffers(e,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=Yc(this.iconSizeData,e),d=Yc(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(d,e,i,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(d,e,i,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(a,e,i,g.iconBoxStartIndex,g.iconBoxEndIndex,g.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(a,e,i,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,i,a,d,m,g,v,w,E){const R={};if(i<a){const{x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt,featureIndex:Bt}=e.get(i);R.textBox={x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt},R.textFeatureIndex=Bt}if(d<m){const{x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt,featureIndex:Bt}=e.get(d);R.verticalTextBox={x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt},R.verticalTextFeatureIndex=Bt}if(g<v){const{x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt,featureIndex:Bt}=e.get(g);R.iconBox={x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt},R.iconFeatureIndex=Bt}if(w<E){const{x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt,featureIndex:Bt}=e.get(w);R.verticalIconBox={x1:z,y1:Y,x2:ne,y2:ae,padding:ye,projectedAnchorX:Be,projectedAnchorY:rt,projectedAnchorZ:St,tileAnchorX:ot,tileAnchorY:Dt},R.verticalIconFeatureIndex=Bt}return R}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,i){const a=e.placedSymbolArray.get(i),d=a.vertexStartIndex+4*a.numGlyphs;for(let m=a.vertexStartIndex;m<d;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const i=Math.sin(e),a=Math.cos(e),d=[],m=[],g=[];for(let v=0;v<this.symbolInstances.length;++v){g.push(v);const w=this.symbolInstances.get(v);d.push(0|Math.round(i*w.tileAnchorX+a*w.tileAnchorY)),m.push(w.featureIndex)}return g.sort((v,w)=>d[v]-d[w]||m[w]-m[v]),g}addToSortKeyRanges(e,i){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===i?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:v,placedIconSymbolIndex:w,verticalPlacedIconSymbolIndex:E}=a;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&this.addIndicesForPlacedSymbol(this.text,m),g>=0&&g!==m&&g!==d&&this.addIndicesForPlacedSymbol(this.text,g),v>=0&&this.addIndicesForPlacedSymbol(this.text,v),w>=0&&this.addIndicesForPlacedSymbol(this.icon,w),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}gi(Tc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Tc.MAX_GLYPHS=65535,Tc.addDynamicAttributes=Kd;const ey=new dt({"symbol-placement":new fe(wn.layout_symbol["symbol-placement"]),"symbol-spacing":new fe(wn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fe(wn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ze(wn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fe(wn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fe(wn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fe(wn.layout_symbol["icon-ignore-placement"]),"icon-optional":new fe(wn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fe(wn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ze(wn.layout_symbol["icon-size"]),"icon-text-fit":new fe(wn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fe(wn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ze(wn.layout_symbol["icon-image"]),"icon-rotate":new Ze(wn.layout_symbol["icon-rotate"]),"icon-padding":new fe(wn.layout_symbol["icon-padding"]),"icon-keep-upright":new fe(wn.layout_symbol["icon-keep-upright"]),"icon-offset":new Ze(wn.layout_symbol["icon-offset"]),"icon-anchor":new Ze(wn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fe(wn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fe(wn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fe(wn.layout_symbol["text-rotation-alignment"]),"text-field":new Ze(wn.layout_symbol["text-field"]),"text-font":new Ze(wn.layout_symbol["text-font"]),"text-size":new Ze(wn.layout_symbol["text-size"]),"text-max-width":new Ze(wn.layout_symbol["text-max-width"]),"text-line-height":new Ze(wn.layout_symbol["text-line-height"]),"text-letter-spacing":new Ze(wn.layout_symbol["text-letter-spacing"]),"text-justify":new Ze(wn.layout_symbol["text-justify"]),"text-radial-offset":new Ze(wn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fe(wn.layout_symbol["text-variable-anchor"]),"text-anchor":new Ze(wn.layout_symbol["text-anchor"]),"text-max-angle":new fe(wn.layout_symbol["text-max-angle"]),"text-writing-mode":new fe(wn.layout_symbol["text-writing-mode"]),"text-rotate":new Ze(wn.layout_symbol["text-rotate"]),"text-padding":new fe(wn.layout_symbol["text-padding"]),"text-keep-upright":new fe(wn.layout_symbol["text-keep-upright"]),"text-transform":new Ze(wn.layout_symbol["text-transform"]),"text-offset":new Ze(wn.layout_symbol["text-offset"]),"text-allow-overlap":new fe(wn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fe(wn.layout_symbol["text-ignore-placement"]),"text-optional":new fe(wn.layout_symbol["text-optional"])});var ep={paint:new dt({"icon-opacity":new Ze(wn.paint_symbol["icon-opacity"]),"icon-color":new Ze(wn.paint_symbol["icon-color"]),"icon-halo-color":new Ze(wn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ze(wn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ze(wn.paint_symbol["icon-halo-blur"]),"icon-translate":new fe(wn.paint_symbol["icon-translate"]),"icon-translate-anchor":new fe(wn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ze(wn.paint_symbol["text-opacity"]),"text-color":new Ze(wn.paint_symbol["text-color"],{runtimeType:yi,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new Ze(wn.paint_symbol["text-halo-color"]),"text-halo-width":new Ze(wn.paint_symbol["text-halo-width"]),"text-halo-blur":new Ze(wn.paint_symbol["text-halo-blur"]),"text-translate":new fe(wn.paint_symbol["text-translate"]),"text-translate-anchor":new fe(wn.paint_symbol["text-translate-anchor"])}),layout:ey};class tp{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:mi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}gi(tp,"FormatSectionOverride",{omit:["defaultValue"]});class vd extends _l{constructor(e){super(e,ep)}recalculate(e,i){super.recalculate(e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const d=[];for(const m of a)d.indexOf(m)<0&&d.push(m);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,i,a,d){const m=this.layout.get(e).evaluate(i,{},a,d),g=this._unevaluatedLayout._values[e];return g.isDataDriven()||on(g.value)||!m?m:(v=i.properties,m.replace(/{([^{}]+)}/g,(E,R)=>R in v?String(v[R]):""));var v}createBucket(e){return new Tc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of ep.paint.overridableProperties){if(!vd.hasPaintOverride(this.layout,e))continue;const i=this.paint.get(e),a=new tp(i),d=new Tt(a,i.property.specification);let m=null;m="constant"===i.value.kind||"source"===i.value.kind?new si("source",d):new di("composite",d,i.value.zoomStops,i.value._interpolationType),this.paint._values[e]=new qe(i.property,m,i.parameters)}}_handleOverridablePaintPropertyUpdate(e,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven())&&vd.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,i){const a=e.get("text-field"),d=ep.paint.properties[i];let m=!1;const g=v=>{for(const w of v)if(d.overrides&&d.overrides.hasOverride(w))return void(m=!0)};if("constant"===a.value.kind&&a.value.value instanceof ao)g(a.value.value.sections);else if("source"===a.value.kind){const v=E=>{m||(E instanceof $o&&Sr(E.value)===Ao?g(E.value.sections):E instanceof Zo?g(E.sections):E.eachChild(v))},w=a.value;w._styleExpression&&v(w._styleExpression.expression)}return m}getProgramConfiguration(e){return new kc(this,e)}}var ty={paint:new dt({"background-color":new fe(wn.paint_background["background-color"]),"background-pattern":new fe(wn.paint_background["background-pattern"]),"background-opacity":new fe(wn.paint_background["background-opacity"])})},np={paint:new dt({"raster-opacity":new fe(wn.paint_raster["raster-opacity"]),"raster-hue-rotate":new fe(wn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fe(wn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fe(wn.paint_raster["raster-brightness-max"]),"raster-saturation":new fe(wn.paint_raster["raster-saturation"]),"raster-contrast":new fe(wn.paint_raster["raster-contrast"]),"raster-resampling":new fe(wn.paint_raster["raster-resampling"]),"raster-fade-duration":new fe(wn.paint_raster["raster-fade-duration"])})};class ip extends _l{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Tf={paint:new dt({"sky-type":new fe(wn.paint_sky["sky-type"]),"sky-atmosphere-sun":new fe(wn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new fe(wn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new fe(wn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new fe(wn.paint_sky["sky-gradient-radius"]),"sky-gradient":new ut(wn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new fe(wn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new fe(wn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new fe(wn.paint_sky["sky-opacity"])})};function Af(n,e,i){const a=[0,0,1],d=Pd([]);return gu(d,d,i?-mt(n)+Math.PI:mt(n)),lh(d,d,-mt(e)),ah(a,a,d),ia(a,a)}const rp={circle:class extends _l{constructor(n){super(n,h_)}createBucket(n){return new gh(n)}queryRadius(n){const e=n;return Cu("circle-radius",this,e)+Cu("circle-stroke-width",this,e)+rc(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,i,a,d,m,g,v){const w=bh(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,n.pixelToTileUnitsFactor),E=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i);return wh(n,a,m,g,v,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),w,E)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new kc(this,n)}},heatmap:class extends _l{createBucket(n){return new Om(n)}constructor(n){super(n,p_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"heatmap-color"===n&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Fd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Cu("heatmap-radius",this,n)}queryIntersectsFeature(n,e,i,a,d,m,g,v){const w=this.paint.get("heatmap-radius").evaluate(e,i);return wh(n,a,m,g,v,!0,!0,new Ae(0,0),w)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new kc(this,n)}},hillshade:class extends _l{constructor(n){super(n,f_)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends _l{constructor(n){super(n,w_)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),i=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(n){return new kc(this,n)}recalculate(n,e){super.recalculate(n,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Oh(n)}queryRadius(){return rc(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,i,a,d,m){return!n.queryGeometry.isAboveHorizon&&Tm(Im(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,n.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends _l{constructor(n){super(n,O_)}createBucket(n){return new rd(n)}queryRadius(){return rc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new kc(this,n)}queryIntersectsFeature(n,e,i,a,d,m,g,v,w){const E=bh(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,n.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(e,i),z=this.paint.get("fill-extrusion-base").evaluate(e,i),Y=[0,0],ne=v&&m.elevation,ae=m.elevation?m.elevation.exaggeration():1,ye=n.tile.getBucket(this);if(ne&&ye instanceof rd){const Dt=ye.centroidVertexArray,Bt=w+1;Bt<Dt.length&&(Y[0]=Dt.geta_centroid_pos0(Bt),Y[1]=Dt.geta_centroid_pos1(Bt))}if(0===Y[0]&&1===Y[1])return!1;"globe"===m.projection.name&&(a=P_([a],[new Ae(0,0),new Ae(ki,ki)],n.tileID.canonical).map(Dt=>Dt.polygon).flat());const Be=ne?v:null,[rt,St]=(Bt=a,Lt=z,gn=R,un=E,Rn=g,Kn=Be,vn=Y,Vn=ae,Un=m.center.lat,"globe"===(Dt=m).projection.name?function(ei,Pn,ci,bi,pi,Ji,oi,Oi,Qi,Dr,er){const ji=[],fo=[],tr=ei.projection.upVectorScale(er,ei.center.lat,ei.worldSize).metersToTile,nr=[0,0,0,1],Kr=[0,0,0,1],io=(Xr,Po,jo,os)=>{Xr[0]=Po,Xr[1]=jo,Xr[2]=os,Xr[3]=1},ro=I_();ci>0&&(ci+=ro),bi+=ro;for(const Xr of Pn){const Po=[],jo=[];for(const os of Xr){const $r=os.x+pi.x,gs=os.y+pi.y,ss=ei.projection.projectTilePoint($r,gs,er),Oo=ei.projection.upVector(er,os.x,os.y);let Mr=ci,as=bi;if(oi){const Jr=Kp($r,gs,ci,bi,oi,Oi,Qi,Dr);Mr+=Jr.base,as+=Jr.top}0!==ci?io(nr,ss.x+Oo[0]*tr*Mr,ss.y+Oo[1]*tr*Mr,ss.z+Oo[2]*tr*Mr):io(nr,ss.x,ss.y,ss.z),io(Kr,ss.x+Oo[0]*tr*as,ss.y+Oo[1]*tr*as,ss.z+Oo[2]*tr*as),Uo(nr,nr,Ji),Uo(Kr,Kr,Ji),Po.push(new Du(nr[0],nr[1],nr[2])),jo.push(new Du(Kr[0],Kr[1],Kr[2]))}ji.push(Po),fo.push(jo)}return[ji,fo]}(Dt,Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un,n.tileID.canonical):Kn?function(ei,Pn,ci,bi,pi,Ji,oi,Oi,Qi){const Dr=[],er=[],ji=[0,0,0,1];for(const fo of ei){const tr=[],nr=[];for(const Kr of fo){const io=Kr.x+bi.x,ro=Kr.y+bi.y,Xr=Kp(io,ro,Pn,ci,Ji,oi,Oi,Qi);ji[0]=io,ji[1]=ro,ji[2]=Xr.base,ji[3]=1,Nc(ji,ji,pi),ji[3]=Math.max(ji[3],1e-5);const Po=new Du(ji[0]/ji[3],ji[1]/ji[3],ji[2]/ji[3]);ji[0]=io,ji[1]=ro,ji[2]=Xr.top,ji[3]=1,Nc(ji,ji,pi),ji[3]=Math.max(ji[3],1e-5);const jo=new Du(ji[0]/ji[3],ji[1]/ji[3],ji[2]/ji[3]);tr.push(Po),nr.push(jo)}Dr.push(tr),er.push(nr)}return[Dr,er]}(Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un):function(ei,Pn,ci,bi,pi){const Ji=[],oi=[],Oi=pi[8]*Pn,Qi=pi[9]*Pn,Dr=pi[10]*Pn,er=pi[11]*Pn,ji=pi[8]*ci,fo=pi[9]*ci,tr=pi[10]*ci,nr=pi[11]*ci;for(const Kr of ei){const io=[],ro=[];for(const Xr of Kr){const Po=Xr.x+bi.x,jo=Xr.y+bi.y,os=pi[0]*Po+pi[4]*jo+pi[12],$r=pi[1]*Po+pi[5]*jo+pi[13],gs=pi[2]*Po+pi[6]*jo+pi[14],ss=pi[3]*Po+pi[7]*jo+pi[15],Oo=os+Oi,Mr=$r+Qi,as=gs+Dr,Jr=Math.max(ss+er,1e-5),fa=os+ji,Qo=$r+fo,es=gs+tr,Hs=Math.max(ss+nr,1e-5);io.push(new Du(Oo/Jr,Mr/Jr,as/Jr)),ro.push(new Du(fa/Hs,Qo/Hs,es/Hs))}Ji.push(io),oi.push(ro)}return[Ji,oi]}(Bt,Lt,gn,un,Rn)),ot=n.queryGeometry;var Dt,Bt,Lt,gn,un,Rn,Kn,vn,Vn,Un;return function(Dt,Bt,Lt){let gn=1/0;Tm(Lt,Bt)&&(gn=Jm(Lt,Bt[0]));for(let un=0;un<Bt.length;un++){const Rn=Bt[un],Kn=Dt[un];for(let vn=0;vn<Rn.length-1;vn++){const Vn=Rn[vn],Un=[Vn,Rn[vn+1],Kn[vn+1],Kn[vn],Vn];Vp(Lt,Un)&&(gn=Math.min(gn,Jm(Lt,Un)))}}return gn!==1/0&&gn}(rt,St,ot.isPointQuery()?ot.screenBounds:ot.screenGeometry)}},line:class extends _l{constructor(n){super(n,Xp),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if("line-gradient"===n){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Fo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=Nh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Bh(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new kc(this,n)}queryRadius(n){const e=n,i=N_(Cu("line-width",this,e),Cu("line-gap-width",this,e)),a=Cu("line-offset",this,e);return i/2+Math.abs(a)+rc(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,i,a,d,m){if(n.queryGeometry.isAboveHorizon)return!1;const g=Im(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,n.pixelToTileUnitsFactor),v=n.pixelToTileUnitsFactor/2*N_(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),w=this.paint.get("line-offset").evaluate(e,i);return w&&(a=function(E,R){const z=[],Y=new Ae(0,0);for(let ne=0;ne<E.length;ne++){const ae=E[ne],ye=[];for(let Be=0;Be<ae.length;Be++){const rt=ae[Be],St=ae[Be+1],ot=0===Be?Y:rt.sub(ae[Be-1])._unit()._perp(),Dt=Be===ae.length-1?Y:St.sub(rt)._unit()._perp(),Bt=ot._add(Dt)._unit();Bt._mult(1/(Bt.x*Dt.x+Bt.y*Dt.y)),ye.push(Bt._mult(R)._add(rt))}z.push(ye)}return z}(a,w*n.pixelToTileUnitsFactor)),function(E,R,z){for(let Y=0;Y<R.length;Y++){const ne=R[Y];if(E.length>=3)for(let ae=0;ae<ne.length;ae++)if(wu(E,ne[ae]))return!0;if(u_(E,ne,z))return!0}return!1}(g,a,v)}isTileClipped(){return!0}},symbol:vd,background:class extends _l{constructor(n){super(n,ty)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends _l{constructor(n){super(n,np)}getProgramIds(){return["raster"]}},sky:class extends _l{constructor(n){super(n,Tf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"sky-gradient"===n?this._updateColorRamp():"sky-atmosphere-sun"!==n&&"sky-atmosphere-halo-color"!==n&&"sky-atmosphere-color"!==n&&"sky-atmosphere-sun-intensity"!==n||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Fd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if("atmosphere"===this.paint.get("sky-type")){const a=this.paint.get("sky-atmosphere-sun"),d=!a,m=n.style.light,g=m.properties.get("position");return d&&"viewport"===m.properties.get("anchor")&&Mn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?Af(g.azimuthal,90-g.polar,e):Af(a[0],90-a[1],e)}const i=this.paint.get("sky-gradient-center");return Af(i[0],90-i[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return"atmosphere"===n?["skyboxCapture","skybox"]:"gradient"===n?["skyboxGradient"]:null}}};class Qc{constructor(e,i,a,d){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(i,d)}update(e,i,a){const{width:d,height:m}=e,{context:g}=this,{gl:v}=g,{HTMLImageElement:w,HTMLCanvasElement:E,HTMLVideoElement:R,ImageData:z,ImageBitmap:Y}=P;if(v.bindTexture(v.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===v.RGBA&&(!i||!1!==i.premultiply)),a||this.size&&this.size[0]===d&&this.size[1]===m){const{x:ne,y:ae}=a||{x:0,y:0};e instanceof w||e instanceof E||e instanceof R||e instanceof z||Y&&e instanceof Y?v.texSubImage2D(v.TEXTURE_2D,0,ne,ae,v.RGBA,v.UNSIGNED_BYTE,e):v.texSubImage2D(v.TEXTURE_2D,0,ne,ae,d,m,v.RGBA,v.UNSIGNED_BYTE,e.data)}else this.size=[d,m],e instanceof w||e instanceof E||e instanceof R||e instanceof z||Y&&e instanceof Y?v.texImage2D(v.TEXTURE_2D,0,this.format,this.format,v.UNSIGNED_BYTE,e):v.texImage2D(v.TEXTURE_2D,0,this.format,d,m,0,this.format,v.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(i&&i.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&v.generateMipmap(v.TEXTURE_2D)}bind(e,i){const{context:a}=this,{gl:d}=a;d.bindTexture(d.TEXTURE_2D,this.texture),e!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?e===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:e),this.filter=e),i!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Sf{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Dg{constructor(){this.tasks={},this.taskQueue=[],Ot(["process"],this),this.invoker=new Sf(this.process),this.nextId=0}add(e,i){const a=this.nextId++,d=function({type:m,isSymbolTile:g,zoom:v}){return v=v||0,"message"===m?0:"maybePrepare"!==m||g?"parseTile"!==m||g?"parseTile"===m&&g?300-v:"maybePrepare"===m&&g?400-v:500:200-v:100-v}(i);if(0===d){xt();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:i,priority:d,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){xt();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const i=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}pick(){let e=null,i=1/0;for(let d=0;d<this.taskQueue.length;d++){const m=this.tasks[this.taskQueue[d]];m.priority<i&&(i=m.priority,e=d)}if(null===e)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}class op{constructor(e){this._stringToNumber={},this._numberToString=[];for(let i=0;i<e.length;i++){const a=e[i];this._stringToNumber[a]=i,this._numberToString[i]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Mg=["tile","layer","source","sourceLayer","state"];class If{constructor(e,i,a,d,m){this.type="Feature",this._vectorTileFeature=e,this._z=i,this._x=a,this._y=d,this.properties=e.properties,this.id=m}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const i of Mg)void 0!==this[i]&&(e[i]=this[i]);return e}}const al=32,Sl=33,eu=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,i=0,a=0,d=0,m=0,g=0,v=0;for(1&e?d=m=g=al:i=a=v=al;(e>>=1)>1;){const E=i+d>>1,R=a+m>>1;1&e?(d=i,m=a,i=g,a=v):(i=d,a=m,d=g,m=v),g=E,v=R}const w=4*n;eu[w+0]=i,eu[w+1]=a,eu[w+2]=d,eu[w+3]=m}const Yl=new Uint16Array(2178),Ac=new Uint8Array(1089),Xd=new Uint16Array(1089);function Pf(n){return 0===n?-.03125:32===n?.03125:0}var Tg=Xt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Of={type:2,extent:ki,loadGeometry:()=>[[new Ae(0,0),new Ae(ki+1,0),new Ae(ki+1,ki+1),new Ae(0,ki+1),new Ae(0,0)]]};class sp{constructor(e,i,a,d,m){this.tileID=e,this.uid=ze(),this.uses=0,this.tileSize=i,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(e){const i=e+this.timeAdded;i<gr.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Au(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,i,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,m){const g={};if(!m)return g;for(const v of d){const w=v.layerIds.map(E=>m.getLayer(E)).filter(Boolean);if(0!==w.length){v.layers=w,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(E=>w.filter(R=>R.id===E)[0]));for(const E of w)g[E.id]=v}}return g}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const m=this.buckets[d];if(m instanceof Tc){if(this.hasSymbolBuckets=!0,!a)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const m=this.buckets[d];if(m instanceof Tc&&m.hasRTLText){this.hasRTLText=!0,A.isLoading()||A.isLoaded()||"deferred"!==b()||D();break}}this.queryPadding=0;for(const d in this.buckets){const m=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(d).queryRadius(m))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Yr}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const d=this.buckets[a];d.uploadPending()&&d.upload(e)}const i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qc(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qc(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Qc(e,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,i,a,d,m,g,v,w){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:v,transform:g,params:m,tileTransform:this.tileTransform},e,i,a):{}}querySourceFeatures(e,i){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const d=a.loadVTLayers(),m=i?i.sourceLayer:"",g=d._geojsonTileLayer||d[m];if(!g)return;const v=bo(i&&i.filter),{z:w,x:E,y:R}=this.tileID.canonical,z={z:w,x:E,y:R};for(let Y=0;Y<g.length;Y++){const ne=g.feature(Y);if(v.needGeometry){const Be=Xu(ne,!0);if(!v.filter(new B(this.tileID.overscaledZ),Be,this.tileID.canonical))continue}else if(!v.filter(new B(this.tileID.overscaledZ),ne))continue;const ae=a.getId(ne,m),ye=new If(ne,w,E,R,ae);ye.tile=z,e.push(ye)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const a=zt(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let d=!1;if(this.expirationTime>a)d=!1;else if(i)if(this.expirationTime<i)d=!0;else{const m=this.expirationTime-i;m?this.expirationTime=a+Math.max(m,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!i)return;const a=this.latestFeatureIndex.loadVTLayers(),d=i.style.listImages();for(const m in this.buckets){if(!i.style.hasLayer(m))continue;const g=this.buckets[m],v=g.layers[0].sourceLayer||"_geojsonTileLayer",w=a[v],E=e[v];if(!w||!E||0===Object.keys(E).length)continue;if(g.update(E,w,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),g instanceof Bh||g instanceof Oh){const z=i.style._getSourceCache(g.layers[0].source);i._terrain&&i._terrain.enabled&&z&&g.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(z.id,this.tileID)}const R=i&&i.style&&i.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(g)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<gr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=gr.now()+e}setTexture(e,i){const a=i.context,d=a.gl;this.texture=this.texture||i.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Qc(a,e,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(e,i){const a={};for(const d of i)a[d]=!0;this.dependencies[e]=a}hasDependency(e,i){for(const a of e){const d=this.dependencies[a];if(d)for(const m of i)if(d[m])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,i){if(!i||"mercator"===i.name||this._tileDebugBuffer)return;const a=Uc(Of,this.tileID.canonical,this.tileTransform)[0],d=new Xn,m=new fl;for(let g=0;g<a.length;g++){const{x:v,y:w}=a[g];d.emplaceBack(v,w),m.emplaceBack(g)}m.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(m),this._tileDebugBuffer=e.createVertexBuffer(d,_u.members),this._tileDebugSegments=Jo.simpleSegment(0,0,d.length,m.length)}_makeTileBoundsBuffers(e,i){if(this._tileBoundsBuffer||!i||"mercator"===i.name)return;const a=Uc(Of,this.tileID.canonical,this.tileTransform)[0];let d,m;if(this.isRaster){const g=function(v,w){const E=Au(v,w),R=Math.pow(2,v.z);for(let Be=0;Be<Sl;Be++)for(let rt=0;rt<Sl;rt++){const St=ol((v.x+(rt+Pf(rt))/al)/R),ot=Us((v.y+(Be+Pf(Be))/al)/R),Dt=w.project(St,ot),Bt=Be*Sl+rt;Yl[2*Bt+0]=Math.round((Dt.x*E.scale-E.x)*ki),Yl[2*Bt+1]=Math.round((Dt.y*E.scale-E.y)*ki)}Ac.fill(0),Xd.fill(0);for(let Be=2045;Be>=0;Be--){const rt=4*Be,St=eu[rt+0],ot=eu[rt+1],Dt=eu[rt+2],Bt=eu[rt+3],Lt=St+Dt>>1,gn=ot+Bt>>1,un=Lt+gn-ot,Rn=gn+St-Lt,Kn=ot*Sl+St,vn=Bt*Sl+Dt,Vn=gn*Sl+Lt,Un=Math.hypot((Yl[2*Kn+0]+Yl[2*vn+0])/2-Yl[2*Vn+0],(Yl[2*Kn+1]+Yl[2*vn+1])/2-Yl[2*Vn+1])>=16;Ac[Vn]=Ac[Vn]||(Un?1:0),Be<1022&&(Ac[Vn]=Ac[Vn]||Ac[(ot+Rn>>1)*Sl+(St+un>>1)]||Ac[(Bt+Rn>>1)*Sl+(Dt+un>>1)])}const z=new Nn,Y=new Si;let ne=0;function ae(Be,rt){const St=rt*Sl+Be;return 0===Xd[St]&&(z.emplaceBack(Yl[2*St+0],Yl[2*St+1],Be*ki/al,rt*ki/al),Xd[St]=++ne),Xd[St]-1}function ye(Be,rt,St,ot,Dt,Bt){const Lt=Be+St>>1,gn=rt+ot>>1;if(Math.abs(Be-Dt)+Math.abs(rt-Bt)>1&&Ac[gn*Sl+Lt])ye(Dt,Bt,Be,rt,Lt,gn),ye(St,ot,Dt,Bt,Lt,gn);else{const un=ae(Be,rt),Rn=ae(St,ot),Kn=ae(Dt,Bt);Y.emplaceBack(un,Rn,Kn)}}return ye(0,0,al,al,al,0),ye(al,al,0,0,0,al),{vertices:z,indices:Y}}(this.tileID.canonical,i);d=g.vertices,m=g.indices}else{d=new Nn,m=new Si;for(const{x:v,y:w}of a)d.emplaceBack(v,w,0,0);const g=jl(d.int16,void 0,4);for(let v=0;v<g.length;v+=3)m.emplaceBack(g[v],g[v+1],g[v+2])}this._tileBoundsBuffer=e.createVertexBuffer(d,Tg.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(m),this._tileBoundsSegments=Jo.simpleSegment(0,0,d.length,m.length)}_makeGlobeTileDebugBuffers(e,i){const a=i.projection;if(!a||"globe"!==a.name||i.freezeTileCoverage)return;const d=this.tileID.canonical,m=qu(vm(d,i)),g=kd(i.zoom);let v;g>0&&(v=Ad(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,d,i,m,v,g),this._makeGlobeTileDebugTextBuffer(e,d,i,m,v,g)}_globePoint(e,i,a,d,m,g,v){let w=zc(e,i,a);if(g){const E=1<<a.z,R=ic(d.center.lng),z=Vl(d.center.lat),Y=(a.x+.5)/E-R;let ne=0;Y>.5?ne=-1:Y<-.5&&(ne=1);let ae=(e/ki+a.x)/E+ne,ye=(i/ki+a.y)/E;ae=(ae-R)*d._pixelsPerMercatorPixel+R,ye=(ye-z)*d._pixelsPerMercatorPixel+z;const Be=[ae*d.worldSize,ye*d.worldSize,0];Uo(Be,Be,g),w=xu(w,Be,v)}return Uo(w,w,m)}_makeGlobeTileDebugBorderBuffer(e,i,a,d,m,g){const v=new Xn,w=new fl,E=new dn,R=(Y,ne,ae,ye,Be)=>{const rt=(ae-Y)/(Be-1),St=(ye-ne)/(Be-1),ot=v.length;for(let Dt=0;Dt<Be;Dt++){const Bt=Y+Dt*rt,Lt=ne+Dt*St;v.emplaceBack(Bt,Lt);const gn=this._globePoint(Bt,Lt,i,a,d,m,g);E.emplaceBack(gn[0],gn[1],gn[2]),w.emplaceBack(ot+Dt)}},z=ki;R(0,0,z,0,16),R(z,0,z,z,16),R(z,z,0,z,16),R(0,z,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(w),this._tileDebugBuffer=e.createVertexBuffer(v,_u.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(E,ym.members),this._tileDebugSegments=Jo.simpleSegment(0,0,v.length,w.length)}_makeGlobeTileDebugTextBuffer(e,i,a,d,m,g){const v=ki/4,w=new Xn,E=new Si,R=new dn,z=25;E.reserve(32),w.reserve(z),R.reserve(z);const Y=(ne,ae)=>z*ne+ae;for(let ne=0;ne<z;ne++){const ae=ne*v;for(let ye=0;ye<z;ye++){const Be=ye*v;w.emplaceBack(Be,ae);const rt=this._globePoint(Be,ae,i,a,d,m,g);R.emplaceBack(rt[0],rt[1],rt[2])}}for(let ne=0;ne<4;ne++)for(let ae=0;ae<4;ae++){const ye=Y(ne,ae),Be=Y(ne,ae+1),rt=Y(ne+1,ae),St=Y(ne+1,ae+1);E.emplaceBack(ye,Be,rt),E.emplaceBack(rt,Be,St)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(E),this._tileDebugTextBuffer=e.createVertexBuffer(w,_u.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(R,ym.members),this._tileDebugTextSegments=Jo.simpleSegment(0,0,z,32)}}class kf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,a){const d=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},Yt(this.stateChanges[e][d],a),null===this.deletedStates[e]){this.deletedStates[e]={};for(const m in this.state[e])m!==d&&(this.deletedStates[e][m]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][d]){this.deletedStates[e][d]={};for(const m in this.state[e][d])a[m]||(this.deletedStates[e][d][m]=null)}else for(const m in a)this.deletedStates[e]&&this.deletedStates[e][d]&&null===this.deletedStates[e][d][m]&&delete this.deletedStates[e][d][m]}removeFeatureState(e,i,a){if(null===this.deletedStates[e])return;const d=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&void 0!==i)null!==this.deletedStates[e][d]&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][a]=null);else if(void 0!==i)if(this.stateChanges[e]&&this.stateChanges[e][d])for(a in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][a]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,i){const a=String(i),d=Yt({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const m=this.deletedStates[e][i];if(null===m)return{};for(const g in m)delete d[g]}return d}initializeTileState(e,i){e.setFeatureState(this.state,i)}coalesceChanges(e,i){const a={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const m={};for(const g in this.stateChanges[d])this.state[d][g]||(this.state[d][g]={}),Yt(this.state[d][g],this.stateChanges[d][g]),m[g]=this.state[d][g];a[d]=m}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const m={};if(null===this.deletedStates[d])for(const g in this.state[d])m[g]={},this.state[d][g]={};else for(const g in this.deletedStates[d]){if(null===this.deletedStates[d][g])this.state[d][g]={};else if(this.state[d][g])for(const v of Object.keys(this.deletedStates[d][g]))delete this.state[d][g][v];m[g]=this.state[d][g]}a[d]=a[d]||{},Yt(a[d],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(a).length)for(const d in e)e[d].setFeatureState(a,i)}}class ap{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,i){const a=this.toIdx(e,i);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,i){return this.leaves[this.toIdx(e,i)]}toIdx(e,i){return i*this.size+e}}function Rf(n,e,i,a){let d=0,m=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(a[g])<1e-15){if(i[g]<n[g]||i[g]>e[g])return null}else{const v=1/a[g];let w=(n[g]-i[g])*v,E=(e[g]-i[g])*v;if(w>E){const R=w;w=E,E=R}if(w>d&&(d=w),E<m&&(m=E),d>m)return null}return d}function Ff(n,e,i,a,d,m,g,v,w,E,R){const z=a-n,Y=d-e,ne=m-i,ae=g-n,ye=v-e,Be=w-i,rt=R[1]*Be-R[2]*ye,St=R[2]*ae-R[0]*Be,ot=R[0]*ye-R[1]*ae,Dt=z*rt+Y*St+ne*ot;if(Math.abs(Dt)<1e-15)return null;const Bt=1/Dt,Lt=E[0]-n,gn=E[1]-e,un=E[2]-i,Rn=(Lt*rt+gn*St+un*ot)*Bt;if(Rn<0||Rn>1)return null;const Kn=gn*ne-un*Y,vn=un*z-Lt*ne,Vn=Lt*Y-gn*z,Un=(R[0]*Kn+R[1]*vn+R[2]*Vn)*Bt;return Un<0||Rn+Un>1?null:(ae*Kn+ye*vn+Be*Vn)*Bt}function Lf(n,e,i){return(n-e)/(i-e)}function Bf(n,e,i,a,d,m,g,v,w){const E=1<<i,R=m-a,z=g-d,Y=(n+1)/E*R+a,ne=(e+0)/E*z+d,ae=(e+1)/E*z+d;v[0]=(n+0)/E*R+a,v[1]=ne,w[0]=Y,w[1]=ae}class Nf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const i=function(m){const g=Math.ceil(Math.log2(m.dim/8)),v=[];let w=Math.ceil(Math.pow(2,g));const E=1/w,R=(ne,ae,ye,Be,rt)=>{const St=Be?1:0,ot=(ne+1)*ye-St,Dt=ae*ye,Bt=(ae+1)*ye-St;rt[0]=ne*ye,rt[1]=Dt,rt[2]=ot,rt[3]=Bt};let z=new ap(w);const Y=[];for(let ne=0;ne<w*w;ne++){R(ne%w,Math.floor(ne/w),E,!1,Y);const ae=Sc(Y[0],Y[1],m),ye=Sc(Y[2],Y[1],m),Be=Sc(Y[2],Y[3],m),rt=Sc(Y[0],Y[3],m);z.minimums.push(Math.min(ae,ye,Be,rt)),z.maximums.push(Math.max(ae,ye,Be,rt)),z.leaves.push(1)}for(v.push(z),w/=2;w>=1;w/=2){const ne=v[v.length-1];z=new ap(w);for(let ae=0;ae<w*w;ae++){R(ae%w,Math.floor(ae/w),2,!0,Y);const ye=ne.getElevation(Y[0],Y[1]),Be=ne.getElevation(Y[2],Y[1]),rt=ne.getElevation(Y[2],Y[3]),St=ne.getElevation(Y[0],Y[3]),ot=ne.isLeaf(Y[0],Y[1]),Dt=ne.isLeaf(Y[2],Y[1]),Bt=ne.isLeaf(Y[2],Y[3]),Lt=ne.isLeaf(Y[0],Y[3]),gn=Math.min(ye.min,Be.min,rt.min,St.min),un=Math.max(ye.max,Be.max,rt.max,St.max),Rn=ot&&Dt&&Bt&&Lt;z.maximums.push(un),z.minimums.push(gn),z.leaves.push(un-gn<=5&&Rn?1:0)}v.push(z)}return v}(this.dem),a=i.length-1,d=i[a];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(i,0,0,a,0)}raycastRoot(e,i,a,d,m,g,v=1){return Rf([e,i,-100],[a,d,this.maximums[0]*v],m,g)}raycast(e,i,a,d,m,g,v=1){if(!this.nodeCount)return null;const w=this.raycastRoot(e,i,a,d,m,g,v);if(null==w)return null;const E=[],R=[],z=[],Y=[],ne=[{idx:0,t:w,nodex:0,nodey:0,depth:0}];for(;ne.length>0;){const{idx:ae,t:ye,nodex:Be,nodey:rt,depth:St}=ne.pop();if(this.leaves[ae]){Bf(Be,rt,St,e,i,a,d,z,Y);const Dt=1<<St,Bt=(Be+0)/Dt,Lt=(Be+1)/Dt,gn=(rt+0)/Dt,un=(rt+1)/Dt,Rn=Sc(Bt,gn,this.dem)*v,Kn=Sc(Lt,gn,this.dem)*v,vn=Sc(Lt,un,this.dem)*v,Vn=Sc(Bt,un,this.dem)*v,Un=Ff(z[0],z[1],Rn,Y[0],z[1],Kn,Y[0],Y[1],vn,m,g),Zn=Ff(Y[0],Y[1],vn,z[0],Y[1],Vn,z[0],z[1],Rn,m,g),ei=Math.min(null!==Un?Un:Number.MAX_VALUE,null!==Zn?Zn:Number.MAX_VALUE);if(ei!==Number.MAX_VALUE)return ei;{const Pn=Bc([],m,g,ye);if(zf(Rn,Kn,Vn,vn,Lf(Pn[0],z[0],Y[0]),Lf(Pn[1],z[1],Y[1]))>=Pn[2])return ye}continue}let ot=0;for(let Dt=0;Dt<this._siblingOffset.length;Dt++){Bf((Be<<1)+this._siblingOffset[Dt][0],(rt<<1)+this._siblingOffset[Dt][1],St+1,e,i,a,d,z,Y),z[2]=-100,Y[2]=this.maximums[this.childOffsets[ae]+Dt]*v;const Bt=Rf(z,Y,m,g);if(null!=Bt){const Lt=Bt;E[Dt]=Lt;let gn=!1;for(let un=0;un<ot&&!gn;un++)Lt>=E[R[un]]&&(R.splice(un,0,Dt),gn=!0);gn||(R[ot]=Dt),ot++}}for(let Dt=0;Dt<ot;Dt++){const Bt=R[Dt];ne.push({idx:this.childOffsets[ae]+Bt,t:E[Bt],nodex:(Be<<1)+this._siblingOffset[Bt][0],nodey:(rt<<1)+this._siblingOffset[Bt][1],depth:St+1})}}return null}_addNode(e,i,a){return this.minimums.push(e),this.maximums.push(i),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,i,a,d,m){if(1===e[d].isLeaf(i,a))return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const g=d-1,v=e[g];let w=0,E=0;for(let R=0;R<this._siblingOffset.length;R++){const z=2*i+this._siblingOffset[R][0],Y=2*a+this._siblingOffset[R][1],ne=v.getElevation(z,Y),ae=v.isLeaf(z,Y),ye=this._addNode(ne.min,ne.max,ae);ae&&(w|=1<<R),E||(E=ye)}for(let R=0;R<this._siblingOffset.length;R++)w&1<<R||this._construct(e,2*i+this._siblingOffset[R][0],2*a+this._siblingOffset[R][1],g,E+R)}}function zf(n,e,i,a,d,m){return Yi(Yi(n,i,m),Yi(e,a,m),d)}function Sc(n,e,i){const a=i.dim,d=_n(n*a-.5,0,a-1),m=_n(e*a-.5,0,a-1),g=Math.floor(d),v=Math.floor(m),w=Math.min(g+1,a-1),E=Math.min(v+1,a-1);return zf(i.get(g,v),i.get(w,v),i.get(g,E),i.get(w,E),d-g,m-v)}const Vf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function lp(n,e,i){return(256*n*256+256*e+i)/10-1e4}function tu(n,e,i){return 256*n+e+i/256-32768}class cp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,i,a,d=!1,m=!1){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(a&&"mapbox"!==a&&"terrarium"!==a)return Mn(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;const g=this.dim=i.height-2,v=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.encoding=a||"mapbox",this.borderReady=d,!d){for(let w=0;w<g;w++)v[this._idx(-1,w)]=v[this._idx(0,w)],v[this._idx(g,w)]=v[this._idx(g-1,w)],v[this._idx(w,-1)]=v[this._idx(w,0)],v[this._idx(w,g)]=v[this._idx(w,g-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(g,-1)]=v[this._idx(g-1,0)],v[this._idx(-1,g)]=v[this._idx(0,g-1)],v[this._idx(g,g)]=v[this._idx(g-1,g-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Nf(this)}get(e,i,a=!1){a&&(e=_n(e,-1,this.dim),i=_n(i,-1,this.dim));const d=4*this._idx(e,i);return("terrarium"===this.encoding?tu:lp)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(e){return Vf[e]}get unpackVector(){return Vf[this.encoding]}_idx(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)}static pack(e,i){const a=[0,0,0,0],d=cp.getUnpackVector(i);let m=Math.floor((e+d[3])/d[2]);return a[2]=m%256,m=Math.floor(m/256),a[1]=m%256,m=Math.floor(m/256),a[0]=m,a}getPixels(){return new sl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,i,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=i*this.dim,m=i*this.dim+this.dim,g=a*this.dim,v=a*this.dim+this.dim;switch(i){case-1:d=m-1;break;case 1:m=d+1}switch(a){case-1:g=v-1;break;case 1:v=g+1}const w=-i*this.dim,E=-a*this.dim;for(let R=g;R<v;R++)for(let z=d;z<m;z++){const Y=4*this._idx(z,R),ne=4*this._idx(z+w,R+E);this.pixels[Y+0]=e.pixels[ne+0],this.pixels[Y+1]=e.pixels[ne+1],this.pixels[Y+2]=e.pixels[ne+2],this.pixels[Y+3]=e.pixels[ne+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}gi(cp,"DEMData"),gi(Nf,"DemMinMaxQuadTree",{omit:["dem"]});class ny{constructor(e,i){this.max=e,this.onRemove=i,this.reset()}reset(){for(const e in this.data)for(const i of this.data[e])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(e,i,a){const d=e.wrapped().key;void 0===this.data[d]&&(this.data[d]=[]);const m={value:i,timeout:void 0};if(void 0!==a&&(m.timeout=setTimeout(()=>{this.remove(e,m)},a)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const i=this.data[e].shift();return i.timeout&&clearTimeout(i.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),i.value}getByKey(e){const i=this.data[e];return i?i[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,i){if(!this.has(e))return this;const a=e.wrapped().key,d=void 0===i?0:this.data[a].indexOf(i),m=this.data[a][d];return this.data[a].splice(d,1),m.timeout&&clearTimeout(m.timeout),0===this.data[a].length&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(e){const i=[];for(const a in this.data)for(const d of this.data[a])e(d.value)||i.push(d);for(const a of i)this.remove(a.value.tileID,a)}}class nu{constructor(e,i,a){this.func=e,this.mask=i,this.range=a}}nu.ReadOnly=!1,nu.ReadWrite=!0,nu.disabled=new nu(519,nu.ReadOnly,[0,1]);class Jd{constructor(e,i,a,d,m,g){this.test=e,this.ref=i,this.mask=a,this.fail=d,this.depthFail=m,this.pass=g}}Jd.disabled=new Jd({func:519,mask:0},0,0,7680,7680,7680);class lc{constructor(e,i,a){this.blendFunction=e,this.blendColor=i,this.mask=a}}lc.Replace=[1,0],lc.disabled=new lc(lc.Replace,Fr.transparent,[!1,!1,!1,!1]),lc.unblended=new lc(lc.Replace,Fr.transparent,[!0,!0,!0,!0]),lc.alphaBlended=new lc([1,771],Fr.transparent,[!0,!0,!0,!0]);class cc{constructor(e,i,a){this.enable=e,this.mode=i,this.frontFace=a}}cc.disabled=new cc(!1,1029,2305),cc.backCCW=new cc(!0,1029,2305),cc.backCW=new cc(!0,1029,2304),cc.frontCW=new cc(!0,1028,2304),cc.frontCCW=new cc(!0,1028,2305);class Ou extends wo{constructor(e,i,a){super(),this.id=e,this._onlySymbols=a,i.on("data",d=>{"source"===d.dataType&&"metadata"===d.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===d.dataType&&"content"===d.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new ny(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new kf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const i=this._tiles[e];if("loaded"!==i.state&&"errored"!==i.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,i){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,i)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const a=this._tiles[i];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Ii(this._tiles).map(e=>e.tileID).sort(Sg).map(e=>e.key)}getRenderableIds(e){const i=[];for(const a in this._tiles)this._isIdRenderable(+a,e)&&i.push(this._tiles[a]);return e?i.sort((a,d)=>{const m=a.tileID,g=d.tileID,v=new Ae(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),w=new Ae(g.canonical.x,g.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-g.overscaledZ||w.y-v.y||w.x-v.x}).map(a=>a.tileID.key):i.map(a=>a.tileID).sort(Sg).map(a=>a.key)}hasRenderableParent(e){const i=this.findLoadedParent(e,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(e,i){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(i||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,i){const a=this._tiles[e];a&&("loading"!==a.state&&(a.state=i),this._loadTile(a,this._tileLoaded.bind(this,a,e,i)))}_tileLoaded(e,i,a,d){if(d)if(e.state="errored",404!==d.status)this._source.fire(new Ho(d,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=gr.now(),"expired"===a&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Hr("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const i=this.getRenderableIds();for(let d=0;d<i.length;d++){const m=i[d];if(e.neighboringTiles&&e.neighboringTiles[m]){const g=this.getTileByID(m);a(e,g),a(g,e)}}function a(d,m){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let g=m.tileID.canonical.x-d.tileID.canonical.x;const v=m.tileID.canonical.y-d.tileID.canonical.y,w=Math.pow(2,d.tileID.canonical.z),E=m.tileID.key;0===g&&0===v||Math.abs(v)>1||(Math.abs(g)>1&&(1===Math.abs(g+w)?g+=w:1===Math.abs(g-w)&&(g-=w)),m.dem&&d.dem&&(d.dem.backfillBorder(m.dem,g,v),d.neighboringTiles&&d.neighboringTiles[E]&&(d.neighboringTiles[E].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,i,a,d){for(const m in this._tiles){let g=this._tiles[m];if(d[m]||!g.hasData()||g.tileID.overscaledZ<=i||g.tileID.overscaledZ>a)continue;let v=g.tileID;for(;g&&g.tileID.overscaledZ>i+1;){const E=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[E.key],g&&g.hasData()&&(v=E)}let w=v;for(;w.overscaledZ>i;)if(w=w.scaledTo(w.overscaledZ-1),e[w.key]){d[v.key]=v;break}}}findLoadedParent(e,i){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=i?a:null}for(let a=e.overscaledZ-1;a>=i;a--){const d=e.scaledTo(a),m=this._getLoadedTile(d);if(m)return m}}_getLoadedTile(e){const i=this._tiles[e.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,i){i=i||this._source.tileSize;const a=Math.ceil(e.width/i)+1,d=Math.ceil(e.height/i)+1,m=Math.floor(a*d*5),g="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,m):m,v="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(v)}handleWrapJump(e){const i=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,i){const a={};for(const d in this._tiles){const m=this._tiles[d];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+i),a[m.tileID.key]=m}this._tiles=a;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(e,i,a){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let d;this.updateCacheSize(e,i),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(v=>new Is(v.canonical.z,v.wrap,v.canonical.z,v.canonical.x,v.canonical.y)):(d=e.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(v=>this._source.hasTile(v)))):d=[];const m=this._updateRetainedTiles(d);if(Uf(this._source.type)&&0!==d.length){const v={},w={},E=Object.keys(m);for(const z of E){const Y=m[z],ne=this._tiles[z];if(!ne||ne.fadeEndTime&&ne.fadeEndTime<=gr.now())continue;const ae=this.findLoadedParent(Y,Math.max(Y.overscaledZ-Ou.maxOverzooming,this._source.minzoom));ae&&(this._addTile(ae.tileID),v[ae.tileID.key]=ae.tileID),w[z]=Y}const R=d[d.length-1].overscaledZ;for(const z in this._tiles){const Y=this._tiles[z];if(m[z]||!Y.hasData())continue;let ne=Y.tileID;for(;ne.overscaledZ>R;){ne=ne.scaledTo(ne.overscaledZ-1);const ae=this._tiles[ne.key];if(ae&&ae.hasData()&&w[ne.key]){m[z]=Y.tileID;break}}}for(const z in v)m[z]||(this._coveredTiles[z]=!0,m[z]=v[z])}for(const v in m)this._tiles[v].clearFadeHold();const g=function(v,w){const E=[];for(const R in v)R in w||E.push(R);return E}(this._tiles,m);for(const v of g){const w=this._tiles[v];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(+v)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const i={};if(0===e.length)return i;const a={},d=e.reduce((E,R)=>Math.min(E,R.overscaledZ),1/0),m=e[0].overscaledZ,g=Math.max(m-Ou.maxOverzooming,this._source.minzoom),v=Math.max(m+Ou.maxUnderzooming,this._source.minzoom),w={};for(const E of e){const R=this._addTile(E);i[E.key]=E,R.hasData()||d<this._source.maxzoom&&(w[E.key]=E)}this._retainLoadedChildren(w,d,v,i);for(const E of e){let R=this._tiles[E.key];if(R.hasData())continue;if(E.canonical.z>=this._source.maxzoom){const Y=E.children(this._source.maxzoom)[0],ne=this.getTile(Y);if(ne&&ne.hasData()){i[Y.key]=Y;continue}}else{const Y=E.children(this._source.maxzoom);if(i[Y[0].key]&&i[Y[1].key]&&i[Y[2].key]&&i[Y[3].key])continue}let z=R.wasRequested();for(let Y=E.overscaledZ-1;Y>=g;--Y){const ne=E.scaledTo(Y);if(a[ne.key]||(a[ne.key]=!0,R=this.getTile(ne),!R&&z&&(R=this._addTile(ne)),R&&(i[ne.key]=ne,z=R.wasRequested(),R.hasData())))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const i=[];let a,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){a=this._loadedParentTiles[d.key];break}i.push(d.key);const m=d.scaledTo(d.overscaledZ-1);if(a=this._getLoadedTile(m),a)break;d=m}for(const m of i)this._loadedParentTiles[m]=a}}_addTile(e){let i=this._tiles[e.key];if(i)return i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const a=Boolean(i);if(!a){const d=this.map?this.map.painter:null;i=new sp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))}return i?(i.uses++,this._tiles[e.key]=i,a||this._source.fire(new Hr("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(e,i){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=i.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const i=this._tiles[e];i&&(i.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),i.uses>0||(i.hasData()&&"reloading"!==i.state?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,i,a){const d=[],m=this.transform;if(!m)return d;const g="globe"===m.projection.name,v=ic(m.center.lng);for(const w in this._tiles){const E=this._tiles[w];if(a&&E.clearQueryDebugViz(),E.holdingForFade())continue;let R;if(g){const z=E.tileID.canonical;if(0===z.z){const Y=[Math.abs(_n(v,...eh(z,-1))-v),Math.abs(_n(v,...eh(z,1))-v)];R=[0,2*Y.indexOf(Math.min(...Y))-1]}else{const Y=[Math.abs(_n(v,...eh(z,-1))-v),Math.abs(_n(v,...eh(z,0))-v),Math.abs(_n(v,...eh(z,1))-v)];R=[Y.indexOf(Math.min(...Y))-1]}}else R=[0];for(const z of R){const Y=e.containsTile(E,m,i,z);Y&&d.push(Y)}}return d}getVisibleCoordinates(e){const i=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);for(const a of i)a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped());return i}hasTransition(){if(this._source.hasTransition())return!0;if(Uf(this._source.type))for(const e in this._tiles){const i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=gr.now())return!0}return!1}setFeatureState(e,i,a){this._state.updateState(e=e||"_geojsonTileLayer",i,a)}removeFeatureState(e,i,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",i,a)}getFeatureState(e,i){return this._state.getState(e=e||"_geojsonTileLayer",i)}setDependencies(e,i,a){const d=this._tiles[e];d&&d.setDependencies(i,a)}reloadTilesForDependencies(e,i){for(const a in this._tiles)this._tiles[a].hasDependency(e,i)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,i))}_preloadTiles(e,i){if(!this._sourceLoaded){const v=()=>{this._sourceLoaded&&(this._source.off("data",v),this._preloadTiles(e,i))};return void this._source.on("data",v)}const a=new Map,d=Array.isArray(e)?e:[e],m=this.map.painter.terrain,g=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const v of d){const w=v.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const E of w)a.set(E.key,E);this.usedForTerrain&&v.updateElevation(!1)}vi(Array.from(a.values()),(v,w)=>{const E=new sp(v,this._source.tileSize*v.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(E,R=>{"raster-dem"===this._source.type&&E.dem&&this._backfillDEM(E),w(R,E)})},i)}}function Sg(n,e){const i=Math.abs(2*n.wrap)-+(n.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||a-i||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function Uf(n){return"raster"===n||"image"===n||"video"===n||"custom"===n}function eh(n,e){const i=1<<n.z;return[n.x/i+e,(n.x+1)/i+e]}Ou.maxOverzooming=10,Ou.maxUnderzooming=3;class ws{constructor(e,i,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=i,this._offset=a}static create(e,i,a){const d=a||e.findDEMTileFor(i);if(!d||!d.dem)return;const m=d.dem,g=d.tileID,v=1<<i.canonical.z-g.canonical.z;return new ws(d,d.tileSize/ki/v,[(i.canonical.x/v-g.canonical.x)*m.dim,(i.canonical.y/v-g.canonical.y)*m.dim])}tileCoordToPixel(e,i){const a=i*this._scale+this._offset[1],d=Math.floor(e*this._scale+this._offset[0]),m=Math.floor(a);return new Ae(d,m)}getElevationAt(e,i,a,d){const m=e*this._scale+this._offset[0],g=i*this._scale+this._offset[1],v=Math.floor(m),w=Math.floor(g),E=this._dem;return d=!!d,a?Yi(Yi(E.get(v,w,d),E.get(v,w+1,d),g-w),Yi(E.get(v+1,w,d),E.get(v+1,w+1,d),g-w),m-v):E.get(v,w,d)}getElevationAtPixel(e,i,a){return this._dem.get(e,i,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*rl(1,e)*this._dem.stride}}class jf{constructor(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new mc(ki,16,0),this.featureIndexArray=new uu,this.promoteId=i}insert(e,i,a,d,m,g=0){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,d,m,g);const w=this.grid;for(let E=0;E<i.length;E++){const R=i[E],z=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<R.length;Y++){const ne=R[Y];z[0]=Math.min(z[0],ne.x),z[1]=Math.min(z[1],ne.y),z[2]=Math.max(z[2],ne.x),z[3]=Math.max(z[3],ne.y)}z[0]<ki&&z[1]<ki&&z[2]>=0&&z[3]>=0&&w.insert(v,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zp(new jh(this.rawTileData)).layers,this.sourceLayerCoder=new op(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,i,a,d){this.loadVTLayers();const m=e.params||{},g=bo(m.filter),v=e.tileResult,w=e.transform,E=v.bufferedTilespaceBounds,R=this.grid.query(E.min.x,E.min.y,E.max.x,E.max.y,(ae,ye,Be,rt)=>vh(v.bufferedTilespaceGeometry,ae,ye,Be,rt));R.sort(iy);let z=null;w.elevation&&R.length>0&&(z=ws.create(w.elevation,this.tileID));const Y={};let ne;for(let ae=0;ae<R.length;ae++){const ye=R[ae];if(ye===ne)continue;ne=ye;const Be=this.featureIndexArray.get(ye);let rt=null;this.loadMatchingFeature(Y,Be,g,m.layers,m.availableImages,i,a,d,(St,ot,Dt,Bt=0)=>(rt||(rt=Uc(St,this.tileID.canonical,e.tileTransform)),ot.queryIntersectsFeature(v,St,Dt,rt,this.z,e.transform,e.pixelPosMatrix,z,Bt)))}return Y}loadMatchingFeature(e,i,a,d,m,g,v,w,E){const{featureIndex:R,bucketIndex:z,sourceLayerIndex:Y,layoutVertexArrayOffset:ne}=i,ae=this.bucketLayerIDs[z];if(d&&!function(St,ot){for(let Dt=0;Dt<St.length;Dt++)if(ot.indexOf(St[Dt])>=0)return!0;return!1}(d,ae))return;const ye=this.sourceLayerCoder.decode(Y),Be=this.vtLayers[ye].feature(R);if(a.needGeometry){const St=Xu(Be,!0);if(!a.filter(new B(this.tileID.overscaledZ),St,this.tileID.canonical))return}else if(!a.filter(new B(this.tileID.overscaledZ),Be))return;const rt=this.getId(Be,ye);for(let St=0;St<ae.length;St++){const ot=ae[St];if(d&&d.indexOf(ot)<0)continue;const Dt=g[ot];if(!Dt)continue;let Bt={};void 0!==rt&&w&&(Bt=w.getState(Dt.sourceLayer||"_geojsonTileLayer",rt));const Lt=Yt({},v[ot]);Lt.paint=Ig(Lt.paint,Dt.paint,Be,Bt,m),Lt.layout=Ig(Lt.layout,Dt.layout,Be,Bt,m);const gn=!E||E(Be,Dt,Bt,ne);if(!gn)continue;const un=new If(Be,this.z,this.x,this.y,rt);un.layer=Lt;let Rn=e[ot];void 0===Rn&&(Rn=e[ot]=[]),Rn.push({featureIndex:R,feature:un,intersectionZ:gn})}}lookupSymbolFeatures(e,i,a,d,m,g,v,w){const E={};this.loadVTLayers();const R=bo(m);for(const z of e)this.loadMatchingFeature(E,{bucketIndex:a,sourceLayerIndex:d,featureIndex:z,layoutVertexArrayOffset:0},R,g,v,w,i);return E}loadFeature(e){const{featureIndex:i,sourceLayerIndex:a}=e;this.loadVTLayers();const d=this.sourceLayerCoder.decode(a),m=this.vtFeatures[d];if(m[i])return m[i];const g=this.vtLayers[d].feature(i);return m[i]=g,g}hasLayer(e){for(const i of this.bucketLayerIDs)for(const a of i)if(e===a)return!0;return!1}getId(e,i){let a=e.id;if(this.promoteId){const d="string"==typeof this.promoteId?this.promoteId:this.promoteId[i];null!=d&&(a=e.properties[d]),"boolean"==typeof a&&(a=Number(a))}return a}}function Ig(n,e,i,a,d){return ft(n,(m,g)=>{const v=e instanceof tt?e.get(g):null;return v&&v.evaluate?v.evaluate(i,a,d):v})}function iy(n,e){return e-n}gi(jf,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Hf{constructor(e,i){this.width=e,this.height=i,this.nextRow=0,this.image=new xc({width:e,height:i}),this.positions={},this.uploaded=!1}getDash(e,i){const a=this.getKey(e,i);return this.positions[a]}trim(){const e=this.width,i=this.height=Nt(this.nextRow);this.image.resize({width:e,height:i})}getKey(e,i){return e.join(",")+i}getDashRanges(e,i,a){const d=[];let m=e.length%2==1?-e[e.length-1]*a:0,g=e[0]*a,v=!0;d.push({left:m,right:g,isDash:v,zeroLength:0===e[0]});let w=e[0];for(let E=1;E<e.length;E++){v=!v;const R=e[E];m=w*a,w+=R,g=w*a,d.push({left:m,right:g,isDash:v,zeroLength:0===R})}return d}addRoundDash(e,i,a){const d=i/2;for(let m=-a;m<=a;m++){const g=this.width*(this.nextRow+a+m);let v=0,w=e[v];for(let E=0;E<this.width;E++){E/w.right>1&&(w=e[++v]);const R=Math.abs(E-w.left),z=Math.abs(E-w.right),Y=Math.min(R,z);let ne;const ae=m/a*(d+1);if(w.isDash){const ye=d-Math.abs(ae);ne=Math.sqrt(Y*Y+ye*ye)}else ne=d-Math.sqrt(Y*Y+ae*ae);this.image.data[g+E]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(e,i){for(let w=e.length-1;w>=0;--w){const E=e[w],R=e[w+1];E.zeroLength?e.splice(w,1):R&&R.isDash===E.isDash&&(R.left=E.left,e.splice(w,1))}const a=e[0],d=e[e.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const m=this.width*this.nextRow;let g=0,v=e[g];for(let w=0;w<this.width;w++){w/v.right>1&&(v=e[++g]);const E=Math.abs(w-v.left),R=Math.abs(w-v.right),z=Math.min(E,R);this.image.data[m+w]=Math.max(0,Math.min(255,(v.isDash?z:-z)+i+128))}}addDash(e,i){const a=this.getKey(e,i);if(this.positions[a])return this.positions[a];const d="round"===i,m=d?7:0,g=2*m+1;if(this.nextRow+g>this.height)return Mn("LineAtlas out of space"),null;0===e.length&&e.push(1);let v=0;for(let R=0;R<e.length;R++)e[R]<0&&(Mn("Negative value is found in line dasharray, replacing values with 0"),e[R]=0),v+=e[R];if(0!==v){const R=this.width/v,z=this.getDashRanges(e,this.width,R);d?this.addRoundDash(z,R,m):this.addRegularDash(z,"square"===i?.5*R:0)}const w=this.nextRow+m;this.nextRow+=g;const E={tl:[w,m],br:[v,0]};return this.positions[a]=E,E}}gi(Hf,"LineAtlas");const Pg=1*$l;class Gf{constructor(e){const i={},a=[];for(const v in e){const w=e[v],E=i[v]={};for(const R in w.glyphs){const z=w.glyphs[+R];if(!z||0===z.bitmap.width||0===z.bitmap.height)continue;const Y=z.metrics.localGlyph?Pg:1,ne={x:0,y:0,w:z.bitmap.width+2*Y,h:z.bitmap.height+2*Y};a.push(ne),E[R]=ne}}const{w:d,h:m}=df(a),g=new xc({width:d||1,height:m||1});for(const v in e){const w=e[v];for(const E in w.glyphs){const R=w.glyphs[+E];if(!R||0===R.bitmap.width||0===R.bitmap.height)continue;const z=i[v][E],Y=R.metrics.localGlyph?Pg:1;xc.copy(R.bitmap,g,{x:0,y:0},{x:z.x+Y,y:z.y+Y},R.bitmap)}}this.image=g,this.positions=i}}gi(Gf,"GlyphAtlas");class Og{constructor(e){this.tileID=new Is(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Au(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,i,a,d,m){this.status="parsing",this.data=e,this.collisionBoxArray=new Yr;const g=new op(Object.keys(e.layers).sort()),v=new jf(this.tileID,this.promoteId);v.bucketLayerIDs=[];const w={},E=new Hf(256,256),R={featureIndex:v,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:E,availableImages:a},z=i.familiesBySource[this.source];for(const Bt in z){const Lt=e.layers[Bt];if(!Lt)continue;let gn=!1,un=!1;for(const vn of z[Bt])"symbol"===vn[0].type?gn=!0:un=!0;if(!0===this.isSymbolTile&&!gn||!1===this.isSymbolTile&&!un)continue;1===Lt.version&&Mn(`Vector tile source "${this.source}" layer "${Bt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Rn=g.encode(Bt),Kn=[];for(let vn=0;vn<Lt.length;vn++){const Vn=Lt.feature(vn),Un=v.getId(Vn,Bt);Kn.push({feature:Vn,id:Un,index:vn,sourceLayerIndex:Rn})}for(const vn of z[Bt]){const Vn=vn[0];void 0!==this.isSymbolTile&&"symbol"===Vn.type!==this.isSymbolTile||Vn.minzoom&&this.zoom<Math.floor(Vn.minzoom)||Vn.maxzoom&&this.zoom>=Vn.maxzoom||"none"!==Vn.visibility&&(iu(vn,this.zoom,a),(w[Vn.id]=Vn.createBucket({index:v.bucketLayerIDs.length,layers:vn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:a})).populate(Kn,R,this.tileID.canonical,this.tileTransform),v.bucketLayerIDs.push(vn.map(Un=>Un.id)))}}let Y,ne,ae,ye;E.trim();const Be={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},rt=()=>{if(Y)return m(Y);if(ne&&ae&&ye){const Bt=new Gf(ne),Lt=new Hh(ae,ye);for(const gn in w){const un=w[gn];un instanceof Tc?(iu(un.layers,this.zoom,a),X_(un,ne,Bt.positions,ae,Lt.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection)):un.hasPattern&&(un instanceof Bh||un instanceof Oh||un instanceof rd)&&(iu(un.layers,this.zoom,a),un.addFeatures(R,this.tileID.canonical,Lt.patternPositions,a,this.tileTransform))}this.status="done",m(null,{buckets:Ii(w).filter(gn=>!gn.isEmpty()),featureIndex:v,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Bt.image,lineAtlas:E,imageAtlas:Lt,glyphMap:this.returnDependencies?ne:null,iconMap:this.returnDependencies?ae:null,glyphPositions:this.returnDependencies?Bt.positions:null})}},St=ft(R.glyphDependencies,Bt=>Object.keys(Bt).map(Number));Object.keys(St).length?d.send("getGlyphs",{uid:this.uid,stacks:St},(Bt,Lt)=>{Y||(Y=Bt,ne=Lt,rt())},void 0,!1,Be):ne={};const ot=Object.keys(R.iconDependencies);ot.length?d.send("getImages",{icons:ot,source:this.source,tileID:this.tileID,type:"icons"},(Bt,Lt)=>{Y||(Y=Bt,ae=Lt,rt())},void 0,!1,Be):ae={};const Dt=Object.keys(R.patternDependencies);Dt.length?d.send("getImages",{icons:Dt,source:this.source,tileID:this.tileID,type:"patterns"},(Bt,Lt)=>{Y||(Y=Bt,ye=Lt,rt())},void 0,!1,Be):ye={},rt()}}function iu(n,e,i){const a=new B(e);for(const d of n)d.recalculate(a,i)}class kg{constructor(e){this.entries={},this.scheduler=e}request(e,i,a,d){const m=this.entries[e]=this.entries[e]||{callbacks:[]};if(m.result){const[g,v]=m.result;return this.scheduler?this.scheduler.add(()=>{d(g,v)},i):d(g,v),()=>{}}return m.callbacks.push(d),m.cancel||(m.cancel=a((g,v)=>{m.result=[g,v];for(const w of m.callbacks)this.scheduler?this.scheduler.add(()=>{w(g,v)},i):w(g,v);setTimeout(()=>delete this.entries[e],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(g=>g!==d),m.callbacks.length||(m.cancel(),delete this.entries[e]))}}}function Rg(n,e,i){const a=JSON.stringify(n.request);return n.data&&(this.deduped.entries[a]={result:[null,n.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},d=>{const m=Bn(n.request,(g,v,w,E)=>{g?d(g):v&&d(null,{vectorTile:i?void 0:new Zp(new jh(v)),rawData:v,cacheControl:w,expires:E})});return()=>{m.cancel(),d()}},e)}const $f=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zf{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,a]=new Uint8Array(e,0,2);if(219!==i)throw new Error("Data does not appear to be in a KDBush format.");const d=a>>4;if(1!==d)throw new Error(`Got v${d} data when expected v1.`);const m=$f[15&a];if(!m)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(e,2,1),[v]=new Uint32Array(e,4,1);return new Zf(v,g,m,e)}constructor(e,i=64,a=Float64Array,d){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=a,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const m=$f.indexOf(this.ArrayType),g=2*e*this.ArrayType.BYTES_PER_ELEMENT,v=e*this.IndexArrayType.BYTES_PER_ELEMENT,w=(8-v%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${a}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+w,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+g+v+w),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+w,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){const a=this._pos>>1;return this.ids[a]=a,this.coords[this._pos++]=e,this.coords[this._pos++]=i,a}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return up(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,a,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:g,nodeSize:v}=this,w=[0,m.length-1,0],E=[];for(;w.length;){const R=w.pop()||0,z=w.pop()||0,Y=w.pop()||0;if(z-Y<=v){for(let Be=Y;Be<=z;Be++){const rt=g[2*Be],St=g[2*Be+1];rt>=e&&rt<=a&&St>=i&&St<=d&&E.push(m[Be])}continue}const ne=Y+z>>1,ae=g[2*ne],ye=g[2*ne+1];ae>=e&&ae<=a&&ye>=i&&ye<=d&&E.push(m[ne]),(0===R?e<=ae:i<=ye)&&(w.push(Y),w.push(ne-1),w.push(1-R)),(0===R?a>=ae:d>=ye)&&(w.push(ne+1),w.push(z),w.push(1-R))}return E}within(e,i,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:g}=this,v=[0,d.length-1,0],w=[],E=a*a;for(;v.length;){const R=v.pop()||0,z=v.pop()||0,Y=v.pop()||0;if(z-Y<=g){for(let Be=Y;Be<=z;Be++)ql(m[2*Be],m[2*Be+1],e,i)<=E&&w.push(d[Be]);continue}const ne=Y+z>>1,ae=m[2*ne],ye=m[2*ne+1];ql(ae,ye,e,i)<=E&&w.push(d[ne]),(0===R?e-a<=ae:i-a<=ye)&&(v.push(Y),v.push(ne-1),v.push(1-R)),(0===R?e+a>=ae:i+a>=ye)&&(v.push(ne+1),v.push(z),v.push(1-R))}return w}}function up(n,e,i,a,d,m){if(d-a<=i)return;const g=a+d>>1;ry(n,e,g,a,d,m),up(n,e,i,a,g-1,1-m),up(n,e,i,g+1,d,1-m)}function ry(n,e,i,a,d,m){for(;d>a;){if(d-a>600){const E=d-a+1,R=i-a+1,z=Math.log(E),Y=.5*Math.exp(2*z/3),ne=.5*Math.sqrt(z*Y*(E-Y)/E)*(R-E/2<0?-1:1);ry(n,e,i,Math.max(a,Math.floor(i-R*Y/E+ne)),Math.min(d,Math.floor(i+(E-R)*Y/E+ne)),m)}const g=e[2*i+m];let v=a,w=d;for(ku(n,e,a,i),e[2*d+m]>g&&ku(n,e,a,d);v<w;){for(ku(n,e,v,w),v++,w--;e[2*v+m]<g;)v++;for(;e[2*w+m]>g;)w--}e[2*a+m]===g?ku(n,e,a,w):(w++,ku(n,e,w,d)),w<=i&&(a=w+1),i<=w&&(d=w-1)}}function ku(n,e,i,a){th(n,i,a),th(e,2*i,2*a),th(e,2*i+1,2*a+1)}function th(n,e,i){const a=n[e];n[e]=n[i],n[i]=a}function ql(n,e,i,a){const d=n-i,m=e-a;return d*d+m*m}o.ARRAY_TYPE=nl,o.AUTH_ERR_MSG=bt,o.Aabb=pa,o.Actor=class{constructor(n,e,i){this.target=n,this.parent=e,this.mapId=i,this.callbacks={},this.cancelCallbacks={},Ot(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=xt()?n:P,this.scheduler=new Dg}send(n,e,i,a,d=!1,m){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=m,this.callbacks[g]=i);const v=Fn(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:n,hasCallback:!!i,targetMapId:a,mustQueue:d,sourceMapId:this.mapId,data:tl(e,v)},v),{cancel:()=>{i&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(n){const e=n.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a.cancel()}else if(e.mustQueue||xt()){const a=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,e),a&&a.metadata||{type:"message"})}else this.processTask(i,e)}processTask(n,e){if("<response>"===e.type){const i=this.callbacks[n];delete this.callbacks[n],i&&(e.error?i(Ql(e.error)):i(null,Ql(e.data)))}else{const i=Fn(this.globalScope)?void 0:[],a=e.hasCallback?(m,g)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:m?tl(m):null,data:tl(g,i)},i)}:m=>{},d=Ql(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,d,a);else if(this.parent.getWorkerSource){const m=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,m[0],d.source)[m[1]](d,a)}else a(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=qp,o.Color=Fr,o.ColorMode=lc,o.CullFaceMode=cc,o.DEMData=cp,o.DataConstantProperty=fe,o.DedupedRequest=kg,o.DepthMode=nu,o.EXTENT=ki,o.Elevation=class{isDataAvailableAtPoint(n){const e=this._source();if(this.isUsingMockSource()||!e||n.y<0||n.y>1)return!1;const i=e.getSource().maxzoom,a=1<<i,d=Math.floor(n.x),m=Math.floor((n.x-d)*a),g=Math.floor(n.y*a),v=this.findDEMTileFor(new Is(i,d,i,m,g));return!(!v||!v.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,i=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const a=this._source();if(!a||n.y<0||n.y>1)return e;const d=a.getSource().maxzoom,m=1<<d,g=Math.floor(n.x),v=n.x-g,w=new Is(d,g,d,Math.floor(v*m),Math.floor(n.y*m)),E=this.findDEMTileFor(w);if(!E||!E.dem)return e;const R=E.dem,z=1<<E.tileID.canonical.z,Y=(v*z-E.tileID.canonical.x)*R.dim,ne=(n.y*z-E.tileID.canonical.y)*R.dim,ae=Math.floor(Y),ye=Math.floor(ne);return(i?this.exaggeration():1)*Yi(Yi(R.get(ae,ye),R.get(ae,ye+1),ne-ye),Yi(R.get(ae+1,ye),R.get(ae+1,ye+1),ne-ye),Y-ae)}getAtTileOffset(n,e,i){const a=1<<n.canonical.z;return this.getAtPointOrZero(new Ku(n.wrap+(n.canonical.x+e/ki)/a,(n.canonical.y+i/ki)/a))}getAtTileOffsetFunc(n,e,i,a){return d=>{const m=this.getAtTileOffset(n,d.x,d.y),g=a.upVector(n.canonical,d.x,d.y);return il(g,g,m*a.upVectorScale(n.canonical,e,i).metersToTile),g}}getForTilePoints(n,e,i,a){if(this.isUsingMockSource())return!1;const d=ws.create(this,n,a);return!!d&&(e.forEach(m=>{m[2]=this.exaggeration()*d.getElevationAt(m[0],m[1],i)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const i=e.dem.tree,a=e.tileID,d=1<<n.canonical.z-a.canonical.z;let m=n.canonical.x/d-a.canonical.x,g=n.canonical.y/d-a.canonical.y,v=0;for(let w=0;w<n.canonical.z-a.canonical.z&&!i.leaves[v];w++){m*=2,g*=2;const E=2*Math.floor(g)+Math.floor(m);v=i.childOffsets[v]+E,m%=1,g%=1}return{min:this.exaggeration()*i.minimums[v],max:this.exaggeration()*i.maximums[v]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,i){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Ho,o.EvaluationParameters=B,o.Event=Hr,o.Evented=wo,o.FillExtrusionBucket=rd,o.Frustum=$u,o.FrustumCorners=ch,o.GLOBE_RADIUS=zl,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=Sp,o.GLOBE_ZOOM_THRESHOLD_MIN=uh,o.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,e){const i=new Xn,a=new Si,d=[],m=n+1+2,g=e[0]+1,v=e[0]+1+(1+e.length),w=(E,R,z)=>{let Y=E===m-1?E-2:0===E?E:E-1;return Y+=z?24575:0,[Y,R]};for(let E=0;E<m;++E)i.emplaceBack(...w(E,0,!0));for(let E=0;E<g;++E)for(let R=0;R<m;++R)i.emplaceBack(...w(R,E,(0===R||R===m-1)&&!0));for(let E=0;E<e.length;++E){const R=e[E];for(let z=0;z<m;++z)i.emplaceBack(...w(z,R,!0))}for(let E=0;E<e.length;++E){const R=a.length,z=e[E]+1+2,Y=new Si;for(let ye=0;ye<z-1;ye++){const Be=ye===z-2,rt=Be?m*(v-e.length+E-ye):m;for(let St=0;St<m-1;St++){const ot=ye*m+St;0===ye||Be||0===St||St===m-2?(Y.emplaceBack(ot+1,ot,ot+rt),Y.emplaceBack(ot+rt,ot+rt+1,ot+1)):(a.emplaceBack(ot+1,ot,ot+rt),a.emplaceBack(ot+rt,ot+rt+1,ot+1))}}const ne=Jo.simpleSegment(0,R,i.length,a.length-R);for(let ye=0;ye<Y.uint16.length;ye+=3)a.emplaceBack(Y.uint16[ye],Y.uint16[ye+1],Y.uint16[ye+2]);const ae=Jo.simpleSegment(0,R,i.length,a.length-R);d.push({withoutSkirts:ne,withSkirts:ae})}return{vertices:i,indices:a,segments:d}}_createGrid(n){const e=this._fillGridMeshWithLods(64,Od);this._gridSegments=e.segments,this._gridBuffer=n.createVertexBuffer(e.vertices,_u.members),this._gridIndexBuffer=n.createIndexBuffer(e.indices,!0)}_createPoles(n){const e=new Si;for(let d=0;d<=64;d++)e.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const i=new jr,a=new jr;this._poleSegments=[];for(let d=0,m=0;d<uh;d++){const g=360/(1<<d);i.emplaceBack(0,-zl,0,.5,0),a.emplaceBack(0,-zl,0,.5,1);for(let v=0;v<=64;v++){const w=v/64,E=Yi(0,g,w),[R,z,Y]=Zu(kp,Vy,E,zl);i.emplaceBack(R,z,Y,w,0),a.emplaceBack(R,z,Y,w,1)}this._poleSegments.push(Jo.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(i,o_,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(a,o_,!1)}getGridBuffers(n,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,e){if(!this._wireframeSegments){const i=new ta,a=64,d=a+1+2,m=1;this._wireframeSegments=[];for(let g=0,v=0;g<Od.length;g++){const w=Od[g];for(let R=m;R<w+m;R++)for(let z=m;z<a+m;z++){const Y=R*d+z;i.emplaceBack(Y,Y+1),i.emplaceBack(Y,Y+d),i.emplaceBack(Y,Y+d+1)}const E=w*a*3;this._wireframeSegments.push(Jo.simpleSegment(0,v,(w+1)*d,E)),v+=E}this._wireframeIndexBuffer=n.createIndexBuffer(i)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},o.GlyphManager=hd,o.ImagePosition=Al,o.KDBush=Zf,o.LivePerformanceUtils=yr,o.LngLat=qr,o.LngLatBounds=Rc,o.LocalGlyphMode=Tu,o.MAX_MERCATOR_LATITUDE=Er,o.MercatorCoordinate=Ku,o.ONE_EM=ra,o.OverscaledTileID=Is,o.PerformanceMarkers=Ai,o.Point=Ae,o.Properties=dt,o.RGBAImage=sl,o.Ray=Ap,o.RequestManager=class{constructor(n,e,i){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let i=0;i<10;i++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",jt,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!Pt(n))return n;const i=Jt(n);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!Pt(n))return n;const i=Jt(n);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeSourceURL(n,e,i,a){if(!Pt(n))return n;const d=Jt(n);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),i&&d.params.push(`language=${i}`),a&&d.params.push(`worldview=${a}`),this._makeAPIURL(d,this._customAccessToken||e)}normalizeSpriteURL(n,e,i,a){const d=Jt(n);return Pt(n)?(d.path=`/styles/v1${d.path}/sprite${e}${i}`,this._makeAPIURL(d,this._customAccessToken||a)):(d.path+=`${e}${i}`,Kt(d))}normalizeTileURL(n,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!Pt(n))return n;const a=Jt(n);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||i&&"raster"!==a.authority&&512===i?"@2x":""}${Ye.supported?".webp":"$1"}`),"raster"===a.authority?a.path=`/${ke.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${ke.TILE_URL_VERSION}${a.path}`);const d=this._customAccessToken||function(m){for(const g of m){const v=g.match(/^access_token=(.*)$/);if(v)return v[1]}return null}(a.params)||ke.ACCESS_TOKEN;return ke.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&a.params.push(`sku=${this._skuToken}`),this._makeAPIURL(a,d)}canonicalizeTileURL(n,e){const i=Jt(n);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return n;let a="mapbox://";i.path.match(/^\/raster\/v1\//)?a+=`raster/${i.path.replace(`/${ke.RASTER_URL_PREFIX}/`,"")}`:a+=`tiles/${i.path.replace(`/${ke.TILE_URL_VERSION}/`,"")}`;let d=i.params;return e&&(d=d.filter(m=>!m.match(/^access_token=/))),d.length&&(a+=`?${d.join("&")}`),a}canonicalizeTileset(n,e){const i=!!e&&Pt(e),a=[];for(const d of n.tiles||[])me(d)?a.push(this.canonicalizeTileURL(d,i)):a.push(d);return a}_makeAPIURL(n,e){const i="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",a=Jt(ke.API_URL);if(n.protocol=a.protocol,n.authority=a.authority,"http"===n.protocol){const d=n.params.indexOf("secure");d>=0&&n.params.splice(d,1)}if("/"!==a.path&&(n.path=`${a.path}${n.path}`),!ke.REQUIRE_ACCESS_TOKEN)return Kt(n);if(e=e||ke.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`)}return n.params=n.params.filter(d=>-1===d.indexOf("access_token")),n.params.push(`access_token=${e||""}`),Kt(n)}},o.ResourceType=re,o.SegmentVector=Jo,o.SourceCache=Ou,o.StencilMode=Jd,o.StructArrayLayout1ui2=fl,o.StructArrayLayout2f1f2i16=Li,o.StructArrayLayout2i4=Xn,o.StructArrayLayout2ui4=ta,o.StructArrayLayout3f12=lr,o.StructArrayLayout3ui6=Si,o.StructArrayLayout4i8=Nn,o.StructArrayLayout5f20=jr,o.Texture=Qc,o.Tile=sp,o.Transitionable=de,o.Uniform1f=Td,o.Uniform1i=class extends ml{constructor(n){super(n),this.current=0}set(n,e,i){this.fetchUniformLocation(n,e)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},o.Uniform2f=class extends ml{constructor(n){super(n),this.current=[0,0]}set(n,e,i){this.fetchUniformLocation(n,e)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}},o.Uniform3f=class extends ml{constructor(n){super(n),this.current=[0,0,0]}set(n,e,i){this.fetchUniformLocation(n,e)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}},o.Uniform4f=vp,o.UniformColor=am,o.UniformMatrix2f=class extends ml{constructor(n){super(n),this.current=cm}set(n,e,i){if(this.fetchUniformLocation(n,e))for(let a=0;a<4;a++)if(i[a]!==this.current[a]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}},o.UniformMatrix3f=class extends ml{constructor(n){super(n),this.current=Jg}set(n,e,i){if(this.fetchUniformLocation(n,e))for(let a=0;a<9;a++)if(i[a]!==this.current[a]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}},o.UniformMatrix4f=class extends ml{constructor(n){super(n),this.current=lm}set(n,e,i){if(this.fetchUniformLocation(n,e)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let a=1;a<16;a++)if(i[a]!==this.current[a]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}},o.UnwrappedTileID=Xm,o.ValidationError=In,o.VectorTileFeature=Rh,o.VectorTileWorkerSource=class extends wo{constructor(n,e,i,a,d){super(),this.actor=n,this.layerIndex=e,this.availableImages=i,this.loadVectorData=d||Rg,this.loading={},this.loaded={},this.deduped=new kg(n.scheduler),this.isSpriteLoaded=a,this.scheduler=n.scheduler}loadTile(n,e){const i=n.uid,a=n&&n.request,d=a&&a.collectResourceTiming,m=this.loading[i]=new Og(n);m.abort=this.loadVectorData(n,(g,v)=>{const w=!this.loading[i];if(delete this.loading[i],w||g||!v)return m.status="done",w||(this.loaded[i]=m),e(g);const E=v.rawData,R={};v.expires&&(R.expires=v.expires),v.cacheControl&&(R.cacheControl=v.cacheControl),m.vectorTile=v.vectorTile||new Zp(new jh(E));const z=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(Y,ne)=>{if(Y||!ne)return e(Y);const ae={};if(d){const ye=oo(a);ye.length>0&&(ae.resourceTiming=JSON.parse(JSON.stringify(ye)))}e(null,Yt({rawTileData:E.slice(0)},ne,R,ae))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[i]=m})}reloadTile(n,e){const i=this.loaded,a=n.uid,d=this;if(i&&i[a]){const m=i[a];m.showCollisionBoxes=n.showCollisionBoxes,m.enableTerrain=!!n.enableTerrain,m.projection=n.projection,m.tileTransform=Au(n.tileID.canonical,n.projection);const g=(v,w)=>{const E=m.reloadCallback;E&&(delete m.reloadCallback,m.parse(m.vectorTile,d.layerIndex,this.availableImages,d.actor,E)),e(v,w)};"parsing"===m.status?m.reloadCallback=g:"done"===m.status&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,g):g())}}abortTile(n,e){const i=n.uid,a=this.loading[i];a&&(a.abort&&a.abort(),delete this.loading[i]),e()}removeTile(n,e){const i=this.loaded,a=n.uid;i&&i[a]&&delete i[a],e()}},o.WritingMode=bl,o.ZoomDependentExpression=di,o.add=vc,o.addDynamicAttributes=Kd,o.adjoint=function(n,e){var i=e[0],a=e[1],d=e[2],m=e[3],g=e[4],v=e[5],w=e[6],E=e[7],R=e[8];return n[0]=g*R-v*E,n[1]=d*E-a*R,n[2]=a*v-d*g,n[3]=v*w-m*R,n[4]=i*R-d*w,n[5]=d*m-i*v,n[6]=m*E-g*w,n[7]=a*w-i*E,n[8]=i*g-a*m,n},o.asyncAll=vi,o.bezier=Dn,o.bindAll=Ot,o.boundsAttributes=Tg,o.bufferConvexPolygon=function(n,e){const i=[];for(let a=0;a<n.length;a++){const d=ii(a-1,-1,n.length-1),m=ii(a+1,-1,n.length-1),g=n[a],v=n[m],w=n[d].sub(g).unit(),E=v.sub(g).unit(),R=E.angleWithSep(w.x,w.y),z=w.add(E).unit().mult(-1*e/Math.sin(R/2));i.push(g.add(z))}return i},o.cacheEntryPossiblyAdded=function(n){ve++,ve>De&&(n.getActor().send("enforceCacheSizeLimit",ce),ve=0)},o.calculateGlobeLabelMatrix=function(n,e){const{x:i,y:a}=n.point,d=Op(i,a,n.worldSize/n._pixelsPerMercatorPixel,0,0);return Fc(d,d,hh(nc(e)))},o.calculateGlobeMatrix=function(n){const{x:e,y:i}=n.point,{lng:a,lat:d}=n._center;return Op(e,i,n.worldSize,a,d)},o.calculateGlobeMercatorMatrix=function(n){const e=n.pixelsPerMeter,i=e/rl(1,n.center.lat),a=Cl(new Float64Array(16));return pu(a,a,[n.point.x,n.point.y,0]),fu(a,a,[i,i,e]),Float32Array.from(a)},o.circumferenceAtLatitude=Fp,o.clamp=_n,o.clearTileCache=function(n){if(!Qe())return;const e=P.caches.delete(je);n&&e.catch(n).then(()=>n())},o.clipLine=hg,o.clone=function(n){var e=new nl(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},o.clone$1=kn,o.collisionCircleLayout=ig,o.config=ke,o.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},o.create=function(){var n=new nl(16);return nl!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},o.create$1=dm,o.createExpression=pn,o.createLayout=Xt,o.createStyleLayer=function(n){return"custom"===n.type?new ip(n):new rp[n.type](n)},o.cross=Id,o.degToRad=mt,o.distance=function(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])},o.div=function(n,e,i){return n[0]=e[0]/i[0],n[1]=e[1]/i[1],n[2]=e[2]/i[2],n},o.dot=yl,o.earthRadius=fh,o.ease=ti,o.easeCubicInOut=ln,o.ecefToLatLng=function([n,e,i]){const a=Math.hypot(n,e,i),d=Math.atan2(n,i),m=.5*Math.PI-Math.acos(-e/a);return new qr(Je(d),Je(m))},o.emitValidationErrors=Bu,o.endsWith=Re,o.enforceCacheSizeLimit=function(n){Te(),$e&&$e.then(e=>{e.keys().then(i=>{for(let a=0;a<i.length-n;a++)e.delete(i[a])})})},o.evaluateSizeForFeature=wc,o.evaluateSizeForZoom=Yc,o.evaluateVariableOffset=_g,o.evented=_,o.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},o.exactEquals$1=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},o.exported=gr,o.exported$1=Ye,o.extend=Yt,o.extend$1=at,o.fillExtrusionHeightLift=I_,o.filterObject=cn,o.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},o.fromQuat=function(n,e){var i=e[0],a=e[1],d=e[2],m=e[3],g=i+i,v=a+a,w=d+d,E=i*g,R=a*g,z=a*v,Y=d*g,ne=d*v,ae=d*w,ye=m*g,Be=m*v,rt=m*w;return n[0]=1-z-ae,n[1]=R+rt,n[2]=Y-Be,n[3]=0,n[4]=R-rt,n[5]=1-E-ae,n[6]=ne+ye,n[7]=0,n[8]=Y+Be,n[9]=ne-ye,n[10]=1-E-z,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},o.fromRotation=function(n,e){var i=Math.sin(e),a=Math.cos(e);return n[0]=a,n[1]=i,n[2]=0,n[3]=-i,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},o.fromScaling=Dp,o.furthestTileCorner=function(n){const e=Math.round((n+45+360)%360/90)%4;return qt[e]},o.getAABBPointSquareDist=function(n,e,i){let a=0;for(let d=0;d<2;++d){const m=i?i[d]:0;n[d]>m&&(a+=(n[d]-m)*(n[d]-m)),e[d]<m&&(a+=(m-e[d])*(m-e[d]))}return a},o.getAnchorAlignment=dg,o.getAnchorJustification=bf,o.getBounds=function(n){let e=1/0,i=1/0,a=-1/0,d=-1/0;for(const m of n)e=Math.min(e,m.x),i=Math.min(i,m.y),a=Math.max(a,m.x),d=Math.max(d,m.y);return{min:new Ae(e,i),max:new Ae(a,d)}},o.getColumn=li,o.getDefaultExportFromCjs=en,o.getGridMatrix=function(n,e,i,a){const d=e.getNorth(),m=e.getSouth(),g=e.getWest(),v=e.getEast(),w=1<<n.z,E=v-g,R=d-m,z=E/64,Y=-R/Od[i],ne=[0,z,0,Y,0,0,d,g,0];if(n.z>0){const ae=180/a;hm(ne,ne,[ae/E+1,0,0,0,ae/R+1,0,-.5*ae/z,.5*ae/Y,1])}return ne[2]=w,ne[5]=n.x,ne[8]=n.y,ne},o.getImage=Ke,o.getJSON=function(n,e){return Ut(Yt(n,{type:"json"}),e)},o.getLatitudinalLod=function(n){const e=Er-5;n=_n(n,-e,e)/e*90;const i=Math.pow(Math.abs(Math.sin(mt(n))),3);return Math.round(i*(Od.length-1))},o.getMapSessionAPI=rn,o.getPerformanceMeasurement=oo,o.getProjection=Ef,o.getRTLTextPluginStatus=b,o.getReferrer=Pe,o.getTilePoint=function(n,{x:e,y:i},a=0){return new Ae(((e-a)*n.scale-n.x)*ki,(i*n.scale-n.y)*ki)},o.getTileVec3=function(n,e,i=0){return yc(((e.x-i)*n.scale-n.x)*ki,(e.y*n.scale-n.y)*ki,Cm(e.z,e.y))},o.getVideo=function(n,e){const i=P.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let a=0;a<n.length;a++){const d=P.document.createElement("source");En(n[a])||(i.crossOrigin="Anonymous"),d.src=n[a],i.appendChild(d)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(n){const e=[0,0,0],i=Cl(new Float64Array(16));return Fc(i,n.pixelMatrix,n.globeMatrix),Uo(e,e,i),new Ae(e[0],e[1])},o.globeDenormalizeECEF=hh,o.globeECEFOrigin=function(n,e){const i=[0,0,0];return Uo(i,i,qu(nc(e.canonical))),Uo(i,i,n),i},o.globeMetersToEcef=Ml,o.globeNormalizeECEF=qu,o.globePixelsToTileUnits=function(n,e){return ki/(512*Math.pow(2,n))*Tl(nc(e))},o.globePoleMatrixForTile=function(n,e,i){const a=Cl(new Float64Array(16)),d=(e/(1<<n)-.5)*Math.PI*2;return Sd(a,i.globeMatrix,d),Float32Array.from(a)},o.globeTileBounds=nc,o.globeTiltAtLngLat=l_,o.globeToMercatorTransition=kd,o.globeUseCustomAntiAliasing=function(n,e,i){const a=kd(i.zoom),d=n.style.map._antialias,m=!!e.extStandardDerivatives,g=e.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return 0===a&&!d&&!g&&m},o.identity=Cl,o.identity$1=Pd,o.invert=Ad,o.isFullscreen=function(){return!!P.document.fullscreenElement||!!P.document.webkitFullscreenElement},o.isLngLatBehindGlobe=wm,o.isMapAuthenticated=function(n){return Gn.has(n)},o.isMapboxURL=Pt,o.isSafariWithAntialiasingBug=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!Fn(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Us,o.latLngToECEF=Wu,o.len=n_,o.length=oh,o.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},o.lngFromMercatorX=ol,o.loadVectorTile=Rg,o.makeRequest=Ut,o.mapValue=function(n,e,i,a,d){return _n((n-e)/(i-e)*(d-a)+a,a,d)},o.mercatorScale=Lp,o.mercatorXfromLng=ic,o.mercatorYfromLat=Vl,o.mercatorZfromAltitude=rl,o.mul=pm,o.mul$1=mm,o.multiply=Fc,o.multiply$1=hm,o.multiply$2=Mp,o.nextPowerOfTwo=Nt,o.normalize=ia,o.normalize$1=i_,o.normalize$2=_m,o.number=Yi,o.ortho=function(n,e,i,a,d,m,g){var v=1/(e-i),w=1/(a-d),E=1/(m-g);return n[0]=-2*v,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*w,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*E,n[11]=0,n[12]=(e+i)*v,n[13]=(d+a)*w,n[14]=(g+m)*E,n[15]=1,n},o.pbf=zh,o.perspective=function(n,e,i,a,d){var m,g=1/Math.tan(e/2);return n[0]=g/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=d&&d!==1/0?(n[10]=(d+a)*(m=1/(a-d)),n[14]=2*d*a*m):(n[10]=-1,n[14]=-2*a),n},o.pick=function(n,e){const i={};for(let a=0;a<e.length;a++){const d=e[a];d in n&&(i[d]=n[d])}return i},o.plugin=A,o.pointGeometry=Cn,o.polesInViewport=function(n){const e=Cl(new Float64Array(16));Fc(e,n.pixelMatrix,n.globeMatrix);const i=[0,El,0],a=[0,Dl,0];return Uo(i,i,e),Uo(a,a,e),[i[0]>0&&i[0]<=n.width&&i[1]>0&&i[1]<=n.height&&!wm(n,new qr(n.center.lat,90)),a[0]>0&&a[0]<=n.width&&a[1]>0&&a[1]<=n.height&&!wm(n,new qr(n.center.lat,-90))]},o.polygonContainsPoint=wu,o.polygonIntersectsBox=vh,o.polygonIntersectsPolygon=Vp,o.polygonizeBounds=function(n,e,i=0,a=!0){const d=new Ae(i,i),m=n.sub(d),g=e.add(d),v=[m,new Ae(g.x,m.y),g,new Ae(m.x,g.y)];return a&&v.push(m.clone()),v},o.posAttributes=_u,o.postMapLoadEvent=se,o.postPerformanceEvent=Fe,o.postTurnstileEvent=Rt,o.potpack=df,o.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},o.radToDeg=Je,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(n){return n({pluginStatus:u,pluginURL:t}),_.on("pluginStateChange",n),n},o.removeAuthState=function(n){Gn.delete(n)},o.renderColorRamp=Fd,o.resample=Bp,o.rotateX=Ep,o.rotateX$1=lh,o.rotateY=Sd,o.rotateY$1=gu,o.rotateZ=function(n,e,i){var a=Math.sin(i),d=Math.cos(i),m=e[0],g=e[1],v=e[2],w=e[3],E=e[4],R=e[5],z=e[6],Y=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=m*d+E*a,n[1]=g*d+R*a,n[2]=v*d+z*a,n[3]=w*d+Y*a,n[4]=E*d-m*a,n[5]=R*d-g*a,n[6]=z*d-v*a,n[7]=Y*d-w*a,n},o.rotateZ$1=function(n,e,i){i*=.5;var a=e[0],d=e[1],m=e[2],g=e[3],v=Math.sin(i),w=Math.cos(i);return n[0]=a*w+d*v,n[1]=d*w-a*v,n[2]=m*w+g*v,n[3]=g*w-m*v,n},o.scale=fu,o.scale$1=gm,o.scale$2=il,o.scaleAndAdd=Bc,o.set=function(n,e,i,a){return n[0]=e,n[1]=i,n[2]=a,n},o.setCacheLimits=function(n,e){ce=n,De=e},o.setColumn=function(n,e,i){n[4*e+0]=i[0],n[4*e+1]=i[1],n[4*e+2]=i[2],n[4*e+3]=i[3]},o.setRTLTextPlugin=function(n,e,i=!1){if(u===O||u===L||u===T)throw new Error("setRTLTextPlugin cannot be called multiple times.");t=gr.resolveURL(n),u=O,G=e,h(),i||D()},o.smoothstep=_i,o.spec=wn,o.squaredLength=function(n){var e=n[0],i=n[1],a=n[2];return e*e+i*i+a*a},o.storeAuthState=function(n,e){e?Gn.add(n):Gn.delete(n)},o.sub=Nl,o.subtract=sh,o.symbolSize=Hd,o.tileAABB=function(n,e,i,a,d,m,g,v,w){if("globe"===w.name)return function xm(n,e,i){const a=e/n.worldSize,d=n.globeMatrix;if(i.z<=1){const un=nc(i).getCorners();return bm(un,d,a),pa.fromPoints(un)}const m=dh(i),g=Pp(m);bm(g,d,a);const v=Number.MAX_VALUE,w=[-v,-v,-v],E=[v,v,v];if(m.contains(n.center)){for(const Kn of g)Gu(E,E,Kn),mu(w,w,Kn);w[2]=0;const un=n.point,Rn=[un.x*a,un.y*a,0];return Gu(E,E,Rn),mu(w,w,Rn),new pa(E,w)}const R=[d[12]*a,d[13]*a,d[14]*a],z=m.getCenter(),Y=_n(n.center.lat,-Er,Er),ne=_n(z.lat,-Er,Er),ae=ic(n.center.lng),ye=Vl(Y);let Be=ae-ic(z.lng);const rt=ye-Vl(ne);Be>.5?Be-=1:Be<-.5&&(Be+=1);let St=0;Math.abs(Be)>Math.abs(rt)?St=Be>=0?1:3:(St=rt>=0?0:2,Bc(R,R,[d[4]*a,d[5]*a,d[6]*a],-Math.sin(mt(rt>=0?m.getSouth():m.getNorth()))*zl));const ot=g[St],Dt=g[(St+1)%4],Bt=new a_(ot,Dt,R),Lt=[Ip(Bt,0)||ot[0],Ip(Bt,1)||ot[1],Ip(Bt,2)||ot[2]],gn=kd(n.zoom);if(gn>0){const un=function({x:Kn,y:vn,z:Vn},Un,Zn,ei,Pn){const ci=1/(1<<Vn);let bi=Kn*ci,pi=bi+ci,Ji=vn*ci,oi=Ji+ci,Oi=0;const Qi=(bi+pi)/2-ei;return Qi>.5?Oi=-1:Qi<-.5&&(Oi=1),bi=((bi+Oi)*Un-(ei*=Un))*Zn+ei,pi=((pi+Oi)*Un-ei)*Zn+ei,Ji=(Ji*Un-(Pn*=Un))*Zn+Pn,oi=(oi*Un-Pn)*Zn+Pn,[[bi,oi,0],[pi,oi,0],[pi,Ji,0],[bi,Ji,0]]}(i,e,n._pixelsPerMercatorPixel,ae,ye);for(let Kn=0;Kn<g.length;Kn++)xu(g[Kn],un[Kn],gn);const Rn=vc([],un[St],un[(St+1)%4]);il(Rn,Rn,.5),xu(Lt,Rn,gn)}for(const un of g)Gu(E,E,un),mu(w,w,un);return E[2]=Math.min(ot[2],Dt[2]),Gu(E,E,Lt),mu(w,w,Lt),new pa(E,w)}(n,e,new qp(i,a,d));const E=Au({z:i,x:a,y:d},w);return new pa([(m+E.x/E.scale)*e,e*(E.y/E.scale),g],[(m+E.x2/E.scale)*e,e*(E.y2/E.scale),v])},o.tileCornersToBounds=dh,o.tileTransform=Au,o.transformMat3=function(n,e,i){var a=e[0],d=e[1],m=e[2];return n[0]=a*i[0]+d*i[3]+m*i[6],n[1]=a*i[1]+d*i[4]+m*i[7],n[2]=a*i[2]+d*i[5]+m*i[8],n},o.transformMat4=Uo,o.transformMat4$1=Nc,o.transformQuat=ah,o.transitionTileAABBinECEF=vm,o.translate=pu,o.transpose=function(n,e){if(n===e){var i=e[1],a=e[2],d=e[5];n[1]=e[3],n[2]=e[6],n[3]=i,n[5]=e[7],n[6]=a,n[7]=d}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},o.triggerPluginCompletionEvent=l,o.uniqueId=ze,o.updateGlobeVertexNormal=function(n,e,i,a,d){const m=5*e+2;n.float32[m+0]=i,n.float32[m+1]=a,n.float32[m+2]=d},o.validateCustomStyleLayer=function(n){const e=[],i=n.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===n.render&&e.push({message:`layers.${i}: missing required method "render"`}),n.renderingMode&&"2d"!==n.renderingMode&&"3d"!==n.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},o.validateFilter=n=>Va(xo(n)),o.validateFog=n=>Va(or(n)),o.validateLayer=n=>Va(k(n)),o.validateLight=n=>Va(ui(n)),o.validateSource=n=>Va(At(n)),o.validateStyle=Oc,o.validateTerrain=n=>Va(Gi(n)),o.values=Ii,o.vectorTile=kh,o.version=st,o.warnOnce=Mn,o.window=P,o.wrap=ii}),j(0,function(o){function P(Ue){if("number"==typeof Ue||"boolean"==typeof Ue||"string"==typeof Ue||null==Ue)return JSON.stringify(Ue);if(Array.isArray(Ue)){let Ce="[";for(const Ke of Ue)Ce+=`${P(Ke)},`;return`${Ce}]`}let ue="{";for(const Ce of Object.keys(Ue).sort())ue+=`${Ce}:${P(Ue[Ce])},`;return`${ue}}`}function st(Ue){let ue="";for(const Ce of o.refProperties)ue+=`/${P(Ue[Ce])}`;return ue}class _t{constructor(ue){this.keyCache={},ue&&this.replace(ue)}replace(ue){this._layerConfigs={},this._layers={},this.update(ue,[])}update(ue,Ce){for(const bt of ue)this._layerConfigs[bt.id]=bt,(this._layers[bt.id]=o.createStyleLayer(bt)).compileFilter(),this.keyCache[bt.id]&&delete this.keyCache[bt.id];for(const bt of Ce)delete this.keyCache[bt],delete this._layerConfigs[bt],delete this._layers[bt];this.familiesBySource={};const Ke=function(bt,Pt){const me={};for(let U=0;U<bt.length;U++){const we=Pt&&Pt[bt[U].id]||st(bt[U]);Pt&&(Pt[bt[U].id]=we);let nt=me[we];nt||(nt=me[we]=[]),nt.push(bt[U])}const ee=[];for(const U in me)ee.push(me[U]);return ee}(o.values(this._layerConfigs),this.keyCache);for(const bt of Ke){const Pt=bt.map(Jt=>this._layers[Jt.id]),me=Pt[0];if("none"===me.visibility)continue;const ee=me.source||"";let U=this.familiesBySource[ee];U||(U=this.familiesBySource[ee]={});const we=me.sourceLayer||"_geojsonTileLayer";let nt=U[we];nt||(nt=U[we]=[]),nt.push(Pt)}}}class ke{loadTile(ue,Ce){const{uid:Ke,encoding:bt,rawImageData:Pt,padding:me,buildQuadTree:ee}=ue,U=o.window.ImageBitmap&&Pt instanceof o.window.ImageBitmap?this.getImageData(Pt,me):Pt;Ce(null,new o.DEMData(Ke,U,bt,me<1,ee))}getImageData(ue,Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ue.width,ue.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ue.width,this.offscreenCanvas.height=ue.height,this.offscreenCanvasContext.drawImage(ue,0,0,ue.width,ue.height);const Ke=this.offscreenCanvasContext.getImageData(-Ce,-Ce,ue.width+2*Ce,ue.height+2*Ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Ke}}function Ye(Ue,ue){if(0!==Ue.length){lt(Ue[0],ue);for(var Ce=1;Ce<Ue.length;Ce++)lt(Ue[Ce],!ue)}}function lt(Ue,ue){for(var Ce=0,Ke=0,bt=0,Pt=Ue.length,me=Pt-1;bt<Pt;me=bt++){var ee=(Ue[bt][0]-Ue[me][0])*(Ue[me][1]+Ue[bt][1]),U=Ce+ee;Ke+=Math.abs(Ce)>=Math.abs(ee)?Ce-U+ee:ee-U+Ce,Ce=U}Ce+Ke>=0!=!!ue&&Ue.reverse()}var wt=o.getDefaultExportFromCjs(function Ue(ue,Ce){var Ke,bt=ue&&ue.type;if("FeatureCollection"===bt)for(Ke=0;Ke<ue.features.length;Ke++)Ue(ue.features[Ke],Ce);else if("GeometryCollection"===bt)for(Ke=0;Ke<ue.geometries.length;Ke++)Ue(ue.geometries[Ke],Ce);else if("Feature"===bt)Ue(ue.geometry,Ce);else if("Polygon"===bt)Ye(ue.coordinates,Ce);else if("MultiPolygon"===bt)for(Ke=0;Ke<ue.coordinates.length;Ke++)Ye(ue.coordinates[Ke],Ce);return ue});const it=o.VectorTileFeature.prototype.toGeoJSON;var yt={exports:{}},pt=o.pointGeometry,jt=o.vectorTile.VectorTileFeature,en=Ct;function Ct(Ue,ue){this.options=ue||{},this.features=Ue,this.length=Ue.length}function nn(Ue,ue){this.id="number"==typeof Ue.id?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=1===Ue.type?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=ue||4096}Ct.prototype.feature=function(Ue){return new nn(this.features[Ue],this.options.extent)},nn.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var ue=0;ue<Ue.length;ue++){for(var Ce=Ue[ue],Ke=[],bt=0;bt<Ce.length;bt++)Ke.push(new pt(Ce[bt][0],Ce[bt][1]));this.geometry.push(Ke)}return this.geometry},nn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,ue=1/0,Ce=-1/0,Ke=1/0,bt=-1/0,Pt=0;Pt<Ue.length;Pt++)for(var me=Ue[Pt],ee=0;ee<me.length;ee++){var U=me[ee];ue=Math.min(ue,U.x),Ce=Math.max(Ce,U.x),Ke=Math.min(Ke,U.y),bt=Math.max(bt,U.y)}return[ue,Ke,Ce,bt]},nn.prototype.toGeoJSON=jt.prototype.toGeoJSON;var sn=o.pbf,Cn=en;function kt(Ue){var ue=new sn;return function(Ce,Ke){for(var bt in Ce.layers)Ke.writeMessage(3,Ae,Ce.layers[bt])}(Ue,ue),ue.finish()}function Ae(Ue,ue){var Ce;ue.writeVarintField(15,Ue.version||1),ue.writeStringField(1,Ue.name||""),ue.writeVarintField(5,Ue.extent||4096);var Ke={keys:[],values:[],keycache:{},valuecache:{}};for(Ce=0;Ce<Ue.length;Ce++)Ke.feature=Ue.feature(Ce),ue.writeMessage(2,ct,Ke);var bt=Ke.keys;for(Ce=0;Ce<bt.length;Ce++)ue.writeStringField(3,bt[Ce]);var Pt=Ke.values;for(Ce=0;Ce<Pt.length;Ce++)ue.writeMessage(4,ln,Pt[Ce])}function ct(Ue,ue){var Ce=Ue.feature;void 0!==Ce.id&&ue.writeVarintField(1,Ce.id),ue.writeMessage(2,ht,Ue),ue.writeVarintField(3,Ce.type),ue.writeMessage(4,qt,Ce)}function ht(Ue,ue){var Ce=Ue.feature,Ke=Ue.keys,bt=Ue.values,Pt=Ue.keycache,me=Ue.valuecache;for(var ee in Ce.properties){var U=Ce.properties[ee],we=Pt[ee];if(null!==U){void 0===we&&(Ke.push(ee),Pt[ee]=we=Ke.length-1),ue.writeVarint(we);var nt=typeof U;"string"!==nt&&"boolean"!==nt&&"number"!==nt&&(U=JSON.stringify(U));var Jt=nt+":"+U,Kt=me[Jt];void 0===Kt&&(bt.push(U),me[Jt]=Kt=bt.length-1),ue.writeVarint(Kt)}}}function mt(Ue,ue){return(ue<<3)+(7&Ue)}function Je(Ue){return Ue<<1^Ue>>31}function qt(Ue,ue){for(var Ce=Ue.loadGeometry(),Ke=Ue.type,bt=0,Pt=0,me=Ce.length,ee=0;ee<me;ee++){var U=Ce[ee],we=1;1===Ke&&(we=U.length),ue.writeVarint(mt(1,we));for(var nt=3===Ke?U.length-1:U.length,Jt=0;Jt<nt;Jt++){1===Jt&&1!==Ke&&ue.writeVarint(mt(2,nt-1));var Kt=U[Jt].x-bt,Yn=U[Jt].y-Pt;ue.writeVarint(Je(Kt)),ue.writeVarint(Je(Yn)),bt+=Kt,Pt+=Yn}3===Ke&&ue.writeVarint(mt(7,1))}}function ln(Ue,ue){var Ce=typeof Ue;"string"===Ce?ue.writeStringField(1,Ue):"boolean"===Ce?ue.writeBooleanField(7,Ue):"number"===Ce&&(Ue%1!=0?ue.writeDoubleField(3,Ue):Ue<0?ue.writeSVarintField(6,Ue):ue.writeVarintField(5,Ue))}yt.exports=kt,yt.exports.fromVectorTileJs=kt,yt.exports.fromGeojsonVt=function(Ue,ue){ue=ue||{};var Ce={};for(var Ke in Ue)Ce[Ke]=new Cn(Ue[Ke].features,ue),Ce[Ke].name=Ke,Ce[Ke].version=ue.version,Ce[Ke].extent=ue.extent;return kt({layers:Ce})},yt.exports.GeoJSONWrapper=Cn;var Dn=o.getDefaultExportFromCjs(yt.exports);const ti={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},_n=Math.fround||(_i=new Float32Array(1),Ue=>(_i[0]=+Ue,_i[0]));var _i;const ii=3,vi=5,Ii=6;class Yt{constructor(ue){this.options=Object.assign(Object.create(ti),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:Ce,minZoom:Ke,maxZoom:bt}=this.options;Ce&&console.time("total time");const Pt=`prepare ${ue.length} points`;Ce&&console.time(Pt),this.points=ue;const me=[];for(let U=0;U<ue.length;U++){const we=ue[U];if(!we.geometry)continue;const[nt,Jt]=we.geometry.coordinates,Kt=_n(Ge(nt)),Yn=_n(Nt(Jt));me.push(Kt,Yn,1/0,U,-1,1),this.options.reduce&&me.push(0)}let ee=this.trees[bt+1]=this._createTree(me);Ce&&console.timeEnd(Pt);for(let U=bt;U>=Ke;U--){const we=+Date.now();ee=this.trees[U]=this._createTree(this._cluster(ee,U)),Ce&&console.log("z%d: %d clusters in %dms",U,ee.numItems,+Date.now()-we)}return Ce&&console.timeEnd("total time"),this}getClusters(ue,Ce){let Ke=((ue[0]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,ue[1]));let Pt=180===ue[2]?180:((ue[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)Ke=-180,Pt=180;else if(Ke>Pt){const Jt=this.getClusters([Ke,bt,180,me],Ce),Kt=this.getClusters([-180,bt,Pt,me],Ce);return Jt.concat(Kt)}const ee=this.trees[this._limitZoom(Ce)],U=ee.range(Ge(Ke),Nt(me),Ge(Pt),Nt(bt)),we=ee.data,nt=[];for(const Jt of U){const Kt=this.stride*Jt;nt.push(we[Kt+vi]>1?Zt(we,Kt,this.clusterProps):this.points[we[Kt+ii]])}return nt}getChildren(ue){const Ce=this._getOriginId(ue),Ke=this._getOriginZoom(ue),bt="No cluster with the specified id.",Pt=this.trees[Ke];if(!Pt)throw new Error(bt);const me=Pt.data;if(Ce*this.stride>=me.length)throw new Error(bt);const ee=this.options.radius/(this.options.extent*Math.pow(2,Ke-1)),U=Pt.within(me[Ce*this.stride],me[Ce*this.stride+1],ee),we=[];for(const nt of U){const Jt=nt*this.stride;me[Jt+4]===ue&&we.push(me[Jt+vi]>1?Zt(me,Jt,this.clusterProps):this.points[me[Jt+ii]])}if(0===we.length)throw new Error(bt);return we}getLeaves(ue,Ce,Ke){const bt=[];return this._appendLeaves(bt,ue,Ce=Ce||10,Ke=Ke||0,0),bt}getTile(ue,Ce,Ke){const bt=this.trees[this._limitZoom(ue)],Pt=Math.pow(2,ue),{extent:me,radius:ee}=this.options,U=ee/me,we=(Ke-U)/Pt,nt=(Ke+1+U)/Pt,Jt={features:[]};return this._addTileFeatures(bt.range((Ce-U)/Pt,we,(Ce+1+U)/Pt,nt),bt.data,Ce,Ke,Pt,Jt),0===Ce&&this._addTileFeatures(bt.range(1-U/Pt,we,1,nt),bt.data,Pt,Ke,Pt,Jt),Ce===Pt-1&&this._addTileFeatures(bt.range(0,we,U/Pt,nt),bt.data,-1,Ke,Pt,Jt),Jt.features.length?Jt:null}getClusterExpansionZoom(ue){let Ce=this._getOriginZoom(ue)-1;for(;Ce<=this.options.maxZoom;){const Ke=this.getChildren(ue);if(Ce++,1!==Ke.length)break;ue=Ke[0].properties.cluster_id}return Ce}_appendLeaves(ue,Ce,Ke,bt,Pt){const me=this.getChildren(Ce);for(const ee of me){const U=ee.properties;if(U&&U.cluster?Pt+U.point_count<=bt?Pt+=U.point_count:Pt=this._appendLeaves(ue,U.cluster_id,Ke,bt,Pt):Pt<bt?Pt++:ue.push(ee),ue.length===Ke)break}return Pt}_createTree(ue){const Ce=new o.KDBush(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ke=0;Ke<ue.length;Ke+=this.stride)Ce.add(ue[Ke],ue[Ke+1]);return Ce.finish(),Ce.data=ue,Ce}_addTileFeatures(ue,Ce,Ke,bt,Pt,me){for(const ee of ue){const U=ee*this.stride,we=Ce[U+vi]>1;let nt,Jt,Kt;if(we)nt=ze(Ce,U,this.clusterProps),Jt=Ce[U],Kt=Ce[U+1];else{const ri=this.points[Ce[U+ii]];nt=ri.properties;const[zn,Rt]=ri.geometry.coordinates;Jt=Ge(zn),Kt=Nt(Rt)}const Yn={type:1,geometry:[[Math.round(this.options.extent*(Jt*Pt-Ke)),Math.round(this.options.extent*(Kt*Pt-bt))]],tags:nt};let Hn;Hn=we||this.options.generateId?Ce[U+ii]:this.points[Ce[U+ii]].id,void 0!==Hn&&(Yn.id=Hn),me.features.push(Yn)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,Ce){const{radius:Ke,extent:bt,reduce:Pt,minPoints:me}=this.options,ee=Ke/(bt*Math.pow(2,Ce)),U=ue.data,we=[],nt=this.stride;for(let Jt=0;Jt<U.length;Jt+=nt){if(U[Jt+2]<=Ce)continue;U[Jt+2]=Ce;const Kt=U[Jt],Yn=U[Jt+1],Hn=ue.within(U[Jt],U[Jt+1],ee),ri=U[Jt+vi];let zn=ri;for(const Rt of Hn){const Ee=Rt*nt;U[Ee+2]>Ce&&(zn+=U[Ee+vi])}if(zn>ri&&zn>=me){let Rt,Ee=Kt*ri,se=Yn*ri,le=-1;const Fe=((Jt/nt|0)<<5)+(Ce+1)+this.points.length;for(const Et of Hn){const rn=Et*nt;if(U[rn+2]<=Ce)continue;U[rn+2]=Ce;const Gn=U[rn+vi];Ee+=U[rn]*Gn,se+=U[rn+1]*Gn,U[rn+4]=Fe,Pt&&(Rt||(Rt=this._map(U,Jt,!0),le=this.clusterProps.length,this.clusterProps.push(Rt)),Pt(Rt,this._map(U,rn)))}U[Jt+4]=Fe,we.push(Ee/zn,se/zn,1/0,Fe,-1,zn),Pt&&we.push(le)}else{for(let Rt=0;Rt<nt;Rt++)we.push(U[Jt+Rt]);if(zn>1)for(const Rt of Hn){const Ee=Rt*nt;if(!(U[Ee+2]<=Ce)){U[Ee+2]=Ce;for(let se=0;se<nt;se++)we.push(U[Ee+se])}}}}return we}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,Ce,Ke){if(ue[Ce+vi]>1){const me=this.clusterProps[ue[Ce+Ii]];return Ke?Object.assign({},me):me}const bt=this.points[ue[Ce+ii]].properties,Pt=this.options.map(bt);return Ke&&Pt===bt?Object.assign({},Pt):Pt}}function Zt(Ue,ue,Ce){return{type:"Feature",id:Ue[ue+ii],properties:ze(Ue,ue,Ce),geometry:{type:"Point",coordinates:[(Ke=Ue[ue],360*(Ke-.5)),We(Ue[ue+1])]}};var Ke}function ze(Ue,ue,Ce){const Ke=Ue[ue+vi],bt=Ke>=1e4?`${Math.round(Ke/1e3)}k`:Ke>=1e3?Math.round(Ke/100)/10+"k":Ke,Pt=Ue[ue+Ii],me=-1===Pt?{}:Object.assign({},Ce[Pt]);return Object.assign(me,{cluster:!0,cluster_id:Ue[ue+ii],point_count:Ke,point_count_abbreviated:bt})}function Ge(Ue){return Ue/360+.5}function Nt(Ue){const ue=Math.sin(Ue*Math.PI/180),Ce=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function We(Ue){const ue=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function Ot(Ue,ue,Ce,Ke){for(var bt,Pt=Ke,me=Ce-ue>>1,ee=Ce-ue,U=Ue[ue],we=Ue[ue+1],nt=Ue[Ce],Jt=Ue[Ce+1],Kt=ue+3;Kt<Ce;Kt+=3){var Yn=Re(Ue[Kt],Ue[Kt+1],U,we,nt,Jt);if(Yn>Pt)bt=Kt,Pt=Yn;else if(Yn===Pt){var Hn=Math.abs(Kt-me);Hn<ee&&(bt=Kt,ee=Hn)}}Pt>Ke&&(bt-ue>3&&Ot(Ue,ue,bt,Ke),Ue[bt+2]=Pt,Ce-bt>3&&Ot(Ue,bt,Ce,Ke))}function Re(Ue,ue,Ce,Ke,bt,Pt){var me=bt-Ce,ee=Pt-Ke;if(0!==me||0!==ee){var U=((Ue-Ce)*me+(ue-Ke)*ee)/(me*me+ee*ee);U>1?(Ce=bt,Ke=Pt):U>0&&(Ce+=me*U,Ke+=ee*U)}return(me=Ue-Ce)*me+(ee=ue-Ke)*ee}function ft(Ue,ue,Ce,Ke){var bt={id:void 0===Ue?null:Ue,type:ue,geometry:Ce,tags:Ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pt){var me=Pt.geometry,ee=Pt.type;if("Point"===ee||"MultiPoint"===ee||"LineString"===ee)cn(Pt,me);else if("Polygon"===ee||"MultiLineString"===ee)for(var U=0;U<me.length;U++)cn(Pt,me[U]);else if("MultiPolygon"===ee)for(U=0;U<me.length;U++)for(var we=0;we<me[U].length;we++)cn(Pt,me[U][we])}(bt),bt}function cn(Ue,ue){for(var Ce=0;Ce<ue.length;Ce+=3)Ue.minX=Math.min(Ue.minX,ue[Ce]),Ue.minY=Math.min(Ue.minY,ue[Ce+1]),Ue.maxX=Math.max(Ue.maxX,ue[Ce]),Ue.maxY=Math.max(Ue.maxY,ue[Ce+1])}function kn(Ue,ue,Ce,Ke){if(ue.geometry){var bt=ue.geometry.coordinates,Pt=ue.geometry.type,me=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2),ee=[],U=ue.id;if(Ce.promoteId?U=ue.properties[Ce.promoteId]:Ce.generateId&&(U=Ke||0),"Point"===Pt)an(bt,ee);else if("MultiPoint"===Pt)for(var we=0;we<bt.length;we++)an(bt[we],ee);else if("LineString"===Pt)Mn(bt,ee,me,!1);else if("MultiLineString"===Pt){if(Ce.lineMetrics){for(we=0;we<bt.length;we++)Mn(bt[we],ee=[],me,!1),Ue.push(ft(U,"LineString",ee,ue.properties));return}Gt(bt,ee,me,!1)}else if("Polygon"===Pt)Gt(bt,ee,me,!0);else{if("MultiPolygon"!==Pt){if("GeometryCollection"===Pt){for(we=0;we<ue.geometry.geometries.length;we++)kn(Ue,{id:U,geometry:ue.geometry.geometries[we],properties:ue.properties},Ce,Ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<bt.length;we++){var nt=[];Gt(bt[we],nt,me,!0),ee.push(nt)}}Ue.push(ft(U,Pt,ee,ue.properties))}}function an(Ue,ue){ue.push(On(Ue[0])),ue.push(xt(Ue[1])),ue.push(0)}function Mn(Ue,ue,Ce,Ke){for(var bt,Pt,me=0,ee=0;ee<Ue.length;ee++){var U=On(Ue[ee][0]),we=xt(Ue[ee][1]);ue.push(U),ue.push(we),ue.push(0),ee>0&&(me+=Ke?(bt*we-U*Pt)/2:Math.sqrt(Math.pow(U-bt,2)+Math.pow(we-Pt,2))),bt=U,Pt=we}var nt=ue.length-3;ue[2]=1,Ot(ue,0,nt,Ce),ue[nt+2]=1,ue.size=Math.abs(me),ue.start=0,ue.end=ue.size}function Gt(Ue,ue,Ce,Ke){for(var bt=0;bt<Ue.length;bt++){var Pt=[];Mn(Ue[bt],Pt,Ce,Ke),ue.push(Pt)}}function On(Ue){return Ue/360+.5}function xt(Ue){var ue=Math.sin(Ue*Math.PI/180),Ce=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function zt(Ue,ue,Ce,Ke,bt,Pt,me,ee){if(Ke/=ue,Pt>=(Ce/=ue)&&me<Ke)return Ue;if(me<Ce||Pt>=Ke)return null;for(var U=[],we=0;we<Ue.length;we++){var nt=Ue[we],Jt=nt.geometry,Kt=nt.type,Yn=0===bt?nt.minX:nt.minY,Hn=0===bt?nt.maxX:nt.maxY;if(Yn>=Ce&&Hn<Ke)U.push(nt);else if(!(Hn<Ce||Yn>=Ke)){var ri=[];if("Point"===Kt||"MultiPoint"===Kt)Wn(Jt,ri,Ce,Ke,bt);else if("LineString"===Kt)Fn(Jt,ri,Ce,Ke,bt,!1,ee.lineMetrics);else if("MultiLineString"===Kt)li(Jt,ri,Ce,Ke,bt,!1);else if("Polygon"===Kt)li(Jt,ri,Ce,Ke,bt,!0);else if("MultiPolygon"===Kt)for(var zn=0;zn<Jt.length;zn++){var Rt=[];li(Jt[zn],Rt,Ce,Ke,bt,!0),Rt.length&&ri.push(Rt)}if(ri.length){if(ee.lineMetrics&&"LineString"===Kt){for(zn=0;zn<ri.length;zn++)U.push(ft(nt.id,Kt,ri[zn],nt.tags));continue}"LineString"!==Kt&&"MultiLineString"!==Kt||(1===ri.length?(Kt="LineString",ri=ri[0]):Kt="MultiLineString"),"Point"!==Kt&&"MultiPoint"!==Kt||(Kt=3===ri.length?"Point":"MultiPoint"),U.push(ft(nt.id,Kt,ri,nt.tags))}}}return U.length?U:null}function Wn(Ue,ue,Ce,Ke,bt){for(var Pt=0;Pt<Ue.length;Pt+=3){var me=Ue[Pt+bt];me>=Ce&&me<=Ke&&(ue.push(Ue[Pt]),ue.push(Ue[Pt+1]),ue.push(Ue[Pt+2]))}}function Fn(Ue,ue,Ce,Ke,bt,Pt,me){for(var ee,U,we=It(Ue),nt=0===bt?ce:De,Jt=Ue.start,Kt=0;Kt<Ue.length-3;Kt+=3){var Yn=Ue[Kt],Hn=Ue[Kt+1],ri=Ue[Kt+2],zn=Ue[Kt+3],Rt=Ue[Kt+4],Ee=0===bt?Yn:Hn,se=0===bt?zn:Rt,le=!1;me&&(ee=Math.sqrt(Math.pow(Yn-zn,2)+Math.pow(Hn-Rt,2))),Ee<Ce?se>Ce&&(U=nt(we,Yn,Hn,zn,Rt,Ce),me&&(we.start=Jt+ee*U)):Ee>Ke?se<Ke&&(U=nt(we,Yn,Hn,zn,Rt,Ke),me&&(we.start=Jt+ee*U)):je(we,Yn,Hn,ri),se<Ce&&Ee>=Ce&&(U=nt(we,Yn,Hn,zn,Rt,Ce),le=!0),se>Ke&&Ee<=Ke&&(U=nt(we,Yn,Hn,zn,Rt,Ke),le=!0),!Pt&&le&&(me&&(we.end=Jt+ee*U),ue.push(we),we=It(Ue)),me&&(Jt+=ee)}var Fe=Ue.length-3;Yn=Ue[Fe],Hn=Ue[Fe+1],ri=Ue[Fe+2],(Ee=0===bt?Yn:Hn)>=Ce&&Ee<=Ke&&je(we,Yn,Hn,ri),Fe=we.length-3,Pt&&Fe>=3&&(we[Fe]!==we[0]||we[Fe+1]!==we[1])&&je(we,we[0],we[1],we[2]),we.length&&ue.push(we)}function It(Ue){var ue=[];return ue.size=Ue.size,ue.start=Ue.start,ue.end=Ue.end,ue}function li(Ue,ue,Ce,Ke,bt,Pt){for(var me=0;me<Ue.length;me++)Fn(Ue[me],ue,Ce,Ke,bt,Pt,!1)}function je(Ue,ue,Ce,Ke){Ue.push(ue),Ue.push(Ce),Ue.push(Ke)}function ce(Ue,ue,Ce,Ke,bt,Pt){var me=(Pt-ue)/(Ke-ue);return Ue.push(Pt),Ue.push(Ce+(bt-Ce)*me),Ue.push(1),me}function De(Ue,ue,Ce,Ke,bt,Pt){var me=(Pt-Ce)/(bt-Ce);return Ue.push(ue+(Ke-ue)*me),Ue.push(Pt),Ue.push(1),me}function $e(Ue,ue){for(var Ce=[],Ke=0;Ke<Ue.length;Ke++){var bt,Pt=Ue[Ke],me=Pt.type;if("Point"===me||"MultiPoint"===me||"LineString"===me)bt=Ft(Pt.geometry,ue);else if("MultiLineString"===me||"Polygon"===me){bt=[];for(var ee=0;ee<Pt.geometry.length;ee++)bt.push(Ft(Pt.geometry[ee],ue))}else if("MultiPolygon"===me)for(bt=[],ee=0;ee<Pt.geometry.length;ee++){for(var U=[],we=0;we<Pt.geometry[ee].length;we++)U.push(Ft(Pt.geometry[ee][we],ue));bt.push(U)}Ce.push(ft(Pt.id,me,bt,Pt.tags))}return Ce}function Ft(Ue,ue){var Ce=[];Ce.size=Ue.size,void 0!==Ue.start&&(Ce.start=Ue.start,Ce.end=Ue.end);for(var Ke=0;Ke<Ue.length;Ke+=3)Ce.push(Ue[Ke]+ue,Ue[Ke+1],Ue[Ke+2]);return Ce}function Qe(Ue,ue){if(Ue.transformed)return Ue;var Ce,Ke,bt,Pt=1<<Ue.z,me=Ue.x,ee=Ue.y;for(Ce=0;Ce<Ue.features.length;Ce++){var U=Ue.features[Ce],we=U.geometry,nt=U.type;if(U.geometry=[],1===nt)for(Ke=0;Ke<we.length;Ke+=2)U.geometry.push(Te(we[Ke],we[Ke+1],ue,Pt,me,ee));else for(Ke=0;Ke<we.length;Ke++){var Jt=[];for(bt=0;bt<we[Ke].length;bt+=2)Jt.push(Te(we[Ke][bt],we[Ke][bt+1],ue,Pt,me,ee));U.geometry.push(Jt)}}return Ue.transformed=!0,Ue}function Te(Ue,ue,Ce,Ke,bt,Pt){return[Math.round(Ce*(Ue*Ke-bt)),Math.round(Ce*(ue*Ke-Pt))]}function xe(Ue,ue,Ce,Ke,bt){for(var Pt=ue===bt.maxZoom?0:bt.tolerance/((1<<ue)*bt.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ce,y:Ke,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ee=0;ee<Ue.length;ee++){me.numFeatures++,ve(me,Ue[ee],Pt,bt);var U=Ue[ee].minX,we=Ue[ee].minY,nt=Ue[ee].maxX,Jt=Ue[ee].maxY;U<me.minX&&(me.minX=U),we<me.minY&&(me.minY=we),nt>me.maxX&&(me.maxX=nt),Jt>me.maxY&&(me.maxY=Jt)}return me}function ve(Ue,ue,Ce,Ke){var bt=ue.geometry,Pt=ue.type,me=[];if("Point"===Pt||"MultiPoint"===Pt)for(var ee=0;ee<bt.length;ee+=3)me.push(bt[ee]),me.push(bt[ee+1]),Ue.numPoints++,Ue.numSimplified++;else if("LineString"===Pt)re(me,bt,Ue,Ce,!1,!1);else if("MultiLineString"===Pt||"Polygon"===Pt)for(ee=0;ee<bt.length;ee++)re(me,bt[ee],Ue,Ce,"Polygon"===Pt,0===ee);else if("MultiPolygon"===Pt)for(var U=0;U<bt.length;U++){var we=bt[U];for(ee=0;ee<we.length;ee++)re(me,we[ee],Ue,Ce,!0,0===ee)}if(me.length){var nt=ue.tags||null;if("LineString"===Pt&&Ke.lineMetrics){for(var Jt in nt={},ue.tags)nt[Jt]=ue.tags[Jt];nt.mapbox_clip_start=bt.start/bt.size,nt.mapbox_clip_end=bt.end/bt.size}var Kt={geometry:me,type:"Polygon"===Pt||"MultiPolygon"===Pt?3:"LineString"===Pt||"MultiLineString"===Pt?2:1,tags:nt};null!==ue.id&&(Kt.id=ue.id),Ue.features.push(Kt)}}function re(Ue,ue,Ce,Ke,bt,Pt){var me=Ke*Ke;if(Ke>0&&ue.size<(bt?me:Ke))Ce.numPoints+=ue.length/3;else{for(var ee=[],U=0;U<ue.length;U+=3)(0===Ke||ue[U+2]>me)&&(Ce.numSimplified++,ee.push(ue[U]),ee.push(ue[U+1])),Ce.numPoints++;bt&&function(we,nt){for(var Jt=0,Kt=0,Yn=we.length,Hn=Yn-2;Kt<Yn;Hn=Kt,Kt+=2)Jt+=(we[Kt]-we[Hn])*(we[Kt+1]+we[Hn+1]);if(Jt>0===nt)for(Kt=0,Yn=we.length;Kt<Yn/2;Kt+=2){var ri=we[Kt],zn=we[Kt+1];we[Kt]=we[Yn-2-Kt],we[Kt+1]=we[Yn-1-Kt],we[Yn-2-Kt]=ri,we[Yn-1-Kt]=zn}}(ee,Pt),Ue.push(ee)}}function Me(Ue,ue){var Ce=(ue=this.options=function(bt,Pt){for(var me in Pt)bt[me]=Pt[me];return bt}(Object.create(this.options),ue)).debug;if(Ce&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");var bt,Pt,me,ee,U,we,Ke=function(bt,Pt){var me=[];if("FeatureCollection"===bt.type)for(var ee=0;ee<bt.features.length;ee++)kn(me,bt.features[ee],Pt,ee);else kn(me,"Feature"===bt.type?bt:{geometry:bt},Pt);return me}(Ue,ue);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ee=bt=Ke,U=zt(bt,1,-1-(me=(Pt=ue).buffer/Pt.extent),me,0,-1,2,Pt),we=zt(bt,1,1-me,2+me,0,-1,2,Pt),(U||we)&&(ee=zt(bt,1,-me,1+me,0,-1,2,Pt)||[],U&&(ee=$e(U,1).concat(ee)),we&&(ee=ee.concat($e(we,-1)))),(Ke=ee).length&&this.splitTile(Ke,0,0,0),Ce&&(Ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pe(Ue,ue,Ce){return 32*((1<<Ue)*Ce+ue)+Ue}function Ut(Ue,ue){const Ce=Ue.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);const Ke=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!Ke)return ue(null,null);const bt=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=me.length,this._features=me}feature(me){return new class{constructor(ee){this._feature=ee,this.extent=o.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(1===this._feature.type){const ee=[];for(const U of this._feature.geometry)ee.push([new o.Point(U[0],U[1])]);return ee}{const ee=[];for(const U of this._feature.geometry){const we=[];for(const nt of U)we.push(new o.Point(nt[0],nt[1]));ee.push(we)}return ee}}toGeoJSON(ee,U,we){return it.call(this,ee,U,we)}}(this._features[me])}}(Ke.features);let Pt=Dn(bt);0===Pt.byteOffset&&Pt.byteLength===Pt.buffer.byteLength||(Pt=new Uint8Array(Pt)),ue(null,{vectorTile:bt,rawData:Pt.buffer})}Me.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Me.prototype.splitTile=function(Ue,ue,Ce,Ke,bt,Pt,me){for(var ee=[Ue,ue,Ce,Ke],U=this.options,we=U.debug;ee.length;){Ke=ee.pop(),Ce=ee.pop(),ue=ee.pop(),Ue=ee.pop();var nt=1<<ue,Jt=Pe(ue,Ce,Ke),Kt=this.tiles[Jt];if(!Kt&&(we>1&&console.time("creation"),Kt=this.tiles[Jt]=xe(Ue,ue,Ce,Ke,U),this.tileCoords.push({z:ue,x:Ce,y:Ke}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,Ce,Ke,Kt.numFeatures,Kt.numPoints,Kt.numSimplified),console.timeEnd("creation"));var Yn="z"+ue;this.stats[Yn]=(this.stats[Yn]||0)+1,this.total++}if(Kt.source=Ue,bt){if(ue===U.maxZoom||ue===bt)continue;var Hn=1<<bt-ue;if(Ce!==Math.floor(Pt/Hn)||Ke!==Math.floor(me/Hn))continue}else if(ue===U.indexMaxZoom||Kt.numPoints<=U.indexMaxPoints)continue;if(Kt.source=null,0!==Ue.length){we>1&&console.time("clipping");var ri,zn,Rt,Ee,se,le,Fe=.5*U.buffer/U.extent,Et=.5-Fe,rn=.5+Fe,Gn=1+Fe;ri=zn=Rt=Ee=null,se=zt(Ue,nt,Ce-Fe,Ce+rn,0,Kt.minX,Kt.maxX,U),le=zt(Ue,nt,Ce+Et,Ce+Gn,0,Kt.minX,Kt.maxX,U),Ue=null,se&&(ri=zt(se,nt,Ke-Fe,Ke+rn,1,Kt.minY,Kt.maxY,U),zn=zt(se,nt,Ke+Et,Ke+Gn,1,Kt.minY,Kt.maxY,U),se=null),le&&(Rt=zt(le,nt,Ke-Fe,Ke+rn,1,Kt.minY,Kt.maxY,U),Ee=zt(le,nt,Ke+Et,Ke+Gn,1,Kt.minY,Kt.maxY,U),le=null),we>1&&console.timeEnd("clipping"),ee.push(ri||[],ue+1,2*Ce,2*Ke),ee.push(zn||[],ue+1,2*Ce,2*Ke+1),ee.push(Rt||[],ue+1,2*Ce+1,2*Ke),ee.push(Ee||[],ue+1,2*Ce+1,2*Ke+1)}}},Me.prototype.getTile=function(Ue,ue,Ce){var Ke=this.options,bt=Ke.extent,Pt=Ke.debug;if(Ue<0||Ue>24)return null;var me=1<<Ue,ee=Pe(Ue,ue=(ue%me+me)%me,Ce);if(this.tiles[ee])return Qe(this.tiles[ee],bt);Pt>1&&console.log("drilling down to z%d-%d-%d",Ue,ue,Ce);for(var U,we=Ue,nt=ue,Jt=Ce;!U&&we>0;)we--,nt=Math.floor(nt/2),Jt=Math.floor(Jt/2),U=this.tiles[Pe(we,nt,Jt)];return U&&U.source?(Pt>1&&console.log("found parent tile z%d-%d-%d",we,nt,Jt),Pt>1&&console.time("drilling down"),this.splitTile(U.source,we,nt,Jt,Ue,ue,Ce),Pt>1&&console.timeEnd("drilling down"),this.tiles[ee]?Qe(this.tiles[ee],bt):null):null};class Bn extends o.VectorTileWorkerSource{constructor(ue,Ce,Ke,bt,Pt){super(ue,Ce,Ke,bt,Ut),Pt&&(this.loadGeoJSON=Pt)}loadData(ue,Ce){const Ke=ue&&ue.request,bt=Ke&&Ke.collectResourceTiming;this.loadGeoJSON(ue,(Pt,me)=>{if(Pt||!me)return Ce(Pt);if("object"!=typeof me)return Ce(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));{wt(me,!0);try{if(ue.filter){const U=o.createExpression(ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===U.result)throw new Error(U.value.map(nt=>`${nt.key}: ${nt.message}`).join(", "));me={type:"FeatureCollection",features:me.features.filter(nt=>U.value.evaluate({zoom:0},nt))}}this._geoJSONIndex=ue.cluster?new Yt(function({superclusterOptions:U,clusterProperties:we}){if(!we||!U)return U;const nt={},Jt={},Kt={accumulated:null,zoom:0},Yn={properties:null},Hn=Object.keys(we);for(const ri of Hn){const[zn,Rt]=we[ri],Ee=o.createExpression(Rt),se=o.createExpression("string"==typeof zn?[zn,["accumulated"],["get",ri]]:zn);nt[ri]=Ee.value,Jt[ri]=se.value}return U.map=ri=>{Yn.properties=ri;const zn={};for(const Rt of Hn)zn[Rt]=nt[Rt].evaluate(Kt,Yn);return zn},U.reduce=(ri,zn)=>{Yn.properties=zn;for(const Rt of Hn)Kt.accumulated=ri[Rt],ri[Rt]=Jt[Rt].evaluate(Kt,Yn)},U}(ue)).load(me.features):new Me(U=me,ue.geojsonVtOptions)}catch(U){return Ce(U)}this.loaded={};const ee={};if(bt){const U=o.getPerformanceMeasurement(Ke);U&&(ee.resourceTiming={},ee.resourceTiming[ue.source]=JSON.parse(JSON.stringify(U)))}Ce(null,ee)}var U})}reloadTile(ue,Ce){const Ke=this.loaded;return Ke&&Ke[ue.uid]?super.reloadTile(ue,Ce):this.loadTile(ue,Ce)}loadGeoJSON(ue,Ce){if(ue.request)o.getJSON(ue.request,Ce);else{if("string"!=typeof ue.data)return Ce(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));try{return Ce(null,JSON.parse(ue.data))}catch{return Ce(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ue,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId))}catch(Ke){Ce(Ke)}}getClusterChildren(ue,Ce){try{Ce(null,this._geoJSONIndex.getChildren(ue.clusterId))}catch(Ke){Ce(Ke)}}getClusterLeaves(ue,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset))}catch(Ke){Ce(Ke)}}}class En{constructor(ue){this.self=ue,this.actor=new o.Actor(ue,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Bn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ce,Ke)=>{if(this.workerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.workerSourceTypes[Ce]=Ke},this.self.registerRTLTextPlugin=Ce=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Ce.applyArabicShaping,o.plugin.processBidirectionalText=Ce.processBidirectionalText,o.plugin.processStyledBidirectionalText=Ce.processStyledBidirectionalText}}clearCaches(ue,Ce,Ke){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],Ke()}checkIfReady(ue,Ce,Ke){Ke()}setReferrer(ue,Ce){this.referrer=Ce}spriteLoaded(ue,Ce){this.isSpriteLoaded[ue]=Ce;for(const Ke in this.workerSources[ue]){const bt=this.workerSources[ue][Ke];for(const Pt in bt)bt[Pt]instanceof o.VectorTileWorkerSource&&(bt[Pt].isSpriteLoaded=Ce,bt[Pt].fire(new o.Event("isSpriteLoaded")))}}setImages(ue,Ce,Ke){this.availableImages[ue]=Ce;for(const bt in this.workerSources[ue]){const Pt=this.workerSources[ue][bt];for(const me in Pt)Pt[me].availableImages=Ce}Ke()}enableTerrain(ue,Ce,Ke){this.terrain=Ce,Ke()}setProjection(ue,Ce){this.projections[ue]=o.getProjection(Ce)}setLayers(ue,Ce,Ke){this.getLayerIndex(ue).replace(Ce),Ke()}updateLayers(ue,Ce,Ke){this.getLayerIndex(ue).update(Ce.layers,Ce.removedIds),Ke()}loadTile(ue,Ce,Ke){const bt=this.enableTerrain?o.extend({enableTerrain:this.terrain},Ce):Ce;bt.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,Ce.type,Ce.source).loadTile(bt,Ke)}loadDEMTile(ue,Ce,Ke){const bt=this.enableTerrain?o.extend({buildQuadTree:this.terrain},Ce):Ce;this.getDEMWorkerSource(ue,Ce.source).loadTile(bt,Ke)}reloadTile(ue,Ce,Ke){const bt=this.enableTerrain?o.extend({enableTerrain:this.terrain},Ce):Ce;bt.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,Ce.type,Ce.source).reloadTile(bt,Ke)}abortTile(ue,Ce,Ke){this.getWorkerSource(ue,Ce.type,Ce.source).abortTile(Ce,Ke)}removeTile(ue,Ce,Ke){this.getWorkerSource(ue,Ce.type,Ce.source).removeTile(Ce,Ke)}removeSource(ue,Ce,Ke){if(!this.workerSources[ue]||!this.workerSources[ue][Ce.type]||!this.workerSources[ue][Ce.type][Ce.source])return;const bt=this.workerSources[ue][Ce.type][Ce.source];delete this.workerSources[ue][Ce.type][Ce.source],void 0!==bt.removeSource?bt.removeSource(Ce,Ke):Ke()}loadWorkerSource(ue,Ce,Ke){try{this.self.importScripts(Ce.url),Ke()}catch(bt){Ke(bt.toString())}}syncRTLPluginState(ue,Ce,Ke){try{o.plugin.setState(Ce);const bt=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&null!=bt){this.self.importScripts(bt);const Pt=o.plugin.isParsed();Ke(Pt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${bt}`),Pt)}}catch(bt){Ke(bt.toString())}}getAvailableImages(ue){let Ce=this.availableImages[ue];return Ce||(Ce=[]),Ce}getLayerIndex(ue){let Ce=this.layerIndexes[ue];return Ce||(Ce=this.layerIndexes[ue]=new _t),Ce}getWorkerSource(ue,Ce,Ke){return this.workerSources[ue]||(this.workerSources[ue]={}),this.workerSources[ue][Ce]||(this.workerSources[ue][Ce]={}),this.workerSources[ue][Ce][Ke]||(this.workerSources[ue][Ce][Ke]=new this.workerSourceTypes[Ce]({send:(Pt,me,ee,U,we,nt)=>{this.actor.send(Pt,me,ee,ue,we,nt)},scheduler:this.actor.scheduler},this.getLayerIndex(ue),this.getAvailableImages(ue),this.isSpriteLoaded[ue])),this.workerSources[ue][Ce][Ke]}getDEMWorkerSource(ue,Ce){return this.demWorkerSources[ue]||(this.demWorkerSources[ue]={}),this.demWorkerSources[ue][Ce]||(this.demWorkerSources[ue][Ce]=new ke),this.demWorkerSources[ue][Ce]}enforceCacheSizeLimit(ue,Ce){o.enforceCacheSizeLimit(Ce)}getWorkerPerformanceMetrics(ue,Ce,Ke){Ke(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new En(self)),En}),j(0,function(o){function P(u,t){if(Array.isArray(u)){if(!Array.isArray(t)||u.length!==t.length)return!1;for(let l=0;l<u.length;l++)if(!P(u[l],t[l]))return!1;return!0}if("object"==typeof u&&null!==u&&null!==t){if("object"!=typeof t||Object.keys(u).length!==Object.keys(t).length)return!1;for(const l in u)if(!P(u[l],t[l]))return!1;return!0}return u===t}var st=_t;function _t(u){return t=u,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,_,b=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(b);try{_=new Worker(D),h=!0}catch{h=!1}return _&&_.terminate(),URL.revokeObjectURL(D),h}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var h=document.createElement("canvas");h.width=h.height=1;var _=h.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===h.width}()||(void 0===ke[l=t&&t.failIfMajorPerformanceCaveat]&&(ke[l]=function(h){var _,D,A,B,b=(D=h,A=document.createElement("canvas"),(B=Object.create(_t.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,A.getContext("webgl",B)||A.getContext("experimental-webgl",B));if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),!0===b.getShaderParameter(_,b.COMPILE_STATUS))}(l)),!ke[l]||document.documentMode));var t,l}var ke={};function Ye(u,t,l){const h=o.window.document.createElement(u);return void 0!==t&&(h.className=t),l&&l.appendChild(h),h}function lt(u,t,l){const h=o.window.document.createElementNS("http://www.w3.org/2000/svg",u);for(const _ of Object.keys(t))h.setAttributeNS(null,_,t[_]);return l&&l.appendChild(h),h}_t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const wt=o.window.document&&o.window.document.documentElement.style,it=wt&&void 0!==wt.userSelect?"userSelect":"WebkitUserSelect";let yt;function pt(){wt&&it&&(yt=wt[it],wt[it]="none")}function jt(){wt&&it&&(wt[it]=yt)}function en(u){u.preventDefault(),u.stopPropagation(),o.window.removeEventListener("click",en,!0)}function Ct(){o.window.addEventListener("click",en,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",en,!0)},0)}function nn(u,t){const l=u.getBoundingClientRect();return kt(u,l,t)}function sn(u,t){const l=u.getBoundingClientRect(),h=[];for(let _=0;_<t.length;_++)h.push(kt(u,l,t[_]));return h}function Cn(u){return void 0!==o.window.InstallTrigger&&2===u.button&&u.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:u.button}function kt(u,t,l){const h=u.offsetWidth===t.width?1:u.offsetWidth/t.width;return new o.Point((l.clientX-t.left)*h,(l.clientY-t.top)*h)}function Ae(u,t){var l=t[0],h=t[1],_=t[2],b=t[3],D=l*b-_*h;return D?(u[0]=b*(D=1/D),u[1]=-h*D,u[2]=-_*D,u[3]=l*D,u):null}function ct(u){const{userImage:t}=u;return!!(t&&t.render&&t.render())&&(u.data.replace(new Uint8Array(t.data.buffer)),!0)}class ht extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:l,callback:h}of this.requestors)this._notify(l,h);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,l){this._validate(t,l)&&(this.images[t]=l)}_validate(t,l){let h=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),h=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),h=!1),this._validateContent(l.content,l)||(this.fire(new o.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),h=!1),h}_validateStretch(t,l){if(!t)return!0;let h=0;for(const _ of t){if(_[0]<h||_[1]<_[0]||l<_[1])return!1;h=_[1]}return!0}_validateContent(t,l){return!(t&&(4!==t.length||t[0]<0||l.data.width<t[0]||t[1]<0||l.data.height<t[1]||t[2]<0||l.data.width<t[2]||t[3]<0||l.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,l){l.version=this.images[t].version+1,this.images[t]=l,this.updatedImages[t]=!0}removeImage(t){const l=this.images[t];delete this.images[t],delete this.patterns[t],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,l){let h=!0;if(!this.isLoaded())for(const _ of t)this.images[_]||(h=!1);this.isLoaded()||h?this._notify(t,l):this.requestors.push({ids:t,callback:l})}_notify(t,l){const h={};for(const _ of t){this.images[_]||this.fire(new o.Event("styleimagemissing",{id:_}));const b=this.images[_];b?h[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:o.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,h)}getPixelSize(){const{width:t,height:l}=this.atlasImage;return{width:t,height:l}}getPattern(t){const l=this.patterns[t],h=this.getImage(t);if(!h)return null;if(l&&l.position.version===h.version)return l.position;if(l)l.position.version=h.version;else{const _={w:h.data.width+2,h:h.data.height+2,x:0,y:0},b=new o.ImagePosition(_,h);this.patterns[t]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const l=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(t,this.atlasImage,l.RGBA),this.atlasTexture&&this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const b in this.patterns)t.push(this.patterns[b].bin);const{w:l,h}=o.potpack(t),_=this.atlasImage;_.resize({width:l||1,height:h||1});for(const b in this.patterns){const{bin:D}=this.patterns[b],A=D.x+1,B=D.y+1,J=this.images[b].data,K=J.width,de=J.height;o.RGBAImage.copy(J,_,{x:0,y:0},{x:A,y:B},{width:K,height:de}),o.RGBAImage.copy(J,_,{x:0,y:de-1},{x:A,y:B-1},{width:K,height:1}),o.RGBAImage.copy(J,_,{x:0,y:0},{x:A,y:B+de},{width:K,height:1}),o.RGBAImage.copy(J,_,{x:K-1,y:0},{x:A-1,y:B},{width:1,height:de}),o.RGBAImage.copy(J,_,{x:0,y:0},{x:A+K,y:B},{width:1,height:de})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const l of t){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const h=this.images[l];ct(h)&&this.updateImage(l,h)}}}const mt=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(u,t){return function([l,h,_]){const b=o.degToRad(h+90),D=o.degToRad(_);return{x:l*Math.cos(b)*Math.sin(D),y:l*Math.sin(b)*Math.sin(D),z:l*Math.cos(D),azimuthal:h,polar:_}}(u.expression.evaluate(t))}interpolate(u,t,l){return{x:o.number(u.x,t.x,l),y:o.number(u.y,t.y,l),z:o.number(u.z,t.z,l),azimuthal:o.number(u.azimuthal,t.azimuthal,l),polar:o.number(u.polar,t.polar,l)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Je extends o.Evented{constructor(t){super(),this._transitionable=new o.Transitionable(mt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,l={}){if(!this._validate(o.validateLight,t,l))for(const h in t){const _=t[h];o.endsWith(h,"-transition")?this._transitionable.setTransition(h.slice(0,-11),_):this._transitionable.setValue(h,_)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,h){return(!h||!1!==h.validate)&&o.emitValidationErrors(this,t.call(o.validateStyle,o.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const qt=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let ln=class extends o.Evented{constructor(u,t){super(),this._transitionable=new o.Transitionable(qt),this.set(u),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=t}get(){return this._transitionable.serialize()}set(u){for(const t in u){const l=u[t];o.endsWith(t,"-transition")?this._transitionable.setTransition(t.slice(0,-11),l):this._transitionable.setValue(t,l)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}};function Dn(u,t,l,h){const _=o.smoothstep(45,65,l),[b,D]=ti(u,h),A=o.length(t);let B=1-Math.min(1,Math.exp((A-b)/(D-b)*-6));return B*=B*B,B=Math.min(1,1.00747*B),B*_*u.alpha}function ti(u,t){const l=.5/Math.tan(.5*t);return[u.range[0]+l,u.range[1]+l]}const _n=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class _i extends o.Evented{constructor(t,l){super(),this._transitionable=new o.Transitionable(_n),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=l}get state(){const t=this._transform,l="globe"===t.projection.name,h=o.globeToMercatorTransition(t.zoom),_=this.properties.get("range"),b=[.5,3];return{range:l?[o.number(b[0],_[0],h),o.number(b[1],_[1],h)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,l={}){if(!this._validate(o.validateFog,t,l)){for(const h of Object.keys(o.spec.fog))t&&void 0===t[h]&&(t[h]=o.spec.fog[h].default);for(const h in t){const _=t[h];o.endsWith(h,"-transition")?this._transitionable.setTransition(h.slice(0,-11),_):this._transitionable.setValue(h,_)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:o.smoothstep(45,65,t))*l.a}getOpacityAtLatLng(t,l){return this._transform.projection.supportsFog?function(h,_,b){const D=o.MercatorCoordinate.fromLngLat(_),A=b.elevation?b.elevation.getAtPointOrZero(D):0,B=[D.x,D.y,A];return o.transformMat4(B,B,b.mercatorFogMatrix),Dn(h,B,b.pitch,b._fov)}(this.state,t,l):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?ti(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,h){return(!h||!1!==h.validate)&&o.emitValidationErrors(this,t.call(o.validateStyle,o.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class ii{constructor(t,l){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const h=this.workerPool.acquire(this.id);for(let _=0;_<h.length;_++){const b=new ii.Actor(h[_],l,this.id);b.name=`Worker ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,l,h){o.asyncAll(this.actors,(_,b)=>{_.send(t,l,b)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function vi(u,t,l){return t*(o.EXTENT/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}ii.Actor=o.Actor;class Ii{constructor(t,l,h,_){this.screenBounds=t,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=h,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(t,l){let h,_;if(t instanceof o.Point||"number"==typeof t[0]){const b=o.Point.convert(t);h=[b],_=l.isPointAboveHorizon(b)}else{const b=o.Point.convert(t[0]),D=o.Point.convert(t[1]);h=[b,D],_=o.polygonizeBounds(b,D).every(A=>l.isPointAboveHorizon(A))}return new Ii(h,l.getCameraPoint(),_,l)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return o.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const l=this.screenBounds[0],h=1===this.screenBounds.length?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],_=o.polygonizeBounds(l,h,0,!1);return this.cameraPoint.y>h.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<h.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=h.x?_[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(_[3]=this.cameraPoint)),o.bufferConvexPolygon(_,t)}bufferedCameraGeometryGlobe(t){const l=this.screenBounds[0],h=1===this.screenBounds.length?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],_=o.polygonizeBounds(l,h,t),b=this.cameraPoint.clone();switch(3*((b.y>l.y)+(b.y>h.y))+((b.x>l.x)+(b.x>h.x))){case 0:_[0]=b,_[4]=b.clone();break;case 1:_.splice(1,0,b);break;case 2:_[1]=b;break;case 3:_.splice(4,0,b);break;case 5:_.splice(2,0,b);break;case 6:_[3]=b;break;case 7:_.splice(3,0,b);break;case 8:_[2]=b}return _}containsTile(t,l,h,_=0){const b=t.queryPadding/l._pixelsPerMercatorPixel+1,D=h?this._bufferedCameraMercator(b,l):this._bufferedScreenMercator(b,l);let A=t.tileID.wrap+(D.unwrapped?_:0);const B=D.polygon.map(tt=>o.getTilePoint(t.tileTransform,tt,A));if(!o.polygonIntersectsBox(B,0,0,o.EXTENT,o.EXTENT))return;A=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const J=this.screenGeometryMercator.polygon.map(tt=>o.getTileVec3(t.tileTransform,tt,A)),K=J.map(tt=>new o.Point(tt[0],tt[1])),de=l.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),Ie=o.getTileVec3(t.tileTransform,de,A),He=J.map(tt=>{const fe=o.sub(tt,tt,Ie);return o.normalize(fe,fe),new o.Ray(Ie,fe)}),Xe=vi(t,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:K,tilespaceRays:He,bufferedTilespaceGeometry:B,bufferedTilespaceBounds:(qe=o.getBounds(B),qe.min.x=o.clamp(qe.min.x,0,o.EXTENT),qe.min.y=o.clamp(qe.min.y,0,o.EXTENT),qe.max.x=o.clamp(qe.max.x,0,o.EXTENT),qe.max.y=o.clamp(qe.max.y,0,o.EXTENT),qe),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:Xe};var qe}_bufferedScreenMercator(t,l){const h=ze(t);if(this._screenRaycastCache[h])return this._screenRaycastCache[h];{let _;return _="globe"===l.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),l):{polygon:this.bufferedScreenGeometry(t).map(b=>l.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[h]=_,_}}_bufferedCameraMercator(t,l){const h=ze(t);if(this._cameraRaycastCache[h])return this._cameraRaycastCache[h];{let _;return _="globe"===l.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),l):{polygon:this.bufferedCameraGeometry(t).map(b=>l.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[h]=_,_}}_projectAndResample(t,l){const h=function(b,D){const A=o.multiply([],D.pixelMatrix,D.globeMatrix),B=[0,-o.GLOBE_RADIUS,0,1],J=[0,o.GLOBE_RADIUS,0,1],K=[0,0,0,1];o.transformMat4$1(B,B,A),o.transformMat4$1(J,J,A),o.transformMat4$1(K,K,A);const de=new o.Point(B[0]/B[3],B[1]/B[3]),Ie=new o.Point(J[0]/J[3],J[1]/J[3]),He=o.polygonContainsPoint(b,de)&&B[3]<K[3],Xe=o.polygonContainsPoint(b,Ie)&&J[3]<K[3];if(!He&&!Xe)return null;const qe=function(Ht,tn,Xt){for(let hn=1;hn<Ht.length;hn++){const Xn=Zt(tn.pointCoordinate3D(Ht[hn-1]).x),dn=Zt(tn.pointCoordinate3D(Ht[hn]).x);if(Xt<0){if(Xn<dn)return{idx:hn,t:-Xn/(dn-1-Xn)}}else if(dn<Xn)return{idx:hn,t:(1-Xn)/(dn+1-Xn)}}return null}(b,D,He?-1:1);if(!qe)return null;const{idx:tt,t:fe}=qe;let Ze=tt>1?Yt(b.slice(0,tt),D):[],ut=tt<b.length?Yt(b.slice(tt),D):[];Ze=Ze.map(Ht=>new o.Point(Zt(Ht.x),Ht.y)),ut=ut.map(Ht=>new o.Point(Zt(Ht.x),Ht.y));const dt=[...Ze];0===dt.length&&dt.push(ut[ut.length-1]);const Vt=o.number(dt[dt.length-1].y,(0===ut.length?Ze[0]:ut[0]).y,fe);let $t;return $t=He?[new o.Point(0,Vt),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Vt)]:[new o.Point(1,Vt),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Vt)],dt.push(...$t),0===ut.length?dt.push(Ze[0]):dt.push(...ut),{polygon:dt.map(Ht=>new o.MercatorCoordinate(Ht.x,Ht.y)),unwrapped:!1}}(t,l);if(h)return h;const _=function(b,D){let A=!1,B=-1/0,J=0;for(let de=0;de<b.length-1;de++)b[de].x>B&&(B=b[de].x,J=de);for(let de=0;de<b.length-1;de++){const Ie=(J+de)%(b.length-1),He=b[Ie],Xe=b[Ie+1];Math.abs(He.x-Xe.x)>.5&&(He.x<Xe.x?(He.x+=1,0===Ie&&(b[b.length-1].x+=1)):(Xe.x+=1,Ie+1===b.length-1&&(b[0].x+=1)),A=!0)}const K=o.mercatorXfromLng(D.center.lng);return A&&K<Math.abs(K-1)&&b.forEach(de=>{de.x-=1}),{polygon:b,unwrapped:A}}(Yt(t,l).map(b=>new o.Point(Zt(b.x),b.y)),l);return{polygon:_.polygon.map(b=>new o.MercatorCoordinate(b.x,b.y)),unwrapped:_.unwrapped}}}function Yt(u,t){return o.resample(u,l=>{const h=t.pointCoordinate3D(l);l.x=h.x,l.y=h.y},1/256)}function Zt(u){return u<0?1+u%1:u%1}function ze(u){return 100*u|0}function Ge(u,t,l,h,_){const b=function(D,A){if(D)return _(D);if(A){u.url&&A.tiles&&u.tiles&&delete u.tiles;const B=o.pick(o.extend(A,u),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(B.vectorLayers=A.vector_layers,B.vectorLayerIds=B.vectorLayers.map(J=>J.id)),B.tiles=t.canonicalizeTileset(B,u.url),_(null,B)}};return u.url?o.getJSON(t.transformRequest(t.normalizeSourceURL(u.url,null,l,h),o.ResourceType.Source),b):o.exported.frame(()=>b(null,u))}class Nt{constructor(t,l,h){this.bounds=o.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=l||0,this.maxzoom=h||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const l=Math.pow(2,t.z),h=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*l),_=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*l),b=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*l),D=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*l);return t.x>=h&&t.x<b&&t.y>=_&&t.y<D}}class We{constructor(t,l,h){this.context=t;const _=t.gl;this.buffer=_.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Re{constructor(t,l,h,_){this.length=l.length,this.attributes=h,this.itemSize=l.bytesPerElement,this.dynamicDraw=_,this.context=t;const b=t.gl;this.buffer=b.createBuffer(),t.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,l){for(let h=0;h<this.attributes.length;h++){const _=l.attributes[this.attributes[h].name];void 0!==_&&t.enableVertexAttribArray(_)}}setVertexAttribPointers(t,l,h){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],D=l.attributes[b.name];void 0!==D&&t.vertexAttribPointer(D,b.components,t[Ot[b.type]],!1,this.itemSize,b.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ft{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class cn extends ft{getDefault(){return o.Color.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class kn extends ft{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class an extends ft{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Mn extends ft{getDefault(){return[!0,!0,!0,!0]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Gt extends ft{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class On extends ft{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class xt extends ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const l=this.current;(t.func!==l.func||t.ref!==l.ref||t.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class zt extends ft{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Wn extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=t,this.dirty=!1}}class Fn extends ft{getDefault(){return[0,1]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class It extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=t,this.dirty=!1}}class li extends ft{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class je extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.BLEND):l.disable(l.BLEND),this.current=t,this.dirty=!1}}class ce extends ft{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class De extends ft{getDefault(){return o.Color.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class $e extends ft{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Ft extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=t,this.dirty=!1}}class Qe extends ft{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Te extends ft{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let xe,ve=class extends ft{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}};class re extends ft{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Me extends ft{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Pe extends ft{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Ut extends ft{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Bn extends ft{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class En extends ft{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ue extends ft{getDefault(){return null}set(t){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ue extends ft{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class Ce extends ft{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Ke extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class bt extends ft{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Pt extends ft{constructor(t,l){super(t),this.context=t,this.parent=l}getDefault(){return null}}class me extends Pt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class ee extends Pt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class U extends ee{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class we{constructor(t,l,h,_){this.context=t,this.width=l,this.height=h;const b=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new me(t,b),_&&(this.depthAttachment=new ee(t,b))}destroy(){const t=this.context.gl,l=this.colorAttachment.get();if(l&&t.deleteTexture(l),this.depthAttachment){const h=this.depthAttachment.get();h&&t.deleteRenderbuffer(h)}t.deleteFramebuffer(this.framebuffer)}}class nt{constructor(t,l=!1){if(this.gl=t,this.isWebGL2=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),l){const h=t;this.extVertexArrayObject={createVertexArrayOES:h.createVertexArray.bind(t),deleteVertexArrayOES:h.deleteVertexArray.bind(t),bindVertexArrayOES:h.bindVertexArray.bind(t)}}this.clearColor=new cn(this),this.clearDepth=new kn(this),this.clearStencil=new an(this),this.colorMask=new Mn(this),this.depthMask=new Gt(this),this.stencilMask=new On(this),this.stencilFunc=new xt(this),this.stencilOp=new zt(this),this.stencilTest=new Wn(this),this.depthRange=new Fn(this),this.depthTest=new It(this),this.depthFunc=new li(this),this.blend=new je(this),this.blendFunc=new ce(this),this.blendColor=new De(this),this.blendEquation=new $e(this),this.cullFace=new Ft(this),this.cullFaceSide=new Qe(this),this.frontFace=new Te(this),this.program=new ve(this),this.activeTexture=new re(this),this.viewport=new Me(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ut(this),this.bindTexture=new Bn(this),this.bindVertexBuffer=new En(this),this.bindElementBuffer=new Ue(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ue(this),this.pixelStoreUnpack=new Ce(this),this.pixelStoreUnpackPremultiplyAlpha=new Ke(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),l||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(l||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,l){return new We(this,t,l)}createVertexBuffer(t,l,h){return new Re(this,t,l,h)}createRenderbuffer(t,l,h){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,t,l,h),this.bindRenderbuffer.set(null),b}createFramebuffer(t,l,h){return new we(this,t,l,h)}clear({color:t,depth:l,stencil:h}){const _=this.gl;let b=0;t&&(b|=_.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==l&&(b|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),void 0!==h&&(b|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),_.clear(b)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){P(t.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Jt extends o.Evented{constructor(t,l,h,_){if(super(),this.id=t,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(l,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(t){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,h=this.map._worldview;this._tileJSONRequest=Ge(this._options,this.map._requestManager,l,h,(_,b)=>{this._tileJSONRequest=null,this._loaded=!0,_?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),h&&2!==h.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new o.ErrorEvent(_))):b&&(o.extend(this,b),b.bounds&&(this.tileBounds=new Nt(b.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(_)})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(t,l){const h=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(h,o.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=l:t.request=t.actor.send("reloadTile",_,b.bind(this));else if(t.actor=this._tileWorkers[h]=this._tileWorkers[h]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",_,b.bind(this),void 0,!0);else{const D=o.loadVectorTile.call({deduped:this._deduped},_,(A,B)=>{A||!B?b.call(this,A):(_.data={cacheControl:B.cacheControl,expires:B.expires,rawData:B.rawData.slice(0)},t.actor&&t.actor.send("loadTile",_,b.bind(this),void 0,!0))},!0);t.request={cancel:D}}function b(D,A){return delete t.request,t.aborted?l(null):D&&404!==D.status?l(D):(A&&A.resourceTiming&&(t.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&t.setExpiryData(A),t.loadVectorData(A,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Kt extends o.Evented{constructor(t,l,h,_){super(),this.id=t,this.dispatcher=h,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},l),o.extend(this,o.pick(l,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ge(this._options,this.map._requestManager,null,null,(l,h)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):h&&(o.extend(this,h),h.bounds&&(this.tileBounds=new Nt(h.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(h.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(l)})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,l){const h=o.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),h,this.tileSize);t.request=o.getImage(this.map._requestManager.transformRequest(_,o.ResourceType.Tile),(b,D,A,B)=>(delete t.request,t.aborted?(t.state="unloaded",l(null)):b?(t.state="errored",l(b)):D?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:A,expires:B}),t.setTexture(D,this.map.painter),t.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void l(null)):l(null)))}static loadTileData(t,l,h){t.setTexture(l,h)}static unloadTileData(t,l){t.texture&&l.saveTileTexture(t.texture)}abortTile(t,l){t.request&&(t.request.cancel(),delete t.request),l()}unloadTile(t,l){t.texture&&this.map.painter.saveTileTexture(t.texture),l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Yn(u,t,l,h,_,b,D,A){const B=[u,l,_,t,h,b,1,1,1],J=[D,A,1],K=o.adjoint([],B),[de,Ie,He]=o.transformMat3(J,J,o.transpose(K,K));return o.multiply$1(B,[de,0,0,0,Ie,0,0,0,He],B)}class Hn extends o.Evented{constructor(t,l,h,_){super(),this.id=t,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=l,this._dirty=!1}load(t,l){this._loaded=l||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(h,_)=>{if(this._imageRequest=null,this._loaded=!0,h)this.fire(new o.ErrorEvent(h));else if(_){const{HTMLImageElement:b}=o.window;this.image=_ instanceof b?o.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const l=t.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(h){let _=1/0,b=1/0,D=-1/0,A=-1/0;for(const de of h)_=Math.min(_,de.x),b=Math.min(b,de.y),D=Math.max(D,de.x),A=Math.max(A,de.y);const B=Math.max(D-_,A-b),J=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),K=Math.pow(2,J);return new o.CanonicalTileID(J,Math.floor((_+D)/2*K),Math.floor((b+A)/2*K))}(l),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const B in this.tiles){const J=this.tiles[B];"loaded"!==J.state&&(J.state="loaded",J.texture=this.texture)}if(this._boundsArray)return;const l=o.tileTransform(this.tileID,this.map.transform.projection),[h,_,b,D]=this.coordinates.map(B=>{const J=l.projection.project(B[0],B[1]);return o.getTilePoint(l,J)._round()});this.perspectiveTransform=function(B,J,K,de,Ie,He,Xe,qe,tt,fe){const Ze=Yn(0,0,B,0,0,J,B,J),ut=Yn(K,de,Ie,He,Xe,qe,tt,fe);return o.multiply$1(ut,o.adjoint(Ze,Ze),ut),[ut[6]/ut[8]*B/o.EXTENT,ut[7]/ut[8]*J/o.EXTENT]}(this.width,this.height,h.x,h.y,_.x,_.y,D.x,D.y,b.x,b.y);const A=this._boundsArray=new o.StructArrayLayout4i8;A.emplaceBack(h.x,h.y,0,0),A.emplaceBack(_.x,_.y,o.EXTENT,0),A.emplaceBack(D.x,D.y,0,o.EXTENT),A.emplaceBack(b.x,b.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(A,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,l=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(t,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(t,l){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},l(null)):(t.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ri={vector:Jt,raster:Kt,"raster-dem":class extends Kt{constructor(u,t,l,h){super(u,t,l,h),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}loadTile(u,t){const l=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function h(_,b){_&&(u.state="errored",t(_)),b&&(u.dem=b,u.dem.onDeserialize(),u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0,u.state="loaded",t(null))}u.request=o.getImage(this.map._requestManager.transformRequest(l,o.ResourceType.Tile),function(_,b,D,A){if(delete u.request,u.aborted)u.state="unloaded",t(null);else if(_)u.state="errored",t(_);else if(b){this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:D,expires:A});const B=o.window.ImageBitmap&&b instanceof o.window.ImageBitmap&&(null==xe&&(xe=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.window.createImageBitmap),xe),J=1-(b.width-o.prevPowerOfTwo(b.width))/2;J<1||u.neighboringTiles||(u.neighboringTiles=this._getNeighboringTiles(u.tileID));const K=B?b:o.exported.getImageData(b,J),de={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:K,encoding:this.encoding,padding:J};u.actor&&"expired"!==u.state||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",de,h.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(u){const t=u.canonical,l=Math.pow(2,t.z),h=(t.x-1+l)%l,_=0===t.x?u.wrap-1:u.wrap,b=(t.x+1+l)%l,D=t.x+1===l?u.wrap+1:u.wrap,A={};return A[new o.OverscaledTileID(u.overscaledZ,_,t.z,h,t.y).key]={backfilled:!1},A[new o.OverscaledTileID(u.overscaledZ,D,t.z,b,t.y).key]={backfilled:!1},t.y>0&&(A[new o.OverscaledTileID(u.overscaledZ,_,t.z,h,t.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(u.overscaledZ,u.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(u.overscaledZ,D,t.z,b,t.y-1).key]={backfilled:!1}),t.y+1<l&&(A[new o.OverscaledTileID(u.overscaledZ,_,t.z,h,t.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(u.overscaledZ,u.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(u.overscaledZ,D,t.z,b,t.y+1).key]={backfilled:!1}),A}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded"}},geojson:class extends o.Evented{constructor(u,t,l,h){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(h),this._data=t.data,this._options=o.extend({},t),this._collectResourceTiming=t.collectResourceTiming,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;const _=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*_,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*_,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:void 0!==t.clusterMaxZoom?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:o.EXTENT,radius:(void 0!==t.clusterRadius?t.clusterRadius:50)*_,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter},t.workerOptions)}onAdd(u){this.map=u,this.setData(this._data)}setData(u){return this._data=u,this._updateWorkerData(),this}getClusterExpansionZoom(u,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},t),this}getClusterChildren(u,t){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},t),this}getClusterLeaves(u,t,l,h){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:t,offset:l},h),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const u=o.extend({},this.workerOptions),t=this._data;"string"==typeof t?(u.request=this.map._requestManager.transformRequest(o.exported.resolveURL(t),o.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(t),this._pendingLoad=this.actor.send(`${this.type}.loadData`,u,(l,h)=>{if(this._loaded=!0,this._pendingLoad=null,l)this.fire(new o.ErrorEvent(l));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&h&&h.resourceTiming&&h.resourceTiming[this.id]&&(_.resourceTiming=h.resourceTiming[this.id]),this.fire(new o.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(u,t){const l=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(l,{type:this.type,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(h,_)=>(delete u.request,u.unloadVectorData(),u.aborted?t(null):h?t(h):(u.loadVectorData(_,this.map.painter,"reloadTile"===l),t(null))),void 0,"loadTile"===l)}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Hn{constructor(u,t,l,h){super(u,t,l,h),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const t of u.urls)this.urls.push(this.map._requestManager.transformRequest(t,o.ResourceType.Source).url);o.getVideo(this.urls,(t,l)=>{this._loaded=!0,t?this.fire(new o.ErrorEvent(t)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const t=this.video.seekable;u<t.start(0)||u>t.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const u=this.map.painter.context,t=u.gl;this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(u)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Hn,canvas:class extends Hn{constructor(u,t,l,h){super(u,t,l,h),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some(_=>!Array.isArray(_)||2!==_.length||_.some(b=>"number"!=typeof b))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=t,this.animate=void 0===t.animate||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const t=this.map.painter.context;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(t,this.canvas,t.gl.RGBA,{premultiply:!0}),this._prepareData(t)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}},custom:class extends o.Evented{constructor(u,t,l,h){super(),this.id=u,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=t,this.setEventedParent(h),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Nt(this._implementation.bounds,this.minzoom,this.maxzoom)),t.update=this._update.bind(this),t.clearTiles=this._clearTiles.bind(this),t.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(t,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(u){this._map=u,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(u),this.load()}onRemove(u){this._implementation.onRemove&&this._implementation.onRemove(u)}hasTile(u){if(this._implementation.hasTile){const{x:t,y:l,z:h}=u.canonical;return this._implementation.hasTile({x:t,y:l,z:h})}return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,t){const{x:l,y:h,z:_}=u.tileID.canonical,b=new o.window.AbortController;u.request=Promise.resolve(this._implementation.loadTile({x:l,y:h,z:_},{signal:b.signal})).then(function(D){return delete u.request,u.aborted?(u.state="unloaded",t(null)):void 0===D?(u.state="errored",t(null)):null===D?(this.loadTileData(u,{width:this.tileSize,height:this.tileSize,data:null}),u.state="loaded",t(null)):(A=D)instanceof o.window.ImageData||A instanceof o.window.HTMLCanvasElement||A instanceof o.window.ImageBitmap||A instanceof o.window.HTMLImageElement?(this.loadTileData(u,D),u.state="loaded",void t(null)):(u.state="errored",t(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var A}.bind(this)).catch(D=>{20!==D.code&&(u.state="errored",t(D))}),u.request.cancel=()=>b.abort()}loadTileData(u,t){Kt.loadTileData(u,t,this._map.painter)}unloadTileData(u){Kt.unloadTileData(u,this._map.painter)}unloadTile(u,t){if(this.unloadTileData(u),this._implementation.unloadTile){const{x:l,y:h,z:_}=u.tileID.canonical;this._implementation.unloadTile({x:l,y:h,z:_})}t()}abortTile(u,t){u.request&&u.request.cancel&&(u.request.cancel(),delete u.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(u=>({x:u.canonical.x,y:u.canonical.y,z:u.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},zn=function(u,t,l,h){const _=new ri[t.type](u,t,l,h);if(_.id!==u)throw new Error(`Expected Source id to be ${u} instead of ${_.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],_),_};function Rt(u,t){const l=o.identity([]);return o.scale(l,l,[.5*u.width,.5*-u.height,1]),o.translate(l,l,[1,-1,0]),o.multiply(l,l,u.calculateProjMatrix(t.toUnwrapped())),Float32Array.from(l)}function Ee(u,t,l,h,_,b,D,A=!1){const B=u.tilesIn(h,D,A);B.sort(le);const J=[];for(const de of B)J.push({wrappedTileID:de.tile.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(t,l,u._state,de,_,b,Rt(u.transform,de.tile.tileID),A)});const K=function(de){const Ie={},He={};for(const Xe of de){const qe=Xe.queryResults,tt=Xe.wrappedTileID,fe=He[tt]=He[tt]||{};for(const Ze in qe){const ut=qe[Ze],dt=fe[Ze]=fe[Ze]||{},Vt=Ie[Ze]=Ie[Ze]||[];for(const $t of ut)dt[$t.featureIndex]||(dt[$t.featureIndex]=!0,Vt.push($t))}}return Ie}(J);for(const de in K)K[de].forEach(Ie=>{const He=Ie.feature,Xe=He.layer;Xe&&"background"!==Xe.type&&"sky"!==Xe.type&&(He.source=Xe.source,Xe["source-layer"]&&(He.sourceLayer=Xe["source-layer"]),He.state=void 0!==He.id?u.getFeatureState(Xe["source-layer"],He.id):{})});return K}function se(u,t){const l=u.getRenderableIds().map(b=>u.getTileByID(b)),h=[],_={};for(let b=0;b<l.length;b++){const D=l[b],A=D.tileID.canonical.key;_[A]||(_[A]=!0,D.querySourceFeatures(h,t))}return h}function le(u,t){const l=u.tileID,h=t.tileID;return l.overscaledZ-h.overscaledZ||l.canonical.y-h.canonical.y||l.wrap-h.wrap||l.canonical.x-h.canonical.x}function Fe(){return null!=G.workerClass?new G.workerClass:new o.window.Worker(G.workerUrl)}const Et="mapboxgl_preloaded_worker_pool";class rn{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<rn.workerCount;)this.workers.push(new Fe);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Et]}numActive(){return Object.keys(this.active).length}}let Gn;function Ai(){return Gn||(Gn=new rn),Gn}function yr(u,t){const l={};for(const h in u)"ref"!==h&&(l[h]=u[h]);return o.refProperties.forEach(h=>{h in t&&(l[h]=t[h])}),l}function Rr(u){u=u.slice();const t=Object.create(null);for(let l=0;l<u.length;l++)t[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=yr(u[l],t[u[l].ref]));return u}rn.workerCount=2;const Wi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function oo(u,t,l){l.push({command:Wi.addSource,args:[u,t[u]]})}function vr(u,t,l){t.push({command:Wi.removeSource,args:[u]}),l[u]=!0}function so(u,t,l,h){vr(u,l,h),oo(u,t,l)}function To(u,t,l){let h;for(h in u[l])if(u[l].hasOwnProperty(h)&&"data"!==h&&!P(u[l][h],t[l][h]))return!1;for(h in t[l])if(t[l].hasOwnProperty(h)&&"data"!==h&&!P(u[l][h],t[l][h]))return!1;return!0}function $i(u,t,l,h,_,b){let D;for(D in t=t||{},u=u||{})u.hasOwnProperty(D)&&(P(u[D],t[D])||l.push({command:b,args:[h,D,t[D],_]}));for(D in t)t.hasOwnProperty(D)&&!u.hasOwnProperty(D)&&(P(u[D],t[D])||l.push({command:b,args:[h,D,t[D],_]}))}function gr(u){return u.id}function br(u,t){return u[t.id]=t,u}class Tr{constructor(t,l){this.reset(t,l)}reset(t,l){this.points=t||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=o.clamp(t,0,1);let l=1,h=this._distances[l];const _=t*this.paddedLength+this.padding;for(;h<_&&l<this._distances.length;)h=this._distances[++l];const b=l-1,D=this._distances[b],A=h-D,B=A>0?(_-D)/A:0;return this.points[b].mult(1-B).add(this.points[l].mult(B))}}class Hr{constructor(t,l,h){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(t/h),this.yCellCount=Math.ceil(l/h);for(let D=0;D<this.xCellCount*this.yCellCount;D++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=l,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,l,h,_,b){this._forEachCell(l,h,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(t,l,h,_){this._forEachCell(l-_,h-_,l+_,h+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(l),this.circles.push(h),this.circles.push(_)}_insertBoxCell(t,l,h,_,b,D){this.boxCells[b].push(D)}_insertCircleCell(t,l,h,_,b,D){this.circleCells[b].push(D)}_query(t,l,h,_,b,D){if(h<0||t>this.width||_<0||l>this.height)return!b&&[];const A=[];if(t<=0&&l<=0&&this.width<=h&&this.height<=_){if(b)return!0;for(let B=0;B<this.boxKeys.length;B++)A.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const J=this.circles[3*B],K=this.circles[3*B+1],de=this.circles[3*B+2];A.push({key:this.circleKeys[B],x1:J-de,y1:K-de,x2:J+de,y2:K+de})}return D?A.filter(D):A}return this._forEachCell(t,l,h,_,this._queryCell,A,{hitTest:b,seenUids:{box:{},circle:{}}},D),b?A.length>0:A}_queryCircle(t,l,h,_,b){const D=t-h,A=t+h,B=l-h,J=l+h;if(A<0||D>this.width||J<0||B>this.height)return!_&&[];const K=[];return this._forEachCell(D,B,A,J,this._queryCellCircle,K,{hitTest:_,circle:{x:t,y:l,radius:h},seenUids:{box:{},circle:{}}},b),_?K.length>0:K}query(t,l,h,_,b){return this._query(t,l,h,_,!1,b)}hitTest(t,l,h,_,b){return this._query(t,l,h,_,!0,b)}hitTestCircle(t,l,h,_){return this._queryCircle(t,l,h,!0,_)}_queryCell(t,l,h,_,b,D,A,B){const J=A.seenUids,K=this.boxCells[b];if(null!==K){const Ie=this.bboxes;for(const He of K)if(!J.box[He]){J.box[He]=!0;const Xe=4*He;if(t<=Ie[Xe+2]&&l<=Ie[Xe+3]&&h>=Ie[Xe+0]&&_>=Ie[Xe+1]&&(!B||B(this.boxKeys[He]))){if(A.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[He],x1:Ie[Xe],y1:Ie[Xe+1],x2:Ie[Xe+2],y2:Ie[Xe+3]})}}}const de=this.circleCells[b];if(null!==de){const Ie=this.circles;for(const He of de)if(!J.circle[He]){J.circle[He]=!0;const Xe=3*He;if(this._circleAndRectCollide(Ie[Xe],Ie[Xe+1],Ie[Xe+2],t,l,h,_)&&(!B||B(this.circleKeys[He]))){if(A.hitTest)return D.push(!0),!0;{const qe=Ie[Xe],tt=Ie[Xe+1],fe=Ie[Xe+2];D.push({key:this.circleKeys[He],x1:qe-fe,y1:tt-fe,x2:qe+fe,y2:tt+fe})}}}}}_queryCellCircle(t,l,h,_,b,D,A,B){const J=A.circle,K=A.seenUids,de=this.boxCells[b];if(null!==de){const He=this.bboxes;for(const Xe of de)if(!K.box[Xe]){K.box[Xe]=!0;const qe=4*Xe;if(this._circleAndRectCollide(J.x,J.y,J.radius,He[qe+0],He[qe+1],He[qe+2],He[qe+3])&&(!B||B(this.boxKeys[Xe])))return D.push(!0),!0}}const Ie=this.circleCells[b];if(null!==Ie){const He=this.circles;for(const Xe of Ie)if(!K.circle[Xe]){K.circle[Xe]=!0;const qe=3*Xe;if(this._circlesCollide(He[qe],He[qe+1],He[qe+2],J.x,J.y,J.radius)&&(!B||B(this.circleKeys[Xe])))return D.push(!0),!0}}}_forEachCell(t,l,h,_,b,D,A,B){const J=this._convertToXCellCoord(t),K=this._convertToYCellCoord(l),de=this._convertToXCellCoord(h),Ie=this._convertToYCellCoord(_);for(let He=J;He<=de;He++)for(let Xe=K;Xe<=Ie;Xe++)if(b.call(this,t,l,h,_,this.xCellCount*Xe+He,D,A,B))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,l,h,_,b,D){const A=_-t,B=b-l,J=h+D;return J*J>A*A+B*B}_circleAndRectCollide(t,l,h,_,b,D,A){const B=(D-_)/2,J=Math.abs(t-(_+B));if(J>B+h)return!1;const K=(A-b)/2,de=Math.abs(l-(b+K));if(de>K+h)return!1;if(J<=B||de<=K)return!0;const Ie=J-B,He=de-K;return Ie*Ie+He*He<=h*h}}const Ho={unknown:0,flipRequired:1,flipNotRequired:2},wo=Math.tan(85*Math.PI/180);function wn(u,t,l,h,_,b,D){const A=o.create();if(l)if("globe"===b.name){const B=o.calculateGlobeLabelMatrix(_,t);o.multiply(A,A,B)}else{const B=Ae([],D);A[0]=B[0],A[1]=B[1],A[4]=B[2],A[5]=B[3],h||o.rotateZ(A,A,_.angle)}else o.multiply(A,_.labelPlaneMatrix,u);return A}function at(u,t,l,h,_,b,D){const A=wn(u,t,l,h,_,b,D);return"globe"===b.name&&l||(A[2]=A[6]=A[10]=A[14]=0),A}function vt(u,t,l,h,_,b,D){if(l){if("globe"===b.name){const A=wn(u,t,l,h,_,b,D);return o.invert(A,A),o.multiply(A,u,A),A}{const A=o.clone(u),B=o.identity([]);return B[0]=D[0],B[1]=D[1],B[4]=D[2],B[5]=D[3],o.multiply(A,A,B),h||o.rotateZ(A,A,-_.angle),A}}return _.glCoordMatrix}function I(u,t,l,h){const _=[u,t,l,1];l?o.transformMat4$1(_,_,h):Ni(_,_,h);const b=_[3];return _[0]/=b,_[1]/=b,_[2]/=b,_}function ie(u,t){return Math.min(.5+u/t*.5,1.5)}function Se(u,t){const l=u[0]/u[3],h=u[1]/u[3];return l>=-t[0]&&l<=t[0]&&h>=-t[1]&&h<=t[1]}function et(u,t,l,h,_,b,D,A,B,J){const K=l.transform,de=h?u.textSizeData:u.iconSizeData,Ie=o.evaluateSizeForZoom(de,l.transform.zoom),He="globe"===K.projection.name,Xe=[256/l.width*2+1,256/l.height*2+1],qe=h?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;qe.clear();let tt=null;He&&(tt=h?u.text.globeExtVertexArray:u.icon.globeExtVertexArray);const fe=u.lineVertexArray,Ze=h?u.text.placedSymbolArray:u.icon.placedSymbolArray,ut=l.transform.width/l.transform.height;let dt,Vt=!1;for(let $t=0;$t<Ze.length;$t++){const Ht=Ze.get($t),{numGlyphs:tn,writingMode:Xt}=Ht;if(Xt!==o.WritingMode.vertical||Vt||dt===o.WritingMode.horizontal||(Vt=!0),dt=Xt,(Ht.hidden||Xt===o.WritingMode.vertical)&&!Vt){xr(tn,qe);continue}Vt=!1;const hn=new o.Point(Ht.tileAnchorX,Ht.tileAnchorY);let{x:Xn,y:dn,z:Nn}=K.projection.projectTilePoint(hn.x,hn.y,J.canonical);if(B){const[qi,Ci,Li]=B(hn);Xn+=qi,dn+=Ci,Nn+=Li}const bn=[Xn,dn,Nn,1];if(o.transformMat4$1(bn,bn,t),!Se(bn,Xe)){xr(tn,qe);continue}const qn=ie(l.transform.cameraToCenterDistance,bn[3]),mn=o.evaluateSizeForFeature(de,Ie,Ht),Ln=D?mn/qn:mn*qn,Jn=I(Xn,dn,Nn,_);if(Jn[3]<=0){xr(tn,qe);continue}let jn={};const Qn=D?null:B,Pi=fn(Ht,Ln,!1,A,t,_,b,u.glyphOffsetArray,fe,qe,tt,Jn,hn,jn,ut,Qn,K.projection,J,D);Vt=Pi.useVertical,Qn&&Pi.needsFlipping&&(jn={}),(Pi.notEnoughRoom||Vt||Pi.needsFlipping&&fn(Ht,Ln,!0,A,t,_,b,u.glyphOffsetArray,fe,qe,tt,Jn,hn,jn,ut,Qn,K.projection,J,D).notEnoughRoom)&&xr(tn,qe)}h?(u.text.dynamicLayoutVertexBuffer.updateData(qe),tt&&u.text.globeExtVertexBuffer.updateData(tt)):(u.icon.dynamicLayoutVertexBuffer.updateData(qe),tt&&u.icon.globeExtVertexBuffer.updateData(tt))}function An(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe){const{lineStartIndex:tt,glyphStartIndex:fe,segment:Ze}=A,ut=fe+A.numGlyphs,dt=tt+A.lineLength,Vt=t.getoffsetX(fe),$t=t.getoffsetX(ut-1),Ht=yi(u*Vt,l,h,_,b,D,Ze,tt,dt,B,J,K,de,Ie,!0,He,Xe,qe);if(!Ht)return null;const tn=yi(u*$t,l,h,_,b,D,Ze,tt,dt,B,J,K,de,Ie,!0,He,Xe,qe);return tn?{first:Ht,last:tn}:null}function mi(u,t,l,h){return u===o.WritingMode.horizontal&&Math.abs(h)>Math.abs(l)?{useVertical:!0}:u===o.WritingMode.vertical?h>0?{needsFlipping:!0}:null:t!==Ho.unknown&&(0===(_=l)||Math.abs(h/_)>wo)?t===Ho.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null;var _}function fn(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe,tt,fe,Ze){const ut=t/24,dt=u.lineOffsetX*ut,Vt=u.lineOffsetY*ut,{lineStartIndex:$t,glyphStartIndex:Ht,numGlyphs:tn,segment:Xt,writingMode:hn,flipState:Xn}=u,dn=$t+u.lineLength,Nn=bn=>{if(K){const[Jn,jn,Qn]=bn.up,Pi=J.length;o.updateGlobeVertexNormal(K,Pi+0,Jn,jn,Qn),o.updateGlobeVertexNormal(K,Pi+1,Jn,jn,Qn),o.updateGlobeVertexNormal(K,Pi+2,Jn,jn,Qn),o.updateGlobeVertexNormal(K,Pi+3,Jn,jn,Qn)}const[qn,mn,Ln]=bn.point;o.addDynamicAttributes(J,qn,mn,Ln,bn.angle)};if(tn>1){const bn=An(ut,A,dt,Vt,l,de,Ie,u,B,b,He,qe,!1,tt,fe,Ze);if(!bn)return{notEnoughRoom:!0};if(h&&!l){let[qn,mn,Ln]=bn.first.point,[Jn,jn,Qn]=bn.last.point;[qn,mn]=I(qn,mn,Ln,D),[Jn,jn]=I(Jn,jn,Qn,D);const Pi=mi(hn,Xn,(Jn-qn)*Xe,jn-mn);if(u.flipState=Pi&&Pi.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,Pi)return Pi}Nn(bn.first);for(let qn=Ht+1;qn<Ht+tn-1;qn++){const mn=yi(ut*A.getoffsetX(qn),dt,Vt,l,de,Ie,Xt,$t,dn,B,b,He,qe,!1,!1,tt,fe,Ze);if(!mn)return J.length-=4*(qn-Ht),{notEnoughRoom:!0};Nn(mn)}Nn(bn.last)}else{if(h&&!l){const qn=I(Ie.x,Ie.y,0,_),mn=$t+Xt+1,Ln=new o.Point(B.getx(mn),B.gety(mn)),Jn=I(Ln.x,Ln.y,0,_),jn=Jn[3]>0?Jn:wi(Ie,Ln,qn,1,_,void 0,tt,fe.canonical),Qn=mi(hn,Xn,(jn[0]-qn[0])*Xe,jn[1]-qn[1]);if(u.flipState=Qn&&Qn.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,Qn)return Qn}const bn=yi(ut*A.getoffsetX(Ht),dt,Vt,l,de,Ie,Xt,$t,dn,B,b,He,qe,!1,!1,tt,fe,Ze);if(!bn)return{notEnoughRoom:!0};Nn(bn)}return{}}function xi(u,t,l,h,_){const{x:b,y:D,z:A}=h.projectTilePoint(u.x,u.y,t);if(!_)return I(b,D,A,l);const[B,J,K]=_(u);return I(b+B,D+J,A+K,l)}function wi(u,t,l,h,_,b,D,A){const B=xi(u.sub(t)._unit()._add(u),A,_,D,b);return o.sub(B,l,B),o.normalize(B,B),o.scaleAndAdd(B,l,B,h)}function yi(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe,tt,fe){const Ze=h?u-t:u+t;let ut=Ze>0?1:-1,dt=0;h&&(ut*=-1,dt=Math.PI),ut<0&&(dt+=Math.PI);let Vt=A+D+(ut>0?0:1)|0,$t=_,Ht=_,tn=0,Xt=0;const hn=Math.abs(Ze),Xn=[],dn=[];let Nn=b,bn=Nn;const qn=()=>wi(bn,Nn,Ht,hn-tn+1,K,Ie,qe,tt.canonical);for(;tn+Xt<=hn;){if(Vt+=ut,Vt<A||Vt>=B)return null;if(Ht=$t,bn=Nn,Xn.push(Ht),He&&dn.push(bn),Nn=new o.Point(J.getx(Vt),J.gety(Vt)),$t=de[Vt],!$t){const Li=xi(Nn,tt.canonical,K,qe,Ie);$t=Li[3]>0?de[Vt]=Li:qn()}tn+=Xt,Xt=o.distance(Ht,$t)}Xe&&Ie&&(de[Vt]&&($t=qn(),Xt=o.distance(Ht,$t)),de[Vt]=$t);const mn=(hn-tn)/Xt,Ln=Nn.sub(bn)._mult(mn)._add(bn),Jn=o.sub([],$t,Ht),jn=o.scaleAndAdd([],Ht,Jn,mn);let Qn=[0,0,1],Pi=Jn[0],qi=Jn[1];if(fe&&(Qn=qe.upVector(tt.canonical,Ln.x,Ln.y),0!==Qn[0]||0!==Qn[1]||1!==Qn[2])){const Li=[Qn[2],0,-Qn[0]],hr=o.cross([],Qn,Li);o.normalize(Li,Li),o.normalize(hr,hr),Pi=o.dot(Jn,Li),qi=o.dot(Jn,hr)}if(l){const Li=o.cross([],Qn,Jn);o.normalize(Li,Li),o.scaleAndAdd(jn,jn,Li,l*ut)}const Ci=dt+Math.atan2(qi,Pi);return Xn.push(jn),He&&dn.push(Ln),{point:jn,angle:Ci,path:Xn,tilePath:dn,up:Qn}}function xr(u,t){const l=t.length,h=l+4*u;t.resize(h),t.float32.fill(-1/0,4*l,4*h)}function Ni(u,t,l){const h=t[0],_=t[1];return u[0]=l[0]*h+l[4]*_+l[12],u[1]=l[1]*h+l[5]*_+l[13],u[3]=l[3]*h+l[7]*_+l[15],u}const Qr=100;class Ao{constructor(t,l,h=new Hr(t.width+200,t.height+200,25),_=new Hr(t.width+200,t.height+200,25)){this.transform=t,this.grid=h,this.ignoredGrid=_,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Qr,this.screenBottomBoundary=t.height+Qr,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=l}placeCollisionBox(t,l,h,_,b,D,A,B){let J=h.projectedAnchorX,K=h.projectedAnchorY,de=h.projectedAnchorZ;const Ie=h.elevation,He=h.tileID,Xe=t.getProjection();if(Ie&&He){const[$t,Ht,tn]=Xe.upVector(He.canonical,h.tileAnchorX,h.tileAnchorY),Xt=Xe.upVectorScale(He.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;J+=$t*Ie*Xt,K+=Ht*Ie*Xt,de+=tn*Ie*Xt}const qe=this.projectAndGetPerspectiveRatio(A,J,K,de,h.tileID,"globe"===Xe.name||!!Ie||this.transform.pitch>0,Xe),tt=D*qe.perspectiveRatio,fe=(h.x1*l+_.x-h.padding)*tt+qe.point.x,Ze=(h.y1*l+_.y-h.padding)*tt+qe.point.y,ut=(h.x2*l+_.x+h.padding)*tt+qe.point.x,dt=(h.y2*l+_.y+h.padding)*tt+qe.point.y,Vt=qe.perspectiveRatio<=.55||qe.occluded;return!this.isInsideGrid(fe,Ze,ut,dt)||!b&&this.grid.hitTest(fe,Ze,ut,dt,B)||Vt?{box:[],offscreen:!1,occluded:qe.occluded}:{box:[fe,Ze,ut,dt],offscreen:this.isOffscreen(fe,Ze,ut,dt),occluded:!1}}placeCollisionCircles(t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe){const tt=[],fe=this.transform.elevation,Ze=t.getProjection(),ut=fe?fe.getAtTileOffsetFunc(qe,this.transform.center.lat,this.transform.worldSize,Ze):null,dt=new o.Point(h.tileAnchorX,h.tileAnchorY);let{x:Vt,y:$t,z:Ht}=Ze.projectTilePoint(dt.x,dt.y,qe.canonical);if(ut){const[Ln,Jn,jn]=ut(dt);Vt+=Ln,$t+=Jn,Ht+=jn}const tn="globe"===Ze.name,Xt=this.projectAndGetPerspectiveRatio(A,Vt,$t,Ht,qe,tn||!!fe||this.transform.pitch>0,Ze),{perspectiveRatio:hn}=Xt,Xn=(de?D/hn:D*hn)/o.ONE_EM,dn=I(Vt,$t,Ht,B),Nn=Xt.signedDistanceFromCamera>0?An(Xn,b,h.lineOffsetX*Xn,h.lineOffsetY*Xn,!1,dn,dt,h,_,B,{},fe&&!de?ut:null,de&&!!fe,Ze,qe,de):null;let bn=!1,qn=!1,mn=!0;if(Nn&&!Xt.occluded){const Ln=.5*He*hn+Xe,Jn=new o.Point(-100,-100),jn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Qn=new Tr,{first:Pi,last:qi}=Nn,Ci=Pi.path.length;let Li=[];for(let Si=Ci-1;Si>=1;Si--)Li.push(Pi.path[Si]);for(let Si=1;Si<qi.path.length;Si++)Li.push(qi.path[Si]);const hr=2.5*Ln;J&&(Li=Li.map(([Si,kr,to],no)=>(ut&&!tn&&(to=ut(no<Ci-1?Pi.tilePath[Ci-1-no]:qi.tilePath[no-Ci+2])[2]),I(Si,kr,to,J))),Li.some(Si=>Si[3]<=0)&&(Li=[]));let lr=[];if(Li.length>0){let Si=1/0,kr=-1/0,to=1/0,no=-1/0;for(const jr of Li)Si=Math.min(Si,jr[0]),to=Math.min(to,jr[1]),kr=Math.max(kr,jr[0]),no=Math.max(no,jr[1]);kr>=Jn.x&&Si<=jn.x&&no>=Jn.y&&to<=jn.y&&(lr=[Li.map(jr=>new o.Point(jr[0],jr[1]))],(Si<Jn.x||kr>jn.x||to<Jn.y||no>jn.y)&&(lr=o.clipLine(lr,Jn.x,Jn.y,jn.x,jn.y)))}for(const Si of lr){Qn.reset(Si,.25*Ln);let kr=0;kr=Qn.length<=.5*Ln?1:Math.ceil(Qn.paddedLength/hr)+1;for(let to=0;to<kr;to++){const no=to/Math.max(kr-1,1),jr=Qn.lerp(no),wa=jr.x+Qr,ta=jr.y+Qr;tt.push(wa,ta,Ln,0);const fl=wa-Ln,kl=ta-Ln,Io=wa+Ln,Yr=ta+Ln;if(mn=mn&&this.isOffscreen(fl,kl,Io,Yr),qn=qn||this.isInsideGrid(fl,kl,Io,Yr),!l&&this.grid.hitTestCircle(wa,ta,Ln,Ie)&&(bn=!0,!K))return{circles:[],offscreen:!1,collisionDetected:bn,occluded:!1}}}}return{circles:!K&&bn||!qn?[]:tt,offscreen:mn,collisionDetected:bn,occluded:Xt.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const l=[];let h=1/0,_=1/0,b=-1/0,D=-1/0;for(const K of t){const de=new o.Point(K.x+Qr,K.y+Qr);h=Math.min(h,de.x),_=Math.min(_,de.y),b=Math.max(b,de.x),D=Math.max(D,de.y),l.push(de)}const A=this.grid.query(h,_,b,D).concat(this.ignoredGrid.query(h,_,b,D)),B={},J={};for(const K of A){const de=K.key;if(void 0===B[de.bucketInstanceId]&&(B[de.bucketInstanceId]={}),B[de.bucketInstanceId][de.featureIndex])continue;const Ie=[new o.Point(K.x1,K.y1),new o.Point(K.x2,K.y1),new o.Point(K.x2,K.y2),new o.Point(K.x1,K.y2)];o.polygonIntersectsPolygon(l,Ie)&&(B[de.bucketInstanceId][de.featureIndex]=!0,void 0===J[de.bucketInstanceId]&&(J[de.bucketInstanceId]=[]),J[de.bucketInstanceId].push(de.featureIndex))}return J}insertCollisionBox(t,l,h,_,b){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:_,collisionGroupID:b},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,l,h,_,b){const D=l?this.ignoredGrid:this.grid,A={bucketInstanceId:h,featureIndex:_,collisionGroupID:b};for(let B=0;B<t.length;B+=4)D.insertCircle(A,t[B],t[B+1],t[B+2])}projectAndGetPerspectiveRatio(t,l,h,_,b,D,A){const B=[l,h,_,1];let J=!1;_||this.transform.pitch>0?(o.transformMat4$1(B,B,t),this.fogState&&b&&"globe"!==A.name&&(J=function(Ie,He,Xe,qe,tt,fe){const Ze=fe.calculateFogTileMatrix(tt),ut=[He,Xe,qe];return o.transformMat4(ut,ut,Ze),Dn(Ie,ut,fe.pitch,fe._fov)}(this.fogState,l,h,_,b.toUnwrapped(),this.transform)>.9)):Ni(B,B,t);const K=B[3];return{point:new o.Point((B[0]/K+1)/2*this.transform.width+Qr,(-B[1]/K+1)/2*this.transform.height+Qr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(A)/K*.5,1.5),signedDistanceFromCamera:K,occluded:D&&B[2]>K||J}}isOffscreen(t,l,h,_){return h<Qr||t>=this.screenRightBoundary||_<Qr||l>this.screenBottomBoundary}isInsideGrid(t,l,h,_){return h>=0&&t<this.gridRightBoundary&&_>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const t=o.identity([]);return o.translate(t,t,[-100,-100,0]),t}}function _r(u,t,l){const h=t.createTileMatrix(u,u.worldSize,l.toUnwrapped());return o.multiply(new Float32Array(16),u.projMatrix,h)}function mo(u,t,l){if(t.projection.name===l.projection.name)return u.projMatrix;const h=l.clone();return h.setProjection(t.projection),_r(h,t.getProjection(),u)}function rr(u,t,l){return t.name===l.projection.name?u.projMatrix:_r(l,t,u)}class cr{constructor(t,l,h,_){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?l:-l))):_&&h?1:0,this.placed=h}isHidden(){return 0===this.opacity&&!this.placed}}class Co{constructor(t,l,h,_,b,D=!1){this.text=new cr(t?t.text:null,l,h,b),this.icon=new cr(t?t.icon:null,l,_,b),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Es{constructor(t,l,h,_=!1){this.text=t,this.icon=l,this.skipFade=h,this.clipped=_}}class fr{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Go{constructor(t,l,h,_,b){this.bucketInstanceId=t,this.featureIndex=l,this.sourceLayerIndex=h,this.bucketIndex=_,this.tileID=b}}class ma{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const l=++this.maxGroupID;this.collisionGroups[t]={ID:l,predicate:h=>h.collisionGroupID===l}}return this.collisionGroups[t]}}function Gs(u,t,l,h,_){const{horizontalAlign:b,verticalAlign:D}=o.getAnchorAlignment(u),A=-(b-.5)*t,B=-(D-.5)*l,J=o.evaluateVariableOffset(u,h);return new o.Point(A+J[0]*_,B+J[1]*_)}function $s(u,t,l,h,_){const b=new o.Point(u,t);return l&&b._rotate(h?_:-_),b}class So{constructor(t,l,h,_,b){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new Ao(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new ma(h),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,l,h,_){const b=h.getBucket(l),D=h.latestFeatureIndex;if(!b||!D||l.id!==b.layerIds[0])return;const A=b.layers[0].layout,B=h.collisionBoxArray,J=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),K=h.tileSize/o.EXTENT,de=h.tileID.toUnwrapped();this.transform.setProjection(b.projection);const Ie=(He=h.tileID,Xe=b.getProjection(),qe=this.transform,Xe.name===this.projection?qe.calculateProjMatrix(He.toUnwrapped()):_r(qe,Xe,He));var He,Xe,qe;const tt="map"===A.get("text-pitch-alignment"),fe="map"===A.get("text-rotation-alignment");l.compileFilter();const Ze=l.dynamicFilter(),ut=l.dynamicFilterNeedsFeature(),dt=this.transform.calculatePixelsToTileUnitsMatrix(h),Vt=at(Ie,h.tileID.canonical,tt,fe,this.transform,b.getProjection(),dt);let $t=null;if(tt){const Xt=vt(Ie,h.tileID.canonical,tt,fe,this.transform,b.getProjection(),dt);$t=o.multiply([],this.transform.labelPlaneMatrix,Xt)}let Ht=null;Ze&&h.latestFeatureIndex&&(Ht={unwrappedTileID:de,dynamicFilter:Ze,dynamicFilterNeedsFeature:ut,featureIndex:h.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new Go(b.bucketInstanceId,D,b.sourceLayerIndex,b.index,h.tileID);const tn={bucket:b,layout:A,posMatrix:Ie,textLabelPlaneMatrix:Vt,labelToScreenMatrix:$t,clippingData:Ht,scale:J,textPixelRatio:K,holdingForFade:h.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const Xt of b.sortKeyRanges){const{sortKey:hn,symbolInstanceStart:Xn,symbolInstanceEnd:dn}=Xt;t.push({sortKey:hn,symbolInstanceStart:Xn,symbolInstanceEnd:dn,parameters:tn})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:tn})}attemptAnchorPlacement(t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe,tt,fe,Ze){const{textOffset0:ut,textOffset1:dt,crossTileID:Vt}=Ie,$t=[ut,dt],Ht=Gs(t,h,_,$t,b),tn=this.collisionIndex.placeCollisionBox(Xe,b,l,$s(Ht.x,Ht.y,D,A,this.transform.angle),de,B,J,K.predicate);if(tt){const Xt=Xe.getSymbolInstanceIconSize(Ze,this.transform.zoom,Ie.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(Xe,Xt,tt,$s(Ht.x,Ht.y,D,A,this.transform.angle),de,B,J,K.predicate).box.length)return}if(tn.box.length>0){let Xt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Vt]&&this.prevPlacement.placements[Vt]&&this.prevPlacement.placements[Vt].text&&(Xt=this.prevPlacement.variableOffsets[Vt].anchor),this.variableOffsets[Vt]={textOffset:$t,width:h,height:_,anchor:t,textScale:b,prevAnchor:Xt},this.markUsedJustification(Xe,t,Ie,qe),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,qe,Ie),this.placedOrientations[Vt]=qe),{shift:Ht,placedGlyphBoxes:tn}}}placeLayerBucketPart(t,l,h,_){const{bucket:b,layout:D,posMatrix:A,textLabelPlaneMatrix:B,labelToScreenMatrix:J,clippingData:K,textPixelRatio:de,holdingForFade:Ie,collisionBoxArray:He,partiallyEvaluatedTextSize:Xe,partiallyEvaluatedIconSize:qe,collisionGroup:tt}=t.parameters,fe=D.get("text-optional"),Ze=D.get("icon-optional"),ut=D.get("text-allow-overlap"),dt=D.get("icon-allow-overlap"),Vt="map"===D.get("text-rotation-alignment"),$t="map"===D.get("text-pitch-alignment"),Ht="none"!==D.get("icon-text-fit"),tn="viewport-y"===D.get("symbol-z-order");this.transform.setProjection(b.projection);let Xt=ut&&(dt||!b.hasIconData()||Ze),hn=dt&&(ut||!b.hasTextData()||fe);!b.collisionArrays&&He&&b.deserializeCollisionBoxes(He),h&&_&&b.updateCollisionDebugBuffers(this.transform.zoom,He);const Xn=(dn,Nn,bn)=>{const{crossTileID:qn,numVerticalGlyphVertices:mn}=dn;if(K){const Io={zoom:this.transform.zoom,pitch:this.transform.pitch};let Yr=null;if(K.dynamicFilterNeedsFeature){const Cr=this.retainedQueryData[b.bucketInstanceId];Yr=K.featureIndex.loadFeature({featureIndex:dn.featureIndex,bucketIndex:Cr.bucketIndex,sourceLayerIndex:Cr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,K.dynamicFilter)(Io,Yr,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new o.Point(dn.tileAnchorX,dn.tileAnchorY),this.transform.calculateDistanceTileData(K.unwrappedTileID)))return this.placements[qn]=new Es(!1,!1,!1,!0),void l.add(qn)}if(l.has(qn))return;if(Ie)return void(this.placements[qn]=new Es(!1,!1,!1));let Ln=!1,Jn=!1,jn=!0,Qn=!1,Pi=!1,qi=null,Ci={box:null,offscreen:null,occluded:null},Li={box:null,offscreen:null,occluded:null},hr=null,lr=null,Si=null,kr=0,to=0,no=0;bn.textFeatureIndex?kr=bn.textFeatureIndex:dn.useRuntimeCollisionCircles&&(kr=dn.featureIndex),bn.verticalTextFeatureIndex&&(to=bn.verticalTextFeatureIndex);const jr=Io=>{Io.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const Yr=this.transform.elevation;(Yr||Io.elevation)&&(Io.elevation=Yr?Yr.getAtTileOffset(Io.tileID,Io.tileAnchorX,Io.tileAnchorY):0)},wa=bn.textBox;if(wa){jr(wa);const Io=Cr=>{let Xo=o.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Cr&&this.prevPlacement){const ha=this.prevPlacement.placedOrientations[qn];ha&&(this.placedOrientations[qn]=ha,Xo=ha,this.markUsedOrientation(b,Xo,dn))}return Xo},Yr=(Cr,Xo)=>{if(b.allowVerticalPlacement&&mn>0&&bn.verticalTextBox){for(const ha of b.writingModes)if(ha===o.WritingMode.vertical?(Ci=Xo(),Li=Ci):Ci=Cr(),Ci&&Ci.box&&Ci.box.length)break}else Ci=Cr()};if(D.get("text-variable-anchor")){let Cr=D.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[qn]){const po=this.prevPlacement.variableOffsets[qn];Cr.indexOf(po.anchor)>0&&(Cr=Cr.filter(Ca=>Ca!==po.anchor),Cr.unshift(po.anchor))}const Xo=(po,Ca,Ua)=>{const gc=b.getSymbolInstanceTextSize(Xe,dn,this.transform.zoom,Nn),uu=(po.x2-po.x1)*gc+2*po.padding,Rl=(po.y2-po.y1)*gc+2*po.padding,Fl=Ht&&!dt?Ca:null;Fl&&jr(Fl);let Ll={box:[],offscreen:!1,occluded:!1};const Vu=ut?2*Cr.length:Cr.length;for(let du=0;du<Vu;++du){const Dd=this.attemptAnchorPlacement(Cr[du%Cr.length],po,uu,Rl,gc,Vt,$t,de,A,tt,du>=Cr.length,dn,Nn,b,Ua,Fl,Xe,qe);if(Dd&&(Ll=Dd.placedGlyphBoxes,Ll&&Ll.box&&Ll.box.length)){Ln=!0,qi=Dd.shift;break}}return Ll};Yr(()=>Xo(wa,bn.iconBox,o.WritingMode.horizontal),()=>{const po=bn.verticalTextBox;return po&&jr(po),b.allowVerticalPlacement&&!(Ci&&Ci.box&&Ci.box.length)&&mn>0&&po?Xo(po,bn.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ci&&(Ln=Ci.box,jn=Ci.offscreen,Qn=Ci.occluded);const ha=Io(!(!Ci||!Ci.box));if(!Ln&&this.prevPlacement){const po=this.prevPlacement.variableOffsets[qn];po&&(this.variableOffsets[qn]=po,this.markUsedJustification(b,po.anchor,dn,ha))}}else{const Cr=(Xo,ha)=>{const po=b.getSymbolInstanceTextSize(Xe,dn,this.transform.zoom,Nn),Ca=this.collisionIndex.placeCollisionBox(b,po,Xo,new o.Point(0,0),ut,de,A,tt.predicate);return Ca&&Ca.box&&Ca.box.length&&(this.markUsedOrientation(b,ha,dn),this.placedOrientations[qn]=ha),Ca};Yr(()=>Cr(wa,o.WritingMode.horizontal),()=>{const Xo=bn.verticalTextBox;return b.allowVerticalPlacement&&mn>0&&Xo?(jr(Xo),Cr(Xo,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Io(!!(Ci&&Ci.box&&Ci.box.length))}}if(hr=Ci,Ln=hr&&hr.box&&hr.box.length>0,jn=hr&&hr.offscreen,Qn=hr&&hr.occluded,dn.useRuntimeCollisionCircles){const Io=b.text.placedSymbolArray.get(dn.centerJustifiedTextSymbolIndex>=0?dn.centerJustifiedTextSymbolIndex:dn.verticalPlacedTextSymbolIndex),Yr=o.evaluateSizeForFeature(b.textSizeData,Xe,Io),Cr=D.get("text-padding");lr=this.collisionIndex.placeCollisionCircles(b,ut,Io,b.lineVertexArray,b.glyphOffsetArray,Yr,A,B,J,h,$t,tt.predicate,dn.collisionCircleDiameter*Yr/o.ONE_EM,Cr,this.retainedQueryData[b.bucketInstanceId].tileID),Ln=ut||lr.circles.length>0&&!lr.collisionDetected,jn=jn&&lr.offscreen,Qn=lr.occluded}if(bn.iconFeatureIndex&&(no=bn.iconFeatureIndex),bn.iconBox){const Io=Yr=>{jr(Yr);const Cr=Ht&&qi?$s(qi.x,qi.y,Vt,$t,this.transform.angle):new o.Point(0,0),Xo=b.getSymbolInstanceIconSize(qe,this.transform.zoom,dn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,Xo,Yr,Cr,dt,de,A,tt.predicate)};Li&&Li.box&&Li.box.length&&bn.verticalIconBox?(Si=Io(bn.verticalIconBox),Jn=Si.box.length>0):(Si=Io(bn.iconBox),Jn=Si.box.length>0),jn=jn&&Si.offscreen,Pi=Si.occluded}const ta=fe||0===dn.numHorizontalGlyphVertices&&0===mn,fl=Ze||0===dn.numIconVertices;if(ta||fl?fl?ta||(Jn=Jn&&Ln):Ln=Jn&&Ln:Jn=Ln=Jn&&Ln,Ln&&hr&&hr.box&&this.collisionIndex.insertCollisionBox(hr.box,D.get("text-ignore-placement"),b.bucketInstanceId,Li&&Li.box&&to?to:kr,tt.ID),Jn&&Si&&this.collisionIndex.insertCollisionBox(Si.box,D.get("icon-ignore-placement"),b.bucketInstanceId,no,tt.ID),lr&&(Ln&&this.collisionIndex.insertCollisionCircles(lr.circles,D.get("text-ignore-placement"),b.bucketInstanceId,kr,tt.ID),h)){const Io=b.bucketInstanceId;let Yr=this.collisionCircleArrays[Io];void 0===Yr&&(Yr=this.collisionCircleArrays[Io]=new fr);for(let Cr=0;Cr<lr.circles.length;Cr+=4)Yr.circles.push(lr.circles[Cr+0]),Yr.circles.push(lr.circles[Cr+1]),Yr.circles.push(lr.circles[Cr+2]),Yr.circles.push(lr.collisionDetected?1:0)}const kl="globe"!==b.projection.name;Xt=Xt&&(kl||!Qn),hn=hn&&(kl||!Pi),this.placements[qn]=new Es(Ln||Xt,Jn||hn,jn||b.justReloaded),l.add(qn)};if(tn){const dn=b.getSortedSymbolIndexes(this.transform.angle);for(let Nn=dn.length-1;Nn>=0;--Nn){const bn=dn[Nn];Xn(b.symbolInstances.get(bn),bn,b.collisionArrays[bn])}}else for(let dn=t.symbolInstanceStart;dn<t.symbolInstanceEnd;dn++)Xn(b.symbolInstances.get(dn),dn,b.collisionArrays[dn]);if(h&&b.bucketInstanceId in this.collisionCircleArrays){const dn=this.collisionCircleArrays[b.bucketInstanceId];o.invert(dn.invProjMatrix,A),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(t,l,h,_){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:B,crossTileID:J}=h,K=o.getAnchorJustification(l),de=_===o.WritingMode.vertical?B:"left"===K?b:"center"===K?D:"right"===K?A:-1;b>=0&&(t.text.placedSymbolArray.get(b).crossTileID=de>=0&&b!==de?0:J),D>=0&&(t.text.placedSymbolArray.get(D).crossTileID=de>=0&&D!==de?0:J),A>=0&&(t.text.placedSymbolArray.get(A).crossTileID=de>=0&&A!==de?0:J),B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=de>=0&&B!==de?0:J)}markUsedOrientation(t,l,h){const _=l===o.WritingMode.horizontal||l===o.WritingMode.horizontalOnly?l:0,b=l===o.WritingMode.vertical?l:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:B,verticalPlacedTextSymbolIndex:J}=h,K=t.text.placedSymbolArray;D>=0&&(K.get(D).placedOrientation=_),A>=0&&(K.get(A).placedOrientation=_),B>=0&&(K.get(B).placedOrientation=_),J>=0&&(K.get(J).placedOrientation=b)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let h=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const _=l?l.symbolFadeChange(t):1,b=l?l.opacities:{},D=l?l.variableOffsets:{},A=l?l.placedOrientations:{};for(const B in this.placements){const J=this.placements[B],K=b[B];K?(this.opacities[B]=new Co(K,_,J.text,J.icon,null,J.clipped),h=h||J.text!==K.text.placed||J.icon!==K.icon.placed):(this.opacities[B]=new Co(null,_,J.text,J.icon,J.skipFade,J.clipped),h=h||J.text||J.icon)}for(const B in b){const J=b[B];if(!this.opacities[B]){const K=new Co(J,_,!1,!1);K.isHidden()||(this.opacities[B]=K,h=h||J.text.placed||J.icon.placed)}}for(const B in D)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=D[B]);for(const B in A)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=A[B]);h?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:t)}updateLayerOpacities(t,l){const h=new Set;for(const _ of l){const b=_.getBucket(t);b&&_.latestFeatureIndex&&t.id===b.layerIds[0]&&this.updateBucketOpacities(b,h,_.collisionBoxArray)}}updateBucketOpacities(t,l,h){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const _=t.layers[0].layout,b=!!t.layers[0].dynamicFilter(),D=new Co(null,0,!1,!1,!0),A=_.get("text-allow-overlap"),B=_.get("icon-allow-overlap"),J=_.get("text-variable-anchor"),K="map"===_.get("text-rotation-alignment"),de="map"===_.get("text-pitch-alignment"),Ie="none"!==_.get("icon-text-fit"),He=new Co(null,0,A&&(B||!t.hasIconData()||_.get("icon-optional")),B&&(A||!t.hasTextData()||_.get("text-optional")),!0);!t.collisionArrays&&h&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(h);const Xe=(tt,fe,Ze)=>{for(let ut=0;ut<fe/4;ut++)tt.opacityVertexArray.emplaceBack(Ze)};let qe=0;for(let tt=0;tt<t.symbolInstances.length;tt++){const fe=t.symbolInstances.get(tt),{numHorizontalGlyphVertices:Ze,numVerticalGlyphVertices:ut,crossTileID:dt,numIconVertices:Vt}=fe,$t=l.has(dt);let Ht=this.opacities[dt];$t?Ht=D:Ht||(Ht=He,this.opacities[dt]=Ht),l.add(dt);const tn=Ze>0||ut>0,Xt=Vt>0,hn=this.placedOrientations[dt],Xn=hn===o.WritingMode.vertical,dn=hn===o.WritingMode.horizontal||hn===o.WritingMode.horizontalOnly;if(!tn&&!Xt||Ht.isHidden()||qe++,tn){const Nn=zr(Ht.text);Xe(t.text,Ze,Xn?Sr:Nn),Xe(t.text,ut,dn?Sr:Nn);const bn=Ht.text.isHidden(),{leftJustifiedTextSymbolIndex:qn,centerJustifiedTextSymbolIndex:mn,rightJustifiedTextSymbolIndex:Ln,verticalPlacedTextSymbolIndex:Jn}=fe,jn=t.text.placedSymbolArray,Qn=bn||Xn?1:0;qn>=0&&(jn.get(qn).hidden=Qn),mn>=0&&(jn.get(mn).hidden=Qn),Ln>=0&&(jn.get(Ln).hidden=Qn),Jn>=0&&(jn.get(Jn).hidden=bn||dn?1:0);const Pi=this.variableOffsets[dt];Pi&&this.markUsedJustification(t,Pi.anchor,fe,hn);const qi=this.placedOrientations[dt];qi&&(this.markUsedJustification(t,"left",fe,qi),this.markUsedOrientation(t,qi,fe))}if(Xt){const Nn=zr(Ht.icon),{placedIconSymbolIndex:bn,verticalPlacedIconSymbolIndex:qn}=fe,mn=t.icon.placedSymbolArray,Ln=Ht.icon.isHidden()?1:0;bn>=0&&(Xe(t.icon,Vt,Xn?Sr:Nn),mn.get(bn).hidden=Ln),qn>=0&&(Xe(t.icon,fe.numVerticalIconVertices,dn?Sr:Nn),mn.get(qn).hidden=Ln)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Nn=t.collisionArrays[tt];if(Nn){let bn=new o.Point(0,0),qn=!0;if(Nn.textBox||Nn.verticalTextBox){if(J){const Ln=this.variableOffsets[dt];Ln?(bn=Gs(Ln.anchor,Ln.width,Ln.height,Ln.textOffset,Ln.textScale),K&&bn._rotate(de?this.transform.angle:-this.transform.angle)):qn=!1}b&&(qn=!Ht.clipped),Nn.textBox&&ko(t.textCollisionBox.collisionVertexArray,Ht.text.placed,!qn||Xn,bn.x,bn.y),Nn.verticalTextBox&&ko(t.textCollisionBox.collisionVertexArray,Ht.text.placed,!qn||dn,bn.x,bn.y)}const mn=qn&&Boolean(!dn&&Nn.verticalIconBox);Nn.iconBox&&ko(t.iconCollisionBox.collisionVertexArray,Ht.icon.placed,mn,Ie?bn.x:0,Ie?bn.y:0),Nn.verticalIconBox&&ko(t.iconCollisionBox.collisionVertexArray,Ht.icon.placed,!mn,Ie?bn.x:0,Ie?bn.y:0)}}}if(t.fullyClipped=0===qe,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const tt=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=tt.invProjMatrix,t.placementViewportMatrix=tt.viewportMatrix,t.collisionCircleArray=tt.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,l){const h=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*h>t}setStale(){this.stale=!0}}function ko(u,t,l,h,_){u.emplaceBack(t?1:0,l?1:0,h||0,_||0),u.emplaceBack(t?1:0,l?1:0,h||0,_||0),u.emplaceBack(t?1:0,l?1:0,h||0,_||0),u.emplaceBack(t?1:0,l?1:0,h||0,_||0)}const dr=Math.pow(2,25),Fr=Math.pow(2,24),go=Math.pow(2,17),_o=Math.pow(2,16),ao=Math.pow(2,9),Ar=Math.pow(2,8),_s=Math.pow(2,1);function zr(u){if(0===u.opacity&&!u.placed)return 0;if(1===u.opacity&&u.placed)return 4294967295;const t=u.placed?1:0,l=Math.floor(127*u.opacity);return l*dr+t*Fr+l*go+t*_o+l*ao+t*Ar+l*_s+t}const Sr=0;class Ds{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,l,h,_,b){const D=this._bucketParts;for(;this._currentTileIndex<t.length;)if(l.getBucketParts(D,_,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((A,B)=>A.sortKey-B.sortKey));this._currentPartIndex<D.length;){const A=D[this._currentPartIndex];if(l.placeLayerBucketPart(A,this._seenCrossTileIDs,h,0===A.symbolInstanceStart),this._currentPartIndex++,b())return!0}return!1}}class ns{constructor(t,l,h,_,b,D,A,B){this.placement=new So(t,b,D,A,B),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(t,l,h){const _=o.exported.now(),b=()=>{const D=o.exported.now()-_;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=l[t[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=A)&&(!D.maxzoom||D.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Ds(D)),this._inProgressLayer.continuePlacement(h[D.source],this.placement,this._showCollisionBoxes,D,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const $o=512/o.EXTENT/2;class yo{constructor(t,l,h){this.tileID=t,this.bucketInstanceId=h,this.index=new o.KDBush(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=t.canonical.x*o.EXTENT,b=t.canonical.y*o.EXTENT;for(let D=0;D<l.length;D++){const{key:A,crossTileID:B,tileAnchorX:J,tileAnchorY:K}=l.get(D),de=Math.floor((_+J)*$o),Ie=Math.floor((b+K)*$o);this.index.add(de,Ie),this.keys.push(A),this.crossTileIDs.push(B)}this.index.finish()}findMatches(t,l,h){const _=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),b=$o/Math.pow(2,l.canonical.z-this.tileID.canonical.z),D=l.canonical.x*o.EXTENT,A=l.canonical.y*o.EXTENT;for(let B=0;B<t.length;B++){const J=t.get(B);if(J.crossTileID)continue;const{key:K,tileAnchorX:de,tileAnchorY:Ie}=J,He=Math.floor((D+de)*b),Xe=Math.floor((A+Ie)*b),qe=this.index.range(He-_,Xe-_,He+_,Xe+_);for(const tt of qe){const fe=this.crossTileIDs[tt];if(this.keys[tt]===K&&!h.has(fe)){h.add(fe),J.crossTileID=fe;break}}}}}class cs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const l=Math.round((t-this.lng)/360);if(0!==l)for(const h in this.indexes){const _=this.indexes[h],b={};for(const D in _){const A=_[D];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+l),b[A.tileID.key]=A}this.indexes[h]=b}this.lng=t}addBucket(t,l,h){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let b=0;b<l.symbolInstances.length;b++)l.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const _=this.usedCrossTileIDs[t.overscaledZ];for(const b in this.indexes){const D=this.indexes[b];if(Number(b)>t.overscaledZ)for(const A in D){const B=D[A];B.tileID.isChildOf(t)&&B.findMatches(l.symbolInstances,t,_)}else{const A=D[t.scaledTo(Number(b)).key];A&&A.findMatches(l.symbolInstances,t,_)}}for(let b=0;b<l.symbolInstances.length;b++){const D=l.symbolInstances.get(b);D.crossTileID||(D.crossTileID=h.generate(),_.add(D.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new yo(t,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(t,l){for(const h of l.crossTileIDs)this.usedCrossTileIDs[t].delete(h)}removeStaleBuckets(t){let l=!1;for(const h in this.indexes){const _=this.indexes[h];for(const b in _)t[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,_[b]),delete _[b],l=!0)}return l}}class Ms{constructor(){this.layerIndexes={},this.crossTileIDs=new cs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,l,h,_){let b=this.layerIndexes[t.id];void 0===b&&(b=this.layerIndexes[t.id]=new Zs);let D=!1;const A={};"globe"!==_.name&&b.handleWrapJump(h);for(const B of l){const J=B.getBucket(t);J&&t.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(B.tileID,J,this.crossTileIDs)&&(D=!0),A[J.bucketInstanceId]=!0)}return b.removeStaleBuckets(A)&&(D=!0),D}pruneUnusedLayers(t){const l={};t.forEach(h=>{l[h]=!0});for(const h in this.layerIndexes)l[h]||delete this.layerIndexes[h]}}const Zo=(u,t)=>o.emitValidationErrors(u,t&&t.filter(l=>"source.canvas"!==l.identifier)),ga=o.pick(Wi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ws=o.pick(Wi,["setCenter","setZoom","setBearing","setPitch"]),_a={version:8,layers:[],sources:{}},us={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ds extends o.Evented{constructor(t,l={}){super(),this.map=t,this.dispatcher=new ii(Ai(),this),this.imageManager=new ht,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(t._requestManager,l.localFontFamily?o.LocalGlyphMode.all:l.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,l.localFontFamily||l.localIdeographFontFamily),this.crossTileSymbolIndex=new Ms,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const h=this;this._rtlTextPluginCallback=ds.registerForPluginStateChange(_=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,D)=>{if(o.triggerPluginCompletionEvent(b),D&&D.every(A=>A))for(const A in h._sourceCaches){const B=h._sourceCaches[A],J=B.getSource().type;"vector"!==J&&"geojson"!==J||B.reload()}})}),this.on("data",_=>{if("source"!==_.dataType||"metadata"!==_.sourceDataType)return;const b=this.getSource(_.sourceId);if(b&&b.vectorLayerIds)for(const D in this._layers){const A=this._layers[D];A.source===b.id&&this._validateLayer(A)}})}loadURL(t,l={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const h="boolean"==typeof l.validate?l.validate:!o.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,l.accessToken);const _=this.map._requestManager.transformRequest(t,o.ResourceType.Style);this._request=o.getJSON(_,(b,D)=>{this._request=null,b?this.fire(new o.ErrorEvent(b)):D&&this._load(D,h)})}loadJSON(t,l={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(t,!1!==l.validate)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(_a,!1)}_updateLayerCount(t,l){const h=l?1:-1;t.is3D()&&(this._num3DLayers+=h),"circle"===t.type&&(this._numCircleLayers+=h),"symbol"===t.type&&(this._numSymbolLayers+=h)}_load(t,l){if(l&&Zo(this,o.validateStyle(t)))return;this._loaded=!0,this.stylesheet=o.clone$1(t),this._updateMapProjection();for(const _ in t.sources)this.addSource(_,t.sources[_],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const h=Rr(this.stylesheet.layers);this._order=h.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of h){const b=o.createStyleLayer(_);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Je(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(l,h,_){let b,D,A;const B=o.exported.devicePixelRatio>1?"@2x":"";let J=o.getJSON(h.transformRequest(h.normalizeSpriteURL(l,B,".json"),o.ResourceType.SpriteJSON),(Ie,He)=>{J=null,A||(A=Ie,b=He,de())}),K=o.getImage(h.transformRequest(h.normalizeSpriteURL(l,B,".png"),o.ResourceType.SpriteImage),(Ie,He)=>{K=null,A||(A=Ie,D=He,de())});function de(){if(A)_(A);else if(b&&D){const Ie=o.exported.getImageData(D),He={};for(const Xe in b){const{width:qe,height:tt,x:fe,y:Ze,sdf:ut,pixelRatio:dt,stretchX:Vt,stretchY:$t,content:Ht}=b[Xe],tn=new o.RGBAImage({width:qe,height:tt});o.RGBAImage.copy(Ie,tn,{x:fe,y:Ze},{x:0,y:0},{width:qe,height:tt}),He[Xe]={data:tn,pixelRatio:dt,sdf:ut,stretchX:Vt,stretchY:$t,content:Ht}}_(null,He)}}return{cancel(){J&&(J.cancel(),J=null),K&&(K.cancel(),K=null)}}}(t,this.map._requestManager,(l,h)=>{if(this._spriteRequest=null,l)this.fire(new o.ErrorEvent(l));else if(h)for(const _ in h)this.imageManager.addImage(_,h[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(t){const l=this.getSource(t.source);if(!l)return;const h=t.sourceLayer;h&&("geojson"===l.type||l.vectorLayerIds&&-1===l.vectorLayerIds.indexOf(h))&&this.fire(new o.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${l.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const l=[];for(const h of t){const _=this._layers[h];"custom"!==_.type&&l.push(_.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():us[t.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const l=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const D in this._updatedSources){const A=this._updatedSources[D];"reload"===A?this._reloadSource(D):"clear"===A&&this._clearSource(D)}this._updateTilesForChangedImages();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const h={};for(const _ in this._sourceCaches){const b=this._sourceCaches[_];h[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];if(b.recalculate(t,this._availableImages),!b.isHidden(t.zoom)){const A=this._getLayerSourceCache(b);A&&(A.used=!0)}const D=this.map.painter;if(D){const A=b.getProgramIds();if(!A)continue;const B=b.getProgramConfiguration(t.zoom);for(const J of A)D.useProgram(J,B)}}for(const _ in h){const b=this._sourceCaches[_];h[_]!==b.used&&b.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),l&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Zo(this,o.validateStyle(t)))return!1;(t=o.clone$1(t)).layers=Rr(t.layers);const l=function(_,b){if(!_)return[{command:Wi.setStyle,args:[b]}];let D=[];try{if(!P(_.version,b.version))return[{command:Wi.setStyle,args:[b]}];P(_.center,b.center)||D.push({command:Wi.setCenter,args:[b.center]}),P(_.zoom,b.zoom)||D.push({command:Wi.setZoom,args:[b.zoom]}),P(_.bearing,b.bearing)||D.push({command:Wi.setBearing,args:[b.bearing]}),P(_.pitch,b.pitch)||D.push({command:Wi.setPitch,args:[b.pitch]}),P(_.sprite,b.sprite)||D.push({command:Wi.setSprite,args:[b.sprite]}),P(_.glyphs,b.glyphs)||D.push({command:Wi.setGlyphs,args:[b.glyphs]}),P(_.transition,b.transition)||D.push({command:Wi.setTransition,args:[b.transition]}),P(_.light,b.light)||D.push({command:Wi.setLight,args:[b.light]}),P(_.fog,b.fog)||D.push({command:Wi.setFog,args:[b.fog]}),P(_.projection,b.projection)||D.push({command:Wi.setProjection,args:[b.projection]});const A={},B=[];!function(de,Ie,He,Xe){let qe;for(qe in Ie=Ie||{},de=de||{})de.hasOwnProperty(qe)&&(Ie.hasOwnProperty(qe)||vr(qe,He,Xe));for(qe in Ie){if(!Ie.hasOwnProperty(qe))continue;const tt=Ie[qe];de.hasOwnProperty(qe)?P(de[qe],tt)||("geojson"===de[qe].type&&"geojson"===tt.type&&To(de,Ie,qe)?He.push({command:Wi.setGeoJSONSourceData,args:[qe,tt.data]}):so(qe,Ie,He,Xe)):oo(qe,Ie,He)}}(_.sources,b.sources,B,A);const J=[];_.layers&&_.layers.forEach(de=>{de.source&&A[de.source]?D.push({command:Wi.removeLayer,args:[de.id]}):J.push(de)});let K=_.terrain;K&&A[K.source]&&(D.push({command:Wi.setTerrain,args:[void 0]}),K=void 0),D=D.concat(B),P(K,b.terrain)||D.push({command:Wi.setTerrain,args:[b.terrain]}),function(de,Ie,He){Ie=Ie||[];const Xe=(de=de||[]).map(gr),qe=Ie.map(gr),tt=de.reduce(br,{}),fe=Ie.reduce(br,{}),Ze=Xe.slice(),ut=Object.create(null);let dt,Vt,$t,Ht,tn,Xt,hn;for(dt=0,Vt=0;dt<Xe.length;dt++)$t=Xe[dt],fe.hasOwnProperty($t)?Vt++:(He.push({command:Wi.removeLayer,args:[$t]}),Ze.splice(Ze.indexOf($t,Vt),1));for(dt=0,Vt=0;dt<qe.length;dt++)$t=qe[qe.length-1-dt],Ze[Ze.length-1-dt]!==$t&&(tt.hasOwnProperty($t)?(He.push({command:Wi.removeLayer,args:[$t]}),Ze.splice(Ze.lastIndexOf($t,Ze.length-Vt),1)):Vt++,Xt=Ze[Ze.length-dt],He.push({command:Wi.addLayer,args:[fe[$t],Xt]}),Ze.splice(Ze.length-dt,0,$t),ut[$t]=!0);for(dt=0;dt<qe.length;dt++)if($t=qe[dt],Ht=tt[$t],tn=fe[$t],!ut[$t]&&!P(Ht,tn))if(P(Ht.source,tn.source)&&P(Ht["source-layer"],tn["source-layer"])&&P(Ht.type,tn.type)){for(hn in $i(Ht.layout,tn.layout,He,$t,null,Wi.setLayoutProperty),$i(Ht.paint,tn.paint,He,$t,null,Wi.setPaintProperty),P(Ht.filter,tn.filter)||He.push({command:Wi.setFilter,args:[$t,tn.filter]}),P(Ht.minzoom,tn.minzoom)&&P(Ht.maxzoom,tn.maxzoom)||He.push({command:Wi.setLayerZoomRange,args:[$t,tn.minzoom,tn.maxzoom]}),Ht)Ht.hasOwnProperty(hn)&&"layout"!==hn&&"paint"!==hn&&"filter"!==hn&&"metadata"!==hn&&"minzoom"!==hn&&"maxzoom"!==hn&&(0===hn.indexOf("paint.")?$i(Ht[hn],tn[hn],He,$t,hn.slice(6),Wi.setPaintProperty):P(Ht[hn],tn[hn])||He.push({command:Wi.setLayerProperty,args:[$t,hn,tn[hn]]}));for(hn in tn)tn.hasOwnProperty(hn)&&!Ht.hasOwnProperty(hn)&&"layout"!==hn&&"paint"!==hn&&"filter"!==hn&&"metadata"!==hn&&"minzoom"!==hn&&"maxzoom"!==hn&&(0===hn.indexOf("paint.")?$i(Ht[hn],tn[hn],He,$t,hn.slice(6),Wi.setPaintProperty):P(Ht[hn],tn[hn])||He.push({command:Wi.setLayerProperty,args:[$t,hn,tn[hn]]}))}else He.push({command:Wi.removeLayer,args:[$t]}),Xt=Ze[Ze.lastIndexOf($t)+1],He.push({command:Wi.addLayer,args:[tn,Xt]})}(J,b.layers,D)}catch(A){console.warn("Unable to compute style diff:",A),D=[{command:Wi.setStyle,args:[b]}]}return D}(this.serialize(),t).filter(_=>!(_.command in Ws));if(0===l.length)return!1;const h=l.filter(_=>!(_.command in ga));if(h.length>0)throw new Error(`Unimplemented: ${h.map(_=>_.command).join(", ")}.`);return l.forEach(_=>{"setTransition"!==_.command&&"setProjection"!==_.command&&this[_.command].apply(this,_.args)}),this.stylesheet=t,this._updateMapProjection(),!0}addImage(t,l){return this.getImage(t)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,l),this._afterImageUpdated(t),this)}updateImage(t,l){this.imageManager.updateImage(t,l)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,l,h={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(o.validateSource,`sources.${t}`,l,null,h))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const _=zn(t,l,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:_.serialize(),sourceId:t}));const b=D=>{const A=(D?"symbol:":"other:")+t,B=this._sourceCaches[A]=new o.SourceCache(A,_,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[t]=B,B.style=this,B.onAdd(this.map)};b(!1),"vector"!==l.type&&"geojson"!==l.type||b(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const l=this.getSource(t);if(!l)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===t)return this.fire(new o.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new o.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const h=this._getSourceCaches(t);for(const _ of h)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,l){this._checkLoaded(),this.getSource(t).setData(l),this._changed=!0}getSource(t){const l=this._getSourceCache(t);return l&&l.getSource()}_getSources(){const t=[];for(const l in this._otherSourceCaches){const h=this._getSourceCache(l);h&&t.push(h.getSource())}return t}addLayer(t,l,h={}){this._checkLoaded();const _=t.id;if(this.getLayer(_))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let b;if("custom"===t.type){if(Zo(this,o.validateCustomStyleLayer(t)))return;b=o.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(_,t.source),t=o.clone$1(t),t=o.extend(t,{source:_})),this._validate(o.validateLayer,`layers.${_}`,t,{arrayIndex:-1},h))return;b=o.createStyleLayer(t),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const D=l?this._order.indexOf(l):this._order.length;if(l&&-1===D)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`)));this._order.splice(D,0,_),this._layerOrderChanged=!0,this._layers[_]=b;const A=this._getLayerSourceCache(b);if(this._removedLayers[_]&&b.source&&A&&"custom"!==b.type){const B=this._removedLayers[_];delete this._removedLayers[_],B.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",A.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,l){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===l)return;const h=this._order.indexOf(t);this._order.splice(h,1);const _=l?this._order.indexOf(l):this._order.length;l&&-1===_?this.fire(new o.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`))):(this._order.splice(_,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const l=this._layers[t];if(!l)return void this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));l.setEventedParent(null),this._updateLayerCount(l,!1);const h=this._order.indexOf(t);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=l,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],l.onRemove&&l.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const l in this._layers)if(this._layers[l].type===t)return!0;return!1}setLayerZoomRange(t,l,h){this._checkLoaded();const _=this.getLayer(t);_?_.minzoom===l&&_.maxzoom===h||(null!=l&&(_.minzoom=l),null!=h&&(_.maxzoom=h),this._updateLayer(_)):this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,l,h={}){this._checkLoaded();const _=this.getLayer(t);if(_){if(!P(_.filter,l))return null==l?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(o.validateFilter,`layers.${_.id}.filter`,l,{layerType:_.type},h)||(_.filter=o.clone$1(l),this._updateLayer(_)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const l=this.getLayer(t);return l&&o.clone$1(l.filter)}setLayoutProperty(t,l,h,_={}){this._checkLoaded();const b=this.getLayer(t);b?P(b.getLayoutProperty(l),h)||(b.setLayoutProperty(l,h,_),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,l){const h=this.getLayer(t);if(h)return h.getLayoutProperty(l);this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,l,h,_={}){this._checkLoaded();const b=this.getLayer(t);b?P(b.getPaintProperty(l),h)||(b.setPaintProperty(l,h,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,l){const h=this.getLayer(t);return h&&h.getPaintProperty(l)}setFeatureState(t,l){this._checkLoaded();const h=t.source,_=t.sourceLayer,b=this.getSource(h);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const D=b.type;if("geojson"===D&&_)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===D&&!_)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(h);for(const B of A)B.setFeatureState(_,t.id,l)}removeFeatureState(t,l){this._checkLoaded();const h=t.source,_=this.getSource(h);if(!_)return void this.fire(new o.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const b=_.type,D="vector"===b?t.sourceLayer:void 0;if("vector"===b&&!D)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(h);for(const B of A)B.removeFeatureState(D,t.id,l)}getFeatureState(t){this._checkLoaded();const l=t.source,h=t.sourceLayer,_=this.getSource(l);if(_){if("vector"!==_.type||h)return void 0===t.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(l)[0].getFeatureState(h,t.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const l in this._sourceCaches){const h=this._sourceCaches[l].getSource();t[h.id]||(t[h.id]=h.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},l=>void 0!==l)}_updateLayer(t){this._updatedLayers[t.id]=!0;const l=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&l&&"raster"!==l.getSource().type&&(this._updatedSources[t.source]="reload",l.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const l=D=>"fill-extrusion"===this._layers[D].type,h={},_=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(l(A)){h[A]=D;for(const B of t){const J=B[A];if(J)for(const K of J)_.push(K)}}}_.sort((D,A)=>A.intersectionZ-D.intersectionZ);const b=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(l(A))for(let B=_.length-1;B>=0;B--){const J=_[B].feature;if(h[J.layer.id]<D)break;b.push(J),_.pop()}else for(const B of t){const J=B[A];if(J)for(const K of J)b.push(K.feature)}}return b}queryRenderedFeatures(t,l,h){l&&l.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",l.filter,null,l);const _={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const B of l.layers){const J=this._layers[B];if(!J)return this.fire(new o.ErrorEvent(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];_[J.source]=!0}}const b=[];l.availableImages=this._availableImages;const D=l&&l.layers?l.layers.some(B=>{const J=this.getLayer(B);return J&&J.is3D()}):this.has3DLayers(),A=Ii.createFromScreenPoints(t,h);for(const B in this._sourceCaches){const J=this._sourceCaches[B].getSource().id;l.layers&&!_[J]||b.push(Ee(this._sourceCaches[B],this._layers,this._serializedLayers,A,l,h,D,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(B,J,K,de,Ie,He,Xe){const qe={},tt=He.queryRenderedSymbols(de),fe=[];for(const Ze of Object.keys(tt).map(Number))fe.push(Xe[Ze]);fe.sort(le);for(const Ze of fe){const ut=Ze.featureIndex.lookupSymbolFeatures(tt[Ze.bucketInstanceId],J,Ze.bucketIndex,Ze.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,B);for(const dt in ut){const Vt=qe[dt]=qe[dt]||[],$t=ut[dt];$t.sort((Ht,tn)=>{const Xt=Ze.featureSortOrder;if(Xt){const hn=Xt.indexOf(Ht.featureIndex);return Xt.indexOf(tn.featureIndex)-hn}return tn.featureIndex-Ht.featureIndex});for(const Ht of $t)Vt.push(Ht)}}for(const Ze in qe)qe[Ze].forEach(ut=>{const dt=ut.feature,Vt=K(B[Ze]);if(!Vt)return;const $t=Vt.getFeatureState(dt.layer["source-layer"],dt.id);dt.source=dt.layer.source,dt.layer["source-layer"]&&(dt.sourceLayer=dt.layer["source-layer"]),dt.state=$t});return qe}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(t,l){l&&l.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",l.filter,null,l);const h=this._getSourceCaches(t);let _=[];for(const b of h)_=_.concat(se(b,l));return _}addSourceType(t,l,h){return ds.getSourceType(t)?h(new Error(`A source type called "${t}" already exists.`)):(ds.setSourceType(t,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:l.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(t,l={}){this._checkLoaded();const h=this.light.getLight();let _=!1;for(const D in t)if(!P(t[D],h[D])){_=!0;break}if(!_)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,l),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(t,l=1){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let h=t;if(1===l){if("object"==typeof h.source){const _="terrain-dem-src";this.addSource(_,h.source),h=o.clone$1(h),h=o.extend(h,{source:_})}if(this._validate(o.validateTerrain,"terrain",h))return}if(!this.terrain||this.terrain&&l!==this.terrain.drapeRenderMode){if(!h)return;this._createTerrain(h,l)}else{const _=this.terrain,b=_.get();for(const D of Object.keys(o.spec.terrain))!h.hasOwnProperty(D)&&o.spec.terrain[D].default&&(h[D]=o.spec.terrain[D].default);for(const D in h)if(!P(h[D],b[D])){_.set(h),this.stylesheet.terrain=h;const A=this._setTransitionParameters({duration:0});_.updateTransitions(A);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const l=this.fog=new _i(t,this.map.transform);this.stylesheet.fog=t;const h=this._setTransitionParameters({duration:0});l.updateTransitions(h)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const t of this.map._markers)t._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog,h=l.get();0===Object.keys(t).length&&l.set(t);for(const _ in t)if(!P(t[_],h[_])){l.set(t),this.stylesheet.fog=t;const b=this._setTransitionParameters({duration:0});l.updateTransitions(b);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:o.exported.now(),transition:o.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter(h=>this.isLayerDraped(this._layers[h])),l=this._order.filter(h=>!this.isLayerDraped(this._layers[h]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...l)}_createTerrain(t,l){const h=this.terrain=new ln(t,l);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});h.updateTransitions(_)}_force3DLayerUpdate(){for(const t in this._layers){const l=this._layers[t];"fill-extrusion"===l.type&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const l=this._layers[t];"symbol"===l.type&&this._updateLayer(l)}}_validate(t,l,h,_,b={}){return(!b||!1!==b.validate)&&Zo(this,t.call(o.validateStyle,o.extend({key:l,style:this.serialize(),value:h,styleSpec:o.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const l=this._getSourceCaches(t);for(const h of l)h.clearTiles()}_reloadSource(t){const l=this._getSourceCaches(t);for(const h of l)h.resume(),h.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const l in this._sourceCaches)this._sourceCaches[l].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const l=this._sourceCaches[t];l.resume(),l.reload()}}_updatePlacement(t,l,h,_,b=!1){let D=!1,A=!1;const B={};for(const J of this._order){const K=this._layers[J];if("symbol"!==K.type)continue;if(!B[K.source]){const Ie=this._getLayerSourceCache(K);if(!Ie)continue;B[K.source]=Ie.getRenderableIds(!0).map(He=>Ie.getTileByID(He)).sort((He,Xe)=>Xe.tileID.overscaledZ-He.tileID.overscaledZ||(He.tileID.isLessThan(Xe.tileID)?-1:1))}const de=this.crossTileSymbolIndex.addLayer(K,B[K.source],t.center.lng,t.projection);D=D||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||0===h,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),t.zoom))&&(this.pauseablePlacement=new ns(t,this._order,b,l,h,_,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),A=!0),D&&this.pauseablePlacement.placement.setStale()),A||D)for(const J of this._order){const K=this._layers[J];"symbol"===K.type&&this.placement.updateLayerOpacities(K,B[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,l,h){this.imageManager.getImages(l.icons,h),this._updateTilesForChangedImages();const _=b=>{b&&b.setDependencies(l.tileID.key,l.type,l.icons)};_(this._otherSourceCaches[l.source]),_(this._symbolSourceCaches[l.source])}getGlyphs(t,l,h){this.glyphManager.getGlyphs(l.stacks,h)}getResource(t,l,h){return o.makeRequest(l,h)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const l=[];return this._otherSourceCaches[t]&&l.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&l.push(this._symbolSourceCaches[t]),l}_isSourceCacheLoaded(t){const l=this._getSourceCaches(t);return 0===l.length?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):l.every(h=>h.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ds.getSourceType=function(u){return ri[u]},ds.setSourceType=function(u,t){ri[u]=t},ds.registerForPluginStateChange=o.registerForPluginStateChange;var Fa="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Ys="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",lo="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Ps="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",hs="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let sa={},ys={};const Ro=[];Ts(Fa,Ro),Ts(lo,Ro),Ts(Ps,Ro),Ts(hs,Ro),sa=Zi("",lo),ys=Zi(hs,Ps);const aa=Zi("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),qs=Fa,ya="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Ea={background:Zi("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Zi("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Zi("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Zi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Zi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Zi("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Zi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Zi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Zi("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Zi("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Zi("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Zi("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Zi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Zi("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Zi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Zi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Zi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Zi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Zi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Zi("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Zi("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Zi("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ys),skyboxGradient:Zi("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ys),skyboxCapture:Zi("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Zi("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Zi("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Ts(u,t){const l=u.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let h of l)if(h=h.trim(),"#"===h[0]&&h.includes("if")&&!h.includes("endif")){h=h.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=h.split(" ");for(const b of _)t.includes(b)||t.push(b)}}function Zi(u,t){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},b=[...Ro];return Ts(u,b),Ts(t,b),{fragmentSource:u=u.replace(l,(D,A,B,J,K)=>(_[K]=!0,"define"===A?`\n#ifndef HAS_UNIFORM_u_${K}\nvarying ${B} ${J} ${K};\n#else\nuniform ${B} ${J} u_${K};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${K}\n    ${B} ${J} ${K} = u_${K};\n#endif\n`)),vertexSource:t=t.replace(l,(D,A,B,J,K)=>{const de="float"===J?"vec2":"vec4",Ie=K.match(/color/)?"color":de;return _[K]?"define"===A?`\n#ifndef HAS_UNIFORM_u_${K}\nuniform lowp float u_${K}_t;\nattribute ${B} ${de} a_${K};\nvarying ${B} ${J} ${K};\n#else\nuniform ${B} ${J} u_${K};\n#endif\n`:"vec4"===Ie?`\n#ifndef HAS_UNIFORM_u_${K}\n    ${K} = a_${K};\n#else\n    ${B} ${J} ${K} = u_${K};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${K}\n    ${K} = unpack_mix_${Ie}(a_${K}, u_${K}_t);\n#else\n    ${B} ${J} ${K} = u_${K};\n#endif\n`:"define"===A?`\n#ifndef HAS_UNIFORM_u_${K}\nuniform lowp float u_${K}_t;\nattribute ${B} ${de} a_${K};\n#else\nuniform ${B} ${J} u_${K};\n#endif\n`:"vec4"===Ie?`\n#ifndef HAS_UNIFORM_u_${K}\n    ${B} ${J} ${K} = a_${K};\n#else\n    ${B} ${J} ${K} = u_${K};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${K}\n    ${B} ${J} ${K} = unpack_mix_${Ie}(a_${K}, u_${K}_t);\n#else\n    ${B} ${J} ${K} = u_${K};\n#endif\n`}),staticAttributes:h,usedDefines:b}}class Za{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,l,h,_,b,D,A){this.context=t;let B=this.boundPaintVertexBuffers.length!==_.length;for(let K=0;!B&&K<_.length;K++)this.boundPaintVertexBuffers[K]!==_[K]&&(B=!0);let J=this.boundDynamicVertexBuffers.length!==A.length;for(let K=0;!J&&K<A.length;K++)this.boundDynamicVertexBuffers[K]!==A[K]&&(J=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==h||B||J||this.boundIndexBuffer!==b||this.boundVertexOffset!==D)this.freshBind(l,h,_,b,D,A);else{t.bindVertexArrayOES.set(this.vao);for(const K of A)K&&K.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(t,l,h,_,b,D){let A;const B=t.numAttributes,J=this.context,K=J.gl;if(J.extVertexArrayObject)this.vao&&this.destroy(),this.vao=J.extVertexArrayObject.createVertexArrayOES(),J.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=t,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=D;else{A=J.currentNumAttributes||0;for(let de=B;de<A;de++)K.disableVertexAttribArray(de)}l.enableAttributes(K,t),l.bind(),l.setVertexAttribPointers(K,t,b);for(const de of h)de.enableAttributes(K,t),de.bind(),de.setVertexAttribPointers(K,t,b);for(const de of D)de&&(de.enableAttributes(K,t),de.bind(),de.setVertexAttribPointers(K,t,b));_&&_.bind(),J.currentNumAttributes=B}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wa(u,t){const l=Math.pow(2,t.canonical.z),h=t.canonical.y;return[new o.MercatorCoordinate(0,h/l).toLngLat().lat,new o.MercatorCoordinate(0,(h+1)/l).toLngLat().lat]}function Da(u,t,l,h,_,b,D){const A=u.context,B=A.gl,J=l.fbo;if(!J)return;u.prepareDrawTile();const K=u.useProgram("hillshade");A.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,J.colorAttachment.get());const de=((qe,tt,fe,Ze)=>{const ut=fe.paint.get("hillshade-shadow-color"),dt=fe.paint.get("hillshade-highlight-color"),Vt=fe.paint.get("hillshade-accent-color");let $t=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===fe.paint.get("hillshade-illumination-anchor")&&($t-=qe.transform.angle);const Ht=!qe.options.moving;return{u_matrix:Ze||qe.transform.calculateProjMatrix(tt.tileID.toUnwrapped(),Ht),u_image:0,u_latrange:Wa(0,tt.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),$t],u_shadow:ut,u_highlight:dt,u_accent:Vt}})(u,l,h,u.terrain?t.projMatrix:null);u.prepareDrawProgram(A,K,t.toUnwrapped());const{tileBoundsBuffer:Ie,tileBoundsIndexBuffer:He,tileBoundsSegments:Xe}=u.getTileBoundsBuffers(l);K.draw(A,B.TRIANGLES,_,b,D,o.CullFaceMode.disabled,de,h.id,Ie,He,Xe)}function Ma(u,t,l){if(!t.needsDEMTextureUpload)return;const h=u.context,_=h.gl;h.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||u.getTileTexture(l.stride);const b=l.getPixels();t.demTexture?t.demTexture.update(b,{premultiply:!1}):t.demTexture=new o.Texture(h,b,_.RGBA,{premultiply:!1}),t.needsDEMTextureUpload=!1}function Nr(u,t,l,h,_,b){const D=u.context,A=D.gl;if(!t.dem)return;const B=t.dem;if(D.activeTexture.set(A.TEXTURE1),Ma(u,t,B),!t.demTexture)return;t.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const J=B.dim;D.activeTexture.set(A.TEXTURE0);let K=t.fbo;if(!K){const Xe=new o.Texture(D,{width:J,height:J,data:null},A.RGBA);Xe.bind(A.LINEAR,A.CLAMP_TO_EDGE),K=t.fbo=D.createFramebuffer(J,J,!0),K.colorAttachment.set(Xe.texture)}D.bindFramebuffer.set(K.framebuffer),D.viewport.set([0,0,J,J]);const{tileBoundsBuffer:de,tileBoundsIndexBuffer:Ie,tileBoundsSegments:He}=u.getMercatorTileBoundsBuffers();u.useProgram("hillshadePrepare").draw(D,A.TRIANGLES,h,_,b,o.CullFaceMode.disabled,((Xe,qe)=>{const tt=qe.stride,fe=o.create();return o.ortho(fe,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(fe,fe,[0,-o.EXTENT,0]),{u_matrix:fe,u_image:1,u_dimension:[tt,tt],u_zoom:Xe.overscaledZ,u_unpack:qe.unpackVector}})(t.tileID,B),l.id,de,Ie,He),t.needsHillshadePrepare=!1}const Ta=u=>({u_matrix:new o.UniformMatrix4f(u),u_image0:new o.Uniform1i(u),u_skirt_height:new o.Uniform1f(u)}),Zr=(u,t)=>({u_matrix:u,u_image0:0,u_skirt_height:t}),wr=(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe)=>({u_proj_matrix:Float32Array.from(u),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(h),u_merc_matrix:l,u_zoom_transition:_,u_merc_center:b,u_image0:0,u_frustum_tl:D,u_frustum_tr:A,u_frustum_br:B,u_frustum_bl:J,u_globe_pos:K,u_globe_radius:de,u_viewport:Ie,u_grid_matrix:Xe?Float32Array.from(Xe):new Float32Array(9),u_skirt_height:He});function Eo(u,t){return null!=u&&null!=t&&!(!u.hasData()||!t.hasData())&&null!=u.demTexture&&null!=t.demTexture&&u.tileID.key!==t.tileID.key}const Lr=new class{constructor(){this.operations={}}newMorphing(u,t,l,h,_){if(u in this.operations){const b=this.operations[u];b.to.tileID.key!==l.tileID.key&&(b.queued=l)}else this.operations[u]={startTime:h,phase:0,duration:_,from:t,to:l,queued:null}}getMorphValuesForProxy(u){if(!(u in this.operations))return null;const t=this.operations[u];return{from:t.from,to:t.to,phase:t.phase}}update(u){for(const t in this.operations){const l=this.operations[t];for(l.phase=(u-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,u)){delete this.operations[t];break}}}_nextOp(u,t){return!!u.queued&&(u.from=u.to,u.to=u.queued,u.queued=null,u.phase=0,u.startTime=t,!0)}_validOp(u){return u.from.hasData()&&u.to.hasData()}},Vr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Os(u){return 6*Math.pow(1.5,22-u)}function ps(u,t){const l=1<<u.z;return!t&&(0===u.x||u.x===l-1)||0===u.y||u.y===l-1}const vs=u=>({u_matrix:u});function Do(u,t,l,h,_){if(_>0){const b=o.exported.now(),D=(b-u.timeAdded)/_,A=t?(b-t.timeAdded)/_:-1,B=l.getSource(),J=h.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),K=!t||Math.abs(t.tileID.overscaledZ-J)>Math.abs(u.tileID.overscaledZ-J),de=K&&u.refreshedUponExpiration?1:o.clamp(K?D:1-A,0,1);return u.refreshedUponExpiration&&D>=1&&(u.refreshedUponExpiration=!1),t?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}class ks extends o.SourceCache{constructor(t){const l={type:"raster-dem",maxzoom:t.transform.maxZoom},h=new ii(Ai(),null),_=zn("mock-dem",l,h,t.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,l){t.state="loaded",l(null)}}class Rs extends o.SourceCache{constructor(t){const l=zn("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new ii(Ai(),null),t.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,l,h){if(t.freezeTileCoverage)return;this.transform=t;const _=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,D)=>{if(b[D.key]="",!this._tiles[D.key]){const A=new o.Tile(D,this._source.tileSize*D.overscaleFactor(),t.tileZoom);A.state="loaded",this._tiles[D.key]=A}return b},{});for(const b in this._tiles)b in _||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(t){const l=this.proxyCachedFBO[t];if(void 0!==l){const h=Object.values(l);this.renderCachePool.push(...h),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class la extends o.OverscaledTileID{constructor(t,l,h){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=l,this.projMatrix=h}}class Fo extends o.Elevation{constructor(t,l){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[h,_,b]=function(B){const J=new o.StructArrayLayout2i4,K=new o.StructArrayLayout3ui6;J.reserve(17161),K.reserve(33800);const Ie=o.EXTENT/128,He=o.EXTENT+Ie/2,Xe=He+Ie;for(let tt=-Ie;tt<Xe;tt+=Ie)for(let fe=-Ie;fe<Xe;fe+=Ie){const Ze=fe<0||fe>He||tt<0||tt>He?24575:0,ut=o.clamp(Math.round(fe),0,o.EXTENT),dt=o.clamp(Math.round(tt),0,o.EXTENT);J.emplaceBack(ut+Ze,dt)}const qe=(tt,fe)=>{const Ze=131*fe+tt;K.emplaceBack(Ze+1,Ze,Ze+131),K.emplaceBack(Ze+131,Ze+131+1,Ze+1)};for(let tt=1;tt<129;tt++)for(let fe=1;fe<129;fe++)qe(fe,tt);return[0,129].forEach(tt=>{for(let fe=0;fe<130;fe++)qe(fe,tt),qe(tt,fe)}),[J,K,32768]}(),D=t.context;this.gridBuffer=D.createVertexBuffer(h,o.posAttributes.members),this.gridIndexBuffer=D.createIndexBuffer(_),this.gridSegments=o.SegmentVector.simpleSegment(0,0,h.length,_.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,h.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Rs(l.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,o.EXTENT,0,o.EXTENT,0,1);const A=D.gl;this._overlapStencilMode=new o.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ks(l.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(t,l,h){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const _=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const b=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const D=this.getScaledDemTileSize();this.sourceCache.update(l,D,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),l.updateElevation(!0,h),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&o.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,h=this.painter.transform;this._initializing&&(this._initializing=0===h._centerAltitude&&-1===this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(h.center),-1),this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=l.getIds().map(B=>{const J=l.getTileByID(B).tileID;return J.projMatrix=h.calculateProjMatrix(J.toUnwrapped()),J});(function(B,J){const K=J.transform.pointCoordinate(J.transform.getCameraPoint()),de=new o.Point(K.x,K.y);B.sort((Ie,He)=>{if(He.overscaledZ-Ie.overscaledZ)return He.overscaledZ-Ie.overscaledZ;const Xe=new o.Point(Ie.canonical.x+(1<<Ie.canonical.z)*Ie.wrap,Ie.canonical.y),qe=new o.Point(He.canonical.x+(1<<He.canonical.z)*He.wrap,He.canonical.y),tt=de.mult(1<<Ie.canonical.z);return tt.x-=.5,tt.y-=.5,tt.distSqr(Xe)-tt.distSqr(qe)})})(_,this.painter),this._previousZoom=h.zoom;const b=this.proxyToSource||{};this.proxyToSource={},_.forEach(B=>{this.proxyToSource[B.key]={}}),this.terrainTileForTile={};const D=this._style._sourceCaches;for(const B in D){const J=D[B];if(!J.used||(J!==this.sourceCache&&this.resetTileLookupCache(J.id),this._setupProxiedCoordsForOrtho(J,t[B],b),J.usedForTerrain))continue;const K=t[B];J.getSource().reparseOverscaled&&this._assignTerrainTiles(K)}this.proxiedCoords[l.id]=_.map(B=>new la(B,B.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const A={};this._visibleDemTiles=[];for(const B of this.proxyCoords){const J=this.terrainTileForTile[B.key];if(!J)continue;const K=J.tileID.key;K in A||(this._visibleDemTiles.push(J),A[K]=K)}}_assignTerrainTiles(t){this._initializing||t.forEach(l=>{if(this.terrainTileForTile[l.key])return;const h=this._findTileCoveringTileID(l,this.sourceCache);h&&(this.terrainTileForTile[l.key]=h)})}_prepareDEMTextures(){const t=this.painter.context,l=t.gl;for(const h in this.terrainTileForTile){const _=this.terrainTileForTile[h],b=_.dem;!b||_.demTexture&&!_.needsDEMTextureUpload||(t.activeTexture.set(l.TEXTURE1),Ma(this.painter,_,b))}}_prepareDemTileUniforms(t,l,h,_){if(!l||null==l.demTexture)return!1;const b=t.tileID.canonical,D=Math.pow(2,l.tileID.canonical.z-b.z),A=_||"";return h[`u_dem_tl${A}`]=[b.x*D%1,b.y*D%1],h[`u_dem_scale${A}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,l=t.gl;if(!this._emptyDepthBufferTexture){const h=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(t,h,l.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const l=this._visibleDemTiles.reduce((h,_)=>{if(!_.dem)return h;const b=_.dem.tree.minimums[0];return b>0&&t++,h+b},0);return t?l/t:0}_updateEmptyDEMTexture(){const t=this.painter.context,l=t.gl;t.activeTexture.set(l.TEXTURE2);const h=this._getLoadedAreaMinimum(),_=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(h,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(_,{premultiply:!1}):b=this._emptyDEMTexture=new o.Texture(t,_,l.RGBA,{premultiply:!1}),b}setupElevationDraw(t,l,h){const _=this.painter.context,b=_.gl,D=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var A;D.u_dem_size=this.sourceCache.getSource().tileSize,D.u_exaggeration=this.exaggeration();let B=null,J=null,K=1;if(h&&h.morphing&&this._useVertexMorphing){const de=h.morphing.srcDemTile,Ie=h.morphing.dstDemTile;K=h.morphing.phase,de&&Ie&&(this._prepareDemTileUniforms(t,de,D,"_prev")&&(J=de),this._prepareDemTileUniforms(t,Ie,D)&&(B=Ie))}if(J&&B?(_.activeTexture.set(b.TEXTURE2),B.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),_.activeTexture.set(b.TEXTURE4),J.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),D.u_dem_lerp=K):(B=this.terrainTileForTile[t.tileID.key],_.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(t,B,D)?B.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),_.activeTexture.set(b.TEXTURE3),h&&h.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(D.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),D.u_depth_size_inv=[1,1]),h&&h.useMeterToDem&&B){const de=(1<<B.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=de}if(h&&h.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=h.labelPlaneMatrixInv),l.setTerrainUniformValues(_,D),"globe"===this.painter.transform.projection.name){const de=this.globeUniformValues(this.painter.transform,t.tileID.canonical,h&&h.useDenormalizedUpVectorScale);l.setGlobeUniformValues(_,de)}}globeUniformValues(t,l,h){const _=t.projection;return{u_tile_tl_up:_.upVector(l,0,0),u_tile_tr_up:_.upVector(l,o.EXTENT,0),u_tile_br_up:_.upVector(l,o.EXTENT,o.EXTENT),u_tile_bl_up:_.upVector(l,0,o.EXTENT),u_tile_up_scale:h?o.globeMetersToEcef(1):_.upVectorScale(l,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const l=this.painter,h=this.painter.context;0!==t.length&&(h.bindFramebuffer.set(null),h.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,b,D,A,B){if("globe"===_.transform.projection.name)!function(J,K,de,Ie,He){const Xe=J.context,qe=Xe.gl;let tt,fe;const Ze=J.options.showTerrainWireframe?2:0,ut=J.transform,dt=o.globeUseCustomAntiAliasing(J,Xe,ut),Vt=(qn,mn)=>{if(fe===qn)return;const Ln=[Vr[qn],"PROJECTION_GLOBE_VIEW"];dt&&Ln.push("CUSTOM_ANTIALIASING"),mn&&Ln.push(Vr[Ze]),tt=J.useProgram("globeRaster",null,Ln),fe=qn},$t=J.colorModeForRenderPass(),Ht=new o.DepthMode(qe.LEQUAL,o.DepthMode.ReadWrite,J.depthRangeFor3D);Lr.update(He);const tn=o.calculateGlobeMercatorMatrix(ut),Xt=[o.mercatorXfromLng(ut.center.lng),o.mercatorYfromLat(ut.center.lat)],hn=Ze?[!1,!0]:[!1],Xn=J.globeSharedBuffers,dn=[ut.width*o.exported.devicePixelRatio,ut.height*o.exported.devicePixelRatio],Nn=Float32Array.from(ut.globeMatrix),bn={useDenormalizedUpVectorScale:!0};if(hn.forEach(qn=>{const mn=J.transform,Ln=Os(mn.zoom)*K.exaggeration();fe=-1;const Jn=qn?qe.LINES:qe.TRIANGLES;for(const jn of Ie){const Qn=de.getTile(jn),Pi=o.StencilMode.disabled,qi=K.prevTerrainTileForTile[jn.key],Ci=K.terrainTileForTile[jn.key];Eo(qi,Ci)&&Lr.newMorphing(jn.key,qi,Ci,He,250),Xe.activeTexture.set(qe.TEXTURE0),Qn.texture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE);const Li=Lr.getMorphValuesForProxy(jn.key),hr=Li?1:0;Li&&o.extend$1(bn,{morphing:{srcDemTile:Li.from,dstDemTile:Li.to,phase:o.easeCubicInOut(Li.phase)}});const lr=o.tileCornersToBounds(jn.canonical),Si=o.getLatitudinalLod(lr.getCenter().lat),kr=o.getGridMatrix(jn.canonical,lr,Si,mn.worldSize/mn._pixelsPerMercatorPixel),to=o.globeNormalizeECEF(o.globeTileBounds(jn.canonical)),no=wr(mn.projMatrix,Nn,tn,to,o.globeToMercatorTransition(mn.zoom),Xt,mn.frustumCorners.TL,mn.frustumCorners.TR,mn.frustumCorners.BR,mn.frustumCorners.BL,mn.globeCenterInViewSpace,mn.globeRadius,dn,Ln,kr);if(Vt(hr,qn),K.setupElevationDraw(Qn,tt,bn),J.prepareDrawProgram(Xe,tt,jn.toUnwrapped()),Xn){const[jr,wa,ta]=qn?Xn.getWirefameBuffers(J.context,Si):Xn.getGridBuffers(Si,0!==Ln);tt.draw(Xe,Jn,Ht,Pi,$t,o.CullFaceMode.backCCW,no,"globe_raster",jr,wa,ta)}}}),Xn){const qn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];dt&&qn.push("CUSTOM_ANTIALIASING"),tt=J.useProgram("globeRaster",null,qn);for(const mn of Ie){const{x:Ln,y:Jn,z:jn}=mn.canonical,Qn=0===Jn,Pi=Jn===(1<<jn)-1,[qi,Ci,Li,hr]=Xn.getPoleBuffers(jn);if(hr&&(Qn||Pi)){const lr=de.getTile(mn);Xe.activeTexture.set(qe.TEXTURE0),lr.texture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE);let Si=o.globePoleMatrixForTile(jn,Ln,ut);const kr=o.globeNormalizeECEF(o.globeTileBounds(mn.canonical)),to=(no,jr)=>no.draw(Xe,qe.TRIANGLES,Ht,o.StencilMode.disabled,$t,o.CullFaceMode.disabled,wr(ut.projMatrix,Si,Si,kr,0,Xt,ut.frustumCorners.TL,ut.frustumCorners.TR,ut.frustumCorners.BR,ut.frustumCorners.BL,ut.globeCenterInViewSpace,ut.globeRadius,dn,0),"globe_pole_raster",jr,Li,hr);K.setupElevationDraw(lr,tt,bn),J.prepareDrawProgram(Xe,tt,mn.toUnwrapped()),Qn&&to(tt,qi),Pi&&(Si=o.scale(o.create(),Si,[1,-1,1]),to(tt,Ci))}}}}(_,b,D,A,B);else{const J=_.context,K=J.gl;let de,Ie;const He=_.options.showTerrainWireframe?2:0,Xe=(ut,dt)=>{if(Ie===ut)return;const Vt=[Vr[ut]];dt&&Vt.push(Vr[He]),de=_.useProgram("terrainRaster",null,Vt),Ie=ut},qe=_.colorModeForRenderPass(),tt=new o.DepthMode(K.LEQUAL,o.DepthMode.ReadWrite,_.depthRangeFor3D);Lr.update(B);const fe=_.transform,Ze=Os(fe.zoom)*b.exaggeration();(He?[!1,!0]:[!1]).forEach(ut=>{Ie=-1;const dt=ut?K.LINES:K.TRIANGLES,[Vt,$t]=ut?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const Ht of A){const tn=D.getTile(Ht),Xt=o.StencilMode.disabled,hn=b.prevTerrainTileForTile[Ht.key],Xn=b.terrainTileForTile[Ht.key];Eo(hn,Xn)&&Lr.newMorphing(Ht.key,hn,Xn,B,250),J.activeTexture.set(K.TEXTURE0),tn.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST);const dn=Lr.getMorphValuesForProxy(Ht.key),Nn=dn?1:0;let bn;dn&&(bn={morphing:{srcDemTile:dn.from,dstDemTile:dn.to,phase:o.easeCubicInOut(dn.phase)}});const qn=Zr(Ht.projMatrix,ps(Ht.canonical,fe.renderWorldCopies)?Ze/10:Ze);Xe(Nn,ut),b.setupElevationDraw(tn,de,bn),_.prepareDrawProgram(J,de,Ht.toUnwrapped()),de.draw(J,dt,tt,Xt,qe,o.CullFaceMode.backCCW,qn,"terrain_raster",b.gridBuffer,Vt,$t)}})}}(l,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const l=this.painter,h=this.painter.context,_=this.proxySourceCache,b=this.proxiedCoords[_.id],D=this._drapedRenderBatches.shift(),A=[],B=l.style.order;let J=0;for(const K of b){const de=_.getTileByID(K.proxyTileKey),Ie=_.proxyCachedFBO[K.key]?_.proxyCachedFBO[K.key][t]:void 0,He=void 0!==Ie?_.renderCache[Ie]:this.pool[J++],Xe=void 0!==Ie;if(de.texture=He.tex,Xe&&!He.dirty){A.push(de.tileID);continue}let qe;h.bindFramebuffer.set(He.fb.framebuffer),this.renderedToTile=!1,He.dirty&&(h.clear({color:o.Color.transparent,stencil:0}),He.dirty=!1);for(let tt=D.start;tt<=D.end;++tt){const fe=l.style._layers[B[tt]];if(fe.isHidden(l.transform.zoom))continue;const Ze=l.style._getLayerSourceCache(fe),ut=Ze?this.proxyToSource[K.key][Ze.id]:[K];if(!ut)continue;const dt=ut;h.viewport.set([0,0,He.fb.width,He.fb.height]),qe!==(Ze?Ze.id:null)&&(this._setupStencil(He,ut,fe,Ze),qe=Ze?Ze.id:null),l.renderLayer(l,Ze,fe,dt)}this.renderedToTile?(He.dirty=!0,A.push(de.tileID)):Xe||--J,5===J&&(J=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,h.bindFramebuffer.set(null),h.viewport.set([0,0,l.width,l.height]),D.end+1}postRender(){}renderCacheEfficiency(t){const l=t.order.length;if(0===l)return{efficiency:100};let h,_=0,b=0,D=!1;for(let A=0;A<l;++A){const B=t._layers[t.order[A]];this._style.isLayerDraped(B)?(D&&++_,++b):D||(D=!0,h=B.id)}return 0===b?{efficiency:100}:{efficiency:100*(1-_/b),firstUndrapedLayer:h}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{t=Math.min(t,l.dem.tree.minimums[0])}),0===t?t:(t-30)*this._exaggeration}raycast(t,l,h){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const D=b.tileID,A=1<<D.overscaledZ,{x:B,y:J}=D.canonical,K=B/A,de=(B+1)/A,Ie=J/A,He=(J+1)/A;return{minx:K,miny:Ie,maxx:de,maxy:He,t:b.dem.tree.raycastRoot(K,Ie,de,He,t,l,h),tile:b}});_.sort((b,D)=>(null!==b.t?b.t:Number.MAX_VALUE)-(null!==D.t?D.t:Number.MAX_VALUE));for(const b of _){if(null==b.t)return null;const D=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,t,l,h);if(null!=D)return D}return null}_createFBO(){const t=this.painter.context,l=t.gl,h=this.drapeBufferSize;t.activeTexture.set(l.TEXTURE0);const _=new o.Texture(t,{width:h[0],height:h[1],data:null},l.RGBA);_.bind(l.LINEAR,l.CLAMP_TO_EDGE);const b=t.createFramebuffer(h[0],h[1],!1);return b.colorAttachment.set(_.texture),b.depthAttachment=new U(t,b.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,h[0],h[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&l.texParameterf(l.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:b,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some(t=>{const l=this._style._layers[t],h=l.isHidden(this.painter.transform.zoom);return"custom"===l.type?!h&&l.shouldRedrape():!h&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let t=!1;for(const h of this._style._getSources())if(h instanceof Jt){t=!0;break}if(!t)return;const l={};for(let h=0;h<this._style.order.length;++h){const _=this._style._layers[this._style.order[h]],b=this._style._getLayerSourceCache(_);if(b&&!l[b.id]&&!_.isHidden(this.painter.transform.zoom)&&"line"===_.type&&_.widthExpression()instanceof o.ZoomDependentExpression){l[b.id]=!0;for(const D of this.proxyCoords){const A=this.proxyToSource[D.key][b.id];if(A)for(const B of A)this._clearRenderCacheForTile(b.id,B)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const h in this._style._sourceCaches)if(this._style._sourceCaches[h]._source instanceof Kt){t=!0;break}if(!t)return;const l={};for(let h=0;h<this._style.order.length;++h){const _=this._style._layers[this._style.order[h]],b=this._style._getLayerSourceCache(_);if(!b||l[b.id]||_.isHidden(this.painter.transform.zoom)||"raster"!==_.type)continue;const D=_.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const B=this.proxyToSource[A.key][b.id];if(B)for(const J of B){const K=Do(b.getTile(J),b.findLoadedParent(J,0),b,this.painter.transform,D);(1!==K.opacity||0!==K.mix)&&this._clearRenderCacheForTile(b.id,J)}}}}_setupDrapedRenderBatches(){const t=this._style.order,l=t.length;if(0===l)return;const h=[];let _,b=0,D=this._style._layers[t[b]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++b<l;)D=this._style._layers[t[b]];for(;b<l;++b){const A=this._style._layers[t[b]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?void 0===_&&(_=b):void 0!==_&&(h.push({start:_,end:b-1}),_=void 0))}void 0!==_&&h.push({start:_,end:b-1}),this._drapedRenderBatches=h}_setupRenderCache(t){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const D=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let A=0;A<D.length;++A){const B=Object.values(D[A]);l.renderCachePool.push(...B)}}return}this._clearRasterLayersFromRenderCache();const h=this.proxyCoords,_=this._tilesDirty;for(let D=h.length-1;D>=0;D--){const A=h[D];if(l.getTileByID(A.key),void 0!==l.proxyCachedFBO[A.key]){const B=t[A.key],J=this.proxyToSource[A.key];let K=0;for(const de in J){const Ie=J[de],He=B[de];if(!He||He.length!==Ie.length||Ie.some((Xe,qe)=>Xe!==He[qe]||_[de]&&_[de].hasOwnProperty(Xe.key))){K=-1;break}++K}for(const de in l.proxyCachedFBO[A.key])l.renderCache[l.proxyCachedFBO[A.key][de]].dirty=K<0||K!==Object.values(B).length}}const b=[...this._drapedRenderBatches];b.sort((D,A)=>A.end-A.start-(D.end-D.start));for(const D of b)for(const A of h){if(l.proxyCachedFBO[A.key])continue;let B=l.renderCachePool.pop();void 0===B&&l.renderCache.length<50&&(B=l.renderCache.length,l.renderCache.push(this._createFBO())),void 0!==B&&(l.proxyCachedFBO[A.key]={},l.proxyCachedFBO[A.key][D.start]=B,l.renderCache[B].dirty=!0)}this._tilesDirty={}}_setupStencil(t,l,h,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,D=b.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let A;if(h.isTileClipped())A=l.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,h.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(t,l){const h=this.painter,_=this.painter.context,b=_.gl;h._tileClippingMaskIDs={},_.setColorMode(o.ColorMode.disabled),_.setDepthMode(o.DepthMode.disabled);const D=h.useProgram("clippingMask");for(const A of t){const B=h._tileClippingMaskIDs[A.key]=--l;D.draw(_,b.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:b.ALWAYS,mask:0},B,255,b.KEEP,b.KEEP,b.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,vs(A.projMatrix),"$clipping",h.tileExtentBuffer,h.quadTriangleIndexBuffer,h.tileExtentSegments)}}pointCoordinate(t){const l=this.painter.transform;if(t.x<0||t.x>l.width||t.y<0||t.y>l.height)return null;const h=[t.x,t.y,1,1];o.transformMat4$1(h,h,l.pixelMatrixInverse),o.scale$1(h,h,1/h[3]),h[0]/=l.worldSize,h[1]/=l.worldSize;const _=l._camera.position,b=o.mercatorZfromAltitude(1,l.center.lat),D=[_[0],_[1],_[2]/b,0],A=o.subtract([],h.slice(0,3),D);o.normalize(A,A);const B=this.raycast(D,A,this._exaggeration);return null!==B&&B?(o.scaleAndAdd(D,D,A,B),D[3]=D[2],D[2]*=b,D):null}drawDepth(){const t=this.painter,l=t.context,h=this.proxySourceCache,_=Math.ceil(t.width),b=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const D=l.gl,A=l.createFramebuffer(_,b,!0);l.activeTexture.set(D.TEXTURE0);const B=new o.Texture(l,{width:_,height:b,data:null},D.RGBA);B.bind(D.NEAREST,D.CLAMP_TO_EDGE),A.colorAttachment.set(B.texture);const J=l.createRenderbuffer(l.gl.DEPTH_COMPONENT16,_,b);A.depthAttachment.set(J),this._depthFBO=A,this._depthTexture=B}l.bindFramebuffer.set(this._depthFBO.framebuffer),l.viewport.set([0,0,_,b]),function(D,A,B,J){if("globe"===D.transform.projection.name)return;const K=D.context,de=K.gl;K.clear({depth:1});const Ie=D.useProgram("terrainDepth"),He=new o.DepthMode(de.LESS,o.DepthMode.ReadWrite,D.depthRangeFor3D);for(const Xe of J){const qe=B.getTile(Xe),tt=Zr(Xe.projMatrix,0);A.setupElevationDraw(qe,Ie),Ie.draw(K,de.TRIANGLES,He,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,tt,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(t,this,h,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,l,h){if(t.getSource()instanceof Hn)return this._setupProxiedCoordsForImageSource(t,l,h);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const _=this.proxiedCoords[t.id]=[],b=this.proxyCoords;for(let A=0;A<b.length;A++){const B=b[A],J=this._findTileCoveringTileID(B,t);if(J){const K=this._createProxiedId(B,J,h[B.key]&&h[B.key][t.id]);_.push(K),this.proxyToSource[B.key][t.id]=[K]}}let D=!1;for(let A=0;A<l.length;A++){const B=t.getTile(l[A]);if(!B||!B.hasData())continue;const J=this._findTileCoveringTileID(B.tileID,this.proxySourceCache);if(J&&J.tileID.canonical.z!==B.tileID.canonical.z){const K=this.proxyToSource[J.tileID.key][t.id],de=this._createProxiedId(J.tileID,B,h[J.tileID.key]&&h[J.tileID.key][t.id]);K?K.splice(K.length-1,0,de):this.proxyToSource[J.tileID.key][t.id]=[de],_.push(de),D=!0}}this._sourceTilesOverlap[t.id]=D}_setupProxiedCoordsForImageSource(t,l,h){if(!t.getSource().loaded())return;const _=this.proxiedCoords[t.id]=[],b=this.proxyCoords,D=t.getSource(),A=new o.Point(D.tileID.x,D.tileID.y)._div(1<<D.tileID.z),B=D.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((K,de)=>(K.min.x=Math.min(K.min.x,de.x-A.x),K.min.y=Math.min(K.min.y,de.y-A.y),K.max.x=Math.max(K.max.x,de.x-A.x),K.max.y=Math.max(K.max.y,de.y-A.y),K),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),J=(K,de)=>{const Ie=K.wrap+K.canonical.x/(1<<K.canonical.z),He=K.canonical.y/(1<<K.canonical.z),Xe=o.EXTENT/(1<<K.canonical.z),qe=de.wrap+de.canonical.x/(1<<de.canonical.z),tt=de.canonical.y/(1<<de.canonical.z);return Ie+Xe<qe+B.min.x||Ie>qe+B.max.x||He+Xe<tt+B.min.y||He>tt+B.max.y};for(let K=0;K<b.length;K++){const de=b[K];for(let Ie=0;Ie<l.length;Ie++){const He=t.getTile(l[Ie]);if(!He||!He.hasData()||J(de,He.tileID))continue;const Xe=this._createProxiedId(de,He,h[de.key]&&h[de.key][t.id]),qe=this.proxyToSource[de.key][t.id];qe?qe.push(Xe):this.proxyToSource[de.key][t.id]=[Xe],_.push(Xe)}}}_createProxiedId(t,l,h){let _=this.orthoMatrix;if(h){const b=h.find(D=>D.key===l.tileID.key);if(b)return b}if(l.tileID.key!==t.key){const b=t.canonical.z-l.tileID.canonical.z;let D,A,B;_=o.create();const J=l.tileID.wrap-t.wrap<<t.overscaledZ;b>0?(D=o.EXTENT>>b,A=D*((l.tileID.canonical.x<<b)-t.canonical.x+J),B=D*((l.tileID.canonical.y<<b)-t.canonical.y)):(D=o.EXTENT<<-b,A=o.EXTENT*(l.tileID.canonical.x-(t.canonical.x+J<<-b)),B=o.EXTENT*(l.tileID.canonical.y-(t.canonical.y<<-b))),o.ortho(_,0,D,0,D,0,1),o.translate(_,_,[A,B,0])}return new la(l.tileID,t.key,_)}_findTileCoveringTileID(t,l){let h=l.getTile(t);if(h&&h.hasData())return h;const _=this._findCoveringTileCache[l.id],b=_[t.key];if(h=b?l.getTileByID(b):null,h&&h.hasData()||null===b)return h;let D=h?h.tileID:t,A=D.overscaledZ;const B=l.getSource().minzoom,J=[];if(!b){const de=l.getSource().maxzoom;if(t.canonical.z>=de){const Ie=t.canonical.z-de;l.getSource().reparseOverscaled?(A=Math.max(t.canonical.z+2,l.transform.tileZoom),D=new o.OverscaledTileID(A,t.wrap,de,t.canonical.x>>Ie,t.canonical.y>>Ie)):0!==Ie&&(A=de,D=new o.OverscaledTileID(A,t.wrap,de,t.canonical.x>>Ie,t.canonical.y>>Ie))}D.key!==t.key&&(J.push(D.key),h=l.getTile(D))}const K=de=>{J.forEach(Ie=>{_[Ie]=de}),J.length=0};for(A-=1;A>=B&&(!h||!h.hasData());A--){h&&K(h.tileID.key);const de=D.calculateScaledKey(A);if(h=l.getTileByID(de),h&&h.hasData())break;const Ie=_[de];if(null===Ie)break;void 0===Ie?J.push(de):h=l.getTileByID(Ie)}return K(h?h.tileID.key:null),h&&h.hasData()?h:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,l){let h=this._tilesDirty[t];h||(h=this._tilesDirty[t]={}),h[l.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(l){let h=0;const _=new o.StructArrayLayout2ui4,b=131;for(let D=1;D<129;D++){for(let A=1;A<129;A++)h=D*b+A,_.emplaceBack(h,h+1),_.emplaceBack(h,h+b),_.emplaceBack(h+1,h+b),128===D&&_.emplaceBack(h+b,h+b+1);_.emplaceBack(h+1,h+1+b)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Yi{static cacheKey(t,l,h,_){let b=`${l}${_?_.cacheKey:""}`;for(const D of h)t.usedDefines.includes(D)&&(b+=`/${D}`);return b}constructor(t,l,h,_,b,D){const A=t.gl;this.program=A.createProgram();const B=function(fe){const Ze=[];for(let ut=0;ut<fe.length;ut++){if(null===fe[ut])continue;const dt=fe[ut].split(" ");Ze.push(dt.pop())}return Ze}(h.staticAttributes),J=_?_.getBinderAttributes():[],K=B.concat(J);let de=_?_.defines():[];de=de.concat(D.map(fe=>`#define ${fe}`));const Ie=t.isWebGL2?"#version 300 es\n":"",He=Ie+de.concat(t.extStandardDerivatives&&0===Ie.length?"#extension GL_OES_standard_derivatives : enable\n".concat(ya):ya,ya,qs,aa.fragmentSource,ys.fragmentSource,h.fragmentSource).join("\n"),Xe=Ie+de.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",qs,aa.vertexSource,ys.vertexSource,sa.vertexSource,h.vertexSource).join("\n"),qe=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(qe,He),A.compileShader(qe),A.attachShader(this.program,qe);const tt=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(tt,Xe),A.compileShader(tt),A.attachShader(this.program,tt),this.attributes={},this.numAttributes=K.length;for(let fe=0;fe<this.numAttributes;fe++)K[fe]&&(A.bindAttribLocation(this.program,fe,K[fe]),this.attributes[K[fe]]=fe);A.linkProgram(this.program),A.deleteShader(tt),A.deleteShader(qe),this.fixedUniforms=b(t),this.binderUniforms=_?_.getUniforms(t):[],D.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new o.Uniform1i(fe=t),u_dem_prev:new o.Uniform1i(fe),u_dem_unpack:new o.Uniform4f(fe),u_dem_tl:new o.Uniform2f(fe),u_dem_scale:new o.Uniform1f(fe),u_dem_tl_prev:new o.Uniform2f(fe),u_dem_scale_prev:new o.Uniform1f(fe),u_dem_size:new o.Uniform1f(fe),u_dem_lerp:new o.Uniform1f(fe),u_exaggeration:new o.Uniform1f(fe),u_depth:new o.Uniform1i(fe),u_depth_size_inv:new o.Uniform2f(fe),u_meter_to_dem:new o.Uniform1f(fe),u_label_plane_matrix_inv:new o.UniformMatrix4f(fe)}),D.includes("GLOBE")&&(this.globeUniforms=(fe=>({u_tile_tl_up:new o.Uniform3f(fe),u_tile_tr_up:new o.Uniform3f(fe),u_tile_br_up:new o.Uniform3f(fe),u_tile_bl_up:new o.Uniform3f(fe),u_tile_up_scale:new o.Uniform1f(fe)}))(t)),D.includes("FOG")&&(this.fogUniforms=(fe=>({u_fog_matrix:new o.UniformMatrix4f(fe),u_fog_range:new o.Uniform2f(fe),u_fog_color:new o.Uniform4f(fe),u_fog_horizon_blend:new o.Uniform1f(fe),u_fog_temporal_offset:new o.Uniform1f(fe),u_frustum_tl:new o.Uniform3f(fe),u_frustum_tr:new o.Uniform3f(fe),u_frustum_br:new o.Uniform3f(fe),u_frustum_bl:new o.Uniform3f(fe),u_globe_pos:new o.Uniform3f(fe),u_globe_radius:new o.Uniform1f(fe),u_globe_transition:new o.Uniform1f(fe),u_is_globe:new o.Uniform1i(fe),u_viewport:new o.Uniform2f(fe)}))(t))}var fe}setTerrainUniformValues(t,l){if(!this.terrainUniforms)return;const h=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const _ in l)h[_]&&h[_].set(this.program,_,l[_])}}setGlobeUniformValues(t,l){if(!this.globeUniforms)return;const h=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const _ in l)h[_]&&h[_].set(this.program,_,l[_])}}setFogUniformValues(t,l){if(!this.fogUniforms)return;const h=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const _ in l)h[_].set(this.program,_,l[_])}}draw(t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe){const tt=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(h),t.setStencilMode(_),t.setColorMode(b),t.setCullFace(D);for(const Ze of Object.keys(this.fixedUniforms))this.fixedUniforms[Ze].set(this.program,Ze,A[Ze]);Xe&&Xe.setUniforms(this.program,t,this.binderUniforms,Ie,{zoom:He});const fe={[tt.LINES]:2,[tt.TRIANGLES]:3,[tt.LINE_STRIP]:1}[l];for(const Ze of de.get()){const ut=Ze.vaos||(Ze.vaos={});(ut[B]||(ut[B]=new Za)).bind(t,this,J,Xe?Xe.getPaintVertexBuffers():[],K,Ze.vertexOffset,qe||[]),tt.drawElements(l,Ze.primitiveLength*fe,tt.UNSIGNED_SHORT,Ze.primitiveOffset*fe*2)}}}function vo(u,t){const l=Math.pow(2,t.tileID.overscaledZ),h=t.tileSize*Math.pow(2,u.transform.tileZoom)/l,_=h*(t.tileID.canonical.x+t.tileID.wrap*l),b=h*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/vi(t,1,u.transform.tileZoom),u_pixel_coord_upper:[_>>16,b>>16],u_pixel_coord_lower:[65535&_,65535&b]}}const zi=o.create(),Fs=(u,t,l,h,_,b,D,A,B,J,K)=>{const de=t.style.light,Ie=de.properties.get("position"),He=[Ie.x,Ie.y,Ie.z],Xe=o.create$1();"viewport"===de.properties.get("anchor")&&(o.fromRotation(Xe,-t.transform.angle),o.transformMat3(He,He,Xe));const qe=de.properties.get("color"),tt=t.transform,fe={u_matrix:u,u_lightpos:He,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[qe.r,qe.g,qe.b],u_vertical_gradient:+l,u_opacity:h,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:zi,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:b};return"globe"===tt.projection.name&&(fe.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],fe.u_zoom_transition=B,fe.u_inv_rot_matrix=K,fe.u_merc_center=J,fe.u_up_dir=tt.projection.upVector(new o.CanonicalTileID(0,0,0),J[0]*o.EXTENT,J[1]*o.EXTENT),fe.u_height_lift=A),fe},oe=(u,t,l,h,_,b,D,A,B,J,K,de)=>{const Ie=Fs(u,t,l,h,_,b,D,B,J,K,de),He={u_height_factor:-Math.pow(2,D.overscaledZ)/A.tileSize/8};return o.extend(Ie,vo(t,A),He)},te=u=>({u_matrix:u}),q=(u,t,l)=>o.extend(te(u),vo(t,l)),Le=(u,t)=>({u_matrix:u,u_world:t}),xn=(u,t,l,h)=>o.extend(q(u,t,l),{u_world:h}),Ti=o.create(),Ur=(u,t,l,h,_,b)=>{const D=u.transform,A="globe"===D.projection.name;let B;if("map"===b.paint.get("circle-pitch-alignment"))if(A){const K=o.globePixelsToTileUnits(D.zoom,t.canonical)*D._pixelsPerMercatorPixel;B=Float32Array.from([K,0,0,K])}else B=D.calculatePixelsToTileUnitsMatrix(l);else B=new Float32Array([D.pixelsToGLUnits[0],0,0,D.pixelsToGLUnits[1]]);const J={u_camera_to_center_distance:D.cameraToCenterDistance,u_matrix:u.translatePosMatrix(t.projMatrix,l,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:B,u_inv_rot_matrix:Ti,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){J.u_inv_rot_matrix=h,J.u_merc_center=_,J.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],J.u_zoom_transition=o.globeToMercatorTransition(D.zoom);const K=_[0]*o.EXTENT,de=_[1]*o.EXTENT;J.u_up_dir=D.projection.upVector(new o.CanonicalTileID(0,0,0),K,de)}return J},Sn=u=>{const t=[];return"map"===u.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===u.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Xi=(u,t,l,h)=>{const _=o.EXTENT/l.tileSize;return{u_matrix:u,u_camera_to_center_distance:t.getCameraToCenterDistance(h),u_extrude_scale:[t.pixelsToGLUnits[0]/_,t.pixelsToGLUnits[1]/_]}},bs=(u,t,l=1)=>({u_matrix:u,u_color:t,u_overlay:0,u_overlay_scale:l}),Aa=o.create(),Ir=(u,t,l,h,_,b,D)=>{const A=u.transform,B="globe"===A.projection.name,J=B?o.globePixelsToTileUnits(A.zoom,t.canonical)*A._pixelsPerMercatorPixel:vi(l,1,b),K={u_matrix:t.projMatrix,u_extrude_scale:J,u_intensity:D,u_inv_rot_matrix:Aa,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){K.u_inv_rot_matrix=h,K.u_merc_center=_,K.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],K.u_zoom_transition=o.globeToMercatorTransition(A.zoom);const de=_[0]*o.EXTENT,Ie=_[1]*o.EXTENT;K.u_up_dir=A.projection.upVector(new o.CanonicalTileID(0,0,0),de,Ie)}return K},Ya=(u,t,l,h,_,b,D)=>{const A=u.transform,B=A.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Sa(u,t,l,h),u_pixels_to_tile_units:B,u_device_pixel_ratio:b,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Ls(l)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Lo(t,u.transform),u_alpha_discard_threshold:0,u_trim_offset:D}},ca=(u,t,l,h,_)=>{const b=u.transform;return{u_matrix:Sa(u,t,l,h),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Lo(t,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Lo(u,t){return 1/vi(u,1,t.tileZoom)}function Sa(u,t,l,h){return u.translatePosMatrix(h||t.tileID.projMatrix,t,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}function Ls(u){const t=u.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const qa=(u,t,l,h,_,b)=>{return{u_matrix:u,u_tl_parent:t,u_scale_parent:l,u_fade_t:h.mix,u_opacity:h.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(A=_.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(D=_.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:As(_.paint.get("raster-hue-rotate")),u_perspective_transform:b};var D,A};function As(u){u*=Math.PI/180;const t=Math.sin(u),l=Math.cos(u);return[(2*l+1)/3,(-Math.sqrt(3)*t-l+1)/3,(Math.sqrt(3)*t-l+1)/3]}const va=o.create(),Mo=(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe)=>{const tt=_.transform,fe={u_is_size_zoom_constant:+("constant"===u||"source"===u),u_is_size_feature_constant:+("constant"===u||"camera"===u),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:tt.cameraToCenterDistance,u_rotate_symbol:+l,u_aspect_ratio:tt.width/tt.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:D,u_coord_matrix:A,u_is_text:+B,u_pitch_with_map:+h,u_texsize:J,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:va,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:va,u_up_vector:[0,-1,0]};return"globe"===qe.name&&(fe.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],fe.u_zoom_transition=de,fe.u_inv_rot_matrix=He,fe.u_merc_center=Ie,fe.u_camera_forward=tt._camera.forward(),fe.u_ecef_origin=o.globeECEFOrigin(tt.globeMatrix,K.toUnwrapped()),fe.u_tile_matrix=Float32Array.from(tt.globeMatrix),fe.u_up_vector=Xe),fe},Bo=(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe,tt)=>o.extend(Mo(u,t,l,h,_,b,D,A,B,J,de,Ie,He,Xe,qe,tt),{u_gamma_scale:h?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+K}),ua=(u,t,l,h,_,b,D,A,B,J,K,de,Ie,He,Xe,qe)=>o.extend(Bo(u,t,l,h,_,b,D,A,!0,B,!0,K,de,Ie,He,Xe,qe),{u_texsize_icon:J,u_texture_icon:1}),is=(u,t,l)=>({u_matrix:u,u_opacity:t,u_color:l}),Ks=(u,t,l,h,_)=>o.extend(function(b,D,A){const B=D.imageManager.getPattern(b.toString()),{width:J,height:K}=D.imageManager.getPixelSize(),de=Math.pow(2,A.tileID.overscaledZ),Ie=A.tileSize*Math.pow(2,D.transform.tileZoom)/de,He=Ie*(A.tileID.canonical.x+A.tileID.wrap*de),Xe=Ie*A.tileID.canonical.y;return{u_image:0,u_pattern_tl:B.tl,u_pattern_br:B.br,u_texsize:[J,K],u_pattern_size:B.displaySize,u_tile_units_to_pixels:1/vi(A,1,D.transform.tileZoom),u_pixel_coord_upper:[He>>16,Xe>>16],u_pixel_coord_lower:[65535&He,65535&Xe]}}(h,l,_),{u_matrix:u,u_opacity:t}),Ia={fillExtrusion:u=>({u_matrix:new o.UniformMatrix4f(u),u_lightpos:new o.Uniform3f(u),u_lightintensity:new o.Uniform1f(u),u_lightcolor:new o.Uniform3f(u),u_vertical_gradient:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_edge_radius:new o.Uniform1f(u),u_ao:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_up_dir:new o.Uniform3f(u),u_height_lift:new o.Uniform1f(u)}),fillExtrusionPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_lightpos:new o.Uniform3f(u),u_lightintensity:new o.Uniform1f(u),u_lightcolor:new o.Uniform3f(u),u_vertical_gradient:new o.Uniform1f(u),u_height_factor:new o.Uniform1f(u),u_edge_radius:new o.Uniform1f(u),u_ao:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_up_dir:new o.Uniform3f(u),u_height_lift:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u)}),fill:u=>({u_matrix:new o.UniformMatrix4f(u)}),fillPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),fillOutline:u=>({u_matrix:new o.UniformMatrix4f(u),u_world:new o.Uniform2f(u)}),fillOutlinePattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_world:new o.Uniform2f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),circle:u=>({u_camera_to_center_distance:new o.Uniform1f(u),u_extrude_scale:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_up_dir:new o.Uniform3f(u)}),collisionBox:u=>({u_matrix:new o.UniformMatrix4f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_extrude_scale:new o.Uniform2f(u)}),collisionCircle:u=>({u_matrix:new o.UniformMatrix4f(u),u_inv_matrix:new o.UniformMatrix4f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_viewport_size:new o.Uniform2f(u)}),debug:u=>({u_color:new o.UniformColor(u),u_matrix:new o.UniformMatrix4f(u),u_overlay:new o.Uniform1i(u),u_overlay_scale:new o.Uniform1f(u)}),clippingMask:u=>({u_matrix:new o.UniformMatrix4f(u)}),heatmap:u=>({u_extrude_scale:new o.Uniform1f(u),u_intensity:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_up_dir:new o.Uniform3f(u)}),heatmapTexture:u=>({u_image:new o.Uniform1i(u),u_color_ramp:new o.Uniform1i(u),u_opacity:new o.Uniform1f(u)}),hillshade:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_latrange:new o.Uniform2f(u),u_light:new o.Uniform2f(u),u_shadow:new o.UniformColor(u),u_highlight:new o.UniformColor(u),u_accent:new o.UniformColor(u)}),hillshadePrepare:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_dimension:new o.Uniform2f(u),u_zoom:new o.Uniform1f(u),u_unpack:new o.Uniform4f(u)}),line:u=>({u_matrix:new o.UniformMatrix4f(u),u_pixels_to_tile_units:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_units_to_pixels:new o.Uniform2f(u),u_dash_image:new o.Uniform1i(u),u_gradient_image:new o.Uniform1i(u),u_image_height:new o.Uniform1f(u),u_texsize:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_alpha_discard_threshold:new o.Uniform1f(u),u_trim_offset:new o.Uniform2f(u)}),linePattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_texsize:new o.Uniform2f(u),u_pixels_to_tile_units:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_units_to_pixels:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_alpha_discard_threshold:new o.Uniform1f(u)}),raster:u=>({u_matrix:new o.UniformMatrix4f(u),u_tl_parent:new o.Uniform2f(u),u_scale_parent:new o.Uniform1f(u),u_fade_t:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_image0:new o.Uniform1i(u),u_image1:new o.Uniform1i(u),u_brightness_low:new o.Uniform1f(u),u_brightness_high:new o.Uniform1f(u),u_saturation_factor:new o.Uniform1f(u),u_contrast_factor:new o.Uniform1f(u),u_spin_weights:new o.Uniform3f(u),u_perspective_transform:new o.Uniform2f(u)}),symbolIcon:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_camera_forward:new o.Uniform3f(u),u_tile_matrix:new o.UniformMatrix4f(u),u_up_vector:new o.Uniform3f(u),u_ecef_origin:new o.Uniform3f(u),u_texture:new o.Uniform1i(u)}),symbolSDF:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_texture:new o.Uniform1i(u),u_gamma_scale:new o.Uniform1f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_camera_forward:new o.Uniform3f(u),u_tile_matrix:new o.UniformMatrix4f(u),u_up_vector:new o.Uniform3f(u),u_ecef_origin:new o.Uniform3f(u),u_is_halo:new o.Uniform1i(u)}),symbolTextAndIcon:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_texsize_icon:new o.Uniform2f(u),u_texture:new o.Uniform1i(u),u_texture_icon:new o.Uniform1i(u),u_gamma_scale:new o.Uniform1f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_is_halo:new o.Uniform1i(u)}),background:u=>({u_matrix:new o.UniformMatrix4f(u),u_opacity:new o.Uniform1f(u),u_color:new o.UniformColor(u)}),backgroundPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_opacity:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_pattern_tl:new o.Uniform2f(u),u_pattern_br:new o.Uniform2f(u),u_texsize:new o.Uniform2f(u),u_pattern_size:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),terrainRaster:Ta,terrainDepth:Ta,skybox:u=>({u_matrix:new o.UniformMatrix4f(u),u_sun_direction:new o.Uniform3f(u),u_cubemap:new o.Uniform1i(u),u_opacity:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u)}),skyboxGradient:u=>({u_matrix:new o.UniformMatrix4f(u),u_color_ramp:new o.Uniform1i(u),u_center_direction:new o.Uniform3f(u),u_radius:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u)}),skyboxCapture:u=>({u_matrix_3f:new o.UniformMatrix3f(u),u_sun_direction:new o.Uniform3f(u),u_sun_intensity:new o.Uniform1f(u),u_color_tint_r:new o.Uniform4f(u),u_color_tint_m:new o.Uniform4f(u),u_luminance:new o.Uniform1f(u)}),globeRaster:u=>({u_proj_matrix:new o.UniformMatrix4f(u),u_globe_matrix:new o.UniformMatrix4f(u),u_normalize_matrix:new o.UniformMatrix4f(u),u_merc_matrix:new o.UniformMatrix4f(u),u_zoom_transition:new o.Uniform1f(u),u_merc_center:new o.Uniform2f(u),u_image0:new o.Uniform1i(u),u_grid_matrix:new o.UniformMatrix3f(u),u_skirt_height:new o.Uniform1f(u),u_frustum_tl:new o.Uniform3f(u),u_frustum_tr:new o.Uniform3f(u),u_frustum_br:new o.Uniform3f(u),u_frustum_bl:new o.Uniform3f(u),u_globe_pos:new o.Uniform3f(u),u_globe_radius:new o.Uniform1f(u),u_viewport:new o.Uniform2f(u)}),globeAtmosphere:u=>({u_frustum_tl:new o.Uniform3f(u),u_frustum_tr:new o.Uniform3f(u),u_frustum_br:new o.Uniform3f(u),u_frustum_bl:new o.Uniform3f(u),u_horizon:new o.Uniform1f(u),u_transition:new o.Uniform1f(u),u_fadeout_range:new o.Uniform1f(u),u_color:new o.Uniform4f(u),u_high_color:new o.Uniform4f(u),u_space_color:new o.Uniform4f(u),u_star_intensity:new o.Uniform1f(u),u_star_density:new o.Uniform1f(u),u_star_size:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u),u_horizon_angle:new o.Uniform1f(u),u_rotation_matrix:new o.UniformMatrix4f(u)})};let Bs;function ba(u,t,l,h,_,b,D){const A=u.context,B=A.gl,J=u.transform,K=u.useProgram("collisionBox"),de=[];let Ie=0,He=0;for(let dt=0;dt<h.length;dt++){const Vt=h[dt],$t=t.getTile(Vt),Ht=$t.getBucket(l);if(!Ht)continue;const tn=mo(Vt,Ht,J);let Xt=tn;0===_[0]&&0===_[1]||(Xt=u.translatePosMatrix(tn,$t,_,b));const hn=D?Ht.textCollisionBox:Ht.iconCollisionBox,Xn=Ht.collisionCircleArray;if(Xn.length>0){const dn=o.create(),Nn=Xt;o.mul(dn,Ht.placementInvProjMatrix,J.glCoordMatrix),o.mul(dn,dn,Ht.placementViewportMatrix),de.push({circleArray:Xn,circleOffset:He,transform:Nn,invTransform:dn,projection:Ht.getProjection()}),Ie+=Xn.length/4,He=Ie}hn&&(u.terrain&&u.terrain.setupElevationDraw($t,K),K.draw(A,B.LINES,o.DepthMode.disabled,o.StencilMode.disabled,u.colorModeForRenderPass(),o.CullFaceMode.disabled,Xi(Xt,J,$t,Ht.getProjection()),l.id,hn.layoutVertexBuffer,hn.indexBuffer,hn.segments,null,J.zoom,null,[hn.collisionVertexBuffer,hn.collisionVertexBufferExt]))}if(!D||!de.length)return;const Xe=u.useProgram("collisionCircle"),qe=new o.StructArrayLayout2f1f2i16;qe.resize(4*Ie),qe._trim();let tt=0;for(const dt of de)for(let Vt=0;Vt<dt.circleArray.length/4;Vt++){const $t=4*Vt,Ht=dt.circleArray[$t+0],tn=dt.circleArray[$t+1],Xt=dt.circleArray[$t+2],hn=dt.circleArray[$t+3];qe.emplace(tt++,Ht,tn,Xt,hn,0),qe.emplace(tt++,Ht,tn,Xt,hn,1),qe.emplace(tt++,Ht,tn,Xt,hn,2),qe.emplace(tt++,Ht,tn,Xt,hn,3)}(!Bs||Bs.length<2*Ie)&&(Bs=function(dt){const Vt=2*dt,$t=new o.StructArrayLayout3ui6;$t.resize(Vt),$t._trim();for(let Ht=0;Ht<Vt;Ht++){const tn=6*Ht;$t.uint16[tn+0]=4*Ht+0,$t.uint16[tn+1]=4*Ht+1,$t.uint16[tn+2]=4*Ht+2,$t.uint16[tn+3]=4*Ht+2,$t.uint16[tn+4]=4*Ht+3,$t.uint16[tn+5]=4*Ht+0}return $t}(Ie));const fe=A.createIndexBuffer(Bs,!0),Ze=A.createVertexBuffer(qe,o.collisionCircleLayout.members,!0);for(const dt of de){const Vt={u_matrix:dt.transform,u_inv_matrix:dt.invTransform,u_camera_to_center_distance:(ut=J).getCameraToCenterDistance(dt.projection),u_viewport_size:[ut.width,ut.height]};Xe.draw(A,B.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,u.colorModeForRenderPass(),o.CullFaceMode.disabled,Vt,l.id,Ze,fe,o.SegmentVector.simpleSegment(0,2*dt.circleOffset,dt.circleArray.length,dt.circleArray.length/2),null,J.zoom)}var ut;Ze.destroy(),fe.destroy()}const cl=o.create();function Pa({width:u,height:t,anchor:l,textOffset:h,textScale:_},b){const{horizontalAlign:D,verticalAlign:A}=o.getAnchorAlignment(l),B=-(D-.5)*u,J=-(A-.5)*t,K=o.evaluateVariableOffset(l,h);return new o.Point((B/_+K[0])*b,(J/_+K[1])*b)}function ul(u,t,l,h,_,b,D,A,B,J,K){const de=u.text.placedSymbolArray,Ie=u.text.dynamicLayoutVertexArray,He=u.icon.dynamicLayoutVertexArray,Xe={},qe=u.getProjection(),tt=rr(A,qe,b),fe=b.elevation,Ze=qe.upVectorScale(A.canonical,b.center.lat,b.worldSize).metersToTile;Ie.clear();for(let ut=0;ut<de.length;ut++){const dt=de.get(ut),{tileAnchorX:Vt,tileAnchorY:$t,numGlyphs:Ht}=dt,tn=dt.hidden||!dt.crossTileID||u.allowVerticalPlacement&&!dt.placedOrientation?null:h[dt.crossTileID];if(tn){let Xt=0,hn=0,Xn=0;if(fe){const Qn=fe?fe.getAtTileOffset(A,Vt,$t):0,[Pi,qi,Ci]=qe.upVector(A.canonical,Vt,$t);Xt=Qn*Pi*Ze,hn=Qn*qi*Ze,Xn=Qn*Ci*Ze}let[dn,Nn,bn,qn]=I(dt.projectedAnchorX+Xt,dt.projectedAnchorY+hn,dt.projectedAnchorZ+Xn,l?tt:D);const mn=ie(b.getCameraToCenterDistance(qe),qn);let Ln=_.evaluateSizeForFeature(u.textSizeData,J,dt)*mn/o.ONE_EM;l&&(Ln*=u.tilePixelRatio/B);const Jn=Pa(tn,Ln);l?(({x:dn,y:Nn,z:bn}=qe.projectTilePoint(Vt+Jn.x,$t+Jn.y,A.canonical)),[dn,Nn,bn]=I(dn+Xt,Nn+hn,bn+Xn,D)):(t&&Jn._rotate(-b.angle),dn+=Jn.x,Nn+=Jn.y,bn=0);const jn=u.allowVerticalPlacement&&dt.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Qn=0;Qn<Ht;Qn++)o.addDynamicAttributes(Ie,dn,Nn,bn,jn);K&&dt.associatedIconIndex>=0&&(Xe[dt.associatedIconIndex]={x:dn,y:Nn,z:bn,angle:jn})}else xr(Ht,Ie)}if(K){He.clear();const ut=u.icon.placedSymbolArray;for(let dt=0;dt<ut.length;dt++){const Vt=ut.get(dt),{numGlyphs:$t}=Vt,Ht=Xe[dt];if(Vt.hidden||!Ht)xr($t,He);else{const{x:tn,y:Xt,z:hn,angle:Xn}=Ht;for(let dn=0;dn<$t;dn++)o.addDynamicAttributes(He,tn,Xt,hn,Xn)}}u.icon.dynamicLayoutVertexBuffer.updateData(He)}u.text.dynamicLayoutVertexBuffer.updateData(Ie)}function La(u,t,l){return l.iconsInText&&t?"symbolTextAndIcon":u?"symbolSDF":"symbolIcon"}function dl(u,t,l,h,_,b,D,A,B,J,K,de){const Ie=u.context,He=Ie.gl,Xe=u.transform,qe="map"===A,tt="map"===B,fe=qe&&"point"!==l.layout.get("symbol-placement"),Ze=qe&&!tt&&!fe,ut=void 0!==l.layout.get("symbol-sort-key").constantOr(1);let dt=!1;const Vt=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),$t=[o.mercatorXfromLng(Xe.center.lng),o.mercatorYfromLat(Xe.center.lat)],Ht=l.layout.get("text-variable-anchor"),tn="globe"===Xe.projection.name,Xt=[],hn=[0,-1,0];let Xn=hn;!tn&&!Xe.mercatorFromTransition||qe||(Xn=function(dn){const Nn=dn._camera.getWorldToCamera(dn.worldSize,1),bn=o.multiply([],Nn,dn.globeMatrix);o.invert(bn,bn);const qn=[0,0,0],mn=[0,1,0,0];return o.transformMat4$1(mn,mn,bn),qn[0]=mn[0],qn[1]=mn[1],qn[2]=mn[2],o.normalize(qn,qn),qn}(Xe));for(const dn of h){const Nn=t.getTile(dn),bn=Nn.getBucket(l);if(!bn||"mercator"===bn.projection.name&&tn)continue;const qn=_?bn.text:bn.icon;if(!qn||bn.fullyClipped||!qn.segments.get().length)continue;const mn=qn.programConfigurations.get(l.id),Ln=_||bn.sdfIcons,Jn=_?bn.textSizeData:bn.iconSizeData,jn=tt||0!==Xe.pitch,Qn=o.evaluateSizeForZoom(Jn,Xe.zoom);let Pi,qi,Ci,Li,hr=[0,0],lr=null;if(_)qi=Nn.glyphAtlasTexture,Ci=He.LINEAR,Pi=Nn.glyphAtlasTexture.size,bn.iconsInText&&(hr=Nn.imageAtlasTexture.size,lr=Nn.imageAtlasTexture,Li=jn||u.options.rotating||u.options.zooming||"composite"===Jn.kind||"camera"===Jn.kind?He.LINEAR:He.NEAREST);else{const Rl=1!==l.layout.get("icon-size").constantOr(0)||bn.iconsNeedLinear;qi=Nn.imageAtlasTexture,Ci=Ln||u.options.rotating||u.options.zooming||Rl||jn?He.LINEAR:He.NEAREST,Pi=Nn.imageAtlasTexture.size}const Si="globe"===bn.projection.name,kr=Si?Xn:hn,to=Si?o.globeToMercatorTransition(Xe.zoom):0,no=rr(dn,bn.getProjection(),Xe),jr=Xe.calculatePixelsToTileUnitsMatrix(Nn),wa=wn(no,Nn.tileID.canonical,tt,qe,Xe,bn.getProjection(),jr),ta=u.terrain&&tt&&fe?o.invert(o.create(),wa):cl,fl=vt(no,Nn.tileID.canonical,tt,qe,Xe,bn.getProjection(),jr),kl=Ht&&bn.hasTextData(),Io="none"!==l.layout.get("icon-text-fit")&&kl&&bn.hasIconData();if(fe){const Rl=Xe.elevation,Fl=Rl?Rl.getAtTileOffsetFunc(dn,Xe.center.lat,Xe.worldSize,bn.getProjection()):null,Ll=at(no,Nn.tileID.canonical,tt,qe,Xe,bn.getProjection(),jr);et(bn,no,u,_,Ll,fl,tt,J,Fl,dn)}const Yr=fe||_&&Ht||Io,Cr=u.translatePosMatrix(no,Nn,b,D),Xo=Yr?cl:wa,ha=u.translatePosMatrix(fl,Nn,b,D,!0),po=bn.getProjection().createInversionMatrix(Xe,dn.canonical),Ca=[];u.terrainRenderModeElevated()&&tt&&Ca.push("PITCH_WITH_MAP_TERRAIN"),Si&&Ca.push("PROJECTION_GLOBE_VIEW"),Yr&&Ca.push("PROJECTED_POS_ON_VIEWPORT");const Ua=Ln&&0!==l.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1);let gc;gc=Ln?bn.iconsInText?ua(Jn.kind,Qn,Ze,tt,u,Cr,Xo,ha,Pi,hr,dn,to,$t,po,kr,bn.getProjection()):Bo(Jn.kind,Qn,Ze,tt,u,Cr,Xo,ha,_,Pi,!0,dn,to,$t,po,kr,bn.getProjection()):Mo(Jn.kind,Qn,Ze,tt,u,Cr,Xo,ha,_,Pi,dn,to,$t,po,kr,bn.getProjection());const uu={program:u.useProgram(La(Ln,_,bn),mn,Ca),buffers:qn,uniformValues:gc,atlasTexture:qi,atlasTextureIcon:lr,atlasInterpolation:Ci,atlasInterpolationIcon:Li,isSDF:Ln,hasHalo:Ua,tile:Nn,labelPlaneMatrixInv:ta};if(ut&&bn.canOverlap){dt=!0;const Rl=qn.segments.get();for(const Fl of Rl)Xt.push({segments:new o.SegmentVector([Fl]),sortKey:Fl.sortKey,state:uu})}else Xt.push({segments:qn.segments,sortKey:0,state:uu})}dt&&Xt.sort((dn,Nn)=>dn.sortKey-Nn.sortKey);for(const dn of Xt){const Nn=dn.state;if(u.terrain&&u.terrain.setupElevationDraw(Nn.tile,Nn.program,{useDepthForOcclusion:!tn,labelPlaneMatrixInv:Nn.labelPlaneMatrixInv}),Ie.activeTexture.set(He.TEXTURE0),Nn.atlasTexture.bind(Nn.atlasInterpolation,He.CLAMP_TO_EDGE),Nn.atlasTextureIcon&&(Ie.activeTexture.set(He.TEXTURE1),Nn.atlasTextureIcon&&Nn.atlasTextureIcon.bind(Nn.atlasInterpolationIcon,He.CLAMP_TO_EDGE)),Nn.isSDF){const bn=Nn.uniformValues;Nn.hasHalo&&(bn.u_is_halo=1,Ba(Nn.buffers,dn.segments,l,u,Nn.program,Vt,K,de,bn)),bn.u_is_halo=0}Ba(Nn.buffers,dn.segments,l,u,Nn.program,Vt,K,de,Nn.uniformValues)}}function Ba(u,t,l,h,_,b,D,A,B){const J=h.context,K=[u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer,u.globeExtVertexBuffer];_.draw(J,J.gl.TRIANGLES,b,D,A,o.CullFaceMode.disabled,B,l.id,u.layoutVertexBuffer,u.indexBuffer,t,l.paint,h.transform.zoom,u.programConfigurations.get(l.id),K)}function Oa(u,t,l,h,_,b,D){const A=u.context.gl,B=l.paint.get("fill-pattern"),J=B&&B.constantOr(1);let K,de,Ie,He,Xe;D?(de=J&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=A.LINES):(de=J?"fillPattern":"fill",K=A.TRIANGLES);for(const qe of h){const tt=t.getTile(qe);if(J&&!tt.patternsLoaded())continue;const fe=tt.getBucket(l);if(!fe)continue;u.prepareDrawTile();const Ze=fe.programConfigurations.get(l.id),ut=u.useProgram(de,Ze);J&&(u.context.activeTexture.set(A.TEXTURE0),tt.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ze.updatePaintBuffers());const dt=B.constantOr(null);if(dt&&tt.imageAtlas){const $t=tt.imageAtlas.patternPositions[dt.toString()];$t&&Ze.setConstantPatternPositions($t)}const Vt=u.translatePosMatrix(qe.projMatrix,tt,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(D){He=fe.indexBuffer2,Xe=fe.segments2;const $t=u.terrain&&u.terrain.renderingToTexture?u.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];Ie="fillOutlinePattern"===de&&J?xn(Vt,u,tt,$t):Le(Vt,$t)}else He=fe.indexBuffer,Xe=fe.segments,Ie=J?q(Vt,u,tt):te(Vt);u.prepareDrawProgram(u.context,ut,qe.toUnwrapped()),ut.draw(u.context,K,_,u.stencilModeForClipping(qe),b,o.CullFaceMode.disabled,Ie,l.id,fe.layoutVertexBuffer,He,Xe,l.paint,u.transform.zoom,Ze)}}function Xs(u,t,l,h,_,b,D){const A=u.context,B=A.gl,J=u.transform,K=l.paint.get("fill-extrusion-pattern"),de=K.constantOr(1),Ie=l.paint.get("fill-extrusion-opacity"),He=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),l.paint.get("fill-extrusion-ambient-occlusion-radius")],Xe=l.layout.get("fill-extrusion-edge-radius"),qe=Xe>0&&!l.paint.get("fill-extrusion-rounded-roof"),tt=qe?0:Xe,fe="globe"===J.projection.name?o.fillExtrusionHeightLift():0,Ze="globe"===J.projection.name,ut=Ze?o.globeToMercatorTransition(J.zoom):0,dt=[o.mercatorXfromLng(J.center.lng),o.mercatorYfromLat(J.center.lat)],Vt=[];Ze&&Vt.push("PROJECTION_GLOBE_VIEW"),He[0]>0&&Vt.push("FAUX_AO"),qe&&Vt.push("ZERO_ROOF_RADIUS");for(const $t of h){const Ht=t.getTile($t),tn=Ht.getBucket(l);if(!tn||tn.projection.name!==J.projection.name)continue;const Xt=tn.programConfigurations.get(l.id),hn=u.useProgram(de?"fillExtrusionPattern":"fillExtrusion",Xt,Vt);if(u.terrain){const Ln=u.terrain;if(u.style.terrainSetForDrapingOnly())Ln.setupElevationDraw(Ht,hn,{useMeterToDem:!0});else{if(!tn.enableTerrain)continue;if(Ln.setupElevationDraw(Ht,hn,{useMeterToDem:!0}),Ka(A,t,$t,tn,l,Ln),!tn.centroidVertexBuffer){const Jn=hn.attributes.a_centroid_pos;void 0!==Jn&&B.vertexAttrib2f(Jn,0,0)}}}de&&(u.context.activeTexture.set(B.TEXTURE0),Ht.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Xt.updatePaintBuffers());const Xn=K.constantOr(null);if(Xn&&Ht.imageAtlas){const Ln=Ht.imageAtlas.patternPositions[Xn.toString()];Ln&&Xt.setConstantPatternPositions(Ln)}const dn=u.translatePosMatrix($t.projMatrix,Ht,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Nn=J.projection.createInversionMatrix(J,$t.canonical),bn=l.paint.get("fill-extrusion-vertical-gradient"),qn=de?oe(dn,u,bn,Ie,He,tt,$t,Ht,fe,ut,dt,Nn):Fs(dn,u,bn,Ie,He,tt,$t,fe,ut,dt,Nn);u.prepareDrawProgram(A,hn,$t.toUnwrapped());const mn=[];u.terrain&&mn.push(tn.centroidVertexBuffer),Ze&&mn.push(tn.layoutVertexExtBuffer),hn.draw(A,A.gl.TRIANGLES,_,b,D,o.CullFaceMode.backCCW,qn,l.id,tn.layoutVertexBuffer,tn.indexBuffer,tn.segments,l.paint,u.transform.zoom,Xt,mn)}}function Ka(u,t,l,h,_,b){const D=[fe=>{let Ze=fe.canonical.x-1,ut=fe.wrap;return Ze<0&&(Ze=(1<<fe.canonical.z)-1,ut--),new o.OverscaledTileID(fe.overscaledZ,ut,fe.canonical.z,Ze,fe.canonical.y)},fe=>{let Ze=fe.canonical.x+1,ut=fe.wrap;return Ze===1<<fe.canonical.z&&(Ze=0,ut++),new o.OverscaledTileID(fe.overscaledZ,ut,fe.canonical.z,Ze,fe.canonical.y)},fe=>new o.OverscaledTileID(fe.overscaledZ,fe.wrap,fe.canonical.z,fe.canonical.x,(0===fe.canonical.y?1<<fe.canonical.z:fe.canonical.y)-1),fe=>new o.OverscaledTileID(fe.overscaledZ,fe.wrap,fe.canonical.z,fe.canonical.x,fe.canonical.y===(1<<fe.canonical.z)-1?0:fe.canonical.y+1)],A=fe=>{const Ze=t.getSource().minzoom,ut=Vt=>{const $t=t.getTileByID(Vt);if($t&&$t.hasData())return $t.getBucket(_)},dt=[0,-1,1];for(const Vt of dt){if(fe.overscaledZ+Vt<Ze)continue;const $t=ut(fe.calculateScaledKey(fe.overscaledZ+Vt));if($t)return $t}},B=[0,0,0],J=(fe,Ze)=>(B[0]=Math.min(fe.min.y,Ze.min.y),B[1]=Math.max(fe.max.y,Ze.max.y),B[2]=o.EXTENT-Ze.min.x>fe.max.x?Ze.min.x-o.EXTENT:fe.max.x,B),K=(fe,Ze)=>(B[0]=Math.min(fe.min.x,Ze.min.x),B[1]=Math.max(fe.max.x,Ze.max.x),B[2]=o.EXTENT-Ze.min.y>fe.max.y?Ze.min.y-o.EXTENT:fe.max.y,B),de=[(fe,Ze)=>J(fe,Ze),(fe,Ze)=>J(Ze,fe),(fe,Ze)=>K(fe,Ze),(fe,Ze)=>K(Ze,fe)],Ie=new o.Point(0,0);let He,Xe,qe;const tt=(fe,Ze,ut,dt,Vt)=>{const $t=[[dt?ut:fe,dt?fe:ut,0],[dt?ut:Ze,dt?Ze:ut,0]],Ht=Vt<0?o.EXTENT+Vt:Vt,tn=[dt?Ht:(fe+Ze)/2,dt?(fe+Ze)/2:Ht,0];return 0===ut&&Vt<0||0!==ut&&Vt>0?b.getForTilePoints(qe,[tn],!0,Xe):$t.push(tn),b.getForTilePoints(l,$t,!0,He),Math.max($t[0][2],$t[1][2],tn[2])/b.exaggeration()};for(let fe=0;fe<4;fe++){const Ze=(fe<2?1:5)-fe,ut=h.borders[fe];if(0===ut.length)continue;const dt=qe=D[fe](l),Vt=A(dt);if(!(Vt&&Vt instanceof o.FillExtrusionBucket&&Vt.enableTerrain)||h.borderDoneWithNeighborZ[fe]===Vt.canonical.z&&Vt.borderDoneWithNeighborZ[Ze]===h.canonical.z||(Xe=b.findDEMTileFor(dt),!Xe||!Xe.dem))continue;if(!He){const Xt=b.findDEMTileFor(l);if(!Xt||!Xt.dem)return;He=Xt}const $t=Vt.borders[Ze];let Ht=0;const tn=Vt.borderDoneWithNeighborZ[Ze]!==h.canonical.z;if(h.canonical.z===Vt.canonical.z){for(let Xt=0;Xt<ut.length;Xt++){const hn=h.featuresOnBorder[ut[Xt]],Xn=hn.borders[fe];let dn;for(;Ht<$t.length&&(dn=Vt.featuresOnBorder[$t[Ht]],!(dn.borders[Ze][1]>Xn[0]+3));)tn&&Vt.encodeCentroid(void 0,dn,!1),Ht++;if(dn&&Ht<$t.length){const Nn=Ht;let bn=0;for(;!(dn.borders[Ze][0]>Xn[1]-3)&&(bn++,++Ht!==$t.length);)dn=Vt.featuresOnBorder[$t[Ht]];if(dn=Vt.featuresOnBorder[$t[Nn]],hn.intersectsCount()>1||dn.intersectsCount()>1||1!==bn){1!==bn&&(Ht=Nn),h.encodeCentroid(void 0,hn,!1),tn&&Vt.encodeCentroid(void 0,dn,!1);continue}const qn=de[fe](hn,dn),mn=fe%2?o.EXTENT-1:0;Ie.x=tt(qn[0],Math.min(o.EXTENT-1,qn[1]),mn,fe<2,qn[2]),Ie.y=0,h.encodeCentroid(Ie,hn,!1),tn&&Vt.encodeCentroid(Ie,dn,!1)}else h.encodeCentroid(void 0,hn,!1)}h.borderDoneWithNeighborZ[fe]=Vt.canonical.z,h.needsCentroidUpdate=!0,tn&&(Vt.borderDoneWithNeighborZ[Ze]=h.canonical.z,Vt.needsCentroidUpdate=!0)}else{for(const Xt of ut)h.encodeCentroid(void 0,h.featuresOnBorder[Xt],!1);if(tn){for(const Xt of $t)Vt.encodeCentroid(void 0,Vt.featuresOnBorder[Xt],!1);Vt.borderDoneWithNeighborZ[Ze]=h.canonical.z,Vt.needsCentroidUpdate=!0}h.borderDoneWithNeighborZ[fe]=Vt.canonical.z,h.needsCentroidUpdate=!0}}(h.needsCentroidUpdate||!h.centroidVertexBuffer&&0!==h.centroidVertexArray.length)&&h.uploadCentroid(u)}const Ns=new o.Color(1,0,0,1),hl=new o.Color(0,1,0,1),Xa=new o.Color(0,0,1,1),Il=new o.Color(1,0,1,1),Kl=new o.Color(0,1,1,1);function pc(u,t,l){const h=u.context,_=u.transform,b=h.gl,D="globe"===_.projection.name,A=D?["PROJECTION_GLOBE_VIEW"]:null;let B=l.projMatrix;if(D&&o.globeToMercatorTransition(_.zoom)>0){const hn=o.transitionTileAABBinECEF(l.canonical,_),Xn=o.globeDenormalizeECEF(hn);B=o.multiply(new Float32Array(16),_.globeMatrix,Xn),o.multiply(B,_.projMatrix,B)}const J=u.useProgram("debug",null,A),K=t.getTileByID(l.key);u.terrain&&u.terrain.setupElevationDraw(K,J);const de=o.DepthMode.disabled,Ie=o.StencilMode.disabled,He=u.colorModeForRenderPass();h.activeTexture.set(b.TEXTURE0),u.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),D?K._makeGlobeTileDebugBuffers(u.context,_):K._makeDebugTileBoundsBuffers(u.context,_.projection);const qe=K._tileDebugBuffer||u.debugBuffer,tt=K._tileDebugIndexBuffer||u.debugIndexBuffer,fe=K._tileDebugSegments||u.debugSegments;J.draw(h,b.LINE_STRIP,de,Ie,He,o.CullFaceMode.disabled,bs(B,o.Color.red),"$debug",qe,tt,fe,null,null,null,[K._globeTileDebugBorderBuffer]);const Ze=K.latestRawTileData,ut=Math.floor((Ze&&Ze.byteLength||0)/1024),dt=t.getTile(l).tileSize,Vt=512/Math.min(dt,512)*(l.overscaledZ/_.zoom)*.5;let $t=l.canonical.toString();l.overscaledZ!==l.canonical.z&&($t+=` => ${l.overscaledZ}`),$t+=` ${ut}kb`,function(hn,Xn){hn.initDebugOverlayCanvas();const dn=hn.debugOverlayCanvas,Nn=hn.context.gl,bn=hn.debugOverlayCanvas.getContext("2d");bn.clearRect(0,0,dn.width,dn.height),bn.shadowColor="white",bn.shadowBlur=2,bn.lineWidth=1.5,bn.strokeStyle="white",bn.textBaseline="top",bn.font="bold 36px Open Sans, sans-serif",bn.fillText(Xn,5,5),bn.strokeText(Xn,5,5),hn.debugOverlayTexture.update(dn),hn.debugOverlayTexture.bind(Nn.LINEAR,Nn.CLAMP_TO_EDGE)}(u,$t);const Ht=K._tileDebugTextBuffer||u.debugBuffer,tn=K._tileDebugTextIndexBuffer||u.quadTriangleIndexBuffer,Xt=K._tileDebugTextSegments||u.debugSegments;J.draw(h,b.TRIANGLES,de,Ie,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,bs(B,o.Color.transparent,Vt),"$debug",Ht,tn,Xt,null,null,null,[K._globeTileDebugTextBuffer])}function Wo(u,t,l,h){Pr(u,0,t+l/2,u.transform.width,l,h)}function rs(u,t,l,h){Pr(u,t-l/2,0,l,u.transform.height,h)}function Pr(u,t,l,h,_,b){const D=u.context,A=D.gl;A.enable(A.SCISSOR_TEST),A.scissor(t*o.exported.devicePixelRatio,l*o.exported.devicePixelRatio,h*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio),D.clear({color:b}),A.disable(A.SCISSOR_TEST)}const Pl=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Xl}=Pl;function da(u,t,l,h){u.emplaceBack(t,l,h)}class Ja{constructor(t){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,da(this.vertexArray,-1,-1,1),da(this.vertexArray,1,-1,1),da(this.vertexArray,-1,1,1),da(this.vertexArray,1,1,1),da(this.vertexArray,-1,-1,-1),da(this.vertexArray,1,-1,-1),da(this.vertexArray,-1,1,-1),da(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Xl),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Ss(u,t,l,h,_,b){const D=u.gl,A=t.paint.get("sky-atmosphere-color"),B=t.paint.get("sky-atmosphere-halo-color"),J=t.paint.get("sky-atmosphere-sun-intensity"),K={u_matrix_3f:o.fromMat4(o.create$1(),h),u_sun_direction:_,u_sun_intensity:J,u_color_tint_r:[(Xe=A).r,Xe.g,Xe.b,Xe.a],u_color_tint_m:[(qe=B).r,qe.g,qe.b,qe.a],u_luminance:5e-5};var Xe,qe;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+b,t.skyboxTexture,0),l.draw(u,D.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,K,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}const Qa=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Na{constructor(t){const l=new o.StructArrayLayout5f20;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const h=new o.StructArrayLayout3ui6;h.emplaceBack(0,1,2),h.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(l,Qa.members),this.indexBuffer=t.createIndexBuffer(h),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Js={symbol:function(u,t,l,h,_){if("translucent"!==u.renderPass)return;const b=o.StencilMode.disabled,D=u.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(A,B,J,K,de,Ie,He){const Xe=B.transform,qe="map"===de,tt="map"===Ie;for(const fe of A){const Ze=K.getTile(fe),ut=Ze.getBucket(J);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const dt=o.evaluateSizeForZoom(ut.textSizeData,Xe.zoom),Vt=rr(fe,ut.getProjection(),Xe),$t=Xe.calculatePixelsToTileUnitsMatrix(Ze),Ht=wn(Vt,Ze.tileID.canonical,tt,qe,Xe,ut.getProjection(),$t),tn="none"!==J.layout.get("icon-text-fit")&&ut.hasIconData();if(dt){const Xt=Math.pow(2,Xe.zoom-Ze.tileID.overscaledZ);ul(ut,qe,tt,He,o.symbolSize,Xe,Ht,fe,Xt,dt,tn)}}}(h,u,l,t,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),_),0!==l.paint.get("icon-opacity").constantOr(1)&&dl(u,t,l,h,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),b,D),0!==l.paint.get("text-opacity").constantOr(1)&&dl(u,t,l,h,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),b,D),t.map.showCollisionBoxes&&(ba(u,t,l,h,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),ba(u,t,l,h,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(u,t,l,h){if("translucent"!==u.renderPass)return;const _=l.paint.get("circle-opacity"),b=l.paint.get("circle-stroke-width"),D=l.paint.get("circle-stroke-opacity"),A=void 0!==l.layout.get("circle-sort-key").constantOr(1);if(0===_.constantOr(1)&&(0===b.constantOr(1)||0===D.constantOr(1)))return;const B=u.context,J=B.gl,K=u.transform,de=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),Ie=o.StencilMode.disabled,He=u.colorModeForRenderPass(),Xe="globe"===K.projection.name,qe=[o.mercatorXfromLng(K.center.lng),o.mercatorYfromLat(K.center.lat)],tt=[];for(let Ze=0;Ze<h.length;Ze++){const ut=h[Ze],dt=t.getTile(ut),Vt=dt.getBucket(l);if(!Vt||Vt.projection.name!==K.projection.name)continue;const $t=Vt.programConfigurations.get(l.id),Ht=Sn(l);Xe&&Ht.push("PROJECTION_GLOBE_VIEW");const tn=u.useProgram("circle",$t,Ht),Xt=Vt.layoutVertexBuffer,hn=Vt.globeExtVertexBuffer,Xn=Vt.indexBuffer,dn=K.projection.createInversionMatrix(K,ut.canonical),Nn={programConfiguration:$t,program:tn,layoutVertexBuffer:Xt,globeExtVertexBuffer:hn,indexBuffer:Xn,uniformValues:Ur(u,ut,dt,dn,qe,l),tile:dt};if(A){const bn=Vt.segments.get();for(const qn of bn)tt.push({segments:new o.SegmentVector([qn]),sortKey:qn.sortKey,state:Nn})}else tt.push({segments:Vt.segments,sortKey:0,state:Nn})}A&&tt.sort((Ze,ut)=>Ze.sortKey-ut.sortKey);const fe={useDepthForOcclusion:!Xe};for(const Ze of tt){const{programConfiguration:ut,program:dt,layoutVertexBuffer:Vt,globeExtVertexBuffer:$t,indexBuffer:Ht,uniformValues:tn,tile:Xt}=Ze.state,hn=Ze.segments;u.terrain&&u.terrain.setupElevationDraw(Xt,dt,fe),u.prepareDrawProgram(B,dt,Xt.tileID.toUnwrapped()),dt.draw(B,J.TRIANGLES,de,Ie,He,o.CullFaceMode.disabled,tn,l.id,Vt,Ht,hn,l.paint,K.zoom,ut,[$t])}},heatmap:function(u,t,l,h){if(0!==l.paint.get("heatmap-opacity"))if("offscreen"===u.renderPass){const _=u.context,b=_.gl,D=o.StencilMode.disabled,A=new o.ColorMode([b.ONE,b.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(He,Xe,qe,tt){const fe=He.gl,Ze=Xe.width*tt,ut=Xe.height*tt;He.activeTexture.set(fe.TEXTURE1),He.viewport.set([0,0,Ze,ut]);let dt=qe.heatmapFbo;if(!dt||dt&&(dt.width!==Ze||dt.height!==ut)){dt&&dt.destroy();const Vt=fe.createTexture();fe.bindTexture(fe.TEXTURE_2D,Vt),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.LINEAR),dt=qe.heatmapFbo=He.createFramebuffer(Ze,ut,!1),function($t,Ht,tn,Xt,hn,Xn){const dn=$t.gl;dn.texImage2D(dn.TEXTURE_2D,0,$t.isWebGL2&&$t.extRenderToTextureHalfFloat?dn.RGBA16F:dn.RGBA,hn,Xn,0,dn.RGBA,$t.extRenderToTextureHalfFloat?$t.isWebGL2?dn.HALF_FLOAT:$t.extTextureHalfFloat.HALF_FLOAT_OES:dn.UNSIGNED_BYTE,null),Xt.colorAttachment.set(tn)}(He,0,Vt,dt,Ze,ut)}else fe.bindTexture(fe.TEXTURE_2D,dt.colorAttachment.get()),He.bindFramebuffer.set(dt.framebuffer)})(_,u,l,"globe"===u.transform.projection.name?.5:.25),_.clear({color:o.Color.transparent});const B=u.transform,J="globe"===B.projection.name,K=J?["PROJECTION_GLOBE_VIEW"]:null,de=J?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,Ie=[o.mercatorXfromLng(B.center.lng),o.mercatorYfromLat(B.center.lat)];for(let He=0;He<h.length;He++){const Xe=h[He];if(t.hasRenderableParent(Xe))continue;const qe=t.getTile(Xe),tt=qe.getBucket(l);if(!tt||tt.projection.name!==B.projection.name)continue;const fe=tt.programConfigurations.get(l.id),Ze=u.useProgram("heatmap",fe,K),{zoom:ut}=u.transform;u.terrain&&u.terrain.setupElevationDraw(qe,Ze),u.prepareDrawProgram(_,Ze,Xe.toUnwrapped());const dt=B.projection.createInversionMatrix(B,Xe.canonical);Ze.draw(_,b.TRIANGLES,o.DepthMode.disabled,D,A,de,Ir(u,Xe,qe,dt,Ie,ut,l.paint.get("heatmap-intensity")),l.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,l.paint,u.transform.zoom,fe,J?[tt.globeExtVertexBuffer]:null)}_.viewport.set([0,0,u.width,u.height])}else"translucent"===u.renderPass&&(u.context.setColorMode(u.colorModeForRenderPass()),function(_,b){const D=_.context,A=D.gl,B=b.heatmapFbo;if(!B)return;D.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,B.colorAttachment.get()),D.activeTexture.set(A.TEXTURE1);let J=b.colorRampTexture;J||(J=b.colorRampTexture=new o.Texture(D,b.colorRamp,A.RGBA)),J.bind(A.LINEAR,A.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(D,A.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,_.colorModeForRenderPass(),o.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:b.paint.get("heatmap-opacity")},b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(u,l))},line:function(u,t,l,h){if("translucent"!==u.renderPass)return;const _=l.paint.get("line-opacity"),b=l.paint.get("line-width");if(0===_.constantOr(1)||0===b.constantOr(1))return;const D=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),A=u.colorModeForRenderPass(),B=u.terrain&&u.terrain.renderingToTexture?1:o.exported.devicePixelRatio,J=l.paint.get("line-dasharray"),K=J.constantOr(1),de=l.layout.get("line-cap"),Ie=l.paint.get("line-pattern"),He=Ie.constantOr(1),Xe=l.paint.get("line-gradient"),qe=He?"linePattern":"line",tt=u.context,fe=tt.gl,Ze=(dt=>{const Vt=[];Ls(dt)&&Vt.push("RENDER_LINE_DASH"),dt.paint.get("line-gradient")&&Vt.push("RENDER_LINE_GRADIENT");const $t=dt.paint.get("line-trim-offset");0===$t[0]&&0===$t[1]||Vt.push("RENDER_LINE_TRIM_OFFSET");const Ht=dt.paint.get("line-pattern").constantOr(1),tn=1!==dt.paint.get("line-opacity").constantOr(1);return!Ht&&tn&&Vt.push("RENDER_LINE_ALPHA_DISCARD"),Vt})(l);let ut=Ze.includes("RENDER_LINE_ALPHA_DISCARD");u.terrain&&u.terrain.clipOrMaskOverlapStencilType()&&(ut=!1);for(const dt of h){const Vt=t.getTile(dt);if(He&&!Vt.patternsLoaded())continue;const $t=Vt.getBucket(l);if(!$t)continue;u.prepareDrawTile();const Ht=$t.programConfigurations.get(l.id),tn=u.useProgram(qe,Ht,Ze),Xt=Ie.constantOr(null);if(Xt&&Vt.imageAtlas){const Ln=Vt.imageAtlas.patternPositions[Xt.toString()];Ln&&Ht.setConstantPatternPositions(Ln)}const hn=J.constantOr(null),Xn=de.constantOr(null);if(!He&&hn&&Xn&&Vt.lineAtlas){const Ln=Vt.lineAtlas.getDash(hn,Xn);Ln&&Ht.setConstantPatternPositions(Ln)}let[dn,Nn]=l.paint.get("line-trim-offset");("round"===Xn||"square"===Xn)&&dn!==Nn&&(0===dn&&(dn-=1),1===Nn&&(Nn+=1));const bn=u.terrain?dt.projMatrix:null,qn=He?ca(u,Vt,l,bn,B):Ya(u,Vt,l,bn,$t.lineClipsArray.length,B,[dn,Nn]);if(Xe){const Ln=$t.gradients[l.id];let Jn=Ln.texture;if(l.gradientVersion!==Ln.version){let jn=256;if(l.stepInterpolant){const Qn=t.getSource().maxzoom,Pi=dt.canonical.z===Qn?Math.ceil(1<<u.transform.maxZoom-dt.canonical.z):1;jn=o.clamp(o.nextPowerOfTwo($t.maxLineLength/o.EXTENT*1024*Pi),256,tt.maxTextureSize)}Ln.gradient=o.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:jn,image:Ln.gradient||void 0,clips:$t.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new o.Texture(tt,Ln.gradient,fe.RGBA),Ln.version=l.gradientVersion,Jn=Ln.texture}tt.activeTexture.set(fe.TEXTURE1),Jn.bind(l.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE)}K&&(tt.activeTexture.set(fe.TEXTURE0),Vt.lineAtlasTexture.bind(fe.LINEAR,fe.REPEAT),Ht.updatePaintBuffers()),He&&(tt.activeTexture.set(fe.TEXTURE0),Vt.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Ht.updatePaintBuffers()),u.prepareDrawProgram(tt,tn,dt.toUnwrapped());const mn=Ln=>{tn.draw(tt,fe.TRIANGLES,D,Ln,A,o.CullFaceMode.disabled,qn,l.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,l.paint,u.transform.zoom,Ht,[$t.layoutVertexBuffer2])};if(ut){const Ln=u.stencilModeForClipping(dt).ref;0===Ln&&u.terrain&&tt.clear({stencil:0});const Jn={func:fe.EQUAL,mask:255};qn.u_alpha_discard_threshold=.8,mn(new o.StencilMode(Jn,Ln,255,fe.KEEP,fe.KEEP,fe.INVERT)),qn.u_alpha_discard_threshold=0,mn(new o.StencilMode(Jn,Ln,255,fe.KEEP,fe.KEEP,fe.KEEP))}else mn(u.stencilModeForClipping(dt))}ut&&(u.resetStencilClippingMasks(),u.terrain&&tt.clear({stencil:0}))},fill:function(u,t,l,h){const _=l.paint.get("fill-color"),b=l.paint.get("fill-opacity");if(0===b.constantOr(1))return;const D=u.colorModeForRenderPass(),A=l.paint.get("fill-pattern"),B=u.opaquePassEnabledForLayer()&&!A.constantOr(1)&&1===_.constantOr(o.Color.transparent).a&&1===b.constantOr(0)?"opaque":"translucent";if(u.renderPass===B){const J=u.depthModeForSublayer(1,"opaque"===u.renderPass?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Oa(u,t,l,h,J,D,!1)}if("translucent"===u.renderPass&&l.paint.get("fill-antialias")){const J=u.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Oa(u,t,l,h,J,D,!0)}},"fill-extrusion":function(u,t,l,h){const _=l.paint.get("fill-extrusion-opacity");if(0!==_&&"translucent"===u.renderPass){const b=new o.DepthMode(u.context.gl.LEQUAL,o.DepthMode.ReadWrite,u.depthRangeFor3D);if(1!==_||l.paint.get("fill-extrusion-pattern").constantOr(1))Xs(u,t,l,h,b,o.StencilMode.disabled,o.ColorMode.disabled),Xs(u,t,l,h,b,u.stencilModeFor3D(),u.colorModeForRenderPass()),u.resetStencilClippingMasks();else{const D=u.colorModeForRenderPass();Xs(u,t,l,h,b,o.StencilMode.disabled,D)}}},hillshade:function(u,t,l,h){if("offscreen"!==u.renderPass&&"translucent"!==u.renderPass)return;const _=u.context,b=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),D=u.colorModeForRenderPass(),A=u.terrain&&u.terrain.renderingToTexture,[B,J]="translucent"!==u.renderPass||A?[{},h]:u.stencilConfigForOverlap(h);for(const K of J){const de=t.getTile(K);if(de.needsHillshadePrepare&&"offscreen"===u.renderPass)Nr(u,de,l,b,o.StencilMode.disabled,D);else if("translucent"===u.renderPass){const Ie=A&&u.terrain?u.terrain.stencilModeForRTTOverlap(K):B[K.overscaledZ];Da(u,K,de,l,b,Ie,D)}}_.viewport.set([0,0,u.width,u.height]),u.resetStencilClippingMasks()},raster:function(u,t,l,h,_,b){if("translucent"!==u.renderPass||0===l.paint.get("raster-opacity")||!h.length)return;const D=u.context,A=D.gl,B=t.getSource(),J=u.useProgram("raster"),K=u.colorModeForRenderPass(),de=u.terrain&&u.terrain.renderingToTexture,[Ie,He]=B instanceof Hn||de?[{},h]:u.stencilConfigForOverlap(h),Xe=He[He.length-1].overscaledZ,qe=!u.options.moving;for(const tt of He){const fe=de?o.DepthMode.disabled:u.depthModeForSublayer(tt.overscaledZ-Xe,1===l.paint.get("raster-opacity")?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,A.LESS),Ze=tt.toUnwrapped(),ut=t.getTile(tt);if(de&&(!ut||!ut.hasData()))continue;const dt=de?tt.projMatrix:u.transform.calculateProjMatrix(Ze,qe),Vt=u.terrain&&de?u.terrain.stencilModeForRTTOverlap(tt):Ie[tt.overscaledZ],$t=b?0:l.paint.get("raster-fade-duration");ut.registerFadeDuration($t);const Ht=t.findLoadedParent(tt,0),tn=Do(ut,Ht,t,u.transform,$t);let Xt,hn;u.terrain&&u.terrain.prepareDrawTile();const Xn="nearest"===l.paint.get("raster-resampling")?A.NEAREST:A.LINEAR;D.activeTexture.set(A.TEXTURE0),ut.texture.bind(Xn,A.CLAMP_TO_EDGE),D.activeTexture.set(A.TEXTURE1),Ht?(Ht.texture.bind(Xn,A.CLAMP_TO_EDGE),Xt=Math.pow(2,Ht.tileID.overscaledZ-ut.tileID.overscaledZ),hn=[ut.tileID.canonical.x*Xt%1,ut.tileID.canonical.y*Xt%1]):ut.texture.bind(Xn,A.CLAMP_TO_EDGE),ut.texture.useMipmap&&D.extTextureFilterAnisotropic&&u.transform.pitch>20&&A.texParameterf(A.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);const dn=qa(dt,hn||[0,0],Xt||1,tn,l,B instanceof Hn?B.perspectiveTransform:[0,0]);if(u.prepareDrawProgram(D,J,Ze),B instanceof Hn)B.boundsBuffer&&B.boundsSegments&&J.draw(D,A.TRIANGLES,fe,o.StencilMode.disabled,K,o.CullFaceMode.disabled,dn,l.id,B.boundsBuffer,u.quadTriangleIndexBuffer,B.boundsSegments);else{const{tileBoundsBuffer:Nn,tileBoundsIndexBuffer:bn,tileBoundsSegments:qn}=u.getTileBoundsBuffers(ut);J.draw(D,A.TRIANGLES,fe,Vt,K,o.CullFaceMode.disabled,dn,l.id,Nn,bn,qn)}}u.resetStencilClippingMasks()},background:function(u,t,l,h){const _=l.paint.get("background-color"),b=l.paint.get("background-opacity");if(0===b)return;const D=u.context,A=D.gl,B=u.transform,J=B.tileSize,K=l.paint.get("background-pattern");if(u.isPatternMissing(K))return;const de=!K&&1===_.a&&1===b&&u.opaquePassEnabledForLayer()?"opaque":"translucent";if(u.renderPass!==de)return;const Ie=o.StencilMode.disabled,He=u.depthModeForSublayer(0,"opaque"===de?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),Xe=u.colorModeForRenderPass(),qe=u.useProgram(K?"backgroundPattern":"background");let tt,fe=h;fe||(tt=u.getBackgroundTiles(),fe=Object.values(tt).map(Ze=>Ze.tileID)),K&&(D.activeTexture.set(A.TEXTURE0),u.imageManager.bind(u.context));for(const Ze of fe){const ut=Ze.toUnwrapped(),dt=h?Ze.projMatrix:u.transform.calculateProjMatrix(ut);u.prepareDrawTile();const Vt=t?t.getTile(Ze):tt?tt[Ze.key]:new o.Tile(Ze,J,B.zoom,u),$t=K?Ks(dt,b,u,K,{tileID:Ze,tileSize:J}):is(dt,b,_);u.prepareDrawProgram(D,qe,ut);const{tileBoundsBuffer:Ht,tileBoundsIndexBuffer:tn,tileBoundsSegments:Xt}=u.getTileBoundsBuffers(Vt);qe.draw(D,A.TRIANGLES,He,Ie,Xe,o.CullFaceMode.disabled,$t,l.id,Ht,tn,Xt)}},sky:function(u,t,l){const h=u.transform,_="mercator"===h.projection.name||"globe"===h.projection.name?1:o.smoothstep(7,8,h.zoom),b=l.paint.get("sky-opacity")*_;if(0===b)return;const D=u.context,A=l.paint.get("sky-type"),B=new o.DepthMode(D.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),J=u.frameCounter/1e3%1;"atmosphere"===A?"offscreen"===u.renderPass?l.needsSkyboxCapture(u)&&(function(K,de,Ie,He){const Xe=K.context,qe=Xe.gl;let tt=de.skyboxFbo;if(!tt){tt=de.skyboxFbo=Xe.createFramebuffer(32,32,!1),de.skyboxGeometry=new Ja(Xe),de.skyboxTexture=Xe.gl.createTexture(),qe.bindTexture(qe.TEXTURE_CUBE_MAP,de.skyboxTexture),qe.texParameteri(qe.TEXTURE_CUBE_MAP,qe.TEXTURE_WRAP_S,qe.CLAMP_TO_EDGE),qe.texParameteri(qe.TEXTURE_CUBE_MAP,qe.TEXTURE_WRAP_T,qe.CLAMP_TO_EDGE),qe.texParameteri(qe.TEXTURE_CUBE_MAP,qe.TEXTURE_MIN_FILTER,qe.LINEAR),qe.texParameteri(qe.TEXTURE_CUBE_MAP,qe.TEXTURE_MAG_FILTER,qe.LINEAR);for(let dt=0;dt<6;++dt)qe.texImage2D(qe.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,qe.RGBA,32,32,0,qe.RGBA,qe.UNSIGNED_BYTE,null)}Xe.bindFramebuffer.set(tt.framebuffer),Xe.viewport.set([0,0,32,32]);const fe=de.getCenter(K,!0),Ze=K.useProgram("skyboxCapture"),ut=new Float64Array(16);o.identity(ut),o.rotateY(ut,ut,.5*-Math.PI),Ss(Xe,de,Ze,ut,fe,0),o.identity(ut),o.rotateY(ut,ut,.5*Math.PI),Ss(Xe,de,Ze,ut,fe,1),o.identity(ut),o.rotateX(ut,ut,.5*-Math.PI),Ss(Xe,de,Ze,ut,fe,2),o.identity(ut),o.rotateX(ut,ut,.5*Math.PI),Ss(Xe,de,Ze,ut,fe,3),o.identity(ut),Ss(Xe,de,Ze,ut,fe,4),o.identity(ut),o.rotateY(ut,ut,Math.PI),Ss(Xe,de,Ze,ut,fe,5),Xe.viewport.set([0,0,K.width,K.height])}(u,l),l.markSkyboxValid(u)):"sky"===u.renderPass&&function(K,de,Ie,He,Xe){const qe=K.context,tt=qe.gl,fe=K.transform,Ze=K.useProgram("skybox");qe.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_CUBE_MAP,de.skyboxTexture);const ut={u_matrix:fe.skyboxMatrix,u_sun_direction:de.getCenter(K,!1),u_cubemap:0,u_opacity:He,u_temporal_offset:Xe};K.prepareDrawProgram(qe,Ze),Ze.draw(qe,tt.TRIANGLES,Ie,o.StencilMode.disabled,K.colorModeForRenderPass(),o.CullFaceMode.backCW,ut,"skybox",de.skyboxGeometry.vertexBuffer,de.skyboxGeometry.indexBuffer,de.skyboxGeometry.segment)}(u,l,B,b,J):"gradient"===A&&"sky"===u.renderPass&&function(K,de,Ie,He,Xe){const qe=K.context,tt=qe.gl,fe=K.transform,Ze=K.useProgram("skyboxGradient");de.skyboxGeometry||(de.skyboxGeometry=new Ja(qe)),qe.activeTexture.set(tt.TEXTURE0);let ut=de.colorRampTexture;ut||(ut=de.colorRampTexture=new o.Texture(qe,de.colorRamp,tt.RGBA)),ut.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);const dt=(Vt=fe.skyboxMatrix,$t=de.getCenter(K,!1),Ht=de.paint.get("sky-gradient-radius"),tn=He,Xt=Xe,{u_matrix:Vt,u_color_ramp:0,u_center_direction:$t,u_radius:o.degToRad(Ht),u_opacity:tn,u_temporal_offset:Xt});var Vt,$t,Ht,tn,Xt;K.prepareDrawProgram(qe,Ze),Ze.draw(qe,tt.TRIANGLES,Ie,o.StencilMode.disabled,K.colorModeForRenderPass(),o.CullFaceMode.backCW,dt,"skyboxGradient",de.skyboxGeometry.vertexBuffer,de.skyboxGeometry.indexBuffer,de.skyboxGeometry.segment)}(u,l,B,b,J)},debug:function(u,t,l){for(let h=0;h<l.length;h++)pc(u,t,l[h])},custom:function(u,t,l,h){const _=u.context,b=l.implementation;if(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes("custom")||u.terrain&&(u.terrain.renderingToTexture||"offscreen"===u.renderPass)&&l.isLayerDraped()){if("offscreen"===u.renderPass){const D=b.prerender;if(D){if(u.setCustomLayerDefaults(),_.setColorMode(u.colorModeForRenderPass()),"globe"===u.transform.projection.name){const A=u.transform.pointMerc;D.call(b,_.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(u.transform.zoom),[A.x,A.y],u.transform.pixelsPerMeterRatio)}else D.call(b,_.gl,u.transform.customLayerMatrix());_.setDirty(),u.setBaseState()}}else if("translucent"===u.renderPass){if(u.terrain&&u.terrain.renderingToTexture){const A=b.renderToTile;if(A){const B=h[0].canonical,J=new o.MercatorCoordinate(B.x+h[0].wrap*(1<<B.z),B.y,B.z);_.setDepthMode(o.DepthMode.disabled),_.setStencilMode(o.StencilMode.disabled),_.setColorMode(u.colorModeForRenderPass()),u.setCustomLayerDefaults(),A.call(b,_.gl,J),_.setDirty(),u.setBaseState()}return}u.setCustomLayerDefaults(),_.setColorMode(u.colorModeForRenderPass()),_.setStencilMode(o.StencilMode.disabled);const D="3d"===b.renderingMode?new o.DepthMode(u.context.gl.LEQUAL,o.DepthMode.ReadWrite,u.depthRangeFor3D):u.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(_.setDepthMode(D),"globe"===u.transform.projection.name){const A=u.transform.pointMerc;b.render(_.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(u.transform.zoom),[A.x,A.y],u.transform.pixelsPerMeterRatio)}else b.render(_.gl,u.transform.customLayerMatrix());_.setDirty(),u.setBaseState(),_.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class zs{constructor(t,l,h=!1){this.context=new nt(t,h),this.transform=l,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,l){const h=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(h||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Fo(this,t));const _=this._terrain;this.transform.elevation=h?_:null,_.update(t,this.transform,l)}_updateFog(t){const l=t.fog;if(!l||"globe"===this.transform.projection.name||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[h,_]=l.getFovAdjustedRange(this.transform._fov);if(h>_)return void(this.transform.fogCullDistSq=null);const b=h+.78*(_-h);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,l){if(this.width=t*o.exported.devicePixelRatio,this.height=l*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style.order)this.style._layers[h].resize()}setup(){const t=this.context,l=new o.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(o.EXTENT,0),l.emplaceBack(0,o.EXTENT),l.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(l,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const h=new o.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(o.EXTENT,0),h.emplaceBack(0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=t.createVertexBuffer(h,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const _=new o.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(_,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const b=new o.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(o.EXTENT,0,o.EXTENT,0),b.emplaceBack(0,o.EXTENT,0,o.EXTENT),b.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(b,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const D=new o.StructArrayLayout3ui6;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(D);const A=new o.StructArrayLayout1ui2;for(const J of[0,1,3,2,0])A.emplaceBack(J);this.debugIndexBuffer=t.createIndexBuffer(A),this.emptyTexture=new o.Texture(t,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=o.create();const B=this.context.gl;this.stencilClearMode=new o.StencilMode({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Na(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,l=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,l.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,vs(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,l,h){if(!l||this.currentStencilSource===l.id||!t.isTileClipped()||!h||0===h.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const B of h)if(void 0===this._tileClippingMaskIDs[B.key]){A=!0;break}if(!A)return}this.currentStencilSource=l.id;const _=this.context,b=_.gl;this.nextStencilID+h.length>256&&this.clearStencil(),_.setColorMode(o.ColorMode.disabled),_.setDepthMode(o.DepthMode.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of h){const B=l.getTile(A),J=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:K,tileBoundsIndexBuffer:de,tileBoundsSegments:Ie}=this.getTileBoundsBuffers(B);D.draw(_,b.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:b.ALWAYS,mask:0},J,255,b.KEEP,b.KEEP,b.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,vs(A.projMatrix),"$clipping",K,de,Ie)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,l=this.context.gl;return new o.StencilMode({func:l.NOTEQUAL,mask:255},t,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const l=this.context.gl;return new o.StencilMode({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(t){const l=this.context.gl,h=t.sort((D,A)=>A.overscaledZ-D.overscaledZ),_=h[h.length-1].overscaledZ,b=h[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const D={};for(let A=0;A<b;A++)D[A+_]=new o.StencilMode({func:l.GEQUAL,mask:255},A+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=b,[D,h]}return[{[_]:o.StencilMode.disabled},h]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([t.CONSTANT_COLOR,t.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(t,l,h){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new o.DepthMode(h||this.context.gl.LEQUAL,l,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,l){this.style=t,this.options=l,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const h=this.style.order,_=this.style._sourceCaches;for(const J in _){const K=_[J];K.used&&K.prepare(this.context)}const b={},D={},A={};for(const J in _){const K=_[J];b[J]=K.getVisibleCoordinates(),D[J]=b[J].slice().reverse(),A[J]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<h.length;J++)if(this.style._layers[h[J]].is3D()){this.opaquePassCutoff=J;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const J of h){const K=this.style._layers[J],de=t._getLayerSourceCache(K);if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const Ie=de?D[de.id]:void 0;("custom"===K.type||K.isSky()||Ie&&Ie.length)&&this.renderLayer(this,de,K,Ie)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const B=this.terrain;if(B&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&B.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:l.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[h[this.currentLayer]],K=t._getLayerSourceCache(J);if(J.isSky())continue;const de=K?D[K.id]:void 0;this._renderTileClippingMasks(J,K,de),this.renderLayer(this,K,J,de)}if(this.style.fog&&this.transform.projection.supportsFog&&function(J,K){const de=J.context,Ie=de.gl,He=J.transform,Xe=new o.DepthMode(Ie.LEQUAL,o.DepthMode.ReadOnly,[0,1]),qe=J.useProgram("globeAtmosphere",null,"globe"===He.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),tt=o.globeToMercatorTransition(He.zoom),fe=K.properties.get("color").toArray01(),Ze=K.properties.get("high-color").toArray01(),ut=K.properties.get("space-color").toArray01PremultipliedAlpha(),dt=o.identity$1([]);o.rotateY$1(dt,dt,-o.degToRad(He._center.lng)),o.rotateX$1(dt,dt,o.degToRad(He._center.lat)),o.rotateZ$1(dt,dt,He.angle),o.rotateX$1(dt,dt,-He._pitch);const Vt=o.fromQuat(new Float32Array(16),dt),$t=o.mapValue(K.properties.get("star-intensity"),0,1,0,.25),tn=o.mapValue(K.properties.get("horizon-blend"),0,1,5e-4,.25),Xt=o.globeUseCustomAntiAliasing(J,de,He)&&5e-4===tn?He.worldSize/(2*Math.PI*1.025)-1:He.globeRadius,hn=J.frameCounter/1e3%1,Xn=o.length(He.globeCenterInViewSpace),dn=Math.sqrt(Math.pow(Xn,2)-Math.pow(Xt,2)),Nn=Math.acos(dn/Xn),bn={u_frustum_tl:He.frustumCorners.TL,u_frustum_tr:He.frustumCorners.TR,u_frustum_br:He.frustumCorners.BR,u_frustum_bl:He.frustumCorners.BL,u_horizon:He.frustumCorners.horizon,u_transition:tt,u_fadeout_range:tn,u_color:fe,u_high_color:Ze,u_space_color:ut,u_star_intensity:$t,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:hn,u_horizon_angle:Nn,u_rotation_matrix:Vt};J.prepareDrawProgram(de,qe);const qn=J.atmosphereBuffer;qn&&qe.draw(de,Ie.TRIANGLES,Xe,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,bn,"skybox",qn.vertexBuffer,qn.indexBuffer,qn.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const J=this.style._layers[h[this.currentLayer]],K=t._getLayerSourceCache(J);J.isSky()&&this.renderLayer(this,K,J,K?D[K.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;){const J=this.style._layers[h[this.currentLayer]],K=t._getLayerSourceCache(J);if(J.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(J)){if(J.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const de=K?("symbol"===J.type?A:D)[K.id]:void 0;this._renderTileClippingMasks(J,K,K?b[K.id]:void 0),this.renderLayer(this,K,J,de),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let J=null;o.values(this.style._layers).forEach(K=>{const de=t._getLayerSourceCache(K);de&&!K.isHidden(this.transform.zoom)&&(!J||J.getSource().maxzoom<de.getSource().maxzoom)&&(J=de)}),J&&this.options.showTileBoundaries&&Js.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const K=J.transform.padding;Wo(J,J.transform.height-(K.top||0),3,Ns),Wo(J,K.bottom||0,3,hl),rs(J,K.left||0,3,Xa),rs(J,J.transform.width-(K.right||0),3,Il);const de=J.transform.centerPoint;var Ie,He,Xe,qe;Pr(Ie=J,(He=de.x)-1,(Xe=J.transform.height-de.y)-10,2,20,qe=Kl),Pr(Ie,He-10,Xe-1,20,2,qe)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,l,h,_){h.isHidden(this.transform.zoom)||("background"===h.type||"sky"===h.type||"custom"===h.type||_&&_.length)&&(this.id=h.id,this.gpuTimingStart(h),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(h.type)||t.terrain&&"custom"===h.type)&&Js[h.type](t,l,h,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let h=this.gpuTimers[t.id];h||(h=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),h.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,h.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,l=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(l),t.beginQueryEXT(t.TIME_ELAPSED_EXT,l)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const l={};for(const h in t){const _=t[h],b=this.context.extTimerQuery,D=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),l[h]=D}return l}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery;let h=0;for(const _ of t)h+=l.getQueryObjectEXT(_,l.QUERY_RESULT_EXT)/1e6,l.deleteQueryEXT(_);return h}translatePosMatrix(t,l,h,_,b){if(!h[0]&&!h[1])return t;const D=b?"map"===_?this.transform.angle:0:"viewport"===_?-this.transform.angle:0;if(D){const J=Math.sin(D),K=Math.cos(D);h=[h[0]*K-h[1]*J,h[0]*J+h[1]*K]}const A=[b?h[0]:vi(l,h[0],this.transform.zoom),b?h[1]:vi(l,h[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,t,A),B}saveTileTexture(t){const l=this._tileTextures[t.size[0]];l?l.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const l=this._tileTextures[t];return l&&l.length>0?l.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,l=this.terrain&&0===this.terrain.exaggeration(),h=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),"globe"===this.transform.projection.name&&_.push("GLOBE"),l&&_.push("ZERO_EXAGGERATION"),h&&!t&&0!==h.getOpacity(this.transform.pitch)&&_.push("FOG"),t&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(t,l,h){this.cache=this.cache||{};const _=h||[],b=this.currentGlobalDefines().concat(_),D=Yi.cacheKey(Ea[t],t,b,l);return this.cache[D]||(this.cache[D]=new Yi(this.context,t,Ea[t],l,Ia[t],b)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,l,h){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const b=_.getOpacity(this.transform.pitch),D=((A,B,J,K,de,Ie,He,Xe,qe,tt,fe)=>{const Ze=A.transform,ut=B.properties.get("color").toArray01();ut[3]=K;const dt=A.frameCounter/1e3%1;return{u_fog_matrix:J?Ze.calculateFogTileMatrix(J):A.identityMat,u_fog_range:B.getFovAdjustedRange(Ze._fov),u_fog_color:ut,u_fog_horizon_blend:B.properties.get("horizon-blend"),u_fog_temporal_offset:dt,u_frustum_tl:de,u_frustum_tr:Ie,u_frustum_br:He,u_frustum_bl:Xe,u_globe_pos:qe,u_globe_radius:tt,u_viewport:fe,u_globe_transition:o.globeToMercatorTransition(Ze.zoom),u_is_globe:+("globe"===Ze.projection.name)}})(this,_,h,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);l.setFogUniformValues(t,D)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,l=t.createTexture();return t.bindTexture(t.TEXTURE_2D,l),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,l=this._backgroundTiles={},h=this.transform.coveringTiles({tileSize:512});for(const _ of h)l[_.key]=t[_.key]||new o.Tile(_,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}}class H{constructor(t=0,l=0,h=0,_=0){if(isNaN(t)||t<0||isNaN(l)||l<0||isNaN(h)||h<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=l,this.left=h,this.right=_}interpolate(t,l,h){return null!=l.top&&null!=t.top&&(this.top=o.number(t.top,l.top,h)),null!=l.bottom&&null!=t.bottom&&(this.bottom=o.number(t.bottom,l.bottom,h)),null!=l.left&&null!=t.left&&(this.left=o.number(t.left,l.left,h)),null!=l.right&&null!=t.right&&(this.right=o.number(t.right,l.right,h)),this}getCenter(t,l){const h=o.clamp((this.left+t-this.right)/2,0,t),_=o.clamp((this.top+l-this.bottom)/2,0,l);return new o.Point(h,_)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new H(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ge(u,t){const l=o.getColumn(u,3);o.fromQuat(u,t),o.setColumn(u,3,l)}function W(u,t){const l=o.identity$1([]);return o.rotateZ$1(l,l,-t),o.rotateX$1(l,l,-u),l}function Oe(u,t){const l=[u[0],u[1],0],h=[t[0],t[1],0];if(o.length(l)>=1e-15){const D=o.normalize([],l);o.scale$2(h,D,o.dot(h,D)),t[0]=h[0],t[1]=h[1]}const _=o.cross([],t,u);if(o.len(_)<1e-15)return null;const b=Math.atan2(-_[1],_[0]);return W(Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2]),b)}class V{constructor(t,l){this.position=t,this.orientation=l}get position(){return this._position}set position(t){if(t){const l=t instanceof o.MercatorCoordinate?t:new o.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(l.x=o.wrap(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(t,l){if(this.orientation=null,!this.position)return;const h=this.position,_=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(t)):0,b=o.MercatorCoordinate.fromLngLat(t,_),D=[b.x-h.x,b.y-h.y,b.z-h.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=Oe(D,l)}setPitchBearing(t,l){this.orientation=W(o.degToRad(t),o.degToRad(-l))}}class C{constructor(t,l){this._transform=o.identity([]),this.orientation=l,this.position=t}get mercatorPosition(){const t=this.position;return new o.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=o.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var l;t&&o.setColumn(this._transform,3,[(l=t)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||o.identity$1([]),t&&ge(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,l){this._orientation=W(t,l),ge(this._transform,this._orientation)}forward(){const t=o.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=o.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=o.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,l){const h=new Float64Array(16);return o.invert(h,this.getWorldToCamera(t,l)),h}getWorldToCameraPosition(t,l,h){const _=this.position;o.scale$2(_,_,-t);const b=new Float64Array(16);return o.fromScaling(b,[h,h,h]),o.translate(b,b,_),b[10]*=l,b}getWorldToCamera(t,l){const h=new Float64Array(16),_=new Float64Array(4),b=this.position;return o.conjugate(_,this._orientation),o.scale$2(b,b,-t),o.fromQuat(h,_),o.translate(h,h,b),h[1]*=-1,h[5]*=-1,h[9]*=-1,h[13]*=-1,h[8]*=l,h[9]*=l,h[10]*=l,h[11]*=l,h}getCameraToClipPerspective(t,l,h,_){const b=new Float64Array(16);return o.perspective(b,t,l,h,_),b}getDistanceToElevation(t,l=!1){const h=0===t?0:o.mercatorZfromAltitude(t,l?o.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(h-this.position[2])/_[2]}clone(){return new C([...this.position],[...this.orientation])}}function M(u,t){const l=be(u.projection,u.zoom,u.width,u.height),h=function(b,D,A,B,J){const K=new o.LngLat(A.lng-180*Ve,A.lat),de=new o.LngLat(A.lng+180*Ve,A.lat),Ie=b.project(K.lng,K.lat),He=b.project(de.lng,de.lat),Xe=-Math.atan2(He.y-Ie.y,He.x-Ie.x),qe=o.MercatorCoordinate.fromLngLat(A);qe.y=o.clamp(qe.y,-1+Ve,1-Ve);const tt=qe.toLngLat(),fe=b.project(tt.lng,tt.lat),Ze=o.MercatorCoordinate.fromLngLat(tt);Ze.x+=Ve;const ut=Ze.toLngLat(),dt=b.project(ut.lng,ut.lat),Vt=Tt(dt.x-fe.x,dt.y-fe.y,Xe),$t=o.MercatorCoordinate.fromLngLat(tt);$t.y+=Ve;const Ht=$t.toLngLat(),tn=b.project(Ht.lng,Ht.lat),Xt=Tt(tn.x-fe.x,tn.y-fe.y,Xe),hn=Math.abs(Vt.x)/Math.abs(Xt.y),Xn=o.identity([]);o.rotateZ(Xn,Xn,-Xe*(1-(J?0:B)));const dn=o.identity([]);return o.scale(dn,dn,[1,1-(1-hn)*B,1]),dn[4]=-Xt.x/Xt.y*B,o.rotateZ(dn,dn,Xe),o.multiply(dn,Xn,dn),dn}(u.projection,0,u.center,l,t),_=$(u);return o.scale(h,h,[_,_,1]),h}function $(u){const t=u.projection,l=be(u.projection,u.zoom,u.width,u.height),h=Mt(t,u.center),_=Mt(t,o.LngLat.convert(t.center));return Math.pow(2,h*l+(1-l)*_)}function be(u,t,l,h,_=1/0){const b=u.range;if(!b)return 0;const D=Math.min(_,Math.max(l,h)),A=Math.log(D/1024)/Math.LN2;return o.smoothstep(b[0]+A,b[1]+A,t)}const Ve=1/4e4;function Mt(u,t){const l=o.clamp(t.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),h=new o.LngLat(t.lng-180*Ve,l),_=new o.LngLat(t.lng+180*Ve,l),b=u.project(h.lng,l),D=u.project(_.lng,l),A=o.MercatorCoordinate.fromLngLat(h),B=o.MercatorCoordinate.fromLngLat(_),J=D.x-b.x,K=D.y-b.y,de=B.x-A.x,Ie=B.y-A.y,He=Math.sqrt((de*de+Ie*Ie)/(J*J+K*K));return Math.log(He)/Math.LN2}function Tt(u,t,l){const h=Math.cos(l),_=Math.sin(l);return{x:u*h-t*_,y:u*_+t*h}}class on{constructor(t,l,h,_,b,D,A){this.tileSize=512,this._renderWorldCopies=void 0===b||b,this._minZoom=t||0,this._maxZoom=l||22,this._minPitch=h??0,this._maxPitch=_??60,this.setProjection(D),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new H,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new C,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new on(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t,l=!1){const h=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||h)&&this._updateCameraOnTerrain(),(t||h)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(t){this.projectionOptions=t||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const h=!P(l,this.getProjection());return h&&this._calcMatrices(),this.mercatorFromTransition=!1,h}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const l=t!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const l=-t*Math.PI/180;var h,_,b,D,A,B,J,K,de,Ie;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(h=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h),_=this.rotationMatrix,D=this.angle,A=(b=this.rotationMatrix)[0],B=b[1],J=b[2],K=b[3],de=Math.sin(D),Ie=Math.cos(D),_[0]=A*Ie+J*de,_[1]=B*Ie+K*de,_[2]=A*-de+J*Ie,_[3]=B*-de+K*Ie)}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const l=o.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=o.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const l=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],h=this.horizonLineFromTop();let _=0,b=0;for(let D=0;D<l.length;D++){const A=new o.Point(l[D][0]*this.width,h+l[D][1]*(this.height-h)),B=t.pointCoordinate(A);if(!B)continue;const J=1/Math.hypot(B[0]-this._camera.position[0],B[1]-this._camera.position[1]);_+=B[3]*J,b+=J}return 0===b?NaN:_/b}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),h=this.pixelsPerMeter/this.worldSize*l,_=this._mercatorZfromZoom(t),b=this._mercatorZfromZoom(this._maxZoom),D=Math.max(_-h,b);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(t){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let h;h=t.z<this._camera.position[2]?[l.x,l.y,l.z]:[t.x,t.y,t.z];const _=o.length(o.sub([],this._camera.position,h));return o.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height||!t.position&&!t.orientation)return;this._updateCameraState();let l=!1;if(t.orientation&&!o.exactEquals(t.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(t.orientation)),t.position){const h=[t.position.x,t.position.y,t.position.z];o.exactEquals$1(h,this._camera.position)||(this._setCameraPosition(h),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,l=new V;return l.position=new o.MercatorCoordinate(t[0],t[1],t[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(t){if(!o.length$1(t))return!1;o.normalize$1(t,t);const l=o.transformQuat([],[0,0,-1],t),h=o.transformQuat([],[0,-1,0],t);if(h[2]<0)return!1;const _=Oe(l,h);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(t){const l=this.zoomScale(this.minZoom)*this.tileSize,h=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;t[2]=o.clamp(t[2],_/h,_/l),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,l,h){this._unmodified=!1,this._edgeInsets.interpolate(t,l,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const l=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(t){const l=[new o.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const h=this.pointCoordinate(new o.Point(0,0)),_=this.pointCoordinate(new o.Point(this.width,0)),b=this.pointCoordinate(new o.Point(this.width,this.height)),D=this.pointCoordinate(new o.Point(0,this.height)),A=Math.floor(Math.min(h.x,_.x,b.x,D.x)),B=Math.floor(Math.max(h.x,_.x,b.x,D.x)),J=1;for(let K=A-J;K<=B+J;K++)0!==K&&l.push(new o.UnwrappedTileID(K,t))}return l}coveringTiles(t){let l=this.coveringZoomLevel(t);const h=l,_=this.elevation&&!t.isTerrainDEM,b="mercator"===this.projection.name;if(void 0!==t.minzoom&&l<t.minzoom)return[];void 0!==t.maxzoom&&l>t.maxzoom&&(l=t.maxzoom);const D=this.locationCoordinate(this.center),A=this.center.lat,B=1<<l,J=[B*D.x,B*D.y,0],K="globe"===this.projection.name,de=!K,Ie=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,de),He=K?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Xe=B*o.mercatorZfromAltitude(1,this.center.lat),qe=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),tt=[B*He.x,B*He.y,qe*(de?1:Xe)],fe=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),Ze=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?l:0,ut=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,dt=t.isTerrainDEM?-ut:this._elevation?this._elevation.getMinElevationBelowMSL():0,Vt=this.projection.isReprojectedInTileSpace?$(this):1,$t=mn=>{const Jn=new o.MercatorCoordinate(mn.x+25e-6,mn.y,mn.z),jn=new o.MercatorCoordinate(mn.x,mn.y+25e-6,mn.z),Qn=mn.toLngLat(),Pi=Jn.toLngLat(),qi=jn.toLngLat(),Ci=this.locationCoordinate(Qn),Li=this.locationCoordinate(Pi),hr=this.locationCoordinate(qi),lr=Math.hypot(Li.x-Ci.x,Li.y-Ci.y),Si=Math.hypot(hr.x-Ci.x,hr.y-Ci.y);return Math.sqrt(lr*Si)*Vt/25e-6},Ht=mn=>{const Ln=ut,Jn=dt;return{aabb:o.tileAABB(this,B,0,0,0,mn,Jn,Ln,this.projection),zoom:0,x:0,y:0,minZ:Jn,maxZ:Ln,wrap:mn,fullyVisible:!1}},tn=[];let Xt=[];const hn=l,Xn=t.reparseOverscaled?h:l,dn=mn=>mn*mn,Nn=dn((qe-this._centerAltitude)*Xe),bn=mn=>{if(!this._elevation||!mn.tileID||!b)return;const Ln=this._elevation.getMinMaxForTile(mn.tileID),Jn=mn.aabb;Ln?(Jn.min[2]=Ln.min,Jn.max[2]=Ln.max,Jn.center[2]=(Jn.min[2]+Jn.max[2])/2):(mn.shouldSplit=qn(mn),mn.shouldSplit||(Jn.min[2]=Jn.max[2]=Jn.center[2]=this._centerAltitude))},qn=mn=>{if(mn.zoom<Ze)return!0;if(mn.zoom===hn)return!1;if(null!=mn.shouldSplit)return mn.shouldSplit;const Ln=mn.aabb.distanceX(tt),Jn=mn.aabb.distanceY(tt);let jn=Nn,Qn=1;if(K){jn=dn(mn.aabb.distanceZ(tt));const Ci=Math.pow(2,mn.zoom),Li=o.latFromMercatorY((mn.y+1)/Ci),hr=o.latFromMercatorY(mn.y/Ci),lr=Math.min(Math.max(A,Li),hr),Si=o.circumferenceAtLatitude(lr)/o.circumferenceAtLatitude(A);if(Qn=lr===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Si/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&mn.zoom===hn-1&&Si>=.9)return!0}else if(_&&(jn=dn(mn.aabb.distanceZ(tt)*Xe)),this.projection.isReprojectedInTileSpace&&h<=5){const Ci=Math.pow(2,mn.zoom),Li=$t(new o.MercatorCoordinate((mn.x+.5)/Ci,(mn.y+.5)/Ci));Qn=Li>.85?1:Li}const Pi=Ln*Ln+Jn*Jn+jn;return Pi<dn((1<<hn-mn.zoom)*fe*Qn*((Ci,Li)=>{if(Li*dn(.707)<Ci)return 1;const hr=Math.sqrt(Li/Ci);return hr/(1.4144271570014144+(Math.pow(1.1,hr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(jn,Nn),Pi))};if(this.renderWorldCopies)for(let mn=1;mn<=3;mn++)tn.push(Ht(-mn)),tn.push(Ht(mn));for(tn.push(Ht(0));tn.length>0;){const mn=tn.pop(),Ln=mn.x,Jn=mn.y;let jn=mn.fullyVisible;if(!jn){const Qn=mn.aabb.intersects(Ie);if(0===Qn)continue;jn=2===Qn}if(mn.zoom!==hn&&qn(mn))for(let Qn=0;Qn<4;Qn++){const Pi=(Ln<<1)+Qn%2,qi=(Jn<<1)+(Qn>>1),Ci={aabb:b?mn.aabb.quadrant(Qn):o.tileAABB(this,B,mn.zoom+1,Pi,qi,mn.wrap,mn.minZ,mn.maxZ,this.projection),zoom:mn.zoom+1,x:Pi,y:qi,wrap:mn.wrap,fullyVisible:jn,tileID:void 0,shouldSplit:void 0,minZ:mn.minZ,maxZ:mn.maxZ};_&&!K&&(Ci.tileID=new o.OverscaledTileID(mn.zoom+1===hn?Xn:mn.zoom+1,mn.wrap,mn.zoom+1,Pi,qi),bn(Ci)),tn.push(Ci)}else{const Qn=mn.zoom===hn?Xn:mn.zoom;if(t.minzoom&&t.minzoom>Qn)continue;const Pi=J[0]-(.5+Ln+(mn.wrap<<mn.zoom))*(1<<l-mn.zoom),qi=J[1]-.5-Jn,Ci=mn.tileID?mn.tileID:new o.OverscaledTileID(Qn,mn.wrap,mn.zoom,Ln,Jn);Xt.push({tileID:Ci,distanceSq:Pi*Pi+qi*qi})}}if(this.fogCullDistSq){const mn=this.fogCullDistSq,Ln=this.horizonLineFromTop();Xt=Xt.filter(Jn=>{const jn=[0,0,0,1],Qn=[o.EXTENT,o.EXTENT,0,1],Pi=this.calculateFogTileMatrix(Jn.tileID.toUnwrapped());o.transformMat4$1(jn,jn,Pi),o.transformMat4$1(Qn,Qn,Pi);const qi=o.getAABBPointSquareDist(jn,Qn);if(0===qi)return!0;let Ci=!1;const Li=this._elevation;if(Li&&qi>mn&&0!==Ln){const hr=this.calculateProjMatrix(Jn.tileID.toUnwrapped());let lr;t.isTerrainDEM||(lr=Li.getMinMaxForTile(Jn.tileID)),lr||(lr={min:dt,max:ut});const Si=o.furthestTileCorner(this.rotation),kr=[Si[0]*o.EXTENT,Si[1]*o.EXTENT,lr.max];o.transformMat4(kr,kr,hr),Ci=(1-kr[1])*this.height*.5<Ln}return qi<mn||Ci})}return Xt.sort((mn,Ln)=>mn.distanceSq-Ln.distanceSq).map(mn=>mn.tileID)}resize(t,l){this.width=t,this.height=l,this.pixelsToGLUnits=[2/t,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const l=o.clamp(t.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),h=this.projection.project(t.lng,l);return new o.Point(h.x*this.worldSize,h.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,l){let h,_;const b=this.centerPoint;if("globe"===this.projection.name){const A=this.worldSize;h=(l.x-b.x)/A,_=(l.y-b.y)/A}else{const A=this.pointCoordinate(l),B=this.pointCoordinate(b);h=A.x-B.x,_=A.y-B.y}const D=this.locationCoordinate(t);this.setLocation(new o.MercatorCoordinate(D.x-h,D.y-_))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(t,l){const h=l?o.mercatorZfromAltitude(l,t.lat):void 0,_=this.projection.project(t.lng,t.lat);return new o.MercatorCoordinate(_.x,_.y,h)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(t,l){const h=l??this._centerAltitude,_=[t.x,t.y,0,1],b=[t.x,t.y,1,1];o.transformMat4$1(_,_,this.pixelMatrixInverse),o.transformMat4$1(b,b,this.pixelMatrixInverse);const D=b[3];o.scale$1(_,_,1/_[3]),o.scale$1(b,b,1/D);const A=_[2],B=b[2];return{p0:_,p1:b,t:A===B?0:(h-A)/(B-A)}}screenPointToMercatorRay(t){const l=[t.x,t.y,0,1],h=[t.x,t.y,1,1];return o.transformMat4$1(l,l,this.pixelMatrixInverse),o.transformMat4$1(h,h,this.pixelMatrixInverse),o.scale$1(l,l,1/l[3]),o.scale$1(h,h,1/h[3]),l[2]=o.mercatorZfromAltitude(l[2],this._center.lat)*this.worldSize,h[2]=o.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,o.scale$1(l,l,1/this.worldSize),o.scale$1(h,h,1/this.worldSize),new o.Ray([l[0],l[1],l[2]],o.normalize([],o.sub([],h,l)))}rayIntersectionCoordinate(t){const{p0:l,p1:h,t:_}=t,b=o.mercatorZfromAltitude(l[2],this._center.lat),D=o.mercatorZfromAltitude(h[2],this._center.lat);return new o.MercatorCoordinate(o.number(l[0],h[0],_)/this.worldSize,o.number(l[1],h[1],_)/this.worldSize,o.number(b,D,_))}pointCoordinate(t,l=this._centerAltitude){return this.projection.pointCoordinate(this,t.x,t.y,l)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let l=this.projection.pointCoordinate3D(this,t.x,t.y);if(l)return new o.MercatorCoordinate(l[0],l[1],l[2]);let h=0,_=this.horizonLineFromTop();if(t.y>_)return this.pointCoordinate(t);const b=.02*_,D=t.clone();for(let A=0;A<10&&_-h>b;A++){D.y=o.number(h,_,.66);const B=this.projection.pointCoordinate3D(this,D.x,D.y);B?(_=D.y,l=B):h=D.y}return l?new o.MercatorCoordinate(l[0],l[1],l[2]):this.pointCoordinate(t)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const l=this.pointCoordinate(t);return l.y>=0&&l.y<=1}_coordinatePoint(t,l){const h=l&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,_=[t.x*this.worldSize,t.y*this.worldSize,h+t.toAltitude(),1];return o.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new o.Point(_[0]/_[3],_[1]/_[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:l}=this._edgeInsets,h=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,b=this.pointLocation3D(new o.Point(l,t)),D=this.pointLocation3D(new o.Point(_,t)),A=this.pointLocation3D(new o.Point(_,h)),B=this.pointLocation3D(new o.Point(l,h));let J=Math.min(b.lng,D.lng,A.lng,B.lng),K=Math.max(b.lng,D.lng,A.lng,B.lng),de=Math.min(b.lat,D.lat,A.lat,B.lat),Ie=Math.max(b.lat,D.lat,A.lat,B.lat);const He=Math.pow(2,-this.zoom)/16*270,Xe="globe"===this.projection.name?1:4,qe=(tt,fe,Ze,ut,dt)=>{const Vt=(tt+Ze)/2,$t=(fe+ut)/2,Ht=new o.Point(Vt,$t),{lng:tn,lat:Xt}=this.pointLocation3D(Ht),hn=Math.max(0,J-tn,de-Xt,tn-K,Xt-Ie);J=Math.min(J,tn),K=Math.max(K,tn),de=Math.min(de,Xt),Ie=Math.max(Ie,Xt),(dt<Xe||hn>He)&&(qe(tt,fe,Vt,$t,dt+1),qe(Vt,$t,Ze,ut,dt+1))};if(qe(l,t,_,t,1),qe(_,t,_,h,1),qe(_,h,l,h,1),qe(l,h,l,t,1),"globe"===this.projection.name){const[tt,fe]=o.polesInViewport(this);tt?(Ie=90,K=180,J=-180):fe&&(de=-90,K=180,J=-180)}return new o.LngLatBounds(new o.LngLat(J,de),new o.LngLat(K,Ie))}_getBoundsRectangular(t,l){const{top:h,left:_}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,A=new o.Point(_,h),B=new o.Point(D,h),J=new o.Point(D,b),K=new o.Point(_,b);let de=this.pointCoordinate(A,t),Ie=this.pointCoordinate(B,t);const He=this.pointCoordinate(J,l),Xe=this.pointCoordinate(K,l),qe=(tt,fe)=>(fe.y-tt.y)/(fe.x-tt.x);return de.y>1&&Ie.y>=0?de=new o.MercatorCoordinate((1-Xe.y)/qe(Xe,de)+Xe.x,1):de.y<0&&Ie.y<=1&&(de=new o.MercatorCoordinate(-Xe.y/qe(Xe,de)+Xe.x,0)),Ie.y>1&&de.y>=0?Ie=new o.MercatorCoordinate((1-He.y)/qe(He,Ie)+He.x,1):Ie.y<0&&de.y<=1&&(Ie=new o.MercatorCoordinate(-He.y/qe(He,Ie)+He.x,0)),(new o.LngLatBounds).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(Ie)).extend(this.coordinateLocation(Xe)).extend(this.coordinateLocation(He))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=t.visibleDemTiles.reduce((h,_)=>{if(_.dem){const b=_.dem.tree;h.min=Math.min(h.min,b.minimums[0]),h.max=Math.max(h.max,b.maximums[0])}return h},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*t.exaggeration(),l.max*t.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(t=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,h=this.height/2-l*(1-this._horizonShift);return t?Math.max(0,h):h}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,l){return this.projection.createTileMatrix(this,l,t)}calculateDistanceTileData(t){const l=t.key,h=this._distanceTileDataCache;if(h[l])return h[l];const _=t.canonical,b=1/this.height,D=this.cameraWorldSize,A=D/this.zoomScale(_.z),B=(_.x+Math.pow(2,_.z)*t.wrap)*A,J=_.y*A,K=this.point;K.x*=D/this.worldSize,K.y*=D/this.worldSize;const de=this.angle,Ie=Math.sin(-de),He=-Math.cos(-de);return h[l]={bearing:[Ie,He],center:[(K.x-B)*b,(K.y-J)*b],scale:A/o.EXTENT*b},h[l]}calculateFogTileMatrix(t){const l=t.key,h=this._fogTileMatrixCache;if(h[l])return h[l];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return o.multiply(_,this.worldToFogMatrix,_),h[l]=new Float32Array(_),h[l]}calculateProjMatrix(t,l=!1){const h=t.key,_=l?this._alignedProjMatrixCache:this._projMatrixCache;if(_[h])return _[h];const b=this.calculatePosMatrix(t,this.worldSize);return o.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:l?this.alignedProjMatrix:this.projMatrix,b),_[h]=new Float32Array(b),_[h]}calculatePixelsToTileUnitsMatrix(t){const l=t.tileID.key,h=this._pixelsToTileUnitsCache;if(h[l])return h[l];const _=function(b,D){const{scale:A}=b.tileTransform,B=A*o.EXTENT/(b.tileSize*Math.pow(2,D.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return J=new Float32Array(4),Ie=(K=D.inverseAdjustmentMatrix)[1],He=K[2],Xe=K[3],tt=(de=[B,B])[1],J[0]=K[0]*(qe=de[0]),J[1]=Ie*qe,J[2]=He*tt,J[3]=Xe*tt,J;var J,K,de,Ie,He,Xe,qe,tt}(t,this);return h[l]=_,h[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,l=o.fromScaling([],[t,t,t]);return o.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const l=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,h=this._computeCameraPosition(l),_=this._camera.forward(),b=o.mercatorZfromAltitude(1,this._center.lat);h[2]/=b,_[2]/=b,o.normalize(_,_);const D=t.raycast(h,_,t.exaggeration());if(D){const A=o.scaleAndAdd([],h,_,D),B=new o.MercatorCoordinate(A[0],A[1],o.mercatorZfromAltitude(A[2],o.latFromMercatorY(A[1]))),J=(B.z+o.length([B.x-h[0],B.y-h[1],B.z-h[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(J),this._centerAltitude=B.toAltitude(),this._center=this.coordinateLocation(B),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const l=this._elevation,h=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(h),b=l.getAtPointOrZero(new o.MercatorCoordinate(..._)),D=this.pixelsPerMeter/this.worldSize*b,A=this._minimumHeightOverTerrain(),B=_[2]-D;if(B<=A)if(B<0||t){const J=this.locationCoordinate(this._center,this._centerAltitude),K=[_[0],_[1],J.z-_[2]],de=o.length(K);K[2]-=(A-B)/this._pixelsPerMercatorPixel;const Ie=o.length(K);if(0===Ie)return;o.scale$2(K,K,de/Ie*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],J.z*this._pixelsPerMercatorPixel-K[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const Ie=this.center;return Ie.lat=o.clamp(Ie.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(Ie.lng=o.clamp(Ie.lng,this.minLng,this.maxLng)),this.center=Ie,void(this._constraining=!1)}const l=this._unmodified,{x:h,y:_}=this.point;let b=0,D=h,A=_;const B=this.width/2,J=this.height/2,K=this.worldMinY*this.scale,de=this.worldMaxY*this.scale;if(_-J<K&&(A=K+J),_+J>de&&(A=de-J),de-K<this.height&&(b=Math.max(b,this.height/(de-K)),A=(de+K)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ie=this.worldMinX*this.scale,He=this.worldMaxX*this.scale,Xe=this.worldSize/2-(Ie+He)/2;D=(h+Xe+this.worldSize)%this.worldSize-Xe,D-B<Ie&&(D=Ie+B),D+B>He&&(D=He-B),He-Ie<this.width&&(b=Math.max(b,this.width/(He-Ie)),D=(He+Ie)/2)}D===h&&A===_||(this.center=this.unproject(new o.Point(D,A))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,l=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const h=be(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,h),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _="meters"===this.projection.zAxisUnit?l:1,b=this._camera.getWorldToCamera(this.worldSize,_),D=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);D[8]=2*-t.x/this.width,D[9]=2*t.y/this.height;let A=o.mul([],D,b);if(this.projection.isReprojectedInTileSpace){const $t=this.locationCoordinate(this.center),Ht=o.identity([]);o.translate(Ht,Ht,[$t.x*this.worldSize,$t.y*this.worldSize,0]),o.multiply(Ht,Ht,M(this)),o.translate(Ht,Ht,[-$t.x*this.worldSize,-$t.y*this.worldSize,0]),o.multiply(A,A,Ht),this.inverseAdjustmentMatrix=function(tn){const Xt=M(tn,!0);return Ae([],[Xt[0],Xt[1],Xt[4],Xt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],A,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=A,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const B=o.invert([],D);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(B,this.horizonLineFromTop(),this.height);const J=new Float32Array(16);o.identity(J),o.scale(J,J,[1,-1,1]),o.rotateX(J,J,this._pitch),o.rotateZ(J,J,this.angle);const K=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),de=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;K[8]=2*-t.x/this.width,K[9]=2*(t.y+de)/this.height,this.skyboxMatrix=o.multiply(J,K,J);const Ie=this.point,He=Ie.x,Xe=Ie.y,qe=this.width%2/2,tt=this.height%2/2,fe=Math.cos(this.angle),Ze=Math.sin(this.angle),ut=He-Math.round(He)+fe*qe+Ze*tt,dt=Xe-Math.round(Xe)+fe*tt+Ze*qe,Vt=new Float64Array(A);if(o.translate(Vt,Vt,[ut>.5?ut-1:ut,dt>.5?dt-1:dt,0]),this.alignedProjMatrix=Vt,A=o.create(),o.scale(A,A,[this.width/2,-this.height/2,1]),o.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=o.create(),o.scale(A,A,[1,-1,1]),o.translate(A,A,[-1,-1,0]),o.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},A=o.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=A,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const $t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4($t,$t,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=A;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,h=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,b=[t,t,l];o.scale$2(b,b,_),o.scale$2(h,h,-1),o.multiply$2(h,h,b);const D=o.create();o.translate(D,D,h),o.scale(D,D,b),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,l,_)}_computeCameraPosition(t){const l=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,h=this._camera.forward(),_=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-t/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-h[0]*b,_.y/this.worldSize-h[1]*b,t/this.worldSize*this._centerAltitude-h[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),h=this._camera.position[2],_=t[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(b=Math.min((l-h)/_,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,t,b),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,l=this._camera.forward(),{pitch:h,bearing:_}=this._camera.getPitchBearing(),b=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),A=Math.max((t[2]-b)/Math.cos(h),D),B=this._zoomFromMercatorZ(A);o.scaleAndAdd(t,t,l,A),this._pitch=o.clamp(h,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(_,-Math.PI,Math.PI),this._setZoom(o.clamp(B,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(t){let l=0,h=o.GLOBE_ZOOM_THRESHOLD_MAX,_=0,b=1/0;for(;h-l>1e-6&&h>l;){const D=l+.5*(h-l),A=this.tileSize*Math.pow(2,D),B=this.getCameraToCenterDistance(this.projection,D,A),J=this.scaleZoom(B/(t*this.tileSize)),K=Math.abs(D-J);K<b&&(b=K,_=D),D<J?l=D:h=D}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,l){const h=Math.min(t.x,l.x),_=Math.max(t.x,l.x),b=Math.min(t.y,l.y),D=Math.max(t.y,l.y);if(b<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const A=[new o.Point(h,b),new o.Point(_,D),new o.Point(h,D),new o.Point(_,b)],B=this.renderWorldCopies?-3:0,J=this.renderWorldCopies?4:1;for(const K of A){const de=this.pointRayIntersection(K);if(de.t<0)return!0;const Ie=this.rayIntersectionCoordinate(de);if(Ie.x<B||Ie.y<0||Ie.x>J||Ie.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(t,l){const h=o.length(o.sub([],this._camera.position,t)),_=this._zoomFromMercatorZ(h)+l;return h-this._mercatorZfromZoom(_)}getCameraPoint(){if("globe"===this.projection.name){const t=function([l,h,_],b){const D=[l,h,_,1];o.transformMat4$1(D,D,b);const A=D[3]=Math.max(D[3],1e-6);return D[0]/=A,D[1]/=A,D[2]/=A,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,t))}}getCameraToCenterDistance(t,l=this.zoom,h=this.worldSize){const _=be(t,l,this.width,this.height,1024),b=t.pixelSpaceConversion(this.center.lat,h,_);return.5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&o.multiply(t,t,this.globeMatrix),t}}function pn(u,t){let l=!1,h=null;const _=()=>{h=null,l&&(u(),h=setTimeout(_,t),l=!1)};return()=>(l=!0,h||_(),h)}class si{constructor(t){this._hashName=t&&encodeURIComponent(t),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=pn(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,o.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const l=di(t);if(this._hashName){const h=this._hashName;let _=!1;const b=o.window.location.hash.slice(1).split("&").map(D=>{const A=D.split("=")[0];return A===h?(_=!0,`${A}=${l}`):D}).filter(D=>D);return _||b.push(`${h}=${l}`),`#${b.join("&")}`}return`#${l}`}_getCurrentHash(){const t=o.window.location.hash.replace("#","");if(this._hashName){let l;return t.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(l=h)}),(l&&l[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(h=>isNaN(h))){const h=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(l[3]||0):t.getBearing();return t.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:h,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,t)}}function di(u,t){const l=u.getCenter(),h=Math.round(100*u.getZoom())/100,_=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),D=Math.round(l.lng*b)/b,A=Math.round(l.lat*b)/b,B=u.getBearing(),J=u.getPitch();let K=t?`/${D}/${A}/${h}`:`${h}/${A}/${D}`;return(B||J)&&(K+="/"+Math.round(10*B)/10),J&&(K+=`/${Math.round(J)}`),K}const Ri={linearity:.3,easing:o.bezier(0,0,.3,1)},Vi=o.extend({deceleration:2500,maxSpeed:1400},Ri),Ei=o.extend({deceleration:20,maxSpeed:1400},Ri),In=o.extend({deceleration:1e3,maxSpeed:360},Ri),Ui=o.extend({deceleration:1e3,maxSpeed:90},Ri);class sr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,l=o.exported.now();for(;t.length>0&&l-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)l.zoom+=b.zoomDelta||0,l.bearing+=b.bearingDelta||0,l.pitch+=b.pitchDelta||0,b.panDelta&&l.pan._add(b.panDelta),b.around&&(l.around=b.around),b.pinchAround&&(l.pinchAround=b.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(l.pan.mag()){const b=co(l.pan.mag(),h,o.extend({},Vi,t||{}));_.offset=l.pan.mult(b.amount/l.pan.mag()),_.center=this._map.transform.center,Wr(_,b)}if(l.zoom){const b=co(l.zoom,h,Ei);_.zoom=this._map.transform.zoom+b.amount,Wr(_,b)}if(l.bearing){const b=co(l.bearing,h,In);_.bearing=this._map.transform.bearing+o.clamp(b.amount,-179,179),Wr(_,b)}if(l.pitch){const b=co(l.pitch,h,Ui);_.pitch=this._map.transform.pitch+b.amount,Wr(_,b)}if(_.zoom||_.bearing){const b=void 0===l.pinchAround?l.around:l.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function Wr(u,t){(!u.duration||u.duration<t.duration)&&(u.duration=t.duration,u.easing=t.easing)}function co(u,t,l){const{maxSpeed:h,linearity:_,deceleration:b}=l,D=o.clamp(u*_/(t/1e3),-h,h),A=Math.abs(D)/(b*_);return{easing:l.easing,duration:1e3*A,amount:D*(A/2)}}class mr extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,h,_={}){const b=nn(l.getCanvasContainer(),h),D=l.unproject(b);super(t,o.extend({point:b,lngLat:D,originalEvent:h},_)),this._defaultPrevented=!1,this.target=l}}class Qs extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,h){const _="touchend"===t?h.changedTouches:h.touches,b=sn(l.getCanvasContainer(),_),D=b.map(B=>l.unproject(B)),A=b.reduce((B,J,K,de)=>B.add(J.div(de.length)),new o.Point(0,0));super(t,{points:b,point:A,lngLats:D,lngLat:l.unproject(A),originalEvent:h}),this._defaultPrevented=!1}}class Yo extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,h){super(t,{originalEvent:h}),this._defaultPrevented=!1}}class No{constructor(t,l){this._map=t,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new Yo(t.type,this._map,t))}mousedown(t,l){return this._mousedownPos=l,this._firePreventable(new mr(t.type,this._map,t))}mouseup(t){this._map.fire(new mr(t.type,this._map,t))}preclick(t){const l=o.extend({},t);l.type="preclick",this._map.fire(new mr(l.type,this._map,l))}click(t,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(t),this._map.fire(new mr(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new mr(t.type,this._map,t))}mouseover(t){this._map.fire(new mr(t.type,this._map,t))}mouseout(t){this._map.fire(new mr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Qs(t.type,this._map,t))}touchmove(t){this._map.fire(new Qs(t.type,this._map,t))}touchend(t){this._map.fire(new Qs(t.type,this._map,t))}touchcancel(t){this._map.fire(new Qs(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new mr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new mr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vs{constructor(t,l){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,l){this.isEnabled()&&t.shiftKey&&0===t.button&&(pt(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(t,l){if(!this._active)return;const h=l,_=this._startPos,b=this._lastPos;if(!_||!b||b.equals(h)||!this._box&&h.dist(_)<this._clickTolerance)return;this._lastPos=h,this._box||(this._box=Ye("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const D=Math.min(_.x,h.x),A=Math.max(_.x,h.x),B=Math.min(_.y,h.y),J=Math.max(_.y,h.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${B}px)`,this._box.style.width=A-D+"px",this._box.style.height=J-B+"px")})}mouseupWindow(t,l){if(!this._active)return;const h=this._startPos,_=l;if(h&&0===t.button){if(this.reset(),Ct(),h.x!==_.x||h.y!==_.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:b=>b.fitScreenCoordinates(h,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),jt(),delete this._startPos,delete this._lastPos}_fireEvent(t,l){return this._map.fire(new o.Event(t,{originalEvent:l}))}}function fs(u,t){const l={};for(let h=0;h<u.length;h++)l[u[h].identifier]=t[h];return l}class zo{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,l,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),h.length===this.numTouches&&(this.centroid=function(_){const b=new o.Point(0,0);for(const D of _)b._add(D);return b.div(_.length)}(l),this.touches=fs(h,l)))}touchmove(t,l,h){if(this.aborted||!this.centroid)return;const _=fs(h,l);for(const b in this.touches){const D=_[b];(!D||D.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(t,l,h){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===h.length){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class ea{constructor(t){this.singleTap=new zo(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,l,h){this.singleTap.touchstart(t,l,h)}touchmove(t,l,h){this.singleTap.touchmove(t,l,h)}touchend(t,l,h){const _=this.singleTap.touchend(t,l,h);if(_){const b=t.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(_)<30;if(b&&D||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Or{constructor(){this._zoomIn=new ea({numTouches:1,numTaps:2}),this._zoomOut=new ea({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,l,h){this._zoomIn.touchstart(t,l,h),this._zoomOut.touchstart(t,l,h)}touchmove(t,l,h){this._zoomIn.touchmove(t,l,h),this._zoomOut.touchmove(t,l,h)}touchend(t,l,h){const _=this._zoomIn.touchend(t,l,h),b=this._zoomOut.touchend(t,l,h);return _?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(_)},{originalEvent:t})}):b?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(b)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Vo={0:1,2:2};class za{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,l){return!1}_move(t,l){return{}}mousedown(t,l){if(this._lastPoint)return;const h=Cn(t);this._correctButton(t,h)&&(this._lastPoint=l,this._eventButton=h)}mousemoveWindow(t,l){const h=this._lastPoint;if(h)if(t.preventDefault(),null!=this._eventButton&&function(_,b){const D=Vo[b];return void 0===_.buttons||(_.buttons&D)!==D}(t,this._eventButton))this.reset();else if(this._moved||!(l.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(h,l)}mouseupWindow(t){this._lastPoint&&Cn(t)===this._eventButton&&(this._moved&&Ct(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di extends za{mousedown(t,l){super.mousedown(t,l),this._lastPoint&&(this._active=!0)}_correctButton(t,l){return 0===l&&!t.ctrlKey}_move(t,l){return{around:l,panDelta:l.sub(t)}}}class Fi extends za{_correctButton(t,l){return 0===l&&t.ctrlKey||2===l}_move(t,l){const h=.8*(l.x-t.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(t){t.preventDefault()}}class Hi extends za{_correctButton(t,l){return 0===l&&t.ctrlKey||2===l}_move(t,l){const h=-.5*(l.y-t.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(t){t.preventDefault()}}class ar{constructor(t,l){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(t,l,h){return this._calculateTransform(t,l,h)}touchmove(t,l,h){if(this._active&&!(h.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===h.length&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,l,h)}}touchend(t,l,h){this._calculateTransform(t,l,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,l,h){h.length>0&&(this._active=!0);const _=fs(h,l),b=new o.Point(0,0),D=new o.Point(0,0);let A=0;for(const J in _){const K=_[J],de=this._touches[J];de&&(b._add(K),D._add(K.sub(de)),A++,_[J]=K)}if(this._touches=_,A<this._minTouches||!D.mag())return;const B=D.div(A);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(A),panDelta:B}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ye("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class xo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,l,h){return{}}touchstart(t,l,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([l[0],l[1]]))}touchmove(t,l,h){const _=this._firstTwoTouches;if(!_)return;t.preventDefault();const[b,D]=_,A=qo(h,l,b),B=qo(h,l,D);if(!A||!B)return;const J=this._aroundCenter?null:A.add(B).div(2);return this._move([A,B],J,t)}touchend(t,l,h){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,D=qo(h,l,_),A=qo(h,l,b);D&&A||(this._active&&Ct(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function qo(u,t,l){for(let h=0;h<u.length;h++)if(u[h].identifier===l)return t[h]}function uo(u,t){return Math.log(u/t)/Math.LN2}class xs extends xo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,l){const h=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(uo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:uo(this._distance,h),pinchAround:l}}}function he(u,t){return 180*u.angleWith(t)/Math.PI}class k extends xo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,l){const h=this._vector;if(this._vector=t[0].sub(t[1]),h&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:he(this._vector,h),pinchAround:l}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const l=25/(Math.PI*this._minDiameter)*360,h=this._startVector;if(!h)return!1;const _=he(t,h);return Math.abs(_)<l}}function Z(u){return Math.abs(u.y)>Math.abs(u.x)}class pe extends xo{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Z(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,l,h){const _=this._lastPoints;if(!_)return;const b=t[0].sub(_[0]),D=t[1].sub(_[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&h.touches.length<3||(this._valid=this.gestureBeginsVertically(b,D,h.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(b.y+D.y)/2*-.5})}gestureBeginsVertically(t,l,h){if(void 0!==this._valid)return this._valid;const _=t.mag()>=2,b=l.mag()>=2;if(!_&&!b)return;if(!_||!b)return null==this._firstMove&&(this._firstMove=h),h-this._firstMove<100&&void 0;const D=t.y>0==l.y>0;return Z(t)&&Z(l)&&D}}const At={panStep:100,bearingStep:15,pitchStep:10};class Tn{constructor(){const t=At;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let l=0,h=0,_=0,b=0,D=0;switch(t.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:t.shiftKey?h=-1:(t.preventDefault(),b=-1);break;case 39:t.shiftKey?h=1:(t.preventDefault(),b=1);break;case 38:t.shiftKey?_=1:(t.preventDefault(),D=-1);break;case 40:t.shiftKey?_=-1:(t.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(h=0,_=0),{cameraAnimation:A=>{const B=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:ui,zoom:l?Math.round(B)+l*(t.shiftKey?2:1):B,bearing:A.getBearing()+h*this._bearingStep,pitch:A.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-D*this._panStep],center:A.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ui(u){return u*(2-u)}const Gi=4.000244140625;class or{constructor(t,l){this._map=t,this._el=t.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=t.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const h=o.exported.now(),_=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,0!==l&&l%Gi==0?this._type="wheel":0!==l&&Math.abs(l)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(_*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),t.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=t,this._delta-=l,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=nn(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const B="wheel"===this._type&&Math.abs(this._delta)>Gi?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==J&&(J=1/J);const K=l(),de=Math.pow(2,K),Ie="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):de;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(Ie*J))),"wheel"===this._type&&(this._startZoom=K,this._easing=this._smoothOutEasing(200)),this._delta=0}const h="number"==typeof this._targetZoom?this._targetZoom:l(),_=this._startZoom,b=this._easing;let D,A=!1;if("wheel"===this._type&&_&&b){const B=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),J=b(B);D=o.number(_,h,J),B<1?this._frameId||(this._frameId=!0):A=!0}else D=h,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:D-l(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let l=o.ease;if(this._prevEase){const h=this._prevEase,_=(o.exported.now()-h.start)/h.duration,b=h.easing(_+.01)-h.easing(_),D=.27/Math.sqrt(b*b+1e-4)*.01,A=Math.sqrt(.0729-D*D);l=o.bezier(D,A,.25,1)}return this._prevEase={start:o.exported.now(),duration:t,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ye("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Br{constructor(t,l){this._clickZoom=t,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ho{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,l){return t.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(t.shiftKey?-1:1),around:h.unproject(l)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ol{constructor(){this._tap=new ea({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,l,h){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=l[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(t,l,h))}touchmove(t,l,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const _=l[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,t.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(t,l,h)}touchend(t,l,h){this._tapTime?this._swipePoint&&0===h.length&&this.reset():this._tap.touchend(t,l,h)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oc{constructor(t,l,h){this._el=t,this._mousePan=l,this._touchPan=h}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fc{constructor(t,l,h){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=l,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jl{constructor(t,l,h,_){this._el=t,this._touchZoom=l,this._touchRotate=h,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Va=u=>u.zoom||u.drag||u.pitch||u.rotate;class Bu extends o.Event{}class eo{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,l){const h=o.sub([],l,t);this.radius=o.length(h[2]<0?o.div([],h,this.constants):[h[0],h[1],0])}projectRay(t){o.div(t,t,this.constants),o.normalize(t,t),o.mul$1(t,t,this.constants);const l=o.scale$2([],t,this.radius);if(l[2]>0){const h=o.scale$2([],[0,0,1],o.dot(l,[0,0,1])),_=o.scale$2([],o.normalize([],[l[0],l[1],0]),this.radius),b=o.add([],l,o.scale$2([],o.sub([],o.add([],_,h),l),2));l[0]=b[0],l[1]=b[1]}return l}}function el(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}class wl{constructor(t,l){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sr(t),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new eo,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),o.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[_,b,D]of this._listeners)_.addEventListener(b,_===o.window.document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[t,l,h]of this._listeners)t.removeEventListener(l,t===o.window.document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(t){const l=this._map,h=l.getCanvasContainer();this._add("mapEvent",new No(l,t));const _=l.boxZoom=new Vs(l,t);this._add("boxZoom",_);const b=new Or,D=new ho;l.doubleClickZoom=new Br(D,b),this._add("tapZoom",b),this._add("clickZoom",D);const A=new Ol;this._add("tapDragZoom",A);const B=l.touchPitch=new pe(l);this._add("touchPitch",B);const J=new Fi(t),K=new Hi(t);l.dragRotate=new fc(t,J,K),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const de=new Di(t),Ie=new ar(l,t);l.dragPan=new Oc(h,de,Ie),this._add("mousePan",de),this._add("touchPan",Ie,["touchZoom","touchRotate"]);const He=new k,Xe=new xs;l.touchZoomRotate=new Jl(h,Xe,He,A),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",Xe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new bo(l));const qe=l.scrollZoom=new or(l,this);this._add("scrollZoom",qe,["mousePan"]);const tt=l.keyboard=new Tn;this._add("keyboard",tt);for(const fe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[fe]&&l[fe].enable(t[fe])}_add(t,l,h){this._handlers.push({handlerName:t,handler:l,allowed:h}),this._handlersById[t]=l}stop(t){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Va(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,l,h){for(const _ in t)if(_!==h&&(!l||l.indexOf(_)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const l=[];for(const h of t)this._el.contains(h.target)&&l.push(h);return l}handleEvent(t,l){this._updatingCamera=!0;const h="renderFrame"===t.type,_=h?void 0:t,b={needsRenderFrame:!1},D={},A={},B=t.touches?this._getMapTouches(t.touches):void 0,J=B?sn(this._el,B):h?void 0:nn(this._el,t);for(const{handlerName:Ie,handler:He,allowed:Xe}of this._handlers){if(!He.isEnabled())continue;let qe;this._blockedByActive(A,Xe,Ie)?He.reset():He[l||t.type]&&(qe=He[l||t.type](t,J,B),this.mergeHandlerResult(b,D,qe,Ie,_),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||He.isActive())&&(A[Ie]=He)}const K={};for(const Ie in this._previousActiveHandlers)A[Ie]||(K[Ie]=_);this._previousActiveHandlers=A,(Object.keys(K).length||el(b))&&(this._changes.push([b,D,K]),this._triggerRenderFrame()),(Object.keys(A).length||el(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=b;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))}mergeHandlerResult(t,l,h,_,b){if(!h)return;o.extend(t,h);const D={handlerName:_,originalEvent:h.originalEvent||b};void 0!==h.zoomDelta&&(l.zoom=D),void 0!==h.panDelta&&(l.drag=D),void 0!==h.pitchDelta&&(l.pitch=D),void 0!==h.bearingDelta&&(l.rotate=D)}_applyChanges(){const t={},l={},h={};for(const[_,b,D]of this._changes)_.panDelta&&(t.panDelta=(t.panDelta||new o.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+_.pitchDelta),void 0!==_.around&&(t.around=_.around),void 0!==_.aroundCoord&&(t.aroundCoord=_.aroundCoord),void 0!==_.pinchAround&&(t.pinchAround=_.pinchAround),_.noInertia&&(t.noInertia=_.noInertia),o.extend(l,b),o.extend(h,D);this._updateMapTransform(t,l,h),this._changes=[]}_updateMapTransform(t,l,h){const _=this._map,b=_.transform,D=Ze=>[Ze.x,Ze.y,Ze.z];if((Ze=>{const ut=this._eventsInProgress.drag;return ut&&!this._handlersById[ut.handlerName].isActive()})()&&!el(t)){const Ze=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",Ze!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&_._stop(!0),!el(t))return void this._fireEvents(l,h,!0);let{panDelta:A,zoomDelta:B,bearingDelta:J,pitchDelta:K,around:de,aroundCoord:Ie,pinchAround:He}=t;b._isCameraConstrained&&(B>0&&(B=0),b._isCameraConstrained=!1),void 0!==He&&(de=He),(B||(Ze=>l.drag&&!this._eventsInProgress.drag)())&&de&&(this._dragOrigin=D(b.pointCoordinate3D(de)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",_._stop(!0),de=de||_.transform.centerPoint,J&&(b.bearing+=J),K&&(b.pitch+=K),b._updateCameraState();const Xe=[0,0,0];if(A)if("mercator"===b.projection.name){const Ze=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(de).dir),ut=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(de.sub(A)).dir);Xe[0]=ut[0]-Ze[0],Xe[1]=ut[1]-Ze[1]}else{const Ze=b.pointCoordinate(de);if("globe"===b.projection.name){A=A.rotate(-b.angle);const ut=b._pixelsPerMercatorPixel/b.worldSize;Xe[0]=-A.x*o.mercatorScale(o.latFromMercatorY(Ze.y))*ut,Xe[1]=-A.y*o.mercatorScale(b.center.lat)*ut}else{const ut=b.pointCoordinate(de.sub(A));Ze&&ut&&(Xe[0]=ut.x-Ze.x,Xe[1]=ut.y-Ze.y)}}const qe=b.zoom,tt=[0,0,0];if(B){const Ze=D(Ie||b.pointCoordinate3D(de)),ut={dir:o.normalize([],o.sub([],Ze,b._camera.position))};if(ut.dir[2]<0){const dt=b.zoomDeltaToMovement(Ze,B);o.scale$2(tt,ut.dir,dt)}}const fe=o.add(Xe,Xe,tt);b._translateCameraConstrained(fe),B&&Math.abs(b.zoom-qe)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(l,h,!0)}_fireEvents(t,l,h){const _=Va(this._eventsInProgress),b=Va(t),D={};for(const K in t){const{originalEvent:de}=t[K];this._eventsInProgress[K]||(D[`${K}start`]=de),this._eventsInProgress[K]=t[K]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const K in D)this._fireEvent(K,D[K]);b&&this._fireEvent("move",b.originalEvent);for(const K in t){const{originalEvent:de}=t[K];this._fireEvent(K,de)}const A={};let B;for(const K in this._eventsInProgress){const{handlerName:de,originalEvent:Ie}=this._eventsInProgress[K];this._handlersById[de].isActive()||(delete this._eventsInProgress[K],B=l[de]||Ie,A[`${K}end`]=B)}for(const K in A)this._fireEvent(K,A[K]);const J=Va(this._eventsInProgress);if(h&&(_||b)&&!J){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=Ie=>0!==Ie&&-this._bearingSnap<Ie&&Ie<this._bearingSnap;K?(de(K.bearing||this._map.getBearing())&&(K.bearing=0),this._map.easeTo(K,{originalEvent:B})):(this._map.fire(new o.Event("moveend",{originalEvent:B})),de(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,l){this._map.fire(new o.Event(t,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{this._frameId=void 0,this.handleEvent(new Bu("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const mc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Nu extends o.Evented{constructor(t,l){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=!1!==l.respectPrefersReducedMotion,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,l){return this.jumpTo({center:t},l)}panBy(t,l,h){return t=o.Point.convert(t).mult(-1),this.panTo(this.transform.center,o.extend({offset:t},l),h)}panTo(t,l,h){return this.easeTo(o.extend({center:t},l),h)}getZoom(){return this.transform.zoom}setZoom(t,l){return this.jumpTo({zoom:t},l),this}zoomTo(t,l,h){return this.easeTo(o.extend({zoom:t},l),h)}zoomIn(t,l){return this.zoomTo(this.getZoom()+1,t,l),this}zoomOut(t,l){return this.zoomTo(this.getZoom()-1,t,l),this}getBearing(){return this.transform.bearing}setBearing(t,l){return this.jumpTo({bearing:t},l),this}getPadding(){return this.transform.padding}setPadding(t,l){return this.jumpTo({padding:t},l),this}rotateTo(t,l,h){return this.easeTo(o.extend({bearing:t},l),h)}resetNorth(t,l){return this.rotateTo(0,o.extend({duration:1e3},t),l),this}resetNorthPitch(t,l){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},t),l),this}snapToNorth(t,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,l):this}getPitch(){return this.transform.pitch}setPitch(t,l){return this.jumpTo({pitch:t},l),this}cameraForBounds(t,l){t=o.LngLatBounds.convert(t);const h=l&&l.bearing||0,_=l&&l.pitch||0,b=t.getNorthWest(),D=t.getSouthEast();return this._cameraForBounds(this.transform,b,D,h,_,l)}_extendCameraOptions(t){const l={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=o.extend({padding:l,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const h=t.padding;t.padding={top:h,bottom:h,right:h,left:h}}return t.padding=o.extend(l,t.padding),t}_minimumAABBFrustumDistance(t,l){const h=l.max[0]-l.min[0],_=l.max[1]-l.min[1];return h/_>t.aspect?h/(2*Math.tan(.5*t.fovX)*t.aspect):_/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(t,l,h,_,b,D){const A=t.clone(),B=this._extendCameraOptions(D);A.bearing=_,A.pitch=b;const J=o.LngLat.convert(l),K=o.LngLat.convert(h),de=.5*(J.lat+K.lat),Ie=.5*(J.lng+K.lng),He=o.latLngToECEF(de,Ie),Xe=o.normalize([],He),qe=o.normalize([],o.cross([],Xe,[0,1,0])),tt=o.cross([],qe,Xe),fe=[qe[0],qe[1],qe[2],0,tt[0],tt[1],tt[2],0,Xe[0],Xe[1],Xe[2],0,0,0,0,1],Ze=[He,o.latLngToECEF(J.lat,J.lng),o.latLngToECEF(K.lat,J.lng),o.latLngToECEF(K.lat,K.lng),o.latLngToECEF(J.lat,K.lng),o.latLngToECEF(de,J.lng),o.latLngToECEF(de,K.lng),o.latLngToECEF(J.lat,Ie),o.latLngToECEF(K.lat,Ie)];let ut=o.Aabb.fromPoints(Ze.map(jn=>[o.dot(qe,jn),o.dot(tt,jn),o.dot(Xe,jn)]));const dt=o.transformMat4([],ut.center,fe);0===o.squaredLength(dt)&&o.set(dt,0,0,1),o.normalize(dt,dt),o.scale$2(dt,dt,o.GLOBE_RADIUS),A.center=o.ecefToLatLng(dt);const Vt=A.getWorldToCameraMatrix(),$t=o.invert(new Float64Array(16),Vt);ut=o.Aabb.applyTransform(ut,o.multiply([],Vt,fe)),o.transformMat4(dt,dt,Vt);const Ht=.5*(ut.max[2]-ut.min[2]),tn=this._minimumAABBFrustumDistance(A,ut),Xt=o.scale$2([],[0,0,1],Ht),hn=o.add(Xt,dt,Xt),Xn=tn+(0===A.pitch?0:o.distance(dt,hn)),dn=A.globeCenterInViewSpace,Nn=o.sub([],dt,[dn[0],dn[1],dn[2]]);o.normalize(Nn,Nn),o.scale$2(Nn,Nn,Xn);const bn=o.add([],dt,Nn);o.transformMat4(bn,bn,$t);const qn=o.earthRadius/o.GLOBE_RADIUS,mn=o.length(bn),Ln=o.mercatorZfromAltitude(Math.max(mn*qn-o.earthRadius,Number.EPSILON),0),Jn=Math.min(A.zoomFromMercatorZAdjusted(Ln),B.maxZoom);return Jn>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"mercator"}),A.zoom=Jn,this._cameraForBounds(A,l,h,_,b,D)):{center:A.center,zoom:Jn,bearing:_,pitch:b}}queryTerrainElevation(t,l){const h=this.transform.elevation;return h?(l=o.extend({},{exaggerated:!0},l),h.getAtPoint(o.MercatorCoordinate.fromLngLat(t),null,l.exaggerated)):null}_cameraForBounds(t,l,h,_,b,D){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,l,h,_,b,D);const A=t.clone(),B=this._extendCameraOptions(D),J=A.padding;A.bearing=_,A.pitch=b;const K=o.LngLat.convert(l),de=o.LngLat.convert(h),Ie=new o.LngLat(K.lng,de.lat),He=new o.LngLat(de.lng,K.lat),Xe=A.project(K),qe=A.project(de),tt=this.queryTerrainElevation(K),fe=this.queryTerrainElevation(de),Ze=this.queryTerrainElevation(Ie),ut=this.queryTerrainElevation(He),dt=[[Xe.x,Xe.y,Math.min(tt||0,fe||0,Ze||0,ut||0)],[qe.x,qe.y,Math.max(tt||0,fe||0,Ze||0,ut||0)]];let Vt=o.Aabb.fromPoints(dt);const $t=A.getWorldToCameraMatrix(),Ht=o.invert(new Float64Array(16),$t);Vt=o.Aabb.applyTransform(Vt,$t);const tn=o.sub([],Vt.max,Vt.min),Xt=J.left||0,hn=J.right||0,Xn=J.bottom||0,dn=J.top||0,{left:Nn,right:bn,top:qn,bottom:mn}=B.padding,Ln=.5*(Xt+hn),Jn=.5*(dn+Xn),jn=Math.min(A.scaleZoom(A.scale*Math.min((A.width-(Xt+hn+Nn+bn))/tn[0],(A.height-(Xn+dn+mn+qn))/tn[1])),B.maxZoom),Qn=A.scale/A.zoomScale(jn);Vt=new o.Aabb([Vt.min[0]-(Nn+Ln)*Qn,Vt.min[1]-(mn+Jn)*Qn,Vt.min[2]],[Vt.max[0]+(bn+Ln)*Qn,Vt.max[1]+(qn+Jn)*Qn,Vt.max[2]]);const Pi=.5*tn[2],qi=this._minimumAABBFrustumDistance(A,Vt),Ci=[0,0,1,0];o.transformMat4$1(Ci,Ci,$t),o.normalize$2(Ci,Ci);const Li=o.scale$2([],Ci,qi+Pi),hr=o.add([],Vt.center,Li),lr=("number"==typeof B.offset.x&&"number"==typeof B.offset.y?new o.Point(B.offset.x,B.offset.y):o.Point.convert(B.offset)).rotate(-o.degToRad(_));Vt.center[0]-=lr.x*Qn,Vt.center[1]+=lr.y*Qn,o.transformMat4(Vt.center,Vt.center,Ht),o.transformMat4(hr,hr,Ht);const Si=[Vt.center[0],Vt.center[1],hr[2]*A.pixelsPerMeter];o.scale$2(Si,Si,1/A.worldSize);const kr=o.lngFromMercatorX(Si[0]),to=o.latFromMercatorY(Si[1]),no=Math.min(A._zoomFromMercatorZ(Si[2]),B.maxZoom),jr=new o.LngLat(kr,to);return A.mercatorFromTransition&&no<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"globe"}),A.zoom=no,this._cameraForBounds(A,l,h,_,b,D)):{center:jr,zoom:no,bearing:_,pitch:b}}fitBounds(t,l,h){const _=this.cameraForBounds(t,l);return this._fitInternal(_,l,h)}fitScreenCoordinates(t,l,h,_,b){const D=o.Point.convert(t),A=o.Point.convert(l),B=new o.Point(Math.min(D.x,A.x),Math.min(D.y,A.y)),J=new o.Point(Math.max(D.x,A.x),Math.max(D.y,A.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(D,A))return this;const K=this.transform.pointLocation3D(B),de=this.transform.pointLocation3D(J),Ie=this.transform.pointLocation3D(new o.Point(B.x,J.y)),He=this.transform.pointLocation3D(new o.Point(J.x,B.y)),Xe=[Math.min(K.lng,de.lng,Ie.lng,He.lng),Math.min(K.lat,de.lat,Ie.lat,He.lat)],qe=[Math.max(K.lng,de.lng,Ie.lng,He.lng),Math.max(K.lat,de.lat,Ie.lat,He.lat)],tt=_&&_.pitch?_.pitch:this.getPitch(),fe=this._cameraForBounds(this.transform,Xe,qe,h,tt,_);return this._fitInternal(fe,_,b)}_fitInternal(t,l,h){return t?(delete(l=o.extend(t,l)).padding,l.linear?this.easeTo(l,h):this.flyTo(l,h)):this}jumpTo(t,l){this.stop();const h=t.preloadOnly?this.transform.clone():this.transform;let _=!1,b=!1,D=!1;return"zoom"in t&&h.zoom!==+t.zoom&&(_=!0,h.zoom=+t.zoom),void 0!==t.center&&(h.center=o.LngLat.convert(t.center)),"bearing"in t&&h.bearing!==+t.bearing&&(b=!0,h.bearing=+t.bearing),"pitch"in t&&h.pitch!==+t.pitch&&(D=!0,h.pitch=+t.pitch),null==t.padding||h.isPaddingEqual(t.padding)||(h.padding=t.padding),t.preloadOnly?(this._preloadTiles(h),this):(this.fire(new o.Event("movestart",l)).fire(new o.Event("move",l)),_&&this.fire(new o.Event("zoomstart",l)).fire(new o.Event("zoom",l)).fire(new o.Event("zoomend",l)),b&&this.fire(new o.Event("rotatestart",l)).fire(new o.Event("rotate",l)).fire(new o.Event("rotateend",l)),D&&this.fire(new o.Event("pitchstart",l)).fire(new o.Event("pitch",l)).fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(mc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,l){const h=this.transform;if(!h.projection.supportsFreeCamera)return o.warnOnce(mc),this;this.stop();const _=h.zoom,b=h.pitch,D=h.bearing;h.setFreeCameraOptions(t);const A=_!==h.zoom,B=b!==h.pitch,J=D!==h.bearing;return this.fire(new o.Event("movestart",l)).fire(new o.Event("move",l)),A&&this.fire(new o.Event("zoomstart",l)).fire(new o.Event("zoom",l)).fire(new o.Event("zoomend",l)),J&&this.fire(new o.Event("rotatestart",l)).fire(new o.Event("rotate",l)).fire(new o.Event("rotateend",l)),B&&this.fire(new o.Event("pitchstart",l)).fire(new o.Event("pitch",l)).fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l)),this}easeTo(t,l){this._stop(!1,t.easeId),(!1===(t=o.extend({offset:[0,0],duration:500,easing:o.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const h=this.transform,_=this.getZoom(),b=this.getBearing(),D=this.getPitch(),A=this.getPadding(),B="zoom"in t?+t.zoom:_,J="bearing"in t?this._normalizeBearing(t.bearing,b):b,K="pitch"in t?+t.pitch:D,de="padding"in t?t.padding:h.padding,Ie=o.Point.convert(t.offset);let He,Xe,qe;if("globe"===h.projection.name){const Xt=o.MercatorCoordinate.fromLngLat(h.center),hn=Ie.rotate(-h.angle);Xt.x+=hn.x/h.worldSize,Xt.y+=hn.y/h.worldSize;const Xn=Xt.toLngLat(),dn=o.LngLat.convert(t.center||Xn);this._normalizeCenter(dn),He=h.centerPoint.add(hn),Xe=new o.Point(Xt.x,Xt.y).mult(h.worldSize),qe=new o.Point(o.mercatorXfromLng(dn.lng),o.mercatorYfromLat(dn.lat)).mult(h.worldSize).sub(Xe)}else{He=h.centerPoint.add(Ie);const Xt=h.pointLocation(He),hn=o.LngLat.convert(t.center||Xt);this._normalizeCenter(hn),Xe=h.project(Xt),qe=h.project(hn).sub(Xe)}const tt=h.zoomScale(B-_);let fe,Ze;t.around&&(fe=o.LngLat.convert(t.around),Ze=h.locationPoint(fe));const ut=this._zooming||B!==_,dt=this._rotating||b!==J,Vt=this._pitching||K!==D,$t=!h.isPaddingEqual(de),Ht=Xt=>hn=>{if(ut&&(Xt.zoom=o.number(_,B,hn)),dt&&(Xt.bearing=o.number(b,J,hn)),Vt&&(Xt.pitch=o.number(D,K,hn)),$t&&(Xt.interpolatePadding(A,de,hn),He=Xt.centerPoint.add(Ie)),fe)Xt.setLocationAtPoint(fe,Ze);else{const Xn=Xt.zoomScale(Xt.zoom-_),dn=B>_?Math.min(2,tt):Math.max(.5,tt),Nn=Math.pow(dn,1-hn),bn=Xt.unproject(Xe.add(qe.mult(hn*Nn)).mult(Xn));Xt.setLocationAtPoint(Xt.renderWorldCopies?bn.wrap():bn,He)}return t.preloadOnly||this._fireMoveEvents(l),Xt};if(t.preloadOnly){const Xt=this._emulate(Ht,t.duration,h);return this._preloadTiles(Xt),this}const tn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ut,this._rotating=dt,this._pitching=Vt,this._padding=$t,this._easeId=t.easeId,this._prepareEase(l,t.noMoveStart,tn),this._ease(Ht(h),Xt=>{h.recenterOnTerrain(),this._afterEase(l,Xt)},t),this}_prepareEase(t,l,h={}){this._moving=!0,this.transform.cameraElevationReference="sea",l||h.moving||this.fire(new o.Event("movestart",t)),this._zooming&&!h.zooming&&this.fire(new o.Event("zoomstart",t)),this._rotating&&!h.rotating&&this.fire(new o.Event("rotatestart",t)),this._pitching&&!h.pitching&&this.fire(new o.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new o.Event("move",t)),this._zooming&&this.fire(new o.Event("zoom",t)),this._rotating&&this.fire(new o.Event("rotate",t)),this._pitching&&this.fire(new o.Event("pitch",t))}_afterEase(t,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const h=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new o.Event("zoomend",t)),_&&this.fire(new o.Event("rotateend",t)),b&&this.fire(new o.Event("pitchend",t)),this.fire(new o.Event("moveend",t))}flyTo(t,l){if(this._prefersReducedMotion(t)){const jn=o.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jn,l)}this.stop(),t=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},t);const h=this.transform,_=this.getZoom(),b=this.getBearing(),D=this.getPitch(),A=this.getPadding(),B="zoom"in t?o.clamp(+t.zoom,h.minZoom,h.maxZoom):_,J="bearing"in t?this._normalizeBearing(t.bearing,b):b,K="pitch"in t?+t.pitch:D,de="padding"in t?t.padding:h.padding,Ie=h.zoomScale(B-_),He=o.Point.convert(t.offset);let Xe=h.centerPoint.add(He);const qe=h.pointLocation(Xe),tt=o.LngLat.convert(t.center||qe);this._normalizeCenter(tt);const fe=h.project(qe),Ze=h.project(tt).sub(fe);let ut=t.curve;const dt=Math.max(h.width,h.height),Vt=dt/Ie,$t=Ze.mag();if("minZoom"in t){const jn=o.clamp(Math.min(t.minZoom,_,B),h.minZoom,h.maxZoom),Qn=dt/h.zoomScale(jn-_);ut=Math.sqrt(Qn/$t*2)}const Ht=ut*ut;function tn(jn){const Qn=(Vt*Vt-dt*dt+(jn?-1:1)*Ht*Ht*$t*$t)/(2*(jn?Vt:dt)*Ht*$t);return Math.log(Math.sqrt(Qn*Qn+1)-Qn)}function Xt(jn){return(Math.exp(jn)-Math.exp(-jn))/2}function hn(jn){return(Math.exp(jn)+Math.exp(-jn))/2}const Xn=tn(0);let dn=function(jn){return hn(Xn)/hn(Xn+ut*jn)},Nn=function(jn){return dt*((hn(Xn)*(Xt(Qn=Xn+ut*jn)/hn(Qn))-Xt(Xn))/Ht)/$t;var Qn},bn=(tn(1)-Xn)/ut;if(Math.abs($t)<1e-6||!isFinite(bn)){if(Math.abs(dt-Vt)<1e-6)return this.easeTo(t,l);const jn=Vt<dt?-1:1;bn=Math.abs(Math.log(Vt/dt))/ut,Nn=function(){return 0},dn=function(Qn){return Math.exp(jn*ut*Qn)}}t.duration="duration"in t?+t.duration:1e3*bn/("screenSpeed"in t?+t.screenSpeed/ut:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const qn=b!==J,mn=K!==D,Ln=!h.isPaddingEqual(de),Jn=jn=>Qn=>{const Pi=Qn*bn,qi=1/dn(Pi);jn.zoom=1===Qn?B:_+jn.scaleZoom(qi),qn&&(jn.bearing=o.number(b,J,Qn)),mn&&(jn.pitch=o.number(D,K,Qn)),Ln&&(jn.interpolatePadding(A,de,Qn),Xe=jn.centerPoint.add(He));const Ci=1===Qn?tt:jn.unproject(fe.add(Ze.mult(Nn(Pi))).mult(qi));return jn.setLocationAtPoint(jn.renderWorldCopies?Ci.wrap():Ci,Xe),jn._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(l),jn};if(t.preloadOnly){const jn=this._emulate(Jn,t.duration,h);return this._preloadTiles(jn),this}return this._zooming=!0,this._rotating=qn,this._pitching=mn,this._padding=Ln,this._prepareEase(l,!1),this._ease(Jn(h),()=>this._afterEase(l),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const h=this._onEaseEnd;this._onEaseEnd=void 0,h.call(this,l)}if(!t){const h=this.handlers;h&&h.stop(!1)}return this}_ease(t,l,h){!1===h.animate||0===h.duration?(t(1),l()):(this._easeStart=o.exported.now(),this._easeOptions=h,this._onEaseFrame=t,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,l){t=o.wrap(t,-180,180);const h=Math.abs(t-l);return Math.abs(t-360-l)<h&&(t-=360),Math.abs(t+360-l)<h&&(t+=360),t}_normalizeCenter(t){const l=this.transform;if(!l.renderWorldCopies||l.maxBounds)return;const h=t.lng-l.center.lng;t.lng+=h>180?-360:h<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(t,l,h){const _=Math.ceil(15*l/1e3),b=[],D=t(h.clone());for(let A=0;A<=_;A++){const B=D(A/_);b.push(B.clone())}return b}}class gi{constructor(t={}){this.options=t,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const l=this.options&&this.options.compact;return this._map=t,this._container=Ye("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ye("button","mapboxgl-ctrl-attrib-button",this._container),Ye("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ye("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===l&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,l){const h=this._map._getUIString(`AttributionControl.${l}`);t.setAttribute("aria-label",h),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",h)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(t){const h=l.reduce((_,b,D)=>(b.value&&(_+=`${b.key}=${b.value}${D<l.length-1?"&":""}`),_),"?");t.href=`${o.config.FEEDBACK_URL}/${h}#${di(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const l=this._map.style._sourceCaches;for(const _ in l){const b=l[_];if(b.used){const D=b.getSource();D.attribution&&t.indexOf(D.attribution)<0&&t.push(D.attribution)}}t.sort((_,b)=>_.length-b.length),t=t.filter((_,b)=>{for(let D=b+1;D<t.length;D++)if(t[D].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const h=t.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,t.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ed{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=Ye("div","mapboxgl-ctrl");const l=Ye("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const l in t){const h=t[l].getSource();if(h.hasOwnProperty("mapbox_logo")&&!h.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const l=t[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class su{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const l=++this._id;return this._queue.push({callback:t,id:l,cancelled:!1}),l}remove(t){const l=this._currentlyRunning,h=l?this._queue.concat(l):this._queue;for(const _ of h)if(_.id===t)return void(_.cancelled=!0)}run(t=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const h of l)if(!h.cancelled&&(h.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function tl(u,t,l){if(u=new o.LngLat(u.lng,u.lat),t){const h=new o.LngLat(u.lng-360,u.lat),_=new o.LngLat(u.lng+360,u.lat),b=360*Math.ceil(Math.abs(u.lng-l.center.lng)/360),D=l.locationPoint(u).distSqr(t),A=t.x<0||t.y<0||t.x>l.width||t.y>l.height;l.locationPoint(h).distSqr(t)<D&&(A||Math.abs(h.lng-l.center.lng)<b)?u=h:l.locationPoint(_).distSqr(t)<D&&(A||Math.abs(_.lng-l.center.lng)<b)&&(u=_)}for(;Math.abs(u.lng-l.center.lng)>180;){const h=l.locationPoint(u);if(h.x>=0&&h.y>=0&&h.x<=l.width&&h.y<=l.height)break;u.lng>l.center.lng?u.lng-=360:u.lng+=360}return u}const Ql={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class hi extends o.Evented{constructor(t,l){if(super(),(t instanceof o.window.HTMLElement||l)&&(t=o.extend({element:t},l)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=o.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ye("div");const _=41,b=27,D=lt("svg",{display:"block",height:_*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${_}`},this._element),A=lt("radialGradient",{id:"shadowGradient"},lt("defs",{},D));lt("stop",{offset:"10%","stop-opacity":.4},A),lt("stop",{offset:"100%","stop-opacity":.05},A),lt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),lt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),lt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),lt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=o.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const h=this._element.classList;for(const _ in Ql)h.remove(`mapboxgl-marker-anchor-${_}`);h.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=o.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(24.6+_)],"bottom-right":[-_,-1*(24.6+_)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const l=t.code,h=t.charCode||t.keyCode;"Space"!==l&&"Enter"!==l&&32!==h&&13!==h||this.togglePopup()}_onMapClick(t){const l=t.originalEvent.target,h=this._element;this._popup&&(l===h||h.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,l=this._pos;if(!t||!l)return!1;const h=t.unproject(l),_=t.getFreeCameraOptions();if(!_.position)return!1;const b=_.position.toLngLat();return b.distanceTo(h)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const l=this._pos;if(!l||l.x<0||l.x>t.transform.width||l.y<0||l.y>t.transform.height)return void this._clearFadeTimer();const h=t.unproject(l);let _;t._showingGlobe()&&o.isLngLatBehindGlobe(t.transform,this._lngLat)?_=0:(_=1-t._queryFogOpacity(h),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${t.x}px,${t.y}px)\n            ${Ql[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${l.x}px,${l.y}px)\n        `}_calculateXYTransform(){const t=this._pos,l=this._map,h=this.getPitchAlignment();if(!l||!t||"map"!==h)return"";if(!l._showingGlobe()){const B=l.getPitch();return B?`rotateX(${B}deg)`:""}const _=o.radToDeg(o.globeTiltAtLngLat(l.transform,this._lngLat)),b=t.sub(o.globeCenterToScreenPoint(l.transform)),D=Math.abs(b.x)+Math.abs(b.y);if(0===D)return"";const A=_/D;return`rotateX(${-b.y*A}deg) rotateY(${b.x*A}deg)`}_calculateZTransform(){const t=this._pos,l=this._map;if(!l||!t)return"";let h=0;const _=this.getRotationAlignment();if("map"===_)if(l._showingGlobe()){const b=l.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),D=l.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);h=o.radToDeg(Math.atan2(D.y,D.x))-90}else h=-l.getBearing();else if("horizon"===_){const b=o.smoothstep(4,6,l.getZoom()),D=o.globeCenterToScreenPoint(l.transform);D.y+=b*l.transform.height;const A=t.sub(D),B=o.radToDeg(Math.atan2(A.y,A.x));h=(B>90?B-270:B+90)*(1-b)}return h+=this._rotation,h?`rotateZ(${h}deg)`:""}_update(t){o.window.cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=tl(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),!0===t?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=o.Point.convert(t),this._update(),this}_onMove(t){const l=this._map;if(!l)return;const h=this._pointerdownPos,_=this._positionDelta;if(h&&_){if(!this._isDragging){const b=this._clickTolerance||l._clickTolerance;if(t.point.dist(h)<b)return;this._isDragging=!0}this._pos=t.point.sub(_),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(t){const l=this._map,h=this._pos;l&&h&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(h),this._pointerdownPos=t.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const l=this._map;return l&&(t?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Ko={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},au=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ec(u=new o.Point(0,0),t="bottom"){if("number"==typeof u){const l=Math.round(Math.sqrt(.5*Math.pow(u,2)));switch(t){case"top":return new o.Point(0,u);case"top-left":return new o.Point(l,l);case"top-right":return new o.Point(-l,l);case"bottom":return new o.Point(0,-u);case"bottom-left":return new o.Point(l,-l);case"bottom-right":return new o.Point(-l,-l);case"left":return new o.Point(u,0);case"right":return new o.Point(-u,0)}return new o.Point(0,0)}return u instanceof o.Point||Array.isArray(u)?o.Point.convert(u):o.Point.convert(u[t]||[0,0])}class lu{constructor(t){this.jumpTo(t)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const l=o.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,l,h){this._start=this.getValue(l),this._end=t,this._startTime=l,this._endTime=l+h}}const xa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},pl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},zu={showCompass:!0,showZoom:!0,visualizePitch:!1};class cu{constructor(t,l,h=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new Fi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,h&&(this.mousePitch=new Hi({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(t,l){this.mouseRotate.mousedown(t,l),this.mousePitch&&this.mousePitch.mousedown(t,l),pt()}move(t,l){const h=this.map,_=this.mouseRotate.mousemoveWindow(t,l),b=_&&_.bearingDelta;if(b&&h.setBearing(h.getBearing()+b),this.mousePitch){const D=this.mousePitch.mousemoveWindow(t,l),A=D&&D.pitchDelta;A&&h.setPitch(h.getPitch()+A)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){jt(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(o.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),nn(this.element,t)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,nn(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=sn(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=sn(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const O={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},L={maxWidth:100,unit:"metric"},T={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},G={version:o.version,supported:st,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Nu{constructor(u){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),null!=(u=o.extend({},pl,u)).minZoom&&null!=u.maxZoom&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=u.minPitch&&null!=u.maxPitch&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=u.minPitch&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=u.maxPitch&&u.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(u.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(u.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new on(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies),u),this._interactive=u.interactive,this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._useWebGL2=u.useWebGL2,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=u.crossSourceCollisions,this._collectResourceTiming=u.collectResourceTiming,this._optimizeForTerrain=u.optimizeForTerrain,this._language=this._parseLanguage(u.language),this._worldview=u.worldview,this._renderTaskQueue=new su,this._domRenderTaskQueue=new su,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},xa,u.locale),this._clickTolerance=u.clickTolerance,this._cooperativeGestures=u.cooperativeGestures,this._performanceMetricsCollection=u.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new lu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(u.transformRequest,u.accessToken,u.testMode),this._silenceAuthErrors=!!u.testMode,"string"==typeof u.container){if(this._container=o.window.document.getElementById(u.container),!this._container)throw new Error(`Container '${u.container}' not found.`)}else{if(!(u.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),u.maxBounds&&this.setMaxBounds(u.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==o.window&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new wl(this,u),this._localFontFamily=u.localFontFamily,this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),u.projection&&this.setProjection(u.projection),this._hash=u.hash&&new si("string"==typeof u.hash&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,o.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),u.attributionControl&&this.addControl(new gi({customAttribution:u.customAttribution})),this._logoControl=new Ed,this.addControl(this._logoControl,u.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new o.Event(`${t.dataType}data`,t))}),this.on("dataloading",t=>{this.fire(new o.Event(`${t.dataType}dataloading`,t))})}_getMapId(){return this._mapId}addControl(u,t){if(void 0===t&&(t=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=u.onAdd(this);this._controls.push(u);const h=this._controlPositions[t];return-1!==t.indexOf("bottom")?h.insertBefore(l,h.firstChild):h.appendChild(l),this}removeControl(u){if(!u||!u.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(u);return t>-1&&this._controls.splice(t,1),u.onRemove(this),this}hasControl(u){return this._controls.indexOf(u)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(u){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const t=!this._moving;return t&&this.fire(new o.Event("movestart",u)).fire(new o.Event("move",u)),this.fire(new o.Event("resize",u)),t&&this.fire(new o.Event("moveend",u)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(u){return this.transform.setMaxBounds(o.LngLatBounds.convert(u)),this._update()}setMinZoom(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u?this.setZoom(u):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u?this.setZoom(u):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u?this.setPitch(u):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(u){if((u=u??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u?this.setPitch(u):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(u){return this.transform.renderWorldCopies=u,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(u){return"auto"===u?o.window.navigator.language:Array.isArray(u)?0===u.length?void 0:u.map(t=>"auto"===t?o.window.navigator.language:t):u}setLanguage(u){const t=this._parseLanguage(u);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(u){return this.style&&u!==this._worldview?(this._worldview=u,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(u){return this._lazyInitEmptyStyle(),u?"string"==typeof u&&(u={name:u}):u=null,this._useExplicitProjection=!!u,this._prioritizeAndUpdateProjection(u,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const u=this.transform,t=u.projection.name;let l;"globe"===t&&u.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(u.setMercatorFromTransition(),l=!0):"mercator"===t&&u.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(u.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(u,t){return this._updateProjection(u||t||{name:"mercator"})}_updateProjection(u){let t;if(t="globe"===u.name&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(u),this.style.applyProjectionUpdate(),t){this.painter.clearBackgroundTiles();for(const l in this.style._sourceCaches)this.style._sourceCaches[l].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(u){return this.transform.locationPoint3D(o.LngLat.convert(u))}unproject(u){return this.transform.pointLocation3D(o.Point.convert(u))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(u,t,l){if("mouseenter"===u||"mouseover"===u){let h=!1;const _=D=>{const A=t.filter(J=>this.getLayer(J)),B=A.length?this.queryRenderedFeatures(D.point,{layers:A}):[];B.length?h||(h=!0,l.call(this,new mr(u,this,D.originalEvent,{features:B}))):h=!1},b=()=>{h=!1};return{layers:new Set(t),listener:l,delegates:{mousemove:_,mouseout:b}}}if("mouseleave"===u||"mouseout"===u){let h=!1;const _=D=>{const A=t.filter(B=>this.getLayer(B));(A.length?this.queryRenderedFeatures(D.point,{layers:A}):[]).length?h=!0:h&&(h=!1,l.call(this,new mr(u,this,D.originalEvent)))},b=D=>{h&&(h=!1,l.call(this,new mr(u,this,D.originalEvent)))};return{layers:new Set(t),listener:l,delegates:{mousemove:_,mouseout:b}}}{const h=_=>{const b=t.filter(A=>this.getLayer(A)),D=b.length?this.queryRenderedFeatures(_.point,{layers:b}):[];D.length&&(_.features=D,l.call(this,_),delete _.features)};return{layers:new Set(t),listener:l,delegates:{[u]:h}}}}on(u,t,l){if(void 0===l)return super.on(u,t);Array.isArray(t)||(t=[t]);const h=this._createDelegatedListener(u,t,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(h);for(const _ in h.delegates)this.on(_,h.delegates[_]);return this}once(u,t,l){if(void 0===l)return super.once(u,t);Array.isArray(t)||(t=[t]);const h=this._createDelegatedListener(u,t,l);for(const _ in h.delegates)this.once(_,h.delegates[_]);return this}off(u,t,l){if(void 0===l)return super.off(u,t);t=new Set(Array.isArray(t)?t:[t]);const h=(b,D)=>{if(b.size!==D.size)return!1;for(const A of b)if(!D.has(A))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[u]:void 0;return _&&(b=>{for(let D=0;D<b.length;D++){const A=b[D];if(A.listener===l&&h(A.layers,t)){for(const B in A.delegates)this.off(B,A.delegates[B]);return b.splice(D,1),this}}})(_),this}queryRenderedFeatures(u,t){return this.style?(void 0!==t||void 0===u||u instanceof o.Point||Array.isArray(u)||(t=u,u=void 0),this.style.queryRenderedFeatures(u=u||[[0,0],[this.transform.width,this.transform.height]],t=t||{},this.transform)):[]}querySourceFeatures(u,t){return this.style.querySourceFeatures(u,t)}isPointOnSurface(u){const{name:t}=this.transform.projection;return"globe"!==t&&"mercator"!==t&&o.warnOnce(`${t} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(u))}setStyle(u,t){return!1!==(t=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&t.localFontFamily===this._localFontFamily&&this.style&&u?(this._diffStyle(u,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(u,t))}_getUIString(u){const t=this._locale[u];if(null==t)throw new Error(`Missing UI string '${u}'`);return t}_updateStyle(u,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),u&&(this.style=new ds(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof u?this.style.loadURL(u):this.style.loadJSON(u)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ds(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(u,t){if("string"==typeof u){const l=this._requestManager.normalizeStyleURL(u),h=this._requestManager.transformRequest(l,o.ResourceType.Style);o.getJSON(h,(_,b)=>{_?this.fire(new o.ErrorEvent(_)):b&&this._updateDiff(b,t)})}else"object"==typeof u&&this._updateDiff(u,t)}_updateDiff(u,t){try{this.style.setState(u)&&this._update(!0)}catch(l){o.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(u,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(u,t){return this._lazyInitEmptyStyle(),this.style.addSource(u,t),this._update(!0)}isSourceLoaded(u){return!!this.style&&this.style._isSourceCacheLoaded(u)}areTilesLoaded(){const u=this.style&&this.style._sourceCaches;for(const t in u){const l=u[t]._tiles;for(const h in l){const _=l[h];if("loaded"!==_.state&&"errored"!==_.state)return!1}}return!0}addSourceType(u,t,l){this._lazyInitEmptyStyle(),this.style.addSourceType(u,t,l)}removeSource(u){return this.style.removeSource(u),this._updateTerrain(),this._update(!0)}getSource(u){return this.style.getSource(u)}addImage(u,t,{pixelRatio:l=1,sdf:h=!1,stretchX:_,stretchY:b,content:D}={}){if(this._lazyInitEmptyStyle(),t instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&t instanceof o.window.ImageBitmap){const{width:A,height:B,data:J}=o.exported.getImageData(t);this.style.addImage(u,{data:new o.RGBAImage({width:A,height:B},J),pixelRatio:l,stretchX:_,stretchY:b,content:D,sdf:h,version:0})}else if(void 0===t.width||void 0===t.height)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:B}=t,J=t;this.style.addImage(u,{data:new o.RGBAImage({width:A,height:B},new Uint8Array(J.data)),pixelRatio:l,stretchX:_,stretchY:b,content:D,sdf:h,version:0,userImage:J}),J.onAdd&&J.onAdd(this,u)}}updateImage(u,t){const l=this.style.getImage(u);if(!l)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=t instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&t instanceof o.window.ImageBitmap?o.exported.getImageData(t):t,{width:_,height:b}=h;void 0!==_&&void 0!==b?_===l.data.width&&b===l.data.height?(l.data.replace(h.data,!(t instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&t instanceof o.window.ImageBitmap)),this.style.updateImage(u,l)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${b})\n                must be that same as the previous version of the image\n                (${l.data.width}, ${l.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(u){return u?!!this.style.getImage(u):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(u){this.style.removeImage(u)}loadImage(u,t){o.getImage(this._requestManager.transformRequest(u,o.ResourceType.Image),(l,h)=>{t(l,h instanceof o.window.HTMLImageElement?o.exported.getImageData(h):h)})}listImages(){return this.style.listImages()}addLayer(u,t){return this._lazyInitEmptyStyle(),this.style.addLayer(u,t),this._update(!0)}moveLayer(u,t){return this.style.moveLayer(u,t),this._update(!0)}removeLayer(u){return this.style.removeLayer(u),this._update(!0)}getLayer(u){return this.style.getLayer(u)}setLayerZoomRange(u,t,l){return this.style.setLayerZoomRange(u,t,l),this._update(!0)}setFilter(u,t,l={}){return this.style.setFilter(u,t,l),this._update(!0)}getFilter(u){return this.style.getFilter(u)}setPaintProperty(u,t,l,h={}){return this.style.setPaintProperty(u,t,l,h),this._update(!0)}getPaintProperty(u,t){return this.style.getPaintProperty(u,t)}setLayoutProperty(u,t,l,h={}){return this.style.setLayoutProperty(u,t,l,h),this._update(!0)}getLayoutProperty(u,t){return this.style.getLayoutProperty(u,t)}setLight(u,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(u,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(u){return this._lazyInitEmptyStyle(),!u&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(u),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(u){return this._lazyInitEmptyStyle(),this.style.setFog(u),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(u){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(u),this.transform):0}setFeatureState(u,t){return this.style.setFeatureState(u,t),this._update()}removeFeatureState(u,t){return this.style.removeFeatureState(u,t),this._update()}getFeatureState(u){return this.style.getFeatureState(u)}_updateContainerDimensions(){if(!this._container)return;const u=this._container.getBoundingClientRect().width||400,t=this._container.getBoundingClientRect().height||300;let l,h,_,b=this._container;for(;b&&(!h||!_);){const D=o.window.getComputedStyle(b).transform;D&&"none"!==D&&(l=D.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&"0"!==l[0]&&"1"!==l[0]&&(h=l[0]),l[3]&&"0"!==l[3]&&"1"!==l[3]&&(_=l[3])),b=b.parentElement}this._containerWidth=h?Math.abs(u/h):u,this._containerHeight=_?Math.abs(t/_):t}_detectMissingCSS(){"rgb(250, 128, 114)"!==o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ye("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=Ye("div","mapboxgl-canvas-container",u);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=Ye("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=Ye("div","mapboxgl-control-container",u),h=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{h[_]=Ye("div",`mapboxgl-ctrl-${_}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(u,t){const l=o.exported.devicePixelRatio||1;this._canvas.width=l*Math.ceil(u),this._canvas.height=l*Math.ceil(t),this._canvas.style.width=`${u}px`,this._canvas.style.height=`${t}px`}_addMarker(u){this._markers.push(u)}_removeMarker(u){const t=this._markers.indexOf(u);-1!==t&&this._markers.splice(t,1)}_addPopup(u){this._popups.push(u)}_removePopup(u){const t=this._popups.indexOf(u);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const u=o.extend({},st.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._useWebGL2&&this._canvas.getContext("webgl2",u),l=t||this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);l?(this._useWebGL2&&!t&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(l,!0),this.painter=new zs(l,this.transform,!!t),this.on("data",h=>{"source"===h.dataType&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(l)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:u}))}_contextRestored(u){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:u}))}_onMapScroll(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(u){return this._update(),this._renderTaskQueue.add(u)}_cancelRenderFrame(u){this._renderTaskQueue.remove(u)}_requestDomTask(u){!this.loaded()||this.loaded()&&!this.isMoving()?u():this._domRenderTaskQueue.add(u)}_render(u){let t;const l=this.painter.context.extTimerQuery,h=o.exported.now();if(this.listens("gpu-timing-frame")&&(t=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,t)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(u),this._domRenderTaskQueue.run(u),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,B=this.transform.pitch,J=o.exported.now(),K=new o.EvaluationParameters(A,{now:J,fadeDuration:_,pitch:B,transition:this.style.getTransition()});this.style.update(K)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(h),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(h),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),t){const A=o.exported.now()-h;l.endQueryEXT(l.TIME_ELAPSED_EXT,t),setTimeout(()=>{const B=l.getQueryObjectEXT(t,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(t),this.fire(new o.Event("gpu-timing-frame",{cpuTime:A,gpuTime:B})),o.window.performance.mark("frame-gpu",{startTime:h,detail:{gpuTime:B}})},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const B=this.painter.queryGpuTimers(A);this.fire(new o.Event("gpu-timing-layer",{layerTimes:B}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const B=this.painter.queryGpuTimeDeferredRender(A);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:B}))},50)}const D=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(D||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(b=this._updateAverageElevation(h,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const B=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:B})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(u){for(const t of this._markers)u&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!u||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(u,t=!1){const l=h=>(this.transform.averageElevation=h,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&l(0);if((t||u-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(u)){const h=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=u;const D=Math.abs(h-_);if(D>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(_),l(_);this._averageElevation.easeTo(_,u,300)}else if(D>1e-4)return this._averageElevation.jumpTo(_),l(_)}return!!this._averageElevation.isEasing(u)&&l(this._averageElevation.getValue(u))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,u=>{if(u&&(u.message===o.AUTH_ERR_MSG||401===u.status)){const t=this.painter.context.gl;o.storeAuthState(t,!1),this._logoControl instanceof Ed&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const u=this._isDragging();this.painter.updateTerrain(this.style,u)}_calculateSpeedIndex(){const u=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const l=this.painter.context.gl,h=l.createFramebuffer();function _(b){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,b,0);const D=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,D),D}return l.bindFramebuffer(l.FRAMEBUFFER,h),this._canvasPixelComparison(_(u),t.canvasCopies.map(_),t.timeStamps)}_canvasPixelComparison(u,t,l){let h=l[1]-l[0];const _=u.length/4;for(let b=0;b<t.length;b++){const D=t[b];let A=0;for(let B=0;B<D.length;B+=4)D[B]===u[B]&&D[B+1]===u[B+1]&&D[B+2]===u[B+2]&&D[B+3]===u[B+3]&&(A+=1);h+=(l[b+2]-l[b+1])*(1-A/_)}return h}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==o.window&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(u){this._renderNextFrame=this._renderNextFrame||u,this.style&&!this._frame&&(this._frame=o.exported.frame(t=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(t)}))}_preloadTiles(u){const t=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(t,(l,h)=>l._preloadTiles(u,h),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(u){this._trackResize&&this.resize({originalEvent:u})._update()}_onVisibilityChange(){"hidden"===o.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(u){this._showTerrainWireframe!==u&&(this._showTerrainWireframe=u,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(u){this._speedIndexTiming!==u&&(this._speedIndexTiming=u,this._update())}get showPadding(){return!!this._showPadding}set showPadding(u){this._showPadding!==u&&(this._showPadding=u,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())}get repaint(){return!!this._repaint}set repaint(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(u){this._vertices=u,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(u){this._showTileAABBs!==u&&(this._showTileAABBs=u,u&&this._update())}_setCacheLimits(u,t){o.setCacheLimits(u,t)}get version(){return o.version}},NavigationControl:class{constructor(u){this.options=o.extend({},zu,u),this._container=Ye("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>{this._map&&this._map.zoomIn({},{originalEvent:t})}),Ye("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>{this._map&&this._map.zoomOut({},{originalEvent:t})}),Ye("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:t}):l.resetNorth({},{originalEvent:t}))}),this._compassIcon=Ye("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const u=this._map;if(!u)return;const t=u.getZoom(),l=t===u.getMaxZoom(),h=t===u.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const u=this._map;if(!u)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(u.transform.pitch*(Math.PI/180)),.5)}) rotateX(${u.transform.pitch}deg) rotateZ(${u.transform.angle*(180/Math.PI)}deg)`:`rotate(${u.transform.angle*(180/Math.PI)}deg)`;u._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),u.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&u.on("pitch",this._rotateCompassArrow),u.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cu(u,this._compass,this.options.visualizePitch)),this._container}onRemove(){const u=this._map;u&&(this._container.remove(),this.options.showZoom&&u.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&u.off("pitch",this._rotateCompassArrow),u.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(u,t){const l=Ye("button",u,this._container);return l.type="button",l.addEventListener("click",t),l}_setButtonTitle(u,t){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${t}`);u.setAttribute("aria-label",l),u.firstElementChild&&u.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends o.Evented{constructor(u){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},O,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=pn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(u){return this._map=u,this._container=Ye("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(u){const t=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,u(l)};void 0!==this._supportsGeolocation?u(this._supportsGeolocation):void 0!==o.window.navigator.permissions?o.window.navigator.permissions.query({name:"geolocation"}).then(l=>t("denied"!==l.state)).catch(()=>t()):t()}_isOutOfMapMaxBounds(u){const t=this._map.getMaxBounds(),l=u.coords;return!!t&&(l.longitude<t.getWest()||l.longitude>t.getEast()||l.latitude<t.getSouth()||l.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(u),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}}_updateCamera(u){const t=new o.LngLat(u.coords.longitude,u.coords.latitude),l=u.coords.accuracy,h=this._map.getBearing(),_=o.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(l),_,{geolocateSource:!0})}_updateMarker(u){if(u){const t=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const u=this._map.transform,t=o.mercatorZfromAltitude(1,u._center.lat)*u.worldSize,l=Math.ceil(2*this._accuracy*t);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(u){if(this._map){if(this.options.trackUserLocation)if(1===u.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===u.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(u){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=Ye("button","mapboxgl-ctrl-geolocate",this._container),Ye("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===u){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ye("div","mapboxgl-user-location"),this._dotElement.appendChild(Ye("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ye("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new hi({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ye("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(u){this._userLocationDotMarker&&(u.webkitCompassHeading?this._heading=u.webkitCompassHeading:!0===u.absolute&&(this._heading=-1*u.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(u={maximumAge:6e5,timeout:0},this._noTimeout=!0):(u=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,u),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const u=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==o.window.DeviceMotionEvent&&"function"==typeof o.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&u()}).catch(console.error):u()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:gi,ScaleControl:class{constructor(u){this.options=o.extend({},L,u),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const u=this.options.maxWidth||100,t=this._map,l=t._containerHeight/2,h=t._containerWidth/2-u/2,_=t.unproject([h,l]),b=t.unproject([h+u,l]),D=_.distanceTo(b);if("imperial"===this.options.unit){const A=3.2808*D;A>5280?this._setScale(u,A/5280,"mile"):this._setScale(u,A,"foot")}else"nautical"===this.options.unit?this._setScale(u,D/1852,"nautical-mile"):D>=1e3?this._setScale(u,D/1e3,"kilometer"):this._setScale(u,D,"meter")}_setScale(u,t,l){this._map._requestDomTask(()=>{const h=function(b){const D=Math.pow(10,`${Math.floor(b)}`.length-1);let A=b/D;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(B){const J=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*J)/J}(A),D*A}(t),_=h/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==l?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(h):`${h}&nbsp;${T[l]}`,this._container.style.width=u*_+"px"})}onAdd(u){return this._map=u,this._language=u.getLanguage(),this._container=Ye("div","mapboxgl-ctrl mapboxgl-ctrl-scale",u.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(u){this._language=u,this._update()}setUnit(u){this.options.unit=u,this._update()}},FullscreenControl:class{constructor(u){this._fullscreen=!1,u&&u.container&&(u.container instanceof o.window.HTMLElement?this._container=u.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ye("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const u=this._fullscreenButton=Ye("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ye("span","mapboxgl-ctrl-icon",u).setAttribute("aria-hidden","true"),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",u)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(u){super(),this.options=o.extend(Object.create(Ko),u),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(u&&u.className?u.className.trim().split(/\s+/):[])}addTo(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&u.on("preclick",this._onClose),this.options.closeOnMove&&u.on("move",this._onClose),u.on("remove",this.remove),this._update(),u._addPopup(this),this._focusFirstElement(),this._trackPointer?(u.on("mousemove",this._onMouseEvent),u.on("mouseup",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")):u.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const u=this._map;return u&&(u.off("move",this._update),u.off("move",this._onClose),u.off("preclick",this._onClose),u.off("click",this._onClose),u.off("remove",this.remove),u.off("mousemove",this._onMouseEvent),u.off("mouseup",this._onMouseEvent),u.off("drag",this._onMouseEvent),u._canvasContainer&&u._canvasContainer.classList.remove("mapboxgl-track-pointer"),u._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(u){this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update();const t=this._map;return t&&(t.on("move",this._update),t.off("mousemove",this._onMouseEvent),t._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const u=this._map;return u&&(u.off("move",this._update),u.on("mousemove",this._onMouseEvent),u.on("drag",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(u){return this.setDOMContent(o.window.document.createTextNode(u))}setHTML(u){const t=o.window.document.createDocumentFragment(),l=o.window.document.createElement("body");let h;for(l.innerHTML=u;h=l.firstChild,h;)t.appendChild(h);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(u){return this.options.maxWidth=u,this._update(),this}setDOMContent(u){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=Ye("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(u),this.options.closeButton){const l=this._closeButton=Ye("button","mapboxgl-popup-close-button",t);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(u){return this._classList.add(u),this._updateClassList(),this}removeClassName(u){return this._classList.delete(u),this._updateClassList(),this}setOffset(u){return this.options.offset=u,this._update(),this}toggleClassName(u){let t;return this._classList.delete(u)?t=!1:(this._classList.add(u),t=!0),this._updateClassList(),t}_onMouseEvent(u){this._update(u.point)}_getAnchor(u){if(this.options.anchor)return this.options.anchor;const t=this._map,l=this._container,h=this._pos;if(!t||!l||!h)return"bottom";const _=l.offsetWidth,b=l.offsetHeight,D=h.x<_/2,A=h.x>t.transform.width-_/2;if(h.y+u<b)return D?"top-left":A?"top-right":"top";if(h.y>t.transform.height-b){if(D)return"bottom-left";if(A)return"bottom-right"}return D?"left":A?"right":"bottom"}_updateClassList(){const u=this._container;if(!u)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),u.className=t.join(" ")}_update(u){const t=this._map,l=this._content;if(!t||!this._lngLat&&!this._trackPointer||!l)return;let h=this._container;if(h||(h=this._container=Ye("div","mapboxgl-popup",t.getContainer()),this._tip=Ye("div","mapboxgl-popup-tip",h),h.appendChild(l)),this.options.maxWidth&&h.style.maxWidth!==this.options.maxWidth&&(h.style.maxWidth=this.options.maxWidth),t.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=tl(this._lngLat,this._pos,t.transform)),!this._trackPointer||u){const _=this._pos=this._trackPointer&&u?u:t.project(this._lngLat),b=ec(this.options.offset),D=this._anchor=this._getAnchor(b.y),A=ec(this.options.offset,D),B=_.add(A).round();t._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${Ql[D]} translate(${B.x}px,${B.y}px)`)})}if(!this._marker&&t._showingGlobe()){const _=o.isLngLatBehindGlobe(t.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const u=this._container.querySelector(au);u&&u.focus()}_onClose(){this.remove()}_setOpacity(u){this._container&&(this._container.style.opacity=`${u}`),this._content&&(this._content.style.pointerEvents=u?"auto":"none")}},Marker:hi,Style:ds,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:V,Evented:o.Evented,config:o.config,prewarm:function(){Ai().acquire(Et)},clearPrewarmedResources:function(){const u=Gn;u&&(u.isPreloaded()&&1===u.numActive()?(u.release(Et),Gn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(u){o.config.ACCESS_TOKEN=u},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(u){o.config.API_URL=u},get workerCount(){return rn.workerCount},set workerCount(u){rn.workerCount=u},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(u){o.config.MAX_PARALLEL_IMAGE_REQUESTS=u},clearStorage(u){o.clearTileCache(u)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return G}),p}()},1135:(ni,Wt,F)=>{"use strict";F.d(Wt,{X:()=>j});var p=F(7579);class j extends p.x{constructor(o){super(),this._value=o}get value(){return this.getValue()}_subscribe(o){const P=super._subscribe(o);return!P.closed&&o.next(this._value),P}getValue(){const{hasError:o,thrownError:P,_value:st}=this;if(o)throw P;return this._throwIfClosed(),st}next(o){super.next(this._value=o)}}},9751:(ni,Wt,F)=>{"use strict";F.d(Wt,{y:()=>ke});var p=F(930),j=F(727),Q=F(8822),o=F(9635),P=F(2416),st=F(576),_t=F(2806);let ke=(()=>{class it{constructor(pt){pt&&(this._subscribe=pt)}lift(pt){const jt=new it;return jt.source=this,jt.operator=pt,jt}subscribe(pt,jt,en){const Ct=function wt(it){return it&&it instanceof p.Lv||function lt(it){return it&&(0,st.m)(it.next)&&(0,st.m)(it.error)&&(0,st.m)(it.complete)}(it)&&(0,j.Nn)(it)}(pt)?pt:new p.Hp(pt,jt,en);return(0,_t.x)(()=>{const{operator:nn,source:sn}=this;Ct.add(nn?nn.call(Ct,sn):sn?this._subscribe(Ct):this._trySubscribe(Ct))}),Ct}_trySubscribe(pt){try{return this._subscribe(pt)}catch(jt){pt.error(jt)}}forEach(pt,jt){return new(jt=Ye(jt))((en,Ct)=>{const nn=new p.Hp({next:sn=>{try{pt(sn)}catch(Cn){Ct(Cn),nn.unsubscribe()}},error:Ct,complete:en});this.subscribe(nn)})}_subscribe(pt){var jt;return null===(jt=this.source)||void 0===jt?void 0:jt.subscribe(pt)}[Q.L](){return this}pipe(...pt){return(0,o.U)(pt)(this)}toPromise(pt){return new(pt=Ye(pt))((jt,en)=>{let Ct;this.subscribe(nn=>Ct=nn,nn=>en(nn),()=>jt(Ct))})}}return it.create=yt=>new it(yt),it})();function Ye(it){var yt;return null!==(yt=it??P.v.Promise)&&void 0!==yt?yt:Promise}},7579:(ni,Wt,F)=>{"use strict";F.d(Wt,{x:()=>_t});var p=F(9751),j=F(727);const o=(0,F(3888).d)(Ye=>function(){Ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var P=F(8737),st=F(2806);let _t=(()=>{class Ye extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(wt){const it=new ke(this,this);return it.operator=wt,it}_throwIfClosed(){if(this.closed)throw new o}next(wt){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const it of this.currentObservers)it.next(wt)}})}error(wt){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=wt;const{observers:it}=this;for(;it.length;)it.shift().error(wt)}})}complete(){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:wt}=this;for(;wt.length;)wt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var wt;return(null===(wt=this.observers)||void 0===wt?void 0:wt.length)>0}_trySubscribe(wt){return this._throwIfClosed(),super._trySubscribe(wt)}_subscribe(wt){return this._throwIfClosed(),this._checkFinalizedStatuses(wt),this._innerSubscribe(wt)}_innerSubscribe(wt){const{hasError:it,isStopped:yt,observers:pt}=this;return it||yt?j.Lc:(this.currentObservers=null,pt.push(wt),new j.w0(()=>{this.currentObservers=null,(0,P.P)(pt,wt)}))}_checkFinalizedStatuses(wt){const{hasError:it,thrownError:yt,isStopped:pt}=this;it?wt.error(yt):pt&&wt.complete()}asObservable(){const wt=new p.y;return wt.source=this,wt}}return Ye.create=(lt,wt)=>new ke(lt,wt),Ye})();class ke extends _t{constructor(lt,wt){super(),this.destination=lt,this.source=wt}next(lt){var wt,it;null===(it=null===(wt=this.destination)||void 0===wt?void 0:wt.next)||void 0===it||it.call(wt,lt)}error(lt){var wt,it;null===(it=null===(wt=this.destination)||void 0===wt?void 0:wt.error)||void 0===it||it.call(wt,lt)}complete(){var lt,wt;null===(wt=null===(lt=this.destination)||void 0===lt?void 0:lt.complete)||void 0===wt||wt.call(lt)}_subscribe(lt){var wt,it;return null!==(it=null===(wt=this.source)||void 0===wt?void 0:wt.subscribe(lt))&&void 0!==it?it:j.Lc}}},930:(ni,Wt,F)=>{"use strict";F.d(Wt,{Hp:()=>en,Lv:()=>it});var p=F(576),j=F(727),Q=F(2416),o=F(7849),P=F(5032);const st=Ye("C",void 0,void 0);function Ye(kt,Ae,ct){return{kind:kt,value:Ae,error:ct}}var lt=F(3410),wt=F(2806);class it extends j.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,j.Nn)(Ae)&&Ae.add(this)):this.destination=Cn}static create(Ae,ct,ht){return new en(Ae,ct,ht)}next(Ae){this.isStopped?sn(function ke(kt){return Ye("N",kt,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?sn(function _t(kt){return Ye("E",void 0,kt)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?sn(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function pt(kt,Ae){return yt.call(kt,Ae)}class jt{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:ct}=this;if(ct.next)try{ct.next(Ae)}catch(ht){Ct(ht)}}error(Ae){const{partialObserver:ct}=this;if(ct.error)try{ct.error(Ae)}catch(ht){Ct(ht)}else Ct(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(ct){Ct(ct)}}}class en extends it{constructor(Ae,ct,ht){let mt;if(super(),(0,p.m)(Ae)||!Ae)mt={next:Ae??void 0,error:ct??void 0,complete:ht??void 0};else{let Je;this&&Q.v.useDeprecatedNextContext?(Je=Object.create(Ae),Je.unsubscribe=()=>this.unsubscribe(),mt={next:Ae.next&&pt(Ae.next,Je),error:Ae.error&&pt(Ae.error,Je),complete:Ae.complete&&pt(Ae.complete,Je)}):mt=Ae}this.destination=new jt(mt)}}function Ct(kt){Q.v.useDeprecatedSynchronousErrorHandling?(0,wt.O)(kt):(0,o.h)(kt)}function sn(kt,Ae){const{onStoppedNotification:ct}=Q.v;ct&&lt.z.setTimeout(()=>ct(kt,Ae))}const Cn={closed:!0,next:P.Z,error:function nn(kt){throw kt},complete:P.Z}},727:(ni,Wt,F)=>{"use strict";F.d(Wt,{Lc:()=>st,w0:()=>P,Nn:()=>_t});var p=F(576);const Q=(0,F(3888).d)(Ye=>function(wt){Ye(this),this.message=wt?`${wt.length} errors occurred during unsubscription:\n${wt.map((it,yt)=>`${yt+1}) ${it.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=wt});var o=F(8737);class P{constructor(lt){this.initialTeardown=lt,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let lt;if(!this.closed){this.closed=!0;const{_parentage:wt}=this;if(wt)if(this._parentage=null,Array.isArray(wt))for(const pt of wt)pt.remove(this);else wt.remove(this);const{initialTeardown:it}=this;if((0,p.m)(it))try{it()}catch(pt){lt=pt instanceof Q?pt.errors:[pt]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const pt of yt)try{ke(pt)}catch(jt){lt=lt??[],jt instanceof Q?lt=[...lt,...jt.errors]:lt.push(jt)}}if(lt)throw new Q(lt)}}add(lt){var wt;if(lt&&lt!==this)if(this.closed)ke(lt);else{if(lt instanceof P){if(lt.closed||lt._hasParent(this))return;lt._addParent(this)}(this._finalizers=null!==(wt=this._finalizers)&&void 0!==wt?wt:[]).push(lt)}}_hasParent(lt){const{_parentage:wt}=this;return wt===lt||Array.isArray(wt)&&wt.includes(lt)}_addParent(lt){const{_parentage:wt}=this;this._parentage=Array.isArray(wt)?(wt.push(lt),wt):wt?[wt,lt]:lt}_removeParent(lt){const{_parentage:wt}=this;wt===lt?this._parentage=null:Array.isArray(wt)&&(0,o.P)(wt,lt)}remove(lt){const{_finalizers:wt}=this;wt&&(0,o.P)(wt,lt),lt instanceof P&&lt._removeParent(this)}}P.EMPTY=(()=>{const Ye=new P;return Ye.closed=!0,Ye})();const st=P.EMPTY;function _t(Ye){return Ye instanceof P||Ye&&"closed"in Ye&&(0,p.m)(Ye.remove)&&(0,p.m)(Ye.add)&&(0,p.m)(Ye.unsubscribe)}function ke(Ye){(0,p.m)(Ye)?Ye():Ye.unsubscribe()}},2416:(ni,Wt,F)=>{"use strict";F.d(Wt,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(ni,Wt,F)=>{"use strict";F.d(Wt,{c:()=>st});var p=F(9751),j=F(727),Q=F(8343),o=F(5403),P=F(4482);class st extends p.y{constructor(ke,Ye){super(),this.source=ke,this.subjectFactory=Ye,this._subject=null,this._refCount=0,this._connection=null,(0,P.A)(ke)&&(this.lift=ke.lift)}_subscribe(ke){return this.getSubject().subscribe(ke)}getSubject(){const ke=this._subject;return(!ke||ke.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ke}=this;this._subject=this._connection=null,ke?.unsubscribe()}connect(){let ke=this._connection;if(!ke){ke=this._connection=new j.w0;const Ye=this.getSubject();ke.add(this.source.subscribe((0,o.x)(Ye,void 0,()=>{this._teardown(),Ye.complete()},lt=>{this._teardown(),Ye.error(lt)},()=>this._teardown()))),ke.closed&&(this._connection=null,ke=j.w0.EMPTY)}return ke}refCount(){return(0,Q.x)()(this)}}},9841:(ni,Wt,F)=>{"use strict";F.d(Wt,{a:()=>lt});var p=F(9751),j=F(4742),Q=F(2076),o=F(4671),P=F(3268),st=F(3269),_t=F(1810),ke=F(5403),Ye=F(9672);function lt(...yt){const pt=(0,st.yG)(yt),jt=(0,st.jO)(yt),{args:en,keys:Ct}=(0,j.D)(yt);if(0===en.length)return(0,Q.D)([],pt);const nn=new p.y(function wt(yt,pt,jt=o.y){return en=>{it(pt,()=>{const{length:Ct}=yt,nn=new Array(Ct);let sn=Ct,Cn=Ct;for(let kt=0;kt<Ct;kt++)it(pt,()=>{const Ae=(0,Q.D)(yt[kt],pt);let ct=!1;Ae.subscribe((0,ke.x)(en,ht=>{nn[kt]=ht,ct||(ct=!0,Cn--),Cn||en.next(jt(nn.slice()))},()=>{--sn||en.complete()}))},en)},en)}}(en,pt,Ct?sn=>(0,_t.n)(Ct,sn):o.y));return jt?nn.pipe((0,P.Z)(jt)):nn}function it(yt,pt,jt){yt?(0,Ye.f)(jt,yt,pt):pt()}},7272:(ni,Wt,F)=>{"use strict";F.d(Wt,{z:()=>P});var p=F(8189),Q=F(3269),o=F(2076);function P(...st){return function j(){return(0,p.J)(1)}()((0,o.D)(st,(0,Q.yG)(st)))}},9770:(ni,Wt,F)=>{"use strict";F.d(Wt,{P:()=>Q});var p=F(9751),j=F(8421);function Q(o){return new p.y(P=>{(0,j.Xf)(o()).subscribe(P)})}},515:(ni,Wt,F)=>{"use strict";F.d(Wt,{E:()=>j});const j=new(F(9751).y)(P=>P.complete())},4128:(ni,Wt,F)=>{"use strict";F.d(Wt,{D:()=>ke});var p=F(9751),j=F(4742),Q=F(8421),o=F(3269),P=F(5403),st=F(3268),_t=F(1810);function ke(...Ye){const lt=(0,o.jO)(Ye),{args:wt,keys:it}=(0,j.D)(Ye),yt=new p.y(pt=>{const{length:jt}=wt;if(!jt)return void pt.complete();const en=new Array(jt);let Ct=jt,nn=jt;for(let sn=0;sn<jt;sn++){let Cn=!1;(0,Q.Xf)(wt[sn]).subscribe((0,P.x)(pt,kt=>{Cn||(Cn=!0,nn--),en[sn]=kt},()=>Ct--,void 0,()=>{(!Ct||!Cn)&&(nn||pt.next(it?(0,_t.n)(it,en):en),pt.complete())}))}});return lt?yt.pipe((0,st.Z)(lt)):yt}},2076:(ni,Wt,F)=>{"use strict";F.d(Wt,{D:()=>ht});var p=F(8421),j=F(9672),Q=F(4482),o=F(5403);function P(mt,Je=0){return(0,Q.e)((qt,ln)=>{qt.subscribe((0,o.x)(ln,Dn=>(0,j.f)(ln,mt,()=>ln.next(Dn),Je),()=>(0,j.f)(ln,mt,()=>ln.complete(),Je),Dn=>(0,j.f)(ln,mt,()=>ln.error(Dn),Je)))})}function st(mt,Je=0){return(0,Q.e)((qt,ln)=>{ln.add(mt.schedule(()=>qt.subscribe(ln),Je))})}var Ye=F(9751),wt=F(2202),it=F(576);function pt(mt,Je){if(!mt)throw new Error("Iterable cannot be null");return new Ye.y(qt=>{(0,j.f)(qt,Je,()=>{const ln=mt[Symbol.asyncIterator]();(0,j.f)(qt,Je,()=>{ln.next().then(Dn=>{Dn.done?qt.complete():qt.next(Dn.value)})},0,!0)})})}var jt=F(3670),en=F(8239),Ct=F(1144),nn=F(6495),sn=F(2206),Cn=F(4532),kt=F(3260);function ht(mt,Je){return Je?function ct(mt,Je){if(null!=mt){if((0,jt.c)(mt))return function _t(mt,Je){return(0,p.Xf)(mt).pipe(st(Je),P(Je))}(mt,Je);if((0,Ct.z)(mt))return function lt(mt,Je){return new Ye.y(qt=>{let ln=0;return Je.schedule(function(){ln===mt.length?qt.complete():(qt.next(mt[ln++]),qt.closed||this.schedule())})})}(mt,Je);if((0,en.t)(mt))return function ke(mt,Je){return(0,p.Xf)(mt).pipe(st(Je),P(Je))}(mt,Je);if((0,sn.D)(mt))return pt(mt,Je);if((0,nn.T)(mt))return function yt(mt,Je){return new Ye.y(qt=>{let ln;return(0,j.f)(qt,Je,()=>{ln=mt[wt.h](),(0,j.f)(qt,Je,()=>{let Dn,ti;try{({value:Dn,done:ti}=ln.next())}catch(_n){return void qt.error(_n)}ti?qt.complete():qt.next(Dn)},0,!0)}),()=>(0,it.m)(ln?.return)&&ln.return()})}(mt,Je);if((0,kt.L)(mt))return function Ae(mt,Je){return pt((0,kt.Q)(mt),Je)}(mt,Je)}throw(0,Cn.z)(mt)}(mt,Je):(0,p.Xf)(mt)}},4968:(ni,Wt,F)=>{"use strict";F.d(Wt,{R:()=>lt});var p=F(8421),j=F(9751),Q=F(5577),o=F(1144),P=F(576),st=F(3268);const _t=["addListener","removeListener"],ke=["addEventListener","removeEventListener"],Ye=["on","off"];function lt(jt,en,Ct,nn){if((0,P.m)(Ct)&&(nn=Ct,Ct=void 0),nn)return lt(jt,en,Ct).pipe((0,st.Z)(nn));const[sn,Cn]=function pt(jt){return(0,P.m)(jt.addEventListener)&&(0,P.m)(jt.removeEventListener)}(jt)?ke.map(kt=>Ae=>jt[kt](en,Ae,Ct)):function it(jt){return(0,P.m)(jt.addListener)&&(0,P.m)(jt.removeListener)}(jt)?_t.map(wt(jt,en)):function yt(jt){return(0,P.m)(jt.on)&&(0,P.m)(jt.off)}(jt)?Ye.map(wt(jt,en)):[];if(!sn&&(0,o.z)(jt))return(0,Q.z)(kt=>lt(kt,en,Ct))((0,p.Xf)(jt));if(!sn)throw new TypeError("Invalid event target");return new j.y(kt=>{const Ae=(...ct)=>kt.next(1<ct.length?ct:ct[0]);return sn(Ae),()=>Cn(Ae)})}function wt(jt,en){return Ct=>nn=>jt[Ct](en,nn)}},8421:(ni,Wt,F)=>{"use strict";F.d(Wt,{Xf:()=>yt});var p=F(7582),j=F(1144),Q=F(8239),o=F(9751),P=F(3670),st=F(2206),_t=F(4532),ke=F(6495),Ye=F(3260),lt=F(576),wt=F(7849),it=F(8822);function yt(kt){if(kt instanceof o.y)return kt;if(null!=kt){if((0,P.c)(kt))return function pt(kt){return new o.y(Ae=>{const ct=kt[it.L]();if((0,lt.m)(ct.subscribe))return ct.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(kt);if((0,j.z)(kt))return function jt(kt){return new o.y(Ae=>{for(let ct=0;ct<kt.length&&!Ae.closed;ct++)Ae.next(kt[ct]);Ae.complete()})}(kt);if((0,Q.t)(kt))return function en(kt){return new o.y(Ae=>{kt.then(ct=>{Ae.closed||(Ae.next(ct),Ae.complete())},ct=>Ae.error(ct)).then(null,wt.h)})}(kt);if((0,st.D)(kt))return nn(kt);if((0,ke.T)(kt))return function Ct(kt){return new o.y(Ae=>{for(const ct of kt)if(Ae.next(ct),Ae.closed)return;Ae.complete()})}(kt);if((0,Ye.L)(kt))return function sn(kt){return nn((0,Ye.Q)(kt))}(kt)}throw(0,_t.z)(kt)}function nn(kt){return new o.y(Ae=>{(function Cn(kt,Ae){var ct,ht,mt,Je;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ct=(0,p.KL)(kt);!(ht=yield ct.next()).done;)if(Ae.next(ht.value),Ae.closed)return}catch(qt){mt={error:qt}}finally{try{ht&&!ht.done&&(Je=ct.return)&&(yield Je.call(ct))}finally{if(mt)throw mt.error}}Ae.complete()})})(kt,Ae).catch(ct=>Ae.error(ct))})}},6451:(ni,Wt,F)=>{"use strict";F.d(Wt,{T:()=>st});var p=F(8189),j=F(8421),Q=F(515),o=F(3269),P=F(2076);function st(..._t){const ke=(0,o.yG)(_t),Ye=(0,o._6)(_t,1/0),lt=_t;return lt.length?1===lt.length?(0,j.Xf)(lt[0]):(0,p.J)(Ye)((0,P.D)(lt,ke)):Q.E}},9646:(ni,Wt,F)=>{"use strict";F.d(Wt,{of:()=>Q});var p=F(3269),j=F(2076);function Q(...o){const P=(0,p.yG)(o);return(0,j.D)(o,P)}},2843:(ni,Wt,F)=>{"use strict";F.d(Wt,{_:()=>Q});var p=F(9751),j=F(576);function Q(o,P){const st=(0,j.m)(o)?o:()=>o,_t=ke=>ke.error(st());return new p.y(P?ke=>P.schedule(_t,0,ke):_t)}},5963:(ni,Wt,F)=>{"use strict";F.d(Wt,{H:()=>P});var p=F(9751),j=F(4986),Q=F(3532);function P(st=0,_t,ke=j.P){let Ye=-1;return null!=_t&&((0,Q.K)(_t)?ke=_t:Ye=_t),new p.y(lt=>{let wt=function o(st){return st instanceof Date&&!isNaN(st)}(st)?+st-ke.now():st;wt<0&&(wt=0);let it=0;return ke.schedule(function(){lt.closed||(lt.next(it++),0<=Ye?this.schedule(void 0,Ye):lt.complete())},wt)})}},5403:(ni,Wt,F)=>{"use strict";F.d(Wt,{x:()=>j});var p=F(930);function j(o,P,st,_t,ke){return new Q(o,P,st,_t,ke)}class Q extends p.Lv{constructor(P,st,_t,ke,Ye,lt){super(P),this.onFinalize=Ye,this.shouldUnsubscribe=lt,this._next=st?function(wt){try{st(wt)}catch(it){P.error(it)}}:super._next,this._error=ke?function(wt){try{ke(wt)}catch(it){P.error(it)}finally{this.unsubscribe()}}:super._error,this._complete=_t?function(){try{_t()}catch(wt){P.error(wt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var P;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:st}=this;super.unsubscribe(),!st&&(null===(P=this.onFinalize)||void 0===P||P.call(this))}}}},262:(ni,Wt,F)=>{"use strict";F.d(Wt,{K:()=>o});var p=F(8421),j=F(5403),Q=F(4482);function o(P){return(0,Q.e)((st,_t)=>{let lt,ke=null,Ye=!1;ke=st.subscribe((0,j.x)(_t,void 0,void 0,wt=>{lt=(0,p.Xf)(P(wt,o(P)(st))),ke?(ke.unsubscribe(),ke=null,lt.subscribe(_t)):Ye=!0})),Ye&&(ke.unsubscribe(),ke=null,lt.subscribe(_t))})}},4351:(ni,Wt,F)=>{"use strict";F.d(Wt,{b:()=>Q});var p=F(5577),j=F(576);function Q(o,P){return(0,j.m)(P)?(0,p.z)(o,P,1):(0,p.z)(o,1)}},8372:(ni,Wt,F)=>{"use strict";F.d(Wt,{b:()=>o});var p=F(4986),j=F(4482),Q=F(5403);function o(P,st=p.z){return(0,j.e)((_t,ke)=>{let Ye=null,lt=null,wt=null;const it=()=>{if(Ye){Ye.unsubscribe(),Ye=null;const pt=lt;lt=null,ke.next(pt)}};function yt(){const pt=wt+P,jt=st.now();if(jt<pt)return Ye=this.schedule(void 0,pt-jt),void ke.add(Ye);it()}_t.subscribe((0,Q.x)(ke,pt=>{lt=pt,wt=st.now(),Ye||(Ye=st.schedule(yt,P),ke.add(Ye))},()=>{it(),ke.complete()},void 0,()=>{lt=Ye=null}))})}},1884:(ni,Wt,F)=>{"use strict";F.d(Wt,{x:()=>o});var p=F(4671),j=F(4482),Q=F(5403);function o(st,_t=p.y){return st=st??P,(0,j.e)((ke,Ye)=>{let lt,wt=!0;ke.subscribe((0,Q.x)(Ye,it=>{const yt=_t(it);(wt||!st(lt,yt))&&(wt=!1,lt=yt,Ye.next(it))}))})}function P(st,_t){return st===_t}},9300:(ni,Wt,F)=>{"use strict";F.d(Wt,{h:()=>Q});var p=F(4482),j=F(5403);function Q(o,P){return(0,p.e)((st,_t)=>{let ke=0;st.subscribe((0,j.x)(_t,Ye=>o.call(P,Ye,ke++)&&_t.next(Ye)))})}},8746:(ni,Wt,F)=>{"use strict";F.d(Wt,{x:()=>j});var p=F(4482);function j(Q){return(0,p.e)((o,P)=>{try{o.subscribe(P)}finally{P.add(Q)}})}},4004:(ni,Wt,F)=>{"use strict";F.d(Wt,{U:()=>Q});var p=F(4482),j=F(5403);function Q(o,P){return(0,p.e)((st,_t)=>{let ke=0;st.subscribe((0,j.x)(_t,Ye=>{_t.next(o.call(P,Ye,ke++))}))})}},9718:(ni,Wt,F)=>{"use strict";F.d(Wt,{h:()=>j});var p=F(4004);function j(Q){return(0,p.U)(()=>Q)}},8189:(ni,Wt,F)=>{"use strict";F.d(Wt,{J:()=>Q});var p=F(5577),j=F(4671);function Q(o=1/0){return(0,p.z)(j.y,o)}},5577:(ni,Wt,F)=>{"use strict";F.d(Wt,{z:()=>ke});var p=F(4004),j=F(8421),Q=F(4482),o=F(9672),P=F(5403),_t=F(576);function ke(Ye,lt,wt=1/0){return(0,_t.m)(lt)?ke((it,yt)=>(0,p.U)((pt,jt)=>lt(it,pt,yt,jt))((0,j.Xf)(Ye(it,yt))),wt):("number"==typeof lt&&(wt=lt),(0,Q.e)((it,yt)=>function st(Ye,lt,wt,it,yt,pt,jt,en){const Ct=[];let nn=0,sn=0,Cn=!1;const kt=()=>{Cn&&!Ct.length&&!nn&&lt.complete()},Ae=ht=>nn<it?ct(ht):Ct.push(ht),ct=ht=>{pt&&lt.next(ht),nn++;let mt=!1;(0,j.Xf)(wt(ht,sn++)).subscribe((0,P.x)(lt,Je=>{yt?.(Je),pt?Ae(Je):lt.next(Je)},()=>{mt=!0},void 0,()=>{if(mt)try{for(nn--;Ct.length&&nn<it;){const Je=Ct.shift();jt?(0,o.f)(lt,jt,()=>ct(Je)):ct(Je)}kt()}catch(Je){lt.error(Je)}}))};return Ye.subscribe((0,P.x)(lt,Ae,()=>{Cn=!0,kt()})),()=>{en?.()}}(it,yt,Ye,wt)))}},8343:(ni,Wt,F)=>{"use strict";F.d(Wt,{x:()=>Q});var p=F(4482),j=F(5403);function Q(){return(0,p.e)((o,P)=>{let st=null;o._refCount++;const _t=(0,j.x)(P,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(st=null);const ke=o._connection,Ye=st;st=null,ke&&(!Ye||ke===Ye)&&ke.unsubscribe(),P.unsubscribe()});o.subscribe(_t),_t.closed||(st=o.connect())})}},3099:(ni,Wt,F)=>{"use strict";F.d(Wt,{B:()=>P});var p=F(8421),j=F(7579),Q=F(930),o=F(4482);function P(_t={}){const{connector:ke=(()=>new j.x),resetOnError:Ye=!0,resetOnComplete:lt=!0,resetOnRefCountZero:wt=!0}=_t;return it=>{let yt,pt,jt,en=0,Ct=!1,nn=!1;const sn=()=>{pt?.unsubscribe(),pt=void 0},Cn=()=>{sn(),yt=jt=void 0,Ct=nn=!1},kt=()=>{const Ae=yt;Cn(),Ae?.unsubscribe()};return(0,o.e)((Ae,ct)=>{en++,!nn&&!Ct&&sn();const ht=jt=jt??ke();ct.add(()=>{en--,0===en&&!nn&&!Ct&&(pt=st(kt,wt))}),ht.subscribe(ct),!yt&&en>0&&(yt=new Q.Hp({next:mt=>ht.next(mt),error:mt=>{nn=!0,sn(),pt=st(Cn,Ye,mt),ht.error(mt)},complete:()=>{Ct=!0,sn(),pt=st(Cn,lt),ht.complete()}}),(0,p.Xf)(Ae).subscribe(yt))})(it)}}function st(_t,ke,...Ye){if(!0===ke)return void _t();if(!1===ke)return;const lt=new Q.Hp({next:()=>{lt.unsubscribe(),_t()}});return(0,p.Xf)(ke(...Ye)).subscribe(lt)}},8675:(ni,Wt,F)=>{"use strict";F.d(Wt,{O:()=>o});var p=F(7272),j=F(3269),Q=F(4482);function o(...P){const st=(0,j.yG)(P);return(0,Q.e)((_t,ke)=>{(st?(0,p.z)(P,_t,st):(0,p.z)(P,_t)).subscribe(ke)})}},3900:(ni,Wt,F)=>{"use strict";F.d(Wt,{w:()=>o});var p=F(8421),j=F(4482),Q=F(5403);function o(P,st){return(0,j.e)((_t,ke)=>{let Ye=null,lt=0,wt=!1;const it=()=>wt&&!Ye&&ke.complete();_t.subscribe((0,Q.x)(ke,yt=>{Ye?.unsubscribe();let pt=0;const jt=lt++;(0,p.Xf)(P(yt,jt)).subscribe(Ye=(0,Q.x)(ke,en=>ke.next(st?st(yt,en,jt,pt++):en),()=>{Ye=null,it()}))},()=>{wt=!0,it()}))})}},5698:(ni,Wt,F)=>{"use strict";F.d(Wt,{q:()=>o});var p=F(515),j=F(4482),Q=F(5403);function o(P){return P<=0?()=>p.E:(0,j.e)((st,_t)=>{let ke=0;st.subscribe((0,Q.x)(_t,Ye=>{++ke<=P&&(_t.next(Ye),P<=ke&&_t.complete())}))})}},2722:(ni,Wt,F)=>{"use strict";F.d(Wt,{R:()=>P});var p=F(4482),j=F(5403),Q=F(8421),o=F(5032);function P(st){return(0,p.e)((_t,ke)=>{(0,Q.Xf)(st).subscribe((0,j.x)(ke,()=>ke.complete(),o.Z)),!ke.closed&&_t.subscribe(ke)})}},2529:(ni,Wt,F)=>{"use strict";F.d(Wt,{o:()=>Q});var p=F(4482),j=F(5403);function Q(o,P=!1){return(0,p.e)((st,_t)=>{let ke=0;st.subscribe((0,j.x)(_t,Ye=>{const lt=o(Ye,ke++);(lt||P)&&_t.next(Ye),!lt&&_t.complete()}))})}},8505:(ni,Wt,F)=>{"use strict";F.d(Wt,{b:()=>P});var p=F(576),j=F(4482),Q=F(5403),o=F(4671);function P(st,_t,ke){const Ye=(0,p.m)(st)||_t||ke?{next:st,error:_t,complete:ke}:st;return Ye?(0,j.e)((lt,wt)=>{var it;null===(it=Ye.subscribe)||void 0===it||it.call(Ye);let yt=!0;lt.subscribe((0,Q.x)(wt,pt=>{var jt;null===(jt=Ye.next)||void 0===jt||jt.call(Ye,pt),wt.next(pt)},()=>{var pt;yt=!1,null===(pt=Ye.complete)||void 0===pt||pt.call(Ye),wt.complete()},pt=>{var jt;yt=!1,null===(jt=Ye.error)||void 0===jt||jt.call(Ye,pt),wt.error(pt)},()=>{var pt,jt;yt&&(null===(pt=Ye.unsubscribe)||void 0===pt||pt.call(Ye)),null===(jt=Ye.finalize)||void 0===jt||jt.call(Ye)}))}):o.y}},4408:(ni,Wt,F)=>{"use strict";F.d(Wt,{o:()=>P});var p=F(727);class j extends p.w0{constructor(_t,ke){super()}schedule(_t,ke=0){return this}}const Q={setInterval(st,_t,...ke){const{delegate:Ye}=Q;return Ye?.setInterval?Ye.setInterval(st,_t,...ke):setInterval(st,_t,...ke)},clearInterval(st){const{delegate:_t}=Q;return(_t?.clearInterval||clearInterval)(st)},delegate:void 0};var o=F(8737);class P extends j{constructor(_t,ke){super(_t,ke),this.scheduler=_t,this.work=ke,this.pending=!1}schedule(_t,ke=0){var Ye;if(this.closed)return this;this.state=_t;const lt=this.id,wt=this.scheduler;return null!=lt&&(this.id=this.recycleAsyncId(wt,lt,ke)),this.pending=!0,this.delay=ke,this.id=null!==(Ye=this.id)&&void 0!==Ye?Ye:this.requestAsyncId(wt,this.id,ke),this}requestAsyncId(_t,ke,Ye=0){return Q.setInterval(_t.flush.bind(_t,this),Ye)}recycleAsyncId(_t,ke,Ye=0){if(null!=Ye&&this.delay===Ye&&!1===this.pending)return ke;null!=ke&&Q.clearInterval(ke)}execute(_t,ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ye=this._execute(_t,ke);if(Ye)return Ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_t,ke){let lt,Ye=!1;try{this.work(_t)}catch(wt){Ye=!0,lt=wt||new Error("Scheduled action threw falsy error")}if(Ye)return this.unsubscribe(),lt}unsubscribe(){if(!this.closed){const{id:_t,scheduler:ke}=this,{actions:Ye}=ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(Ye,this),null!=_t&&(this.id=this.recycleAsyncId(ke,_t,null)),this.delay=null,super.unsubscribe()}}}},640:(ni,Wt,F)=>{"use strict";F.d(Wt,{v:()=>Q});const p={now:()=>(p.delegate||Date).now(),delegate:void 0};class j{constructor(P,st=j.now){this.schedulerActionCtor=P,this.now=st}schedule(P,st=0,_t){return new this.schedulerActionCtor(this,P).schedule(_t,st)}}j.now=p.now;class Q extends j{constructor(P,st=j.now){super(P,st),this.actions=[],this._active=!1}flush(P){const{actions:st}=this;if(this._active)return void st.push(P);let _t;this._active=!0;do{if(_t=P.execute(P.state,P.delay))break}while(P=st.shift());if(this._active=!1,_t){for(;P=st.shift();)P.unsubscribe();throw _t}}}},4986:(ni,Wt,F)=>{"use strict";F.d(Wt,{P:()=>o,z:()=>Q});var p=F(4408);const Q=new(F(640).v)(p.o),o=Q},3410:(ni,Wt,F)=>{"use strict";F.d(Wt,{z:()=>p});const p={setTimeout(j,Q,...o){const{delegate:P}=p;return P?.setTimeout?P.setTimeout(j,Q,...o):setTimeout(j,Q,...o)},clearTimeout(j){const{delegate:Q}=p;return(Q?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(ni,Wt,F)=>{"use strict";F.d(Wt,{h:()=>j});const j=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ni,Wt,F)=>{"use strict";F.d(Wt,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ni,Wt,F)=>{"use strict";F.d(Wt,{_6:()=>st,jO:()=>o,yG:()=>P});var p=F(576),j=F(3532);function Q(_t){return _t[_t.length-1]}function o(_t){return(0,p.m)(Q(_t))?_t.pop():void 0}function P(_t){return(0,j.K)(Q(_t))?_t.pop():void 0}function st(_t,ke){return"number"==typeof Q(_t)?_t.pop():ke}},4742:(ni,Wt,F)=>{"use strict";F.d(Wt,{D:()=>P});const{isArray:p}=Array,{getPrototypeOf:j,prototype:Q,keys:o}=Object;function P(_t){if(1===_t.length){const ke=_t[0];if(p(ke))return{args:ke,keys:null};if(function st(_t){return _t&&"object"==typeof _t&&j(_t)===Q}(ke)){const Ye=o(ke);return{args:Ye.map(lt=>ke[lt]),keys:Ye}}}return{args:_t,keys:null}}},8737:(ni,Wt,F)=>{"use strict";function p(j,Q){if(j){const o=j.indexOf(Q);0<=o&&j.splice(o,1)}}F.d(Wt,{P:()=>p})},3888:(ni,Wt,F)=>{"use strict";function p(j){const o=j(P=>{Error.call(P),P.stack=(new Error).stack});return o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o}F.d(Wt,{d:()=>p})},1810:(ni,Wt,F)=>{"use strict";function p(j,Q){return j.reduce((o,P,st)=>(o[P]=Q[st],o),{})}F.d(Wt,{n:()=>p})},2806:(ni,Wt,F)=>{"use strict";F.d(Wt,{O:()=>o,x:()=>Q});var p=F(2416);let j=null;function Q(P){if(p.v.useDeprecatedSynchronousErrorHandling){const st=!j;if(st&&(j={errorThrown:!1,error:null}),P(),st){const{errorThrown:_t,error:ke}=j;if(j=null,_t)throw ke}}else P()}function o(P){p.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=P)}},9672:(ni,Wt,F)=>{"use strict";function p(j,Q,o,P=0,st=!1){const _t=Q.schedule(function(){o(),st?j.add(this.schedule(null,P)):this.unsubscribe()},P);if(j.add(_t),!st)return _t}F.d(Wt,{f:()=>p})},4671:(ni,Wt,F)=>{"use strict";function p(j){return j}F.d(Wt,{y:()=>p})},1144:(ni,Wt,F)=>{"use strict";F.d(Wt,{z:()=>p});const p=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ni,Wt,F)=>{"use strict";F.d(Wt,{D:()=>j});var p=F(576);function j(Q){return Symbol.asyncIterator&&(0,p.m)(Q?.[Symbol.asyncIterator])}},576:(ni,Wt,F)=>{"use strict";function p(j){return"function"==typeof j}F.d(Wt,{m:()=>p})},3670:(ni,Wt,F)=>{"use strict";F.d(Wt,{c:()=>Q});var p=F(8822),j=F(576);function Q(o){return(0,j.m)(o[p.L])}},6495:(ni,Wt,F)=>{"use strict";F.d(Wt,{T:()=>Q});var p=F(2202),j=F(576);function Q(o){return(0,j.m)(o?.[p.h])}},8239:(ni,Wt,F)=>{"use strict";F.d(Wt,{t:()=>j});var p=F(576);function j(Q){return(0,p.m)(Q?.then)}},3260:(ni,Wt,F)=>{"use strict";F.d(Wt,{L:()=>o,Q:()=>Q});var p=F(7582),j=F(576);function Q(P){return(0,p.FC)(this,arguments,function*(){const _t=P.getReader();try{for(;;){const{value:ke,done:Ye}=yield(0,p.qq)(_t.read());if(Ye)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ke)}}finally{_t.releaseLock()}})}function o(P){return(0,j.m)(P?.getReader)}},3532:(ni,Wt,F)=>{"use strict";F.d(Wt,{K:()=>j});var p=F(576);function j(Q){return Q&&(0,p.m)(Q.schedule)}},4482:(ni,Wt,F)=>{"use strict";F.d(Wt,{A:()=>j,e:()=>Q});var p=F(576);function j(o){return(0,p.m)(o?.lift)}function Q(o){return P=>{if(j(P))return P.lift(function(st){try{return o(st,this)}catch(_t){this.error(_t)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(ni,Wt,F)=>{"use strict";F.d(Wt,{Z:()=>o});var p=F(4004);const{isArray:j}=Array;function o(P){return(0,p.U)(st=>function Q(P,st){return j(st)?P(...st):P(st)}(P,st))}},5032:(ni,Wt,F)=>{"use strict";function p(){}F.d(Wt,{Z:()=>p})},9635:(ni,Wt,F)=>{"use strict";F.d(Wt,{U:()=>Q,z:()=>j});var p=F(4671);function j(...o){return Q(o)}function Q(o){return 0===o.length?p.y:1===o.length?o[0]:function(st){return o.reduce((_t,ke)=>ke(_t),st)}}},7849:(ni,Wt,F)=>{"use strict";F.d(Wt,{h:()=>Q});var p=F(2416),j=F(3410);function Q(o){j.z.setTimeout(()=>{const{onUnhandledError:P}=p.v;if(!P)throw o;P(o)})}},4532:(ni,Wt,F)=>{"use strict";function p(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Wt,{z:()=>p})},5226:function(ni){ni.exports=function(){"use strict";function F(he){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(he)}function p(he,k){if(!(he instanceof k))throw new TypeError("Cannot call a class as a function")}function j(he,k){for(var Z=0;Z<k.length;Z++){var pe=k[Z];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(he,ht(pe.key),pe)}}function Q(he,k,Z){return k&&j(he.prototype,k),Z&&j(he,Z),Object.defineProperty(he,"prototype",{writable:!1}),he}function P(he){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(he)}function st(he,k){return(st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,At){return pe.__proto__=At,pe})(he,k)}function _t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ke(he,k,Z){return(ke=_t()?Reflect.construct.bind():function(At,Tn,ui){var Gi=[null];Gi.push.apply(Gi,Tn);var Br=new(Function.bind.apply(At,Gi));return ui&&st(Br,ui.prototype),Br}).apply(null,arguments)}function lt(he,k){if(k&&("object"==typeof k||"function"==typeof k))return k;if(void 0!==k)throw new TypeError("Derived constructors may only return object or undefined");return function Ye(he){if(void 0===he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he}(he)}function yt(){return yt=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(k,Z,pe){var At=function it(he,k){for(;!Object.prototype.hasOwnProperty.call(he,k)&&null!==(he=P(he)););return he}(k,Z);if(At){var Tn=Object.getOwnPropertyDescriptor(At,Z);return Tn.get?Tn.get.call(arguments.length<3?k:pe):Tn.value}},yt.apply(this,arguments)}function pt(he,k){return function Ct(he){if(Array.isArray(he))return he}(he)||function Wt(he,k){var Z=null==he?null:typeof Symbol<"u"&&he[Symbol.iterator]||he["@@iterator"];if(null!=Z){var pe,At,Tn,ui,Gi=[],or=!0,Br=!1;try{if(Tn=(Z=Z.call(he)).next,0===k){if(Object(Z)!==Z)return;or=!1}else for(;!(or=(pe=Tn.call(Z)).done)&&(Gi.push(pe.value),Gi.length!==k);or=!0);}catch(ho){Br=!0,At=ho}finally{try{if(!or&&null!=Z.return&&(ui=Z.return(),Object(ui)!==ui))return}finally{if(Br)throw At}}return Gi}}(he,k)||sn(he,k)||function Ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(he){return function en(he){if(Array.isArray(he))return Cn(he)}(he)||function nn(he){if(typeof Symbol<"u"&&null!=he[Symbol.iterator]||null!=he["@@iterator"])return Array.from(he)}(he)||sn(he)||function kt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(he,k){if(he){if("string"==typeof he)return Cn(he,k);var Z=Object.prototype.toString.call(he).slice(8,-1);if("Object"===Z&&he.constructor&&(Z=he.constructor.name),"Map"===Z||"Set"===Z)return Array.from(he);if("Arguments"===Z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return Cn(he,k)}}function Cn(he,k){(null==k||k>he.length)&&(k=he.length);for(var Z=0,pe=new Array(k);Z<k;Z++)pe[Z]=he[Z];return pe}function ht(he){var k=function ct(he,k){if("object"!=typeof he||null===he)return he;var Z=he[Symbol.toPrimitive];if(void 0!==Z){var pe=Z.call(he,k||"default");if("object"!=typeof pe)return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(he)}(he,"string");return"symbol"==typeof k?k:String(k)}function mt(he,k){return function ln(he,k){return k.get?k.get.call(he):k.value}(he,qt(he,k,"get"))}function Je(he,k,Z){return function Dn(he,k,Z){if(k.set)k.set.call(he,Z);else{if(!k.writable)throw new TypeError("attempted to set read only private field");k.value=Z}}(he,qt(he,k,"set"),Z),Z}function qt(he,k,Z){if(!k.has(he))throw new TypeError("attempted to "+Z+" private field on non-instance");return k.get(he)}function _n(he,k,Z){(function ti(he,k){if(k.has(he))throw new TypeError("Cannot initialize the same private elements twice on an object")})(he,k),k.set(he,Z)}var ii={},Ii=function(k){return new Promise(function(Z){if(!k)return Z();var pe=window.scrollX,At=window.scrollY;ii.restoreFocusTimeout=setTimeout(function(){ii.previousActiveElement instanceof HTMLElement?(ii.previousActiveElement.focus(),ii.previousActiveElement=null):document.body&&document.body.focus(),Z()},100),window.scrollTo(pe,At)})},ze=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(he,k){return he[k]="swal2-"+k,he},{}),Nt=["success","warning","info","question","error"].reduce(function(he,k){return he[k]="swal2-"+k,he},{}),We="SweetAlert2:",Ot=function(k){return k.charAt(0).toUpperCase()+k.slice(1)},Re=function(k){console.warn("".concat(We," ").concat("object"===F(k)?k.join(" "):k))},ft=function(k){console.error("".concat(We," ").concat(k))},cn=[],an=function(k,Z){!function(k){cn.includes(k)||(cn.push(k),Re(k))}('"'.concat(k,'" is deprecated and will be removed in the next major release. Please use "').concat(Z,'" instead.'))},Mn=function(k){return"function"==typeof k?k():k},Gt=function(k){return k&&"function"==typeof k.toPromise},On=function(k){return Gt(k)?k.toPromise():Promise.resolve(k)},xt=function(k){return k&&Promise.resolve(k)===k},zt=function(){return document.body.querySelector(".".concat(ze.container))},Wn=function(k){var Z=zt();return Z?Z.querySelector(k):null},Fn=function(k){return Wn(".".concat(k))},It=function(){return Fn(ze.popup)},li=function(){return Fn(ze.icon)},ce=function(){return Fn(ze.title)},De=function(){return Fn(ze["html-container"])},$e=function(){return Fn(ze.image)},Ft=function(){return Fn(ze["progress-steps"])},Qe=function(){return Fn(ze["validation-message"])},Te=function(){return Wn(".".concat(ze.actions," .").concat(ze.confirm))},xe=function(){return Wn(".".concat(ze.actions," .").concat(ze.cancel))},ve=function(){return Wn(".".concat(ze.actions," .").concat(ze.deny))},Me=function(){return Wn(".".concat(ze.loader))},Pe=function(){return Fn(ze.actions)},Ut=function(){return Fn(ze.footer)},Bn=function(){return Fn(ze["timer-progress-bar"])},En=function(){return Fn(ze.close)},ue=function(){var k=It();if(!k)return[];var Z=k.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),pe=Array.from(Z).sort(function(ui,Gi){var or=parseInt(ui.getAttribute("tabindex")||"0"),Br=parseInt(Gi.getAttribute("tabindex")||"0");return or>Br?1:or<Br?-1:0}),At=k.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),Tn=Array.from(At).filter(function(ui){return"-1"!==ui.getAttribute("tabindex")});return jt(new Set(pe.concat(Tn))).filter(function(ui){return Fe(ui)})},Ce=function(){return me(document.body,ze.shown)&&!me(document.body,ze["toast-shown"])&&!me(document.body,ze["no-backdrop"])},Ke=function(){var k=It();return!!k&&me(k,ze.toast)},Pt=function(k,Z){if(k.textContent="",Z){var At=(new DOMParser).parseFromString(Z,"text/html"),Tn=At.querySelector("head");Tn&&Array.from(Tn.childNodes).forEach(function(Gi){k.appendChild(Gi)});var ui=At.querySelector("body");ui&&Array.from(ui.childNodes).forEach(function(Gi){Gi instanceof HTMLVideoElement||Gi instanceof HTMLAudioElement?k.appendChild(Gi.cloneNode(!0)):k.appendChild(Gi)})}},me=function(k,Z){if(!Z)return!1;for(var pe=Z.split(/\s+/),At=0;At<pe.length;At++)if(!k.classList.contains(pe[At]))return!1;return!0},U=function(k,Z,pe){if(function(k,Z){Array.from(k.classList).forEach(function(pe){!Object.values(ze).includes(pe)&&!Object.values(Nt).includes(pe)&&!Object.values(Z.showClass||{}).includes(pe)&&k.classList.remove(pe)})}(k,Z),Z.customClass&&Z.customClass[pe]){if("string"!=typeof Z.customClass[pe]&&!Z.customClass[pe].forEach)return void Re("Invalid type of customClass.".concat(pe,'! Expected string or iterable object, got "').concat(F(Z.customClass[pe]),'"'));Kt(k,Z.customClass[pe])}},we=function(k,Z){if(!Z)return null;switch(Z){case"select":case"textarea":case"file":return k.querySelector(".".concat(ze.popup," > .").concat(ze[Z]));case"checkbox":return k.querySelector(".".concat(ze.popup," > .").concat(ze.checkbox," input"));case"radio":return k.querySelector(".".concat(ze.popup," > .").concat(ze.radio," input:checked"))||k.querySelector(".".concat(ze.popup," > .").concat(ze.radio," input:first-child"));case"range":return k.querySelector(".".concat(ze.popup," > .").concat(ze.range," input"));default:return k.querySelector(".".concat(ze.popup," > .").concat(ze.input))}},nt=function(k){if(k.focus(),"file"!==k.type){var Z=k.value;k.value="",k.value=Z}},Jt=function(k,Z,pe){!k||!Z||("string"==typeof Z&&(Z=Z.split(/\s+/).filter(Boolean)),Z.forEach(function(At){Array.isArray(k)?k.forEach(function(Tn){pe?Tn.classList.add(At):Tn.classList.remove(At)}):pe?k.classList.add(At):k.classList.remove(At)}))},Kt=function(k,Z){Jt(k,Z,!0)},Yn=function(k,Z){Jt(k,Z,!1)},Hn=function(k,Z){for(var pe=Array.from(k.children),At=0;At<pe.length;At++){var Tn=pe[At];if(Tn instanceof HTMLElement&&me(Tn,Z))return Tn}},ri=function(k,Z,pe){pe==="".concat(parseInt(pe))&&(pe=parseInt(pe)),pe||0===parseInt(pe)?k.style[Z]="number"==typeof pe?"".concat(pe,"px"):pe:k.style.removeProperty(Z)},zn=function(k){k&&(k.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Rt=function(k){k&&(k.style.display="none")},Ee=function(k){var Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";k&&new MutationObserver(function(){le(k,k.innerHTML,Z)}).observe(k,{childList:!0,subtree:!0})},se=function(k,Z,pe,At){var Tn=k.querySelector(Z);Tn&&(Tn.style[pe]=At)},le=function(k,Z){Z?zn(k,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Rt(k)},Fe=function(k){return!(!k||!(k.offsetWidth||k.offsetHeight||k.getClientRects().length))},rn=function(k){return k.scrollHeight>k.clientHeight},Gn=function(k){var Z=window.getComputedStyle(k),pe=parseFloat(Z.getPropertyValue("animation-duration")||"0"),At=parseFloat(Z.getPropertyValue("transition-duration")||"0");return pe>0||At>0},Ai=function(k){var Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=Bn();pe&&Fe(pe)&&(Z&&(pe.style.transition="none",pe.style.width="100%"),setTimeout(function(){pe.style.transition="width ".concat(k/1e3,"s linear"),pe.style.width="0%"},10))},Rr=function(){return typeof window>"u"||typeof document>"u"},Wi='\n <div aria-labelledby="'.concat(ze.title,'" aria-describedby="').concat(ze["html-container"],'" class="').concat(ze.popup,'" tabindex="-1">\n   <button type="button" class="').concat(ze.close,'"></button>\n   <ul class="').concat(ze["progress-steps"],'"></ul>\n   <div class="').concat(ze.icon,'"></div>\n   <img class="').concat(ze.image,'" />\n   <h2 class="').concat(ze.title,'" id="').concat(ze.title,'"></h2>\n   <div class="').concat(ze["html-container"],'" id="').concat(ze["html-container"],'"></div>\n   <input class="').concat(ze.input,'" id="').concat(ze.input,'" />\n   <input type="file" class="').concat(ze.file,'" />\n   <div class="').concat(ze.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(ze.select,'" id="').concat(ze.select,'"></select>\n   <div class="').concat(ze.radio,'"></div>\n   <label class="').concat(ze.checkbox,'">\n     <input type="checkbox" id="').concat(ze.checkbox,'" />\n     <span class="').concat(ze.label,'"></span>\n   </label>\n   <textarea class="').concat(ze.textarea,'" id="').concat(ze.textarea,'"></textarea>\n   <div class="').concat(ze["validation-message"],'" id="').concat(ze["validation-message"],'"></div>\n   <div class="').concat(ze.actions,'">\n     <div class="').concat(ze.loader,'"></div>\n     <button type="button" class="').concat(ze.confirm,'"></button>\n     <button type="button" class="').concat(ze.deny,'"></button>\n     <button type="button" class="').concat(ze.cancel,'"></button>\n   </div>\n   <div class="').concat(ze.footer,'"></div>\n   <div class="').concat(ze["timer-progress-bar-container"],'">\n     <div class="').concat(ze["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),vr=function(){ii.currentInstance.resetValidationMessage()},br=function(k){var Z=function(){var k=zt();return!!k&&(k.remove(),Yn([document.documentElement,document.body],[ze["no-backdrop"],ze["toast-shown"],ze["has-column"]]),!0)}();if(Rr())ft("SweetAlert2 requires document to initialize");else{var pe=document.createElement("div");pe.className=ze.container,Z&&Kt(pe,ze["no-transition"]),Pt(pe,Wi);var At=function(k){return"string"==typeof k?document.querySelector(k):k}(k.target);At.appendChild(pe),function(k){var Z=It();Z.setAttribute("role",k.toast?"alert":"dialog"),Z.setAttribute("aria-live",k.toast?"polite":"assertive"),k.toast||Z.setAttribute("aria-modal","true")}(k),function(k){"rtl"===window.getComputedStyle(k).direction&&Kt(zt(),ze.rtl)}(At),function(){var k=It(),Z=Hn(k,ze.input),pe=Hn(k,ze.file),At=k.querySelector(".".concat(ze.range," input")),Tn=k.querySelector(".".concat(ze.range," output")),ui=Hn(k,ze.select),Gi=k.querySelector(".".concat(ze.checkbox," input")),or=Hn(k,ze.textarea);Z.oninput=vr,pe.onchange=vr,ui.onchange=vr,Gi.onchange=vr,or.oninput=vr,At.oninput=function(){vr(),Tn.value=At.value},At.onchange=function(){vr(),Tn.value=At.value}}()}},Tr=function(k,Z){k instanceof HTMLElement?Z.appendChild(k):"object"===F(k)?Hr(k,Z):k&&Pt(Z,k)},Hr=function(k,Z){k.jquery?Ho(Z,k):Pt(Z,k.toString())},Ho=function(k,Z){if(k.textContent="",0 in Z)for(var pe=0;pe in Z;pe++)k.appendChild(Z[pe].cloneNode(!0));else k.appendChild(Z.cloneNode(!0))},wo=function(){if(Rr())return!1;var he=document.createElement("div");return typeof he.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof he.style.animation<"u"&&"animationend"}(),wn=function(k,Z){var pe=Pe(),At=Me();!pe||!At||(Z.showConfirmButton||Z.showDenyButton||Z.showCancelButton?zn(pe):Rt(pe),U(pe,Z,"actions"),function at(he,k,Z){var pe=Te(),At=ve(),Tn=xe();!pe||!At||!Tn||(I(pe,"confirm",Z),I(At,"deny",Z),I(Tn,"cancel",Z),function vt(he,k,Z,pe){pe.buttonsStyling?(Kt([he,k,Z],ze.styled),pe.confirmButtonColor&&(he.style.backgroundColor=pe.confirmButtonColor,Kt(he,ze["default-outline"])),pe.denyButtonColor&&(k.style.backgroundColor=pe.denyButtonColor,Kt(k,ze["default-outline"])),pe.cancelButtonColor&&(Z.style.backgroundColor=pe.cancelButtonColor,Kt(Z,ze["default-outline"]))):Yn([he,k,Z],ze.styled)}(pe,At,Tn,Z),Z.reverseButtons&&(Z.toast?(he.insertBefore(Tn,pe),he.insertBefore(At,pe)):(he.insertBefore(Tn,k),he.insertBefore(At,k),he.insertBefore(pe,k))))}(pe,At,Z),Pt(At,Z.loaderHtml||""),U(At,Z,"loader"))};function I(he,k,Z){var pe=Ot(k);le(he,Z["show".concat(pe,"Button")],"inline-block"),Pt(he,Z["".concat(k,"ButtonText")]||""),he.setAttribute("aria-label",Z["".concat(k,"ButtonAriaLabel")]||""),he.className=ze[k],U(he,Z,"".concat(k,"Button"))}var Se=function(k,Z){var pe=zt();pe&&(function et(he,k){"string"==typeof k?he.style.background=k:k||Kt([document.documentElement,document.body],ze["no-backdrop"])}(pe,Z.backdrop),function An(he,k){k&&(k in ze?Kt(he,ze[k]):(Re('The "position" parameter is not valid, defaulting to "center"'),Kt(he,ze.center)))}(pe,Z.position),function mi(he,k){k&&Kt(he,ze["grow-".concat(k)])}(pe,Z.grow),U(pe,Z,"container"))};var fn={innerParams:new WeakMap,domCache:new WeakMap},xi=["input","file","range","select","radio","checkbox","textarea"],yi=function(k){if(k.input){if(!cr[k.input])return void ft("Unexpected type of input! Expected ".concat(Object.keys(cr).join(" | "),', got "').concat(k.input,'"'));var Z=mo(k.input),pe=cr[k.input](Z,k);zn(Z),k.inputAutoFocus&&setTimeout(function(){nt(pe)})}},Ni=function(k,Z){var pe=we(It(),k);if(pe)for(var At in function(k){for(var Z=0;Z<k.attributes.length;Z++){var pe=k.attributes[Z].name;["id","type","value","style"].includes(pe)||k.removeAttribute(pe)}}(pe),Z)pe.setAttribute(At,Z[At])},Qr=function(k){var Z=mo(k.input);"object"===F(k.customClass)&&Kt(Z,k.customClass.input)},Ao=function(k,Z){(!k.placeholder||Z.inputPlaceholder)&&(k.placeholder=Z.inputPlaceholder)},_r=function(k,Z,pe){if(pe.inputLabel){var At=document.createElement("label"),Tn=ze["input-label"];At.setAttribute("for",k.id),At.className=Tn,"object"===F(pe.customClass)&&Kt(At,pe.customClass.inputLabel),At.innerText=pe.inputLabel,Z.insertAdjacentElement("beforebegin",At)}},mo=function(k){return Hn(It(),ze[k]||ze.input)},rr=function(k,Z){["string","number"].includes(F(Z))?k.value="".concat(Z):xt(Z)||Re('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(F(Z),'"'))},cr={};cr.text=cr.email=cr.password=cr.number=cr.tel=cr.url=cr.search=cr.date=cr["datetime-local"]=cr.time=cr.week=cr.month=function(he,k){return rr(he,k.inputValue),_r(he,he,k),Ao(he,k),he.type=k.input,he},cr.file=function(he,k){return _r(he,he,k),Ao(he,k),he},cr.range=function(he,k){var Z=he.querySelector("input"),pe=he.querySelector("output");return rr(Z,k.inputValue),Z.type=k.input,rr(pe,k.inputValue),_r(Z,he,k),he},cr.select=function(he,k){if(he.textContent="",k.inputPlaceholder){var Z=document.createElement("option");Pt(Z,k.inputPlaceholder),Z.value="",Z.disabled=!0,Z.selected=!0,he.appendChild(Z)}return _r(he,he,k),he},cr.radio=function(he){return he.textContent="",he},cr.checkbox=function(he,k){var Z=we(It(),"checkbox");Z.value="1",Z.checked=Boolean(k.inputValue);var pe=he.querySelector("span");return Pt(pe,k.inputPlaceholder),Z},cr.textarea=function(he,k){rr(he,k.inputValue),Ao(he,k),_r(he,he,k);return setTimeout(function(){if("MutationObserver"in window){var pe=parseInt(window.getComputedStyle(It()).width);new MutationObserver(function(){if(document.body.contains(he)){var ui=he.offsetWidth+(At=he,parseInt(window.getComputedStyle(At).marginLeft)+parseInt(window.getComputedStyle(At).marginRight));ui>pe?It().style.width="".concat(ui,"px"):ri(It(),"width",k.width)}var At}).observe(he,{attributes:!0,attributeFilter:["style"]})}}),he};var Co=function(k,Z){var pe=De();pe&&(Ee(pe),U(pe,Z,"htmlContainer"),Z.html?(Tr(Z.html,pe),zn(pe,"block")):Z.text?(pe.textContent=Z.text,zn(pe,"block")):Rt(pe),function(k,Z){var pe=It();if(pe){var At=fn.innerParams.get(k),Tn=!At||Z.input!==At.input;xi.forEach(function(ui){var Gi=Hn(pe,ze[ui]);Gi&&(Ni(ui,Z.inputAttributes),Gi.className=ze[ui],Tn&&Rt(Gi))}),Z.input&&(Tn&&yi(Z),Qr(Z))}}(k,Z))},Go=function(k,Z){for(var pe=0,At=Object.entries(Nt);pe<At.length;pe++){var Tn=pt(At[pe],2);Z.icon!==Tn[0]&&Yn(k,Tn[1])}Kt(k,Z.icon&&Nt[Z.icon]),ko(k,Z),ma(),U(k,Z,"icon")},ma=function(){var k=It();if(k)for(var Z=window.getComputedStyle(k).getPropertyValue("background-color"),pe=k.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),At=0;At<pe.length;At++)pe[At].style.backgroundColor=Z},So=function(k,Z){if(Z.icon||Z.iconHtml){var pe=k.innerHTML,At="";Z.iconHtml?At=dr(Z.iconHtml):"success"===Z.icon?(At='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',pe=pe.replace(/ style=".*?"/g,"")):"error"===Z.icon?At='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Z.icon&&(At=dr({question:"?",warning:"!",info:"i"}[Z.icon])),pe.trim()!==At.trim()&&Pt(k,At)}},ko=function(k,Z){if(Z.iconColor){k.style.color=Z.iconColor,k.style.borderColor=Z.iconColor;for(var pe=0,At=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];pe<At.length;pe++)se(k,At[pe],"backgroundColor",Z.iconColor);se(k,".swal2-success-ring","borderColor",Z.iconColor)}},dr=function(k){return'<div class="'.concat(ze["icon-content"],'">').concat(k,"</div>")},_o=function(k,Z){var pe=Z.showClass||{};k.className="".concat(ze.popup," ").concat(Fe(k)?pe.popup:""),Z.toast?(Kt([document.documentElement,document.body],ze["toast-shown"]),Kt(k,ze.toast)):Kt(k,ze.modal),U(k,Z,"popup"),"string"==typeof Z.customClass&&Kt(k,Z.customClass),Z.icon&&Kt(k,ze["icon-".concat(Z.icon)])},Ar=function(k){var Z=document.createElement("li");return Kt(Z,ze["progress-step"]),Pt(Z,k),Z},_s=function(k){var Z=document.createElement("li");return Kt(Z,ze["progress-step-line"]),k.progressStepsDistance&&ri(Z,"width",k.progressStepsDistance),Z},Sr=function(k,Z){(function(k,Z){var pe=zt(),At=It();if(pe&&At){if(Z.toast){ri(pe,"width",Z.width),At.style.width="100%";var Tn=Me();Tn&&At.insertBefore(Tn,li())}else ri(At,"width",Z.width);ri(At,"padding",Z.padding),Z.color&&(At.style.color=Z.color),Z.background&&(At.style.background=Z.background),Rt(Qe()),_o(At,Z)}})(0,Z),Se(0,Z),function(k,Z){var pe=Ft();if(pe){var At=Z.progressSteps,Tn=Z.currentProgressStep;if(!At||0===At.length||void 0===Tn)return void Rt(pe);zn(pe),pe.textContent="",Tn>=At.length&&Re("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),At.forEach(function(ui,Gi){var or=Ar(ui);if(pe.appendChild(or),Gi===Tn&&Kt(or,ze["active-progress-step"]),Gi!==At.length-1){var Br=_s(Z);pe.appendChild(Br)}})}}(0,Z),function(k,Z){var pe=fn.innerParams.get(k),At=li();if(At){if(pe&&Z.icon===pe.icon)return So(At,Z),void Go(At,Z);if(!Z.icon&&!Z.iconHtml)return void Rt(At);if(Z.icon&&-1===Object.keys(Nt).indexOf(Z.icon))return ft('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(Z.icon,'"')),void Rt(At);zn(At),So(At,Z),Go(At,Z),Kt(At,Z.showClass&&Z.showClass.icon)}}(k,Z),function(k,Z){var pe=$e();if(pe){if(!Z.imageUrl)return void Rt(pe);zn(pe,""),pe.setAttribute("src",Z.imageUrl),pe.setAttribute("alt",Z.imageAlt||""),ri(pe,"width",Z.imageWidth),ri(pe,"height",Z.imageHeight),pe.className=ze.image,U(pe,Z,"image")}}(0,Z),function(k,Z){var pe=ce();pe&&(Ee(pe),le(pe,Z.title||Z.titleText,"block"),Z.title&&Tr(Z.title,pe),Z.titleText&&(pe.innerText=Z.titleText),U(pe,Z,"title"))}(0,Z),function(k,Z){var pe=En();pe&&(Pt(pe,Z.closeButtonHtml||""),U(pe,Z,"closeButton"),le(pe,Z.showCloseButton),pe.setAttribute("aria-label",Z.closeButtonAriaLabel||""))}(0,Z),Co(k,Z),wn(0,Z),function(k,Z){var pe=Ut();pe&&(Ee(pe),le(pe,Z.footer,"block"),Z.footer&&Tr(Z.footer,pe),U(pe,Z,"footer"))}(0,Z);var pe=It();"function"==typeof Z.didRender&&pe&&Z.didRender(pe)},ns=function(){var k;return null===(k=Te())||void 0===k?void 0:k.click()},cs=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zs=function(k){k.keydownTarget&&k.keydownHandlerAdded&&(k.keydownTarget.removeEventListener("keydown",k.keydownHandler,{capture:k.keydownListenerCapture}),k.keydownHandlerAdded=!1)},Zo=function(k,Z){var pe,At=ue();if(At.length)return(k+=Z)===At.length?k=0:-1===k&&(k=At.length-1),void At[k].focus();null===(pe=It())||void 0===pe||pe.focus()},ga=["ArrowRight","ArrowDown"],Ws=["ArrowLeft","ArrowUp"],_a=function(k,Z,pe){k&&(Z.isComposing||229===Z.keyCode||(k.stopKeydownPropagation&&Z.stopPropagation(),"Enter"===Z.key?us(Z,k):"Tab"===Z.key?ds(Z):[].concat(ga,Ws).includes(Z.key)?Fa(Z.key):"Escape"===Z.key&&Ys(Z,k,pe)))},us=function(k,Z){if(Mn(Z.allowEnterKey)){var pe=we(It(),Z.input);if(k.target&&pe&&k.target instanceof HTMLElement&&k.target.outerHTML===pe.outerHTML){if(["textarea","file"].includes(Z.input))return;ns(),k.preventDefault()}}},ds=function(k){for(var Z=k.target,pe=ue(),At=-1,Tn=0;Tn<pe.length;Tn++)if(Z===pe[Tn]){At=Tn;break}Zo(At,k.shiftKey?-1:1),k.stopPropagation(),k.preventDefault()},Fa=function(k){var Z=Pe(),pe=Te(),At=ve(),Tn=xe();if(Z&&pe&&At&&Tn&&(!(document.activeElement instanceof HTMLElement)||[pe,At,Tn].includes(document.activeElement))){var Gi=ga.includes(k)?"nextElementSibling":"previousElementSibling",or=document.activeElement;if(or){for(var Br=0;Br<Z.children.length;Br++){if(!(or=or[Gi]))return;if(or instanceof HTMLButtonElement&&Fe(or))break}or instanceof HTMLButtonElement&&or.focus()}}},Ys=function(k,Z,pe){Mn(Z.allowEscapeKey)&&(k.preventDefault(),pe(cs.esc))},lo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},hs=function(){Array.from(document.body.children).forEach(function(Z){Z.hasAttribute("data-previous-aria-hidden")?(Z.setAttribute("aria-hidden",Z.getAttribute("data-previous-aria-hidden")||""),Z.removeAttribute("data-previous-aria-hidden")):Z.removeAttribute("aria-hidden")})},sa=typeof window<"u"&&!!window.GestureEvent,Ro=function(){var Z,k=zt();k&&(k.ontouchstart=function(pe){Z=aa(pe)},k.ontouchmove=function(pe){Z&&(pe.preventDefault(),pe.stopPropagation())})},aa=function(k){var Z=k.target,pe=zt(),At=De();return!(!pe||!At||qs(k)||ya(k)||Z!==pe&&(rn(pe)||!(Z instanceof HTMLElement)||"INPUT"===Z.tagName||"TEXTAREA"===Z.tagName||rn(At)&&At.contains(Z)))},qs=function(k){return k.touches&&k.touches.length&&"stylus"===k.touches[0].touchType},ya=function(k){return k.touches&&k.touches.length>1},Ea=function(){if(me(document.body,ze.iosfix)){var k=parseInt(document.body.style.top,10);Yn(document.body,ze.iosfix),document.body.style.top="",document.body.scrollTop=-1*k}},Zi=null,Za=function(k){null===Zi&&(document.body.scrollHeight>window.innerHeight||"scroll"===k)&&(Zi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Zi+function(){var k=document.createElement("div");k.className=ze["scrollbar-measure"],document.body.appendChild(k);var Z=k.getBoundingClientRect().width-k.clientWidth;return document.body.removeChild(k),Z}(),"px"))},Wa=function(){null!==Zi&&(document.body.style.paddingRight="".concat(Zi,"px"),Zi=null)};function Da(he,k,Z,pe){Ke()?Os(he,pe):(Ii(Z).then(function(){return Os(he,pe)}),Zs(ii)),sa?(k.setAttribute("style","display:none !important"),k.removeAttribute("class"),k.innerHTML=""):k.remove(),Ce()&&(Wa(),Ea(),hs()),function Ma(){Yn([document.documentElement,document.body],[ze.shown,ze["height-auto"],ze["no-backdrop"],ze["toast-shown"]])}()}function Nr(he){he=Eo(he);var k=lo.swalPromiseResolve.get(this),Z=Ta(this);this.isAwaitingPromise?he.isDismissed||(wr(this),k(he)):Z&&k(he)}var Ta=function(k){var Z=It();if(!Z)return!1;var pe=fn.innerParams.get(k);if(!pe||me(Z,pe.hideClass.popup))return!1;Yn(Z,pe.showClass.popup),Kt(Z,pe.hideClass.popup);var At=zt();return Yn(At,pe.showClass.backdrop),Kt(At,pe.hideClass.backdrop),Lr(k,Z,pe),!0};function Zr(he){var k=lo.swalPromiseReject.get(this);wr(this),k&&k(he)}var wr=function(k){k.isAwaitingPromise&&(delete k.isAwaitingPromise,fn.innerParams.get(k)||k._destroy())},Eo=function(k){return typeof k>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},k)},Lr=function(k,Z,pe){var At=zt(),Tn=wo&&Gn(Z);"function"==typeof pe.willClose&&pe.willClose(Z),Tn?Vr(k,Z,At,pe.returnFocus,pe.didClose):Da(k,At,pe.returnFocus,pe.didClose)},Vr=function(k,Z,pe,At,Tn){wo&&(ii.swalCloseEventFinishedCallback=Da.bind(null,k,pe,At,Tn),Z.addEventListener(wo,function(ui){ui.target===Z&&(ii.swalCloseEventFinishedCallback(),delete ii.swalCloseEventFinishedCallback)}))},Os=function(k,Z){setTimeout(function(){"function"==typeof Z&&Z.bind(k.params)(),k._destroy&&k._destroy()})},ps=function(k){var Z=It();if(Z||new xs,Z=It()){var pe=Me();Ke()?Rt(li()):vs(Z,k),zn(pe),Z.setAttribute("data-loading","true"),Z.setAttribute("aria-busy","true"),Z.focus()}},vs=function(k,Z){var pe=Pe(),At=Me();!pe||!At||(!Z&&Fe(Te())&&(Z=Te()),zn(pe),Z&&(Rt(Z),At.setAttribute("data-button-to-replace",Z.className),pe.insertBefore(At,Z)),Kt([k,pe],ze.loading))},Rs=function(k){return k.checked?1:0},la=function(k){return k.checked?k.value:null},Fo=function(k){return k.files&&k.files.length?null!==k.getAttribute("multiple")?k.files:k.files[0]:null},Yi=function(k,Z){var pe=It();if(pe){var At=function(ui){"select"===Z.input?function zi(he,k,Z){var pe=Hn(he,ze.select);if(pe){var At=function(ui,Gi,or){var Br=document.createElement("option");Br.value=or,Pt(Br,Gi),Br.selected=te(or,Z.inputValue),ui.appendChild(Br)};k.forEach(function(Tn){var ui=Tn[0],Gi=Tn[1];if(Array.isArray(Gi)){var or=document.createElement("optgroup");or.label=ui,or.disabled=!1,pe.appendChild(or),Gi.forEach(function(Br){return At(or,Br[1],Br[0])})}else At(pe,Gi,ui)}),pe.focus()}}(pe,oe(ui),Z):"radio"===Z.input&&function Fs(he,k,Z){var pe=Hn(he,ze.radio);if(pe){k.forEach(function(Tn){var ui=Tn[0],Gi=Tn[1],or=document.createElement("input"),Br=document.createElement("label");or.type="radio",or.name=ze.radio,or.value=ui,te(ui,Z.inputValue)&&(or.checked=!0);var ho=document.createElement("span");Pt(ho,Gi),ho.className=ze.label,Br.appendChild(or),Br.appendChild(ho),pe.appendChild(Br)});var At=pe.querySelectorAll("input");At.length&&At[0].focus()}}(pe,oe(ui),Z)};Gt(Z.inputOptions)||xt(Z.inputOptions)?(ps(Te()),On(Z.inputOptions).then(function(Tn){k.hideLoading(),At(Tn)})):"object"===F(Z.inputOptions)?At(Z.inputOptions):ft("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(F(Z.inputOptions)))}},vo=function(k,Z){var pe=k.getInput();pe&&(Rt(pe),On(Z.inputValue).then(function(At){pe.value="".concat("number"===Z.input?parseFloat(At)||0:At),zn(pe),pe.focus(),k.hideLoading()}).catch(function(At){ft("Error in inputValue promise: ".concat(At)),pe.value="",zn(pe),pe.focus(),k.hideLoading()}))};var oe=function he(k){var Z=[];return k instanceof Map?k.forEach(function(pe,At){var Tn=pe;"object"===F(Tn)&&(Tn=he(Tn)),Z.push([At,Tn])}):Object.keys(k).forEach(function(pe){var At=k[pe];"object"===F(At)&&(At=he(At)),Z.push([pe,At])}),Z},te=function(k,Z){return!!Z&&Z.toString()===k.toString()},q=void 0,Ur=function(k,Z){var pe=fn.innerParams.get(k);if(pe.input){var At=k.getInput(),Tn=function(k,Z){var pe=k.getInput();if(!pe)return null;switch(Z.input){case"checkbox":return Rs(pe);case"radio":return la(pe);case"file":return Fo(pe);default:return Z.inputAutoTrim?pe.value.trim():pe.value}}(k,pe);pe.inputValidator?Sn(k,Tn,Z):At&&!At.checkValidity()?(k.enableButtons(),k.showValidationMessage(pe.validationMessage)):"deny"===Z?Xi(k,Tn):Ir(k,Tn)}else ft('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Ot(Z)))},Sn=function(k,Z,pe){var At=fn.innerParams.get(k);k.disableInput(),Promise.resolve().then(function(){return On(At.inputValidator(Z,At.validationMessage))}).then(function(ui){k.enableButtons(),k.enableInput(),ui?k.showValidationMessage(ui):"deny"===pe?Xi(k,Z):Ir(k,Z)})},Xi=function(k,Z){var pe=fn.innerParams.get(k||q);pe.showLoaderOnDeny&&ps(ve()),pe.preDeny?(k.isAwaitingPromise=!0,Promise.resolve().then(function(){return On(pe.preDeny(Z,pe.validationMessage))}).then(function(Tn){!1===Tn?(k.hideLoading(),wr(k)):k.close({isDenied:!0,value:typeof Tn>"u"?Z:Tn})}).catch(function(Tn){return Aa(k||q,Tn)})):k.close({isDenied:!0,value:Z})},bs=function(k,Z){k.close({isConfirmed:!0,value:Z})},Aa=function(k,Z){k.rejectPromise(Z)},Ir=function(k,Z){var pe=fn.innerParams.get(k||q);pe.showLoaderOnConfirm&&ps(),pe.preConfirm?(k.resetValidationMessage(),k.isAwaitingPromise=!0,Promise.resolve().then(function(){return On(pe.preConfirm(Z,pe.validationMessage))}).then(function(Tn){Fe(Qe())||!1===Tn?(k.hideLoading(),wr(k)):bs(k,typeof Tn>"u"?Z:Tn)}).catch(function(Tn){return Aa(k||q,Tn)})):bs(k,Z)};function Ya(){var he=fn.innerParams.get(this);if(he){var k=fn.domCache.get(this);Rt(k.loader),Ke()?he.icon&&zn(li()):ca(k),Yn([k.popup,k.actions],ze.loading),k.popup.removeAttribute("aria-busy"),k.popup.removeAttribute("data-loading"),k.confirmButton.disabled=!1,k.denyButton.disabled=!1,k.cancelButton.disabled=!1}}var ca=function(k){var Z=k.popup.getElementsByClassName(k.loader.getAttribute("data-button-to-replace"));Z.length?zn(Z[0],"inline-block"):!Fe(Te())&&!Fe(ve())&&!Fe(xe())&&Rt(k.actions)};function Lo(){var he=fn.innerParams.get(this),k=fn.domCache.get(this);return k?we(k.popup,he.input):null}function Sa(he,k,Z){var pe=fn.domCache.get(he);k.forEach(function(At){pe[At].disabled=Z})}function Ls(he,k){var Z=It();if(Z&&he)if("radio"===he.type)for(var pe=Z.querySelectorAll('[name="'.concat(ze.radio,'"]')),At=0;At<pe.length;At++)pe[At].disabled=k;else he.disabled=k}function qa(){Sa(this,["confirmButton","denyButton","cancelButton"],!1)}function As(){Sa(this,["confirmButton","denyButton","cancelButton"],!0)}function va(){Ls(this.getInput(),!1)}function Mo(){Ls(this.getInput(),!0)}function Bo(he){var k=fn.domCache.get(this),Z=fn.innerParams.get(this);Pt(k.validationMessage,he),k.validationMessage.className=ze["validation-message"],Z.customClass&&Z.customClass.validationMessage&&Kt(k.validationMessage,Z.customClass.validationMessage),zn(k.validationMessage);var pe=this.getInput();pe&&(pe.setAttribute("aria-invalid","true"),pe.setAttribute("aria-describedby",ze["validation-message"]),nt(pe),Kt(pe,ze.inputerror))}function ua(){var he=fn.domCache.get(this);he.validationMessage&&Rt(he.validationMessage);var k=this.getInput();k&&(k.removeAttribute("aria-invalid"),k.removeAttribute("aria-describedby"),Yn(k,ze.inputerror))}var is={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ks=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ia={},Bs=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ba=function(k){return Object.prototype.hasOwnProperty.call(is,k)},cl=function(k){return-1!==Ks.indexOf(k)},Pa=function(k){return Ia[k]},ul=function(k){ba(k)||Re('Unknown parameter "'.concat(k,'"'))},La=function(k){Bs.includes(k)&&Re('The parameter "'.concat(k,'" is incompatible with toasts'))},dl=function(k){var Z=Pa(k);Z&&an(k,Z)},Ba=function(k){for(var Z in!1===k.backdrop&&k.allowOutsideClick&&Re('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),k)ul(Z),k.toast&&La(Z),dl(Z)};function Oa(he){var k=It(),Z=fn.innerParams.get(this);if(k&&!me(k,Z.hideClass.popup)){var pe=Xs(he),At=Object.assign({},Z,pe);Sr(this,At),fn.innerParams.set(this,At),Object.defineProperties(this,{params:{value:Object.assign({},this.params,he),writable:!1,enumerable:!0}})}else Re("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var Xs=function(k){var Z={};return Object.keys(k).forEach(function(pe){cl(pe)?Z[pe]=k[pe]:Re("Invalid parameter to update: ".concat(pe))}),Z};function Ka(){var he=fn.domCache.get(this),k=fn.innerParams.get(this);k?(he.popup&&ii.swalCloseEventFinishedCallback&&(ii.swalCloseEventFinishedCallback(),delete ii.swalCloseEventFinishedCallback),"function"==typeof k.didDestroy&&k.didDestroy(),Ns(this)):hl(this)}var Ns=function(k){hl(k),delete k.params,delete ii.keydownHandler,delete ii.keydownTarget,delete ii.currentInstance},hl=function(k){k.isAwaitingPromise?(Xa(fn,k),k.isAwaitingPromise=!0):(Xa(lo,k),Xa(fn,k),delete k.isAwaitingPromise,delete k.disableButtons,delete k.enableButtons,delete k.getInput,delete k.disableInput,delete k.enableInput,delete k.hideLoading,delete k.disableLoading,delete k.showValidationMessage,delete k.resetValidationMessage,delete k.close,delete k.closePopup,delete k.closeModal,delete k.closeToast,delete k.rejectPromise,delete k.update,delete k._destroy)},Xa=function(k,Z){for(var pe in k)k[pe].delete(Z)},Il=Object.freeze({__proto__:null,_destroy:Ka,close:Nr,closeModal:Nr,closePopup:Nr,closeToast:Nr,disableButtons:As,disableInput:Mo,disableLoading:Ya,enableButtons:qa,enableInput:va,getInput:Lo,handleAwaitingPromise:wr,hideLoading:Ya,rejectPromise:Zr,resetValidationMessage:ua,showValidationMessage:Bo,update:Oa}),pc=function(k,Z,pe){Z.popup.onclick=function(){k&&(Wo(k)||k.timer||k.input)||pe(cs.close)}},Wo=function(k){return!!(k.showConfirmButton||k.showDenyButton||k.showCancelButton||k.showCloseButton)},rs=!1,Pr=function(k){k.popup.onmousedown=function(){k.container.onmouseup=function(Z){k.container.onmouseup=function(){},Z.target===k.container&&(rs=!0)}}},Pl=function(k){k.container.onmousedown=function(){k.popup.onmouseup=function(Z){k.popup.onmouseup=function(){},(Z.target===k.popup||Z.target instanceof HTMLElement&&k.popup.contains(Z.target))&&(rs=!0)}}},Xl=function(k,Z,pe){Z.container.onclick=function(At){rs?rs=!1:At.target===Z.container&&Mn(k.allowOutsideClick)&&pe(cs.backdrop)}},Ja=function(k){return k instanceof Element||function(k){return"object"===F(k)&&k.jquery}(k)};var zs=function(){if(ii.timeout)return function(){var k=Bn();if(k){var Z=parseInt(window.getComputedStyle(k).width);k.style.removeProperty("transition"),k.style.width="100%";var pe=parseInt(window.getComputedStyle(k).width);k.style.width="".concat(Z/pe*100,"%")}}(),ii.timeout.stop()},H=function(){if(ii.timeout){var k=ii.timeout.start();return Ai(k),k}},V=!1,C={};var $=function(k){for(var Z=k.target;Z&&Z!==document;Z=Z.parentNode)for(var pe in C){var At=Z.getAttribute(pe);if(At)return void C[pe].fire({template:At})}},be=Object.freeze({__proto__:null,argsToParams:function(k){var Z={};return"object"!==F(k[0])||Ja(k[0])?["title","html","icon"].forEach(function(pe,At){var Tn=k[At];"string"==typeof Tn||Ja(Tn)?Z[pe]=Tn:void 0!==Tn&&ft("Unexpected type of ".concat(pe,'! Expected "string" or "Element", got ').concat(F(Tn)))}):Object.assign(Z,k[0]),Z},bindClickHandler:function M(){C[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,V||(document.body.addEventListener("click",$),V=!0)},clickCancel:function(){var k;return null===(k=xe())||void 0===k?void 0:k.click()},clickConfirm:ns,clickDeny:function(){var k;return null===(k=ve())||void 0===k?void 0:k.click()},enableLoading:ps,fire:function Qa(){for(var k=arguments.length,Z=new Array(k),pe=0;pe<k;pe++)Z[pe]=arguments[pe];return ke(this,Z)},getActions:Pe,getCancelButton:xe,getCloseButton:En,getConfirmButton:Te,getContainer:zt,getDenyButton:ve,getFocusableElements:ue,getFooter:Ut,getHtmlContainer:De,getIcon:li,getIconContent:function(){return Fn(ze["icon-content"])},getImage:$e,getInputLabel:function(){return Fn(ze["input-label"])},getLoader:Me,getPopup:It,getProgressSteps:Ft,getTimerLeft:function(){return ii.timeout&&ii.timeout.getTimerLeft()},getTimerProgressBar:Bn,getTitle:ce,getValidationMessage:Qe,increaseTimer:function(k){if(ii.timeout){var Z=ii.timeout.increase(k);return Ai(Z,!0),Z}},isDeprecatedParameter:Pa,isLoading:function(){var k=It();return!!k&&k.hasAttribute("data-loading")},isTimerRunning:function(){return!(!ii.timeout||!ii.timeout.isRunning())},isUpdatableParameter:cl,isValidParameter:ba,isVisible:function(){return Fe(It())},mixin:function Na(he){var k=function(Z){!function o(he,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(k&&k.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),k&&st(he,k)}(At,Z);var pe=function wt(he){var k=_t();return function(){var At,pe=P(he);if(k){var Tn=P(this).constructor;At=Reflect.construct(pe,arguments,Tn)}else At=pe.apply(this,arguments);return lt(this,At)}}(At);function At(){return p(this,At),pe.apply(this,arguments)}return Q(At,[{key:"_main",value:function(ui,Gi){return yt(P(At.prototype),"_main",this).call(this,ui,Object.assign({},he,Gi))}}]),At}(this);return k},resumeTimer:H,showLoading:ps,stopTimer:zs,toggleTimer:function(){var k=ii.timeout;return k&&(k.running?zs():H())}}),Ve=function(){function he(k,Z){p(this,he),this.callback=k,this.remaining=Z,this.running=!1,this.start()}return Q(he,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(Z){var pe=this.running;return pe&&this.stop(),this.remaining+=Z,pe&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),he}(),Mt=["swal-title","swal-html","swal-footer"],on=function(k){var Z={};return Array.from(k.querySelectorAll("swal-param")).forEach(function(At){Ui(At,["name","value"]);var Tn=At.getAttribute("name"),ui=At.getAttribute("value");Z[Tn]="boolean"==typeof is[Tn]?"false"!==ui:"object"===F(is[Tn])?JSON.parse(ui):ui}),Z},pn=function(k){var Z={};return Array.from(k.querySelectorAll("swal-function-param")).forEach(function(At){var Tn=At.getAttribute("name"),ui=At.getAttribute("value");Z[Tn]=new Function("return ".concat(ui))()}),Z},si=function(k){var Z={};return Array.from(k.querySelectorAll("swal-button")).forEach(function(At){Ui(At,["type","color","aria-label"]);var Tn=At.getAttribute("type");Z["".concat(Tn,"ButtonText")]=At.innerHTML,Z["show".concat(Ot(Tn),"Button")]=!0,At.hasAttribute("color")&&(Z["".concat(Tn,"ButtonColor")]=At.getAttribute("color")),At.hasAttribute("aria-label")&&(Z["".concat(Tn,"ButtonAriaLabel")]=At.getAttribute("aria-label"))}),Z},di=function(k){var Z={},pe=k.querySelector("swal-image");return pe&&(Ui(pe,["src","width","height","alt"]),pe.hasAttribute("src")&&(Z.imageUrl=pe.getAttribute("src")),pe.hasAttribute("width")&&(Z.imageWidth=pe.getAttribute("width")),pe.hasAttribute("height")&&(Z.imageHeight=pe.getAttribute("height")),pe.hasAttribute("alt")&&(Z.imageAlt=pe.getAttribute("alt"))),Z},Ri=function(k){var Z={},pe=k.querySelector("swal-icon");return pe&&(Ui(pe,["type","color"]),pe.hasAttribute("type")&&(Z.icon=pe.getAttribute("type")),pe.hasAttribute("color")&&(Z.iconColor=pe.getAttribute("color")),Z.iconHtml=pe.innerHTML),Z},Vi=function(k){var Z={},pe=k.querySelector("swal-input");pe&&(Ui(pe,["type","label","placeholder","value"]),Z.input=pe.getAttribute("type")||"text",pe.hasAttribute("label")&&(Z.inputLabel=pe.getAttribute("label")),pe.hasAttribute("placeholder")&&(Z.inputPlaceholder=pe.getAttribute("placeholder")),pe.hasAttribute("value")&&(Z.inputValue=pe.getAttribute("value")));var At=Array.from(k.querySelectorAll("swal-input-option"));return At.length&&(Z.inputOptions={},At.forEach(function(Tn){Ui(Tn,["value"]);var ui=Tn.getAttribute("value");Z.inputOptions[ui]=Tn.innerHTML})),Z},Ei=function(k,Z){var pe={};for(var At in Z){var Tn=Z[At],ui=k.querySelector(Tn);ui&&(Ui(ui,[]),pe[Tn.replace(/^swal-/,"")]=ui.innerHTML.trim())}return pe},In=function(k){var Z=Mt.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(k.children).forEach(function(pe){var At=pe.tagName.toLowerCase();Z.includes(At)||Re("Unrecognized element <".concat(At,">"))})},Ui=function(k,Z){Array.from(k.attributes).forEach(function(pe){-1===Z.indexOf(pe.name)&&Re(['Unrecognized attribute "'.concat(pe.name,'" on <').concat(k.tagName.toLowerCase(),">."),"".concat(Z.length?"Allowed attributes are: ".concat(Z.join(", ")):"To set the value, use HTML within the element.")])})},Wr=function(k){var Z=zt(),pe=It();"function"==typeof k.willOpen&&k.willOpen(pe);var Tn=window.getComputedStyle(document.body).overflowY;Yo(Z,pe,k),setTimeout(function(){mr(Z,pe)},10),Ce()&&(Qs(Z,k.scrollbarPadding,Tn),Array.from(document.body.children).forEach(function(Z){Z===zt()||Z.contains(zt())||(Z.hasAttribute("aria-hidden")&&Z.setAttribute("data-previous-aria-hidden",Z.getAttribute("aria-hidden")||""),Z.setAttribute("aria-hidden","true"))})),!Ke()&&!ii.previousActiveElement&&(ii.previousActiveElement=document.activeElement),"function"==typeof k.didOpen&&setTimeout(function(){return k.didOpen(pe)}),Yn(Z,ze["no-transition"])},co=function he(k){var Z=It();if(k.target===Z&&wo){var pe=zt();Z.removeEventListener(wo,he),pe.style.overflowY="auto"}},mr=function(k,Z){wo&&Gn(Z)?(k.style.overflowY="hidden",Z.addEventListener(wo,co)):k.style.overflowY="auto"},Qs=function(k,Z,pe){(function(){if(sa&&!me(document.body,ze.iosfix)){var k=document.body.scrollTop;document.body.style.top="".concat(-1*k,"px"),Kt(document.body,ze.iosfix),Ro()}})(),Z&&"hidden"!==pe&&Za(pe),setTimeout(function(){k.scrollTop=0})},Yo=function(k,Z,pe){Kt(k,pe.showClass.backdrop),pe.animation?(Z.style.setProperty("opacity","0","important"),zn(Z,"grid"),setTimeout(function(){Kt(Z,pe.showClass.popup),Z.style.removeProperty("opacity")},10)):zn(Z,"grid"),Kt([document.documentElement,document.body],ze.shown),pe.heightAuto&&pe.backdrop&&!pe.toast&&Kt([document.documentElement,document.body],ze["height-auto"])},No={email:function(k,Z){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(k)?Promise.resolve():Promise.resolve(Z||"Invalid email address")},url:function(k,Z){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(k)?Promise.resolve():Promise.resolve(Z||"Invalid URL")}};function fs(he){(function bo(he){he.inputValidator||("email"===he.input&&(he.inputValidator=No.email),"url"===he.input&&(he.inputValidator=No.url))})(he),he.showLoaderOnConfirm&&!he.preConfirm&&Re("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Vs(he){(!he.target||"string"==typeof he.target&&!document.querySelector(he.target)||"string"!=typeof he.target&&!he.target.appendChild)&&(Re('Target parameter is not valid, defaulting to "body"'),he.target="body")}(he),"string"==typeof he.title&&(he.title=he.title.split("\n").join("<br />")),br(he)}var zo,ea=new WeakMap,Or=function(){function he(){if(p(this,he),_n(this,ea,{writable:!0,value:void 0}),!(typeof window>"u")){zo=this;for(var k=arguments.length,Z=new Array(k),pe=0;pe<k;pe++)Z[pe]=arguments[pe];var At=Object.freeze(this.constructor.argsToParams(Z));this.params=At,this.isAwaitingPromise=!1,Je(this,ea,this._main(zo.params))}}return Q(he,[{key:"_main",value:function(Z){var pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ba(Object.assign({},pe,Z)),ii.currentInstance){var At=lo.swalPromiseResolve.get(ii.currentInstance),Tn=ii.currentInstance.isAwaitingPromise;ii.currentInstance._destroy(),Tn||At({isDismissed:!0}),Ce()&&hs()}ii.currentInstance=zo;var ui=za(Z,pe);fs(ui),Object.freeze(ui),ii.timeout&&(ii.timeout.stop(),delete ii.timeout),clearTimeout(ii.restoreFocusTimeout);var Gi=Di(zo);return Sr(zo,ui),fn.innerParams.set(zo,ui),Vo(zo,Gi,ui)}},{key:"then",value:function(Z){return mt(this,ea).then(Z)}},{key:"finally",value:function(Z){return mt(this,ea).finally(Z)}}]),he}(),Vo=function(k,Z,pe){return new Promise(function(At,Tn){var ui=function(or){k.close({isDismissed:!0,dismiss:or})};lo.swalPromiseResolve.set(k,At),lo.swalPromiseReject.set(k,Tn),Z.confirmButton.onclick=function(){!function(k){var Z=fn.innerParams.get(k);k.disableButtons(),Z.input?Ur(k,"confirm"):Ir(k,!0)}(k)},Z.denyButton.onclick=function(){!function(k){var Z=fn.innerParams.get(k);k.disableButtons(),Z.returnInputValueOnDeny?Ur(k,"deny"):Xi(k,!1)}(k)},Z.cancelButton.onclick=function(){!function(k,Z){k.disableButtons(),Z(cs.cancel)}(k,ui)},Z.closeButton.onclick=function(){ui(cs.close)},function(k,Z,pe){k.toast?pc(k,Z,pe):(Pr(Z),Pl(Z),Xl(k,Z,pe))}(pe,Z,ui),function(k,Z,pe){Zs(k),Z.toast||(k.keydownHandler=function(At){return _a(Z,At,pe)},k.keydownTarget=Z.keydownListenerCapture?window:It(),k.keydownListenerCapture=Z.keydownListenerCapture,k.keydownTarget.addEventListener("keydown",k.keydownHandler,{capture:k.keydownListenerCapture}),k.keydownHandlerAdded=!0)}(ii,pe,ui),function(k,Z){"select"===Z.input||"radio"===Z.input?Yi(k,Z):["text","email","number","tel","textarea"].some(function(pe){return pe===Z.input})&&(Gt(Z.inputValue)||xt(Z.inputValue))&&(ps(Te()),vo(k,Z))}(k,pe),Wr(pe),Fi(ii,pe,ui),Hi(Z,pe),setTimeout(function(){Z.container.scrollTop=0})})},za=function(k,Z){var pe=function(k){var Z="string"==typeof k.template?document.querySelector(k.template):k.template;if(!Z)return{};var pe=Z.content;return In(pe),Object.assign(on(pe),pn(pe),si(pe),di(pe),Ri(pe),Vi(pe),Ei(pe,Mt))}(k),At=Object.assign({},is,Z,pe,k);return At.showClass=Object.assign({},is.showClass,At.showClass),At.hideClass=Object.assign({},is.hideClass,At.hideClass),!1===At.animation&&(At.showClass={backdrop:"swal2-noanimation"},At.hideClass={}),At},Di=function(k){var Z={popup:It(),container:zt(),actions:Pe(),confirmButton:Te(),denyButton:ve(),cancelButton:xe(),loader:Me(),closeButton:En(),validationMessage:Qe(),progressSteps:Ft()};return fn.domCache.set(k,Z),Z},Fi=function(k,Z,pe){var At=Bn();Rt(At),Z.timer&&(k.timeout=new Ve(function(){pe("timer"),delete k.timeout},Z.timer),Z.timerProgressBar&&(zn(At),U(At,Z,"timerProgressBar"),setTimeout(function(){k.timeout&&k.timeout.running&&Ai(Z.timer)})))},Hi=function(k,Z){if(!Z.toast){if(!Mn(Z.allowEnterKey))return void xo();ar(k,Z)||Zo(-1,1)}},ar=function(k,Z){return Z.focusDeny&&Fe(k.denyButton)?(k.denyButton.focus(),!0):Z.focusCancel&&Fe(k.cancelButton)?(k.cancelButton.focus(),!0):!(!Z.focusConfirm||!Fe(k.confirmButton)||(k.confirmButton.focus(),0))},xo=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var qo=new Date,uo=localStorage.getItem("swal-initiation");uo?(qo.getTime()-Date.parse(uo))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var he=document.createElement("audio");he.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",he.loop=!0,document.body.appendChild(he),setTimeout(function(){he.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(qo))}Or.prototype.disableButtons=As,Or.prototype.enableButtons=qa,Or.prototype.getInput=Lo,Or.prototype.disableInput=Mo,Or.prototype.enableInput=va,Or.prototype.hideLoading=Ya,Or.prototype.disableLoading=Ya,Or.prototype.showValidationMessage=Bo,Or.prototype.resetValidationMessage=ua,Or.prototype.close=Nr,Or.prototype.closePopup=Nr,Or.prototype.closeModal=Nr,Or.prototype.closeToast=Nr,Or.prototype.rejectPromise=Zr,Or.prototype.update=Oa,Or.prototype._destroy=Ka,Object.assign(Or,be),Object.keys(Il).forEach(function(he){Or[he]=function(){var k;return zo&&zo[he]?(k=zo)[he].apply(k,arguments):null}}),Or.DismissReason=cs,Or.version="11.10.1";var xs=Or;return xs.default=xs,xs}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Wt,F){var p=Wt.createElement("style");if(Wt.getElementsByTagName("head")[0].appendChild(p),p.styleSheet)p.styleSheet.disabled||(p.styleSheet.cssText=F);else try{p.innerHTML=F}catch{p.innerText=F}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},7340:(ni,Wt,F)=>{"use strict";F.d(Wt,{F4:()=>lt,IO:()=>jt,LC:()=>j,SB:()=>Ye,X$:()=>o,ZE:()=>sn,ZN:()=>nn,_j:()=>p,eR:()=>wt,jt:()=>P,k1:()=>Cn,l3:()=>Q,oB:()=>ke,pV:()=>yt,ru:()=>st,vP:()=>_t});class p{}class j{}const Q="*";function o(kt,Ae){return{type:7,name:kt,definitions:Ae,options:{}}}function P(kt,Ae=null){return{type:4,styles:Ae,timings:kt}}function st(kt,Ae=null){return{type:3,steps:kt,options:Ae}}function _t(kt,Ae=null){return{type:2,steps:kt,options:Ae}}function ke(kt){return{type:6,styles:kt,offset:null}}function Ye(kt,Ae,ct){return{type:0,name:kt,styles:Ae,options:ct}}function lt(kt){return{type:5,steps:kt}}function wt(kt,Ae,ct=null){return{type:1,expr:kt,animation:Ae,options:ct}}function yt(kt=null){return{type:9,options:kt}}function jt(kt,Ae,ct=null){return{type:11,selector:kt,animation:Ae,options:ct}}function Ct(kt){Promise.resolve().then(kt)}class nn{constructor(Ae=0,ct=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ae+ct}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}onStart(Ae){this._originalOnStartFns.push(Ae),this._onStartFns.push(Ae)}onDone(Ae){this._originalOnDoneFns.push(Ae),this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ct(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ae){this._position=this.totalTime?Ae*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ae){const ct="start"==Ae?this._onStartFns:this._onDoneFns;ct.forEach(ht=>ht()),ct.length=0}}class sn{constructor(Ae){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ae;let ct=0,ht=0,mt=0;const Je=this.players.length;0==Je?Ct(()=>this._onFinish()):this.players.forEach(qt=>{qt.onDone(()=>{++ct==Je&&this._onFinish()}),qt.onDestroy(()=>{++ht==Je&&this._onDestroy()}),qt.onStart(()=>{++mt==Je&&this._onStart()})}),this.totalTime=this.players.reduce((qt,ln)=>Math.max(qt,ln.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}init(){this.players.forEach(Ae=>Ae.init())}onStart(Ae){this._onStartFns.push(Ae)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[])}onDone(Ae){this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ae=>Ae.play())}pause(){this.players.forEach(Ae=>Ae.pause())}restart(){this.players.forEach(Ae=>Ae.restart())}finish(){this._onFinish(),this.players.forEach(Ae=>Ae.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ae=>Ae.destroy()),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this.players.forEach(Ae=>Ae.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ae){const ct=Ae*this.totalTime;this.players.forEach(ht=>{const mt=ht.totalTime?Math.min(1,ct/ht.totalTime):1;ht.setPosition(mt)})}getPosition(){const Ae=this.players.reduce((ct,ht)=>null===ct||ht.totalTime>ct.totalTime?ht:ct,null);return null!=Ae?Ae.getPosition():0}beforeDestroy(){this.players.forEach(Ae=>{Ae.beforeDestroy&&Ae.beforeDestroy()})}triggerCallback(Ae){const ct="start"==Ae?this._onStartFns:this._onDoneFns;ct.forEach(ht=>ht()),ct.length=0}}const Cn="!"},7253:(ni,Wt,F)=>{"use strict";F.d(Wt,{rt:()=>Rt,s1:()=>ft,$s:()=>Nt,kH:()=>Kt,mK:()=>Qe,tE:()=>Jt,qV:()=>Ft,qm:()=>zn,ic:()=>an,Kd:()=>ee,X6:()=>Pe,yG:()=>Ut});var p=F(6895),j=F(4650),Q=F(3353),o=F(7579),P=F(727),st=F(1135),_t=F(9646),ke=F(9521),Ye=F(8505),lt=F(8372),wt=F(9300),it=F(4004),yt=F(5698);function pt(Ee){return(0,wt.h)((se,le)=>Ee<=le)}var jt=F(1884),en=F(2722),Ct=F(1281),nn=F(9643),sn=F(9841),Cn=F(7272),kt=F(9751),Ae=F(8675);const ht=new Set;let mt,Je=(()=>{class Ee{constructor(le){this._platform=le,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ln}matchMedia(le){return(this._platform.WEBKIT||this._platform.BLINK)&&function qt(Ee){if(!ht.has(Ee))try{mt||(mt=document.createElement("style"),mt.setAttribute("type","text/css"),document.head.appendChild(mt)),mt.sheet&&(mt.sheet.insertRule(`@media ${Ee} {body{ }}`,0),ht.add(Ee))}catch(se){console.error(se)}}(le),this._matchMedia(le)}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Q.t4))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function ln(Ee){return{matches:"all"===Ee||""===Ee,media:Ee,addListener:()=>{},removeListener:()=>{}}}let Dn=(()=>{class Ee{constructor(le,Fe){this._mediaMatcher=le,this._zone=Fe,this._queries=new Map,this._destroySubject=new o.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(le){return ti((0,Ct.Eq)(le)).some(Et=>this._registerQuery(Et).mql.matches)}observe(le){const Et=ti((0,Ct.Eq)(le)).map(Gn=>this._registerQuery(Gn).observable);let rn=(0,sn.a)(Et);return rn=(0,Cn.z)(rn.pipe((0,yt.q)(1)),rn.pipe(pt(1),(0,lt.b)(0))),rn.pipe((0,it.U)(Gn=>{const Ai={matches:!1,breakpoints:{}};return Gn.forEach(({matches:yr,query:Rr})=>{Ai.matches=Ai.matches||yr,Ai.breakpoints[Rr]=yr}),Ai}))}_registerQuery(le){if(this._queries.has(le))return this._queries.get(le);const Fe=this._mediaMatcher.matchMedia(le),rn={observable:new kt.y(Gn=>{const Ai=yr=>this._zone.run(()=>Gn.next(yr));return Fe.addListener(Ai),()=>{Fe.removeListener(Ai)}}).pipe((0,Ae.O)(Fe),(0,it.U)(({matches:Gn})=>({query:le,matches:Gn})),(0,en.R)(this._destroySubject)),mql:Fe};return this._queries.set(le,rn),rn}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Je),j.LFG(j.R0b))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function ti(Ee){return Ee.map(se=>se.split(",")).reduce((se,le)=>se.concat(le)).map(se=>se.trim())}function Ii(Ee,se){return(Ee.getAttribute(se)||"").match(/\S+/g)||[]}const Zt="cdk-describedby-message",ze="cdk-describedby-host";let Ge=0,Nt=(()=>{class Ee{constructor(le,Fe){this._platform=Fe,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Ge++,this._document=le,this._id=(0,j.f3M)(j.AFp)+"-"+Ge++}describe(le,Fe,Et){if(!this._canBeDescribed(le,Fe))return;const rn=We(Fe,Et);"string"!=typeof Fe?(Ot(Fe,this._id),this._messageRegistry.set(rn,{messageElement:Fe,referenceCount:0})):this._messageRegistry.has(rn)||this._createMessageElement(Fe,Et),this._isElementDescribedByMessage(le,rn)||this._addMessageReference(le,rn)}removeDescription(le,Fe,Et){if(!Fe||!this._isElementNode(le))return;const rn=We(Fe,Et);if(this._isElementDescribedByMessage(le,rn)&&this._removeMessageReference(le,rn),"string"==typeof Fe){const Gn=this._messageRegistry.get(rn);Gn&&0===Gn.referenceCount&&this._deleteMessageElement(rn)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const le=this._document.querySelectorAll(`[${ze}="${this._id}"]`);for(let Fe=0;Fe<le.length;Fe++)this._removeCdkDescribedByReferenceIds(le[Fe]),le[Fe].removeAttribute(ze);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(le,Fe){const Et=this._document.createElement("div");Ot(Et,this._id),Et.textContent=le,Fe&&Et.setAttribute("role",Fe),this._createMessagesContainer(),this._messagesContainer.appendChild(Et),this._messageRegistry.set(We(le,Fe),{messageElement:Et,referenceCount:0})}_deleteMessageElement(le){this._messageRegistry.get(le)?.messageElement?.remove(),this._messageRegistry.delete(le)}_createMessagesContainer(){if(this._messagesContainer)return;const le="cdk-describedby-message-container",Fe=this._document.querySelectorAll(`.${le}[platform="server"]`);for(let rn=0;rn<Fe.length;rn++)Fe[rn].remove();const Et=this._document.createElement("div");Et.style.visibility="hidden",Et.classList.add(le),Et.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&Et.setAttribute("platform","server"),this._document.body.appendChild(Et),this._messagesContainer=Et}_removeCdkDescribedByReferenceIds(le){const Fe=Ii(le,"aria-describedby").filter(Et=>0!=Et.indexOf(Zt));le.setAttribute("aria-describedby",Fe.join(" "))}_addMessageReference(le,Fe){const Et=this._messageRegistry.get(Fe);(function ii(Ee,se,le){const Fe=Ii(Ee,se);Fe.some(Et=>Et.trim()==le.trim())||(Fe.push(le.trim()),Ee.setAttribute(se,Fe.join(" ")))})(le,"aria-describedby",Et.messageElement.id),le.setAttribute(ze,this._id),Et.referenceCount++}_removeMessageReference(le,Fe){const Et=this._messageRegistry.get(Fe);Et.referenceCount--,function vi(Ee,se,le){const Et=Ii(Ee,se).filter(rn=>rn!=le.trim());Et.length?Ee.setAttribute(se,Et.join(" ")):Ee.removeAttribute(se)}(le,"aria-describedby",Et.messageElement.id),le.removeAttribute(ze)}_isElementDescribedByMessage(le,Fe){const Et=Ii(le,"aria-describedby"),rn=this._messageRegistry.get(Fe),Gn=rn&&rn.messageElement.id;return!!Gn&&-1!=Et.indexOf(Gn)}_canBeDescribed(le,Fe){if(!this._isElementNode(le))return!1;if(Fe&&"object"==typeof Fe)return!0;const Et=null==Fe?"":`${Fe}`.trim(),rn=le.getAttribute("aria-label");return!(!Et||rn&&rn.trim()===Et)}_isElementNode(le){return le.nodeType===this._document.ELEMENT_NODE}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(p.K0),j.LFG(Q.t4))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function We(Ee,se){return"string"==typeof Ee?`${se||""}/${Ee}`:Ee}function Ot(Ee,se){Ee.id||(Ee.id=`${Zt}-${se}-${Ge++}`)}class Re{constructor(se){this._items=se,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new o.x,this._typeaheadSubscription=P.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=le=>le.disabled,this._pressedLetters=[],this.tabOut=new o.x,this.change=new o.x,se instanceof j.n_E&&(this._itemChangesSubscription=se.changes.subscribe(le=>{if(this._activeItem){const Et=le.toArray().indexOf(this._activeItem);Et>-1&&Et!==this._activeItemIndex&&(this._activeItemIndex=Et)}}))}skipPredicate(se){return this._skipPredicateFn=se,this}withWrap(se=!0){return this._wrap=se,this}withVerticalOrientation(se=!0){return this._vertical=se,this}withHorizontalOrientation(se){return this._horizontal=se,this}withAllowedModifierKeys(se){return this._allowedModifierKeys=se,this}withTypeAhead(se=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ye.b)(le=>this._pressedLetters.push(le)),(0,lt.b)(se),(0,wt.h)(()=>this._pressedLetters.length>0),(0,it.U)(()=>this._pressedLetters.join(""))).subscribe(le=>{const Fe=this._getItemsArray();for(let Et=1;Et<Fe.length+1;Et++){const rn=(this._activeItemIndex+Et)%Fe.length,Gn=Fe[rn];if(!this._skipPredicateFn(Gn)&&0===Gn.getLabel().toUpperCase().trim().indexOf(le)){this.setActiveItem(rn);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(se=!0){return this._homeAndEnd=se,this}withPageUpDown(se=!0,le=10){return this._pageUpAndDown={enabled:se,delta:le},this}setActiveItem(se){const le=this._activeItem;this.updateActiveItem(se),this._activeItem!==le&&this.change.next(this._activeItemIndex)}onKeydown(se){const le=se.keyCode,Et=["altKey","ctrlKey","metaKey","shiftKey"].every(rn=>!se[rn]||this._allowedModifierKeys.indexOf(rn)>-1);switch(le){case ke.Mf:return void this.tabOut.next();case ke.JH:if(this._vertical&&Et){this.setNextItemActive();break}return;case ke.LH:if(this._vertical&&Et){this.setPreviousItemActive();break}return;case ke.SV:if(this._horizontal&&Et){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case ke.oh:if(this._horizontal&&Et){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case ke.Sd:if(this._homeAndEnd&&Et){this.setFirstItemActive();break}return;case ke.uR:if(this._homeAndEnd&&Et){this.setLastItemActive();break}return;case ke.Ku:if(this._pageUpAndDown.enabled&&Et){const rn=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(rn>0?rn:0,1);break}return;case ke.VM:if(this._pageUpAndDown.enabled&&Et){const rn=this._activeItemIndex+this._pageUpAndDown.delta,Gn=this._getItemsArray().length;this._setActiveItemByIndex(rn<Gn?rn:Gn-1,-1);break}return;default:return void((Et||(0,ke.Vb)(se,"shiftKey"))&&(se.key&&1===se.key.length?this._letterKeyStream.next(se.key.toLocaleUpperCase()):(le>=ke.A&&le<=ke.Z||le>=ke.xE&&le<=ke.aO)&&this._letterKeyStream.next(String.fromCharCode(le))))}this._pressedLetters=[],se.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(se){const le=this._getItemsArray(),Fe="number"==typeof se?se:le.indexOf(se);this._activeItem=le[Fe]??null,this._activeItemIndex=Fe}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(se){this._wrap?this._setActiveInWrapMode(se):this._setActiveInDefaultMode(se)}_setActiveInWrapMode(se){const le=this._getItemsArray();for(let Fe=1;Fe<=le.length;Fe++){const Et=(this._activeItemIndex+se*Fe+le.length)%le.length;if(!this._skipPredicateFn(le[Et]))return void this.setActiveItem(Et)}}_setActiveInDefaultMode(se){this._setActiveItemByIndex(this._activeItemIndex+se,se)}_setActiveItemByIndex(se,le){const Fe=this._getItemsArray();if(Fe[se]){for(;this._skipPredicateFn(Fe[se]);)if(!Fe[se+=le])return;this.setActiveItem(se)}}_getItemsArray(){return this._items instanceof j.n_E?this._items.toArray():this._items}}class ft extends Re{setActiveItem(se){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(se),this.activeItem&&this.activeItem.setActiveStyles()}}let an=(()=>{class Ee{constructor(le){this._platform=le}isDisabled(le){return le.hasAttribute("disabled")}isVisible(le){return function Gt(Ee){return!!(Ee.offsetWidth||Ee.offsetHeight||"function"==typeof Ee.getClientRects&&Ee.getClientRects().length)}(le)&&"visible"===getComputedStyle(le).visibility}isTabbable(le){if(!this._platform.isBrowser)return!1;const Fe=function Mn(Ee){try{return Ee.frameElement}catch{return null}}(function De(Ee){return Ee.ownerDocument&&Ee.ownerDocument.defaultView||window}(le));if(Fe&&(-1===li(Fe)||!this.isVisible(Fe)))return!1;let Et=le.nodeName.toLowerCase(),rn=li(le);return le.hasAttribute("contenteditable")?-1!==rn:!("iframe"===Et||"object"===Et||this._platform.WEBKIT&&this._platform.IOS&&!function je(Ee){let se=Ee.nodeName.toLowerCase(),le="input"===se&&Ee.type;return"text"===le||"password"===le||"select"===se||"textarea"===se}(le))&&("audio"===Et?!!le.hasAttribute("controls")&&-1!==rn:"video"===Et?-1!==rn&&(null!==rn||this._platform.FIREFOX||le.hasAttribute("controls")):le.tabIndex>=0)}isFocusable(le,Fe){return function ce(Ee){return!function xt(Ee){return function Wn(Ee){return"input"==Ee.nodeName.toLowerCase()}(Ee)&&"hidden"==Ee.type}(Ee)&&(function On(Ee){let se=Ee.nodeName.toLowerCase();return"input"===se||"select"===se||"button"===se||"textarea"===se}(Ee)||function zt(Ee){return function Fn(Ee){return"a"==Ee.nodeName.toLowerCase()}(Ee)&&Ee.hasAttribute("href")}(Ee)||Ee.hasAttribute("contenteditable")||It(Ee))}(le)&&!this.isDisabled(le)&&(Fe?.ignoreVisibility||this.isVisible(le))}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Q.t4))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function It(Ee){if(!Ee.hasAttribute("tabindex")||void 0===Ee.tabIndex)return!1;let se=Ee.getAttribute("tabindex");return!(!se||isNaN(parseInt(se,10)))}function li(Ee){if(!It(Ee))return null;const se=parseInt(Ee.getAttribute("tabindex")||"",10);return isNaN(se)?-1:se}class $e{get enabled(){return this._enabled}set enabled(se){this._enabled=se,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(se,this._startAnchor),this._toggleAnchorTabIndex(se,this._endAnchor))}constructor(se,le,Fe,Et,rn=!1){this._element=se,this._checker=le,this._ngZone=Fe,this._document=Et,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,rn||this.attachAnchors()}destroy(){const se=this._startAnchor,le=this._endAnchor;se&&(se.removeEventListener("focus",this.startAnchorListener),se.remove()),le&&(le.removeEventListener("focus",this.endAnchorListener),le.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(se){return new Promise(le=>{this._executeOnStable(()=>le(this.focusInitialElement(se)))})}focusFirstTabbableElementWhenReady(se){return new Promise(le=>{this._executeOnStable(()=>le(this.focusFirstTabbableElement(se)))})}focusLastTabbableElementWhenReady(se){return new Promise(le=>{this._executeOnStable(()=>le(this.focusLastTabbableElement(se)))})}_getRegionBoundary(se){const le=this._element.querySelectorAll(`[cdk-focus-region-${se}], [cdkFocusRegion${se}], [cdk-focus-${se}]`);return"start"==se?le.length?le[0]:this._getFirstTabbableElement(this._element):le.length?le[le.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(se){const le=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(le){if(!this._checker.isFocusable(le)){const Fe=this._getFirstTabbableElement(le);return Fe?.focus(se),!!Fe}return le.focus(se),!0}return this.focusFirstTabbableElement(se)}focusFirstTabbableElement(se){const le=this._getRegionBoundary("start");return le&&le.focus(se),!!le}focusLastTabbableElement(se){const le=this._getRegionBoundary("end");return le&&le.focus(se),!!le}hasAttached(){return this._hasAttached}_getFirstTabbableElement(se){if(this._checker.isFocusable(se)&&this._checker.isTabbable(se))return se;const le=se.children;for(let Fe=0;Fe<le.length;Fe++){const Et=le[Fe].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(le[Fe]):null;if(Et)return Et}return null}_getLastTabbableElement(se){if(this._checker.isFocusable(se)&&this._checker.isTabbable(se))return se;const le=se.children;for(let Fe=le.length-1;Fe>=0;Fe--){const Et=le[Fe].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(le[Fe]):null;if(Et)return Et}return null}_createAnchor(){const se=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,se),se.classList.add("cdk-visually-hidden"),se.classList.add("cdk-focus-trap-anchor"),se.setAttribute("aria-hidden","true"),se}_toggleAnchorTabIndex(se,le){se?le.setAttribute("tabindex","0"):le.removeAttribute("tabindex")}toggleAnchors(se){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(se,this._startAnchor),this._toggleAnchorTabIndex(se,this._endAnchor))}_executeOnStable(se){this._ngZone.isStable?se():this._ngZone.onStable.pipe((0,yt.q)(1)).subscribe(se)}}let Ft=(()=>{class Ee{constructor(le,Fe,Et){this._checker=le,this._ngZone=Fe,this._document=Et}create(le,Fe=!1){return new $e(le,this._checker,this._ngZone,this._document,Fe)}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(an),j.LFG(j.R0b),j.LFG(p.K0))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),Qe=(()=>{class Ee{get enabled(){return this.focusTrap.enabled}set enabled(le){this.focusTrap.enabled=(0,Ct.Ig)(le)}get autoCapture(){return this._autoCapture}set autoCapture(le){this._autoCapture=(0,Ct.Ig)(le)}constructor(le,Fe,Et){this._elementRef=le,this._focusTrapFactory=Fe,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(le){const Fe=le.autoCapture;Fe&&!Fe.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=(0,Q.ht)(),this.focusTrap.focusInitialElementWhenReady()}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.Y36(j.SBq),j.Y36(Ft),j.Y36(p.K0))},Ee.\u0275dir=j.lG2({type:Ee,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[j.TTD]}),Ee})();function Pe(Ee){return 0===Ee.buttons||0===Ee.offsetX&&0===Ee.offsetY}function Ut(Ee){const se=Ee.touches&&Ee.touches[0]||Ee.changedTouches&&Ee.changedTouches[0];return!(!se||-1!==se.identifier||null!=se.radiusX&&1!==se.radiusX||null!=se.radiusY&&1!==se.radiusY)}const Bn=new j.OlP("cdk-input-modality-detector-options"),En={ignoreKeys:[ke.zL,ke.jx,ke.b2,ke.MW,ke.JU]},ue=(0,Q.i$)({passive:!0,capture:!0});let Ce=(()=>{class Ee{get mostRecentModality(){return this._modality.value}constructor(le,Fe,Et,rn){this._platform=le,this._mostRecentTarget=null,this._modality=new st.X(null),this._lastTouchMs=0,this._onKeydown=Gn=>{this._options?.ignoreKeys?.some(Ai=>Ai===Gn.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Q.sA)(Gn))},this._onMousedown=Gn=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Pe(Gn)?"keyboard":"mouse"),this._mostRecentTarget=(0,Q.sA)(Gn))},this._onTouchstart=Gn=>{Ut(Gn)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Q.sA)(Gn))},this._options={...En,...rn},this.modalityDetected=this._modality.pipe(pt(1)),this.modalityChanged=this.modalityDetected.pipe((0,jt.x)()),le.isBrowser&&Fe.runOutsideAngular(()=>{Et.addEventListener("keydown",this._onKeydown,ue),Et.addEventListener("mousedown",this._onMousedown,ue),Et.addEventListener("touchstart",this._onTouchstart,ue)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ue),document.removeEventListener("mousedown",this._onMousedown,ue),document.removeEventListener("touchstart",this._onTouchstart,ue))}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Q.t4),j.LFG(j.R0b),j.LFG(p.K0),j.LFG(Bn,8))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const Ke=new j.OlP("liveAnnouncerElement",{providedIn:"root",factory:function bt(){return null}}),Pt=new j.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let me=0,ee=(()=>{class Ee{constructor(le,Fe,Et,rn){this._ngZone=Fe,this._defaultOptions=rn,this._document=Et,this._liveElement=le||this._createLiveElement()}announce(le,...Fe){const Et=this._defaultOptions;let rn,Gn;return 1===Fe.length&&"number"==typeof Fe[0]?Gn=Fe[0]:[rn,Gn]=Fe,this.clear(),clearTimeout(this._previousTimeout),rn||(rn=Et&&Et.politeness?Et.politeness:"polite"),null==Gn&&Et&&(Gn=Et.duration),this._liveElement.setAttribute("aria-live",rn),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Ai=>this._currentResolve=Ai)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=le,"number"==typeof Gn&&(this._previousTimeout=setTimeout(()=>this.clear(),Gn)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const le="cdk-live-announcer-element",Fe=this._document.getElementsByClassName(le),Et=this._document.createElement("div");for(let rn=0;rn<Fe.length;rn++)Fe[rn].remove();return Et.classList.add(le),Et.classList.add("cdk-visually-hidden"),Et.setAttribute("aria-atomic","true"),Et.setAttribute("aria-live","polite"),Et.id="cdk-live-announcer-"+me++,this._document.body.appendChild(Et),Et}_exposeAnnouncerToModals(le){const Fe=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let Et=0;Et<Fe.length;Et++){const rn=Fe[Et],Gn=rn.getAttribute("aria-owns");Gn?-1===Gn.indexOf(le)&&rn.setAttribute("aria-owns",Gn+" "+le):rn.setAttribute("aria-owns",le)}}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Ke,8),j.LFG(j.R0b),j.LFG(p.K0),j.LFG(Pt,8))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const we=new j.OlP("cdk-focus-monitor-default-options"),nt=(0,Q.i$)({passive:!0,capture:!0});let Jt=(()=>{class Ee{constructor(le,Fe,Et,rn,Gn){this._ngZone=le,this._platform=Fe,this._inputModalityDetector=Et,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new o.x,this._rootNodeFocusAndBlurListener=Ai=>{for(let Rr=(0,Q.sA)(Ai);Rr;Rr=Rr.parentElement)"focus"===Ai.type?this._onFocus(Ai,Rr):this._onBlur(Ai,Rr)},this._document=rn,this._detectionMode=Gn?.detectionMode||0}monitor(le,Fe=!1){const Et=(0,Ct.fI)(le);if(!this._platform.isBrowser||1!==Et.nodeType)return(0,_t.of)(null);const rn=(0,Q.kV)(Et)||this._getDocument(),Gn=this._elementInfo.get(Et);if(Gn)return Fe&&(Gn.checkChildren=!0),Gn.subject;const Ai={checkChildren:Fe,subject:new o.x,rootNode:rn};return this._elementInfo.set(Et,Ai),this._registerGlobalListeners(Ai),Ai.subject}stopMonitoring(le){const Fe=(0,Ct.fI)(le),Et=this._elementInfo.get(Fe);Et&&(Et.subject.complete(),this._setClasses(Fe),this._elementInfo.delete(Fe),this._removeGlobalListeners(Et))}focusVia(le,Fe,Et){const rn=(0,Ct.fI)(le);rn===this._getDocument().activeElement?this._getClosestElementsInfo(rn).forEach(([Ai,yr])=>this._originChanged(Ai,Fe,yr)):(this._setOrigin(Fe),"function"==typeof rn.focus&&rn.focus(Et))}ngOnDestroy(){this._elementInfo.forEach((le,Fe)=>this.stopMonitoring(Fe))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(le){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(le)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:le&&this._isLastInteractionFromInputLabel(le)?"mouse":"program"}_shouldBeAttributedToTouch(le){return 1===this._detectionMode||!!le?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(le,Fe){le.classList.toggle("cdk-focused",!!Fe),le.classList.toggle("cdk-touch-focused","touch"===Fe),le.classList.toggle("cdk-keyboard-focused","keyboard"===Fe),le.classList.toggle("cdk-mouse-focused","mouse"===Fe),le.classList.toggle("cdk-program-focused","program"===Fe)}_setOrigin(le,Fe=!1){this._ngZone.runOutsideAngular(()=>{this._origin=le,this._originFromTouchInteraction="touch"===le&&Fe,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(le,Fe){const Et=this._elementInfo.get(Fe),rn=(0,Q.sA)(le);!Et||!Et.checkChildren&&Fe!==rn||this._originChanged(Fe,this._getFocusOrigin(rn),Et)}_onBlur(le,Fe){const Et=this._elementInfo.get(Fe);!Et||Et.checkChildren&&le.relatedTarget instanceof Node&&Fe.contains(le.relatedTarget)||(this._setClasses(Fe),this._emitOrigin(Et,null))}_emitOrigin(le,Fe){le.subject.observers.length&&this._ngZone.run(()=>le.subject.next(Fe))}_registerGlobalListeners(le){if(!this._platform.isBrowser)return;const Fe=le.rootNode,Et=this._rootNodeFocusListenerCount.get(Fe)||0;Et||this._ngZone.runOutsideAngular(()=>{Fe.addEventListener("focus",this._rootNodeFocusAndBlurListener,nt),Fe.addEventListener("blur",this._rootNodeFocusAndBlurListener,nt)}),this._rootNodeFocusListenerCount.set(Fe,Et+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,en.R)(this._stopInputModalityDetector)).subscribe(rn=>{this._setOrigin(rn,!0)}))}_removeGlobalListeners(le){const Fe=le.rootNode;if(this._rootNodeFocusListenerCount.has(Fe)){const Et=this._rootNodeFocusListenerCount.get(Fe);Et>1?this._rootNodeFocusListenerCount.set(Fe,Et-1):(Fe.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nt),Fe.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nt),this._rootNodeFocusListenerCount.delete(Fe))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(le,Fe,Et){this._setClasses(le,Fe),this._emitOrigin(Et,Fe),this._lastFocusOrigin=Fe}_getClosestElementsInfo(le){const Fe=[];return this._elementInfo.forEach((Et,rn)=>{(rn===le||Et.checkChildren&&rn.contains(le))&&Fe.push([rn,Et])}),Fe}_isLastInteractionFromInputLabel(le){const{_mostRecentTarget:Fe,mostRecentModality:Et}=this._inputModalityDetector;if("mouse"!==Et||!Fe||Fe===le||"INPUT"!==le.nodeName&&"TEXTAREA"!==le.nodeName||le.disabled)return!1;const rn=le.labels;if(rn)for(let Gn=0;Gn<rn.length;Gn++)if(rn[Gn].contains(Fe))return!0;return!1}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(j.R0b),j.LFG(Q.t4),j.LFG(Ce),j.LFG(p.K0,8),j.LFG(we,8))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),Kt=(()=>{class Ee{constructor(le,Fe){this._elementRef=le,this._focusMonitor=Fe,this._focusOrigin=null,this.cdkFocusChange=new j.vpe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const le=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(le,1===le.nodeType&&le.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(Fe=>{this._focusOrigin=Fe,this.cdkFocusChange.emit(Fe)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.Y36(j.SBq),j.Y36(Jt))},Ee.\u0275dir=j.lG2({type:Ee,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),Ee})();const Yn="cdk-high-contrast-black-on-white",Hn="cdk-high-contrast-white-on-black",ri="cdk-high-contrast-active";let zn=(()=>{class Ee{constructor(le,Fe){this._platform=le,this._document=Fe,this._breakpointSubscription=(0,j.f3M)(Dn).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const le=this._document.createElement("div");le.style.backgroundColor="rgb(1,2,3)",le.style.position="absolute",this._document.body.appendChild(le);const Fe=this._document.defaultView||window,Et=Fe&&Fe.getComputedStyle?Fe.getComputedStyle(le):null,rn=(Et&&Et.backgroundColor||"").replace(/ /g,"");switch(le.remove(),rn){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const le=this._document.body.classList;le.remove(ri,Yn,Hn),this._hasCheckedHighContrastMode=!0;const Fe=this.getHighContrastMode();1===Fe?le.add(ri,Yn):2===Fe&&le.add(ri,Hn)}}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(Q.t4),j.LFG(p.K0))},Ee.\u0275prov=j.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),Rt=(()=>{class Ee{constructor(le){le._applyBodyHighContrastModeCssClasses()}}return Ee.\u0275fac=function(le){return new(le||Ee)(j.LFG(zn))},Ee.\u0275mod=j.oAB({type:Ee}),Ee.\u0275inj=j.cJS({imports:[nn.Q8]}),Ee})()},445:(ni,Wt,F)=>{"use strict";F.d(Wt,{Is:()=>_t,vT:()=>Ye});var p=F(4650),j=F(6895);const Q=new p.OlP("cdk-dir-doc",{providedIn:"root",factory:function o(){return(0,p.f3M)(j.K0)}}),P=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _t=(()=>{class lt{constructor(it){this.value="ltr",this.change=new p.vpe,it&&(this.value=function st(lt){const wt=lt?.toLowerCase()||"";return"auto"===wt&&typeof navigator<"u"&&navigator?.language?P.test(navigator.language)?"rtl":"ltr":"rtl"===wt?"rtl":"ltr"}((it.body?it.body.dir:null)||(it.documentElement?it.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return lt.\u0275fac=function(it){return new(it||lt)(p.LFG(Q,8))},lt.\u0275prov=p.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),Ye=(()=>{class lt{}return lt.\u0275fac=function(it){return new(it||lt)},lt.\u0275mod=p.oAB({type:lt}),lt.\u0275inj=p.cJS({}),lt})()},1281:(ni,Wt,F)=>{"use strict";F.d(Wt,{Eq:()=>P,HM:()=>st,Ig:()=>j,du:()=>ke,fI:()=>_t,su:()=>Q});var p=F(4650);function j(Ye){return null!=Ye&&"false"!=`${Ye}`}function Q(Ye,lt=0){return function o(Ye){return!isNaN(parseFloat(Ye))&&!isNaN(Number(Ye))}(Ye)?Number(Ye):lt}function P(Ye){return Array.isArray(Ye)?Ye:[Ye]}function st(Ye){return null==Ye?"":"string"==typeof Ye?Ye:`${Ye}px`}function _t(Ye){return Ye instanceof p.SBq?Ye.nativeElement:Ye}function ke(Ye,lt=/\s+/){const wt=[];if(null!=Ye){const it=Array.isArray(Ye)?Ye:`${Ye}`.split(lt);for(const yt of it){const pt=`${yt}`.trim();pt&&wt.push(pt)}}return wt}},5017:(ni,Wt,F)=>{"use strict";F.d(Wt,{Ov:()=>Ye,Z9:()=>P,eX:()=>ke,k:()=>it,yy:()=>_t});var p=F(4033),j=F(7579),Q=F(4650);function P(yt){return yt&&"function"==typeof yt.connect&&!(yt instanceof p.c)}class _t{applyChanges(pt,jt,en,Ct,nn){pt.forEachOperation((sn,Cn,kt)=>{let Ae,ct;if(null==sn.previousIndex){const ht=en(sn,Cn,kt);Ae=jt.createEmbeddedView(ht.templateRef,ht.context,ht.index),ct=1}else null==kt?(jt.remove(Cn),ct=3):(Ae=jt.get(Cn),jt.move(Ae,kt),ct=2);nn&&nn({context:Ae?.context,operation:ct,record:sn})})}detach(){}}class ke{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(pt,jt,en,Ct,nn){pt.forEachOperation((sn,Cn,kt)=>{let Ae,ct;null==sn.previousIndex?(Ae=this._insertView(()=>en(sn,Cn,kt),kt,jt,Ct(sn)),ct=Ae?1:0):null==kt?(this._detachAndCacheView(Cn,jt),ct=3):(Ae=this._moveView(Cn,kt,jt,Ct(sn)),ct=2),nn&&nn({context:Ae?.context,operation:ct,record:sn})})}detach(){for(const pt of this._viewCache)pt.destroy();this._viewCache=[]}_insertView(pt,jt,en,Ct){const nn=this._insertViewFromCache(jt,en);if(nn)return void(nn.context.$implicit=Ct);const sn=pt();return en.createEmbeddedView(sn.templateRef,sn.context,sn.index)}_detachAndCacheView(pt,jt){const en=jt.detach(pt);this._maybeCacheView(en,jt)}_moveView(pt,jt,en,Ct){const nn=en.get(pt);return en.move(nn,jt),nn.context.$implicit=Ct,nn}_maybeCacheView(pt,jt){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(pt);else{const en=jt.indexOf(pt);-1===en?pt.destroy():jt.remove(en)}}_insertViewFromCache(pt,jt){const en=this._viewCache.pop();return en&&jt.insert(en,pt),en||null}}class Ye{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(pt=!1,jt,en=!0,Ct){this._multiple=pt,this._emitChanges=en,this.compareWith=Ct,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new j.x,jt&&jt.length&&(pt?jt.forEach(nn=>this._markSelected(nn)):this._markSelected(jt[0]),this._selectedToEmit.length=0)}select(...pt){this._verifyValueAssignment(pt),pt.forEach(en=>this._markSelected(en));const jt=this._hasQueuedChanges();return this._emitChangeEvent(),jt}deselect(...pt){this._verifyValueAssignment(pt),pt.forEach(en=>this._unmarkSelected(en));const jt=this._hasQueuedChanges();return this._emitChangeEvent(),jt}setSelection(...pt){this._verifyValueAssignment(pt);const jt=this.selected,en=new Set(pt);pt.forEach(nn=>this._markSelected(nn)),jt.filter(nn=>!en.has(nn)).forEach(nn=>this._unmarkSelected(nn));const Ct=this._hasQueuedChanges();return this._emitChangeEvent(),Ct}toggle(pt){return this.isSelected(pt)?this.deselect(pt):this.select(pt)}clear(pt=!0){this._unmarkAll();const jt=this._hasQueuedChanges();return pt&&this._emitChangeEvent(),jt}isSelected(pt){return this._selection.has(this._getConcreteValue(pt))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(pt){this._multiple&&this.selected&&this._selected.sort(pt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(pt){pt=this._getConcreteValue(pt),this.isSelected(pt)||(this._multiple||this._unmarkAll(),this.isSelected(pt)||this._selection.add(pt),this._emitChanges&&this._selectedToEmit.push(pt))}_unmarkSelected(pt){pt=this._getConcreteValue(pt),this.isSelected(pt)&&(this._selection.delete(pt),this._emitChanges&&this._deselectedToEmit.push(pt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(pt=>this._unmarkSelected(pt))}_verifyValueAssignment(pt){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(pt){if(this.compareWith){for(let jt of this._selection)if(this.compareWith(pt,jt))return jt;return pt}return pt}}const it=new Q.OlP("_ViewRepeater")},9521:(ni,Wt,F)=>{"use strict";F.d(Wt,{A:()=>Ge,JH:()=>Cn,JU:()=>st,K5:()=>P,Ku:()=>yt,LH:()=>nn,L_:()=>it,MW:()=>ve,Mf:()=>Q,SV:()=>sn,Sd:()=>en,VM:()=>pt,Vb:()=>mi,Z:()=>xe,ZH:()=>j,aO:()=>vi,b2:()=>An,hY:()=>wt,jx:()=>_t,oh:()=>Ct,uR:()=>jt,xE:()=>mt,zL:()=>ke});const j=8,Q=9,P=13,st=16,_t=17,ke=18,wt=27,it=32,yt=33,pt=34,jt=35,en=36,Ct=37,nn=38,sn=39,Cn=40,mt=48,vi=57,Ge=65,xe=90,ve=91,An=224;function mi(fn,...xi){return xi.length?xi.some(wi=>fn[wi]):fn.altKey||fn.shiftKey||fn.ctrlKey||fn.metaKey}},9643:(ni,Wt,F)=>{"use strict";F.d(Wt,{Q8:()=>Ye,wD:()=>ke});var p=F(1281),j=F(4650),Q=F(9751),o=F(7579),P=F(8372);let st=(()=>{class lt{create(it){return typeof MutationObserver>"u"?null:new MutationObserver(it)}}return lt.\u0275fac=function(it){return new(it||lt)},lt.\u0275prov=j.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),_t=(()=>{class lt{constructor(it){this._mutationObserverFactory=it,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((it,yt)=>this._cleanupObserver(yt))}observe(it){const yt=(0,p.fI)(it);return new Q.y(pt=>{const en=this._observeElement(yt).subscribe(pt);return()=>{en.unsubscribe(),this._unobserveElement(yt)}})}_observeElement(it){if(this._observedElements.has(it))this._observedElements.get(it).count++;else{const yt=new o.x,pt=this._mutationObserverFactory.create(jt=>yt.next(jt));pt&&pt.observe(it,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(it,{observer:pt,stream:yt,count:1})}return this._observedElements.get(it).stream}_unobserveElement(it){this._observedElements.has(it)&&(this._observedElements.get(it).count--,this._observedElements.get(it).count||this._cleanupObserver(it))}_cleanupObserver(it){if(this._observedElements.has(it)){const{observer:yt,stream:pt}=this._observedElements.get(it);yt&&yt.disconnect(),pt.complete(),this._observedElements.delete(it)}}}return lt.\u0275fac=function(it){return new(it||lt)(j.LFG(st))},lt.\u0275prov=j.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),ke=(()=>{class lt{get disabled(){return this._disabled}set disabled(it){this._disabled=(0,p.Ig)(it),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(it){this._debounce=(0,p.su)(it),this._subscribe()}constructor(it,yt,pt){this._contentObserver=it,this._elementRef=yt,this._ngZone=pt,this.event=new j.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const it=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?it.pipe((0,P.b)(this.debounce)):it).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return lt.\u0275fac=function(it){return new(it||lt)(j.Y36(_t),j.Y36(j.SBq),j.Y36(j.R0b))},lt.\u0275dir=j.lG2({type:lt,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),lt})(),Ye=(()=>{class lt{}return lt.\u0275fac=function(it){return new(it||lt)},lt.\u0275mod=j.oAB({type:lt}),lt.\u0275inj=j.cJS({providers:[st]}),lt})()},8184:(ni,Wt,F)=>{"use strict";F.d(Wt,{Iu:()=>Ii,U8:()=>It,X_:()=>mt,Xj:()=>vi,_G:()=>ze,aV:()=>Mn,pI:()=>zt,xu:()=>xt});var p=F(8605),j=F(6895),Q=F(4650),o=F(1281),P=F(3353),st=F(9300),_t=F(5698),ke=F(2722),Ye=F(2529),lt=F(445),wt=F(4080),it=F(7579),yt=F(727),pt=F(6451),jt=F(9521);const en=(0,P.Mq)();class Ct{constructor(ce,De){this._viewportRuler=ce,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=De}attach(){}enable(){if(this._canBeEnabled()){const ce=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ce.style.left||"",this._previousHTMLStyles.top=ce.style.top||"",ce.style.left=(0,o.HM)(-this._previousScrollPosition.left),ce.style.top=(0,o.HM)(-this._previousScrollPosition.top),ce.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ce=this._document.documentElement,$e=ce.style,Ft=this._document.body.style,Qe=$e.scrollBehavior||"",Te=Ft.scrollBehavior||"";this._isEnabled=!1,$e.left=this._previousHTMLStyles.left,$e.top=this._previousHTMLStyles.top,ce.classList.remove("cdk-global-scrollblock"),en&&($e.scrollBehavior=Ft.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),en&&($e.scrollBehavior=Qe,Ft.scrollBehavior=Te)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const De=this._document.body,$e=this._viewportRuler.getViewportSize();return De.scrollHeight>$e.height||De.scrollWidth>$e.width}}class sn{constructor(ce,De,$e,Ft){this._scrollDispatcher=ce,this._ngZone=De,this._viewportRuler=$e,this._config=Ft,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ce){this._overlayRef=ce}enable(){if(this._scrollSubscription)return;const ce=this._scrollDispatcher.scrolled(0).pipe((0,st.h)(De=>!De||!this._overlayRef.overlayElement.contains(De.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ce.subscribe(()=>{const De=this._viewportRuler.getViewportScrollPosition().top;Math.abs(De-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ce.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Cn{enable(){}disable(){}attach(){}}function kt(je,ce){return ce.some(De=>je.bottom<De.top||je.top>De.bottom||je.right<De.left||je.left>De.right)}function Ae(je,ce){return ce.some(De=>je.top<De.top||je.bottom>De.bottom||je.left<De.left||je.right>De.right)}class ct{constructor(ce,De,$e,Ft){this._scrollDispatcher=ce,this._viewportRuler=De,this._ngZone=$e,this._config=Ft,this._scrollSubscription=null}attach(ce){this._overlayRef=ce}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const De=this._overlayRef.overlayElement.getBoundingClientRect(),{width:$e,height:Ft}=this._viewportRuler.getViewportSize();kt(De,[{width:$e,height:Ft,bottom:Ft,right:$e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ht=(()=>{class je{constructor(De,$e,Ft,Qe){this._scrollDispatcher=De,this._viewportRuler=$e,this._ngZone=Ft,this.noop=()=>new Cn,this.close=Te=>new sn(this._scrollDispatcher,this._ngZone,this._viewportRuler,Te),this.block=()=>new Ct(this._viewportRuler,this._document),this.reposition=Te=>new ct(this._scrollDispatcher,this._viewportRuler,this._ngZone,Te),this._document=Qe}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(p.mF),Q.LFG(p.rL),Q.LFG(Q.R0b),Q.LFG(j.K0))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();class mt{constructor(ce){if(this.scrollStrategy=new Cn,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ce){const De=Object.keys(ce);for(const $e of De)void 0!==ce[$e]&&(this[$e]=ce[$e])}}}class ln{constructor(ce,De){this.connectionPair=ce,this.scrollableViewProperties=De}}let _n=(()=>{class je{constructor(De){this._attachedOverlays=[],this._document=De}ngOnDestroy(){this.detach()}add(De){this.remove(De),this._attachedOverlays.push(De)}remove(De){const $e=this._attachedOverlays.indexOf(De);$e>-1&&this._attachedOverlays.splice($e,1),0===this._attachedOverlays.length&&this.detach()}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(j.K0))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),_i=(()=>{class je extends _n{constructor(De,$e){super(De),this._ngZone=$e,this._keydownListener=Ft=>{const Qe=this._attachedOverlays;for(let Te=Qe.length-1;Te>-1;Te--)if(Qe[Te]._keydownEvents.observers.length>0){const xe=Qe[Te]._keydownEvents;this._ngZone?this._ngZone.run(()=>xe.next(Ft)):xe.next(Ft);break}}}add(De){super.add(De),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(j.K0),Q.LFG(Q.R0b,8))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),ii=(()=>{class je extends _n{constructor(De,$e,Ft){super(De),this._platform=$e,this._ngZone=Ft,this._cursorStyleIsSet=!1,this._pointerDownListener=Qe=>{this._pointerDownEventTarget=(0,P.sA)(Qe)},this._clickListener=Qe=>{const Te=(0,P.sA)(Qe),xe="click"===Qe.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Te;this._pointerDownEventTarget=null;const ve=this._attachedOverlays.slice();for(let re=ve.length-1;re>-1;re--){const Me=ve[re];if(Me._outsidePointerEvents.observers.length<1||!Me.hasAttached())continue;if(Me.overlayElement.contains(Te)||Me.overlayElement.contains(xe))break;const Pe=Me._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Pe.next(Qe)):Pe.next(Qe)}}}add(De){if(super.add(De),!this._isAttached){const $e=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners($e)):this._addEventListeners($e),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=$e.style.cursor,$e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const De=this._document.body;De.removeEventListener("pointerdown",this._pointerDownListener,!0),De.removeEventListener("click",this._clickListener,!0),De.removeEventListener("auxclick",this._clickListener,!0),De.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(De.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(De){De.addEventListener("pointerdown",this._pointerDownListener,!0),De.addEventListener("click",this._clickListener,!0),De.addEventListener("auxclick",this._clickListener,!0),De.addEventListener("contextmenu",this._clickListener,!0)}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(j.K0),Q.LFG(P.t4),Q.LFG(Q.R0b,8))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),vi=(()=>{class je{constructor(De,$e){this._platform=$e,this._document=De}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const De="cdk-overlay-container";if(this._platform.isBrowser||(0,P.Oy)()){const Ft=this._document.querySelectorAll(`.${De}[platform="server"], .${De}[platform="test"]`);for(let Qe=0;Qe<Ft.length;Qe++)Ft[Qe].remove()}const $e=this._document.createElement("div");$e.classList.add(De),(0,P.Oy)()?$e.setAttribute("platform","test"):this._platform.isBrowser||$e.setAttribute("platform","server"),this._document.body.appendChild($e),this._containerElement=$e}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(j.K0),Q.LFG(P.t4))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();class Ii{constructor(ce,De,$e,Ft,Qe,Te,xe,ve,re,Me=!1){this._portalOutlet=ce,this._host=De,this._pane=$e,this._config=Ft,this._ngZone=Qe,this._keyboardDispatcher=Te,this._document=xe,this._location=ve,this._outsideClickDispatcher=re,this._animationsDisabled=Me,this._backdropElement=null,this._backdropClick=new it.x,this._attachments=new it.x,this._detachments=new it.x,this._locationChanges=yt.w0.EMPTY,this._backdropClickHandler=Pe=>this._backdropClick.next(Pe),this._backdropTransitionendHandler=Pe=>{this._disposeBackdrop(Pe.target)},this._keydownEvents=new it.x,this._outsidePointerEvents=new it.x,Ft.scrollStrategy&&(this._scrollStrategy=Ft.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Ft.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ce){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const De=this._portalOutlet.attach(ce);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,_t.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof De?.onDestroy&&De.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),De}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ce=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ce}dispose(){const ce=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,ce&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ce){ce!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ce,this.hasAttached()&&(ce.attach(this),this.updatePosition()))}updateSize(ce){this._config={...this._config,...ce},this._updateElementSize()}setDirection(ce){this._config={...this._config,direction:ce},this._updateElementDirection()}addPanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!0)}removePanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!1)}getDirection(){const ce=this._config.direction;return ce?"string"==typeof ce?ce:ce.value:"ltr"}updateScrollStrategy(ce){ce!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ce,this.hasAttached()&&(ce.attach(this),ce.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ce=this._pane.style;ce.width=(0,o.HM)(this._config.width),ce.height=(0,o.HM)(this._config.height),ce.minWidth=(0,o.HM)(this._config.minWidth),ce.minHeight=(0,o.HM)(this._config.minHeight),ce.maxWidth=(0,o.HM)(this._config.maxWidth),ce.maxHeight=(0,o.HM)(this._config.maxHeight)}_togglePointerEvents(ce){this._pane.style.pointerEvents=ce?"":"none"}_attachBackdrop(){const ce="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ce)})}):this._backdropElement.classList.add(ce)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ce=this._backdropElement;if(ce){if(this._animationsDisabled)return void this._disposeBackdrop(ce);ce.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ce.addEventListener("transitionend",this._backdropTransitionendHandler)}),ce.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(ce)},500))}}_toggleClasses(ce,De,$e){const Ft=(0,o.Eq)(De||[]).filter(Qe=>!!Qe);Ft.length&&($e?ce.classList.add(...Ft):ce.classList.remove(...Ft))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ce=this._ngZone.onStable.pipe((0,ke.R)((0,pt.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ce.unsubscribe())})})}_disposeScrollStrategy(){const ce=this._scrollStrategy;ce&&(ce.disable(),ce.detach&&ce.detach())}_disposeBackdrop(ce){ce&&(ce.removeEventListener("click",this._backdropClickHandler),ce.removeEventListener("transitionend",this._backdropTransitionendHandler),ce.remove(),this._backdropElement===ce&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Yt="cdk-overlay-connected-position-bounding-box",Zt=/([A-Za-z%]+)$/;class ze{get positions(){return this._preferredPositions}constructor(ce,De,$e,Ft,Qe){this._viewportRuler=De,this._document=$e,this._platform=Ft,this._overlayContainer=Qe,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new it.x,this._resizeSubscription=yt.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ce)}attach(ce){this._validatePositions(),ce.hostElement.classList.add(Yt),this._overlayRef=ce,this._boundingBox=ce.hostElement,this._pane=ce.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const ce=this._originRect,De=this._overlayRect,$e=this._viewportRect,Ft=this._containerRect,Qe=[];let Te;for(let xe of this._preferredPositions){let ve=this._getOriginPoint(ce,Ft,xe),re=this._getOverlayPoint(ve,De,xe),Me=this._getOverlayFit(re,De,$e,xe);if(Me.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(xe,ve);this._canFitWithFlexibleDimensions(Me,re,$e)?Qe.push({position:xe,origin:ve,overlayRect:De,boundingBoxRect:this._calculateBoundingBoxRect(ve,xe)}):(!Te||Te.overlayFit.visibleArea<Me.visibleArea)&&(Te={overlayFit:Me,overlayPoint:re,originPoint:ve,position:xe,overlayRect:De})}if(Qe.length){let xe=null,ve=-1;for(const re of Qe){const Me=re.boundingBoxRect.width*re.boundingBoxRect.height*(re.position.weight||1);Me>ve&&(ve=Me,xe=re)}return this._isPushed=!1,void this._applyPosition(xe.position,xe.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Te.position,Te.originPoint);this._applyPosition(Te.position,Te.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ge(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Yt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const ce=this._lastPosition;if(ce){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const De=this._getOriginPoint(this._originRect,this._containerRect,ce);this._applyPosition(ce,De)}else this.apply()}withScrollableContainers(ce){return this._scrollables=ce,this}withPositions(ce){return this._preferredPositions=ce,-1===ce.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ce){return this._viewportMargin=ce,this}withFlexibleDimensions(ce=!0){return this._hasFlexibleDimensions=ce,this}withGrowAfterOpen(ce=!0){return this._growAfterOpen=ce,this}withPush(ce=!0){return this._canPush=ce,this}withLockedPosition(ce=!0){return this._positionLocked=ce,this}setOrigin(ce){return this._origin=ce,this}withDefaultOffsetX(ce){return this._offsetX=ce,this}withDefaultOffsetY(ce){return this._offsetY=ce,this}withTransformOriginOn(ce){return this._transformOriginSelector=ce,this}_getOriginPoint(ce,De,$e){let Ft,Qe;if("center"==$e.originX)Ft=ce.left+ce.width/2;else{const Te=this._isRtl()?ce.right:ce.left,xe=this._isRtl()?ce.left:ce.right;Ft="start"==$e.originX?Te:xe}return De.left<0&&(Ft-=De.left),Qe="center"==$e.originY?ce.top+ce.height/2:"top"==$e.originY?ce.top:ce.bottom,De.top<0&&(Qe-=De.top),{x:Ft,y:Qe}}_getOverlayPoint(ce,De,$e){let Ft,Qe;return Ft="center"==$e.overlayX?-De.width/2:"start"===$e.overlayX?this._isRtl()?-De.width:0:this._isRtl()?0:-De.width,Qe="center"==$e.overlayY?-De.height/2:"top"==$e.overlayY?0:-De.height,{x:ce.x+Ft,y:ce.y+Qe}}_getOverlayFit(ce,De,$e,Ft){const Qe=We(De);let{x:Te,y:xe}=ce,ve=this._getOffset(Ft,"x"),re=this._getOffset(Ft,"y");ve&&(Te+=ve),re&&(xe+=re);let Ut=0-xe,Bn=xe+Qe.height-$e.height,En=this._subtractOverflows(Qe.width,0-Te,Te+Qe.width-$e.width),Ue=this._subtractOverflows(Qe.height,Ut,Bn),ue=En*Ue;return{visibleArea:ue,isCompletelyWithinViewport:Qe.width*Qe.height===ue,fitsInViewportVertically:Ue===Qe.height,fitsInViewportHorizontally:En==Qe.width}}_canFitWithFlexibleDimensions(ce,De,$e){if(this._hasFlexibleDimensions){const Ft=$e.bottom-De.y,Qe=$e.right-De.x,Te=Nt(this._overlayRef.getConfig().minHeight),xe=Nt(this._overlayRef.getConfig().minWidth);return(ce.fitsInViewportVertically||null!=Te&&Te<=Ft)&&(ce.fitsInViewportHorizontally||null!=xe&&xe<=Qe)}return!1}_pushOverlayOnScreen(ce,De,$e){if(this._previousPushAmount&&this._positionLocked)return{x:ce.x+this._previousPushAmount.x,y:ce.y+this._previousPushAmount.y};const Ft=We(De),Qe=this._viewportRect,Te=Math.max(ce.x+Ft.width-Qe.width,0),xe=Math.max(ce.y+Ft.height-Qe.height,0),ve=Math.max(Qe.top-$e.top-ce.y,0),re=Math.max(Qe.left-$e.left-ce.x,0);let Me=0,Pe=0;return Me=Ft.width<=Qe.width?re||-Te:ce.x<this._viewportMargin?Qe.left-$e.left-ce.x:0,Pe=Ft.height<=Qe.height?ve||-xe:ce.y<this._viewportMargin?Qe.top-$e.top-ce.y:0,this._previousPushAmount={x:Me,y:Pe},{x:ce.x+Me,y:ce.y+Pe}}_applyPosition(ce,De){if(this._setTransformOrigin(ce),this._setOverlayElementStyles(De,ce),this._setBoundingBoxStyles(De,ce),ce.panelClass&&this._addPanelClasses(ce.panelClass),this._lastPosition=ce,this._positionChanges.observers.length){const $e=this._getScrollVisibility(),Ft=new ln(ce,$e);this._positionChanges.next(Ft)}this._isInitialRender=!1}_setTransformOrigin(ce){if(!this._transformOriginSelector)return;const De=this._boundingBox.querySelectorAll(this._transformOriginSelector);let $e,Ft=ce.overlayY;$e="center"===ce.overlayX?"center":this._isRtl()?"start"===ce.overlayX?"right":"left":"start"===ce.overlayX?"left":"right";for(let Qe=0;Qe<De.length;Qe++)De[Qe].style.transformOrigin=`${$e} ${Ft}`}_calculateBoundingBoxRect(ce,De){const $e=this._viewportRect,Ft=this._isRtl();let Qe,Te,xe,Me,Pe,Ut;if("top"===De.overlayY)Te=ce.y,Qe=$e.height-Te+this._viewportMargin;else if("bottom"===De.overlayY)xe=$e.height-ce.y+2*this._viewportMargin,Qe=$e.height-xe+this._viewportMargin;else{const Bn=Math.min($e.bottom-ce.y+$e.top,ce.y),En=this._lastBoundingBoxSize.height;Qe=2*Bn,Te=ce.y-Bn,Qe>En&&!this._isInitialRender&&!this._growAfterOpen&&(Te=ce.y-En/2)}if("end"===De.overlayX&&!Ft||"start"===De.overlayX&&Ft)Ut=$e.width-ce.x+this._viewportMargin,Me=ce.x-this._viewportMargin;else if("start"===De.overlayX&&!Ft||"end"===De.overlayX&&Ft)Pe=ce.x,Me=$e.right-ce.x;else{const Bn=Math.min($e.right-ce.x+$e.left,ce.x),En=this._lastBoundingBoxSize.width;Me=2*Bn,Pe=ce.x-Bn,Me>En&&!this._isInitialRender&&!this._growAfterOpen&&(Pe=ce.x-En/2)}return{top:Te,left:Pe,bottom:xe,right:Ut,width:Me,height:Qe}}_setBoundingBoxStyles(ce,De){const $e=this._calculateBoundingBoxRect(ce,De);!this._isInitialRender&&!this._growAfterOpen&&($e.height=Math.min($e.height,this._lastBoundingBoxSize.height),$e.width=Math.min($e.width,this._lastBoundingBoxSize.width));const Ft={};if(this._hasExactPosition())Ft.top=Ft.left="0",Ft.bottom=Ft.right=Ft.maxHeight=Ft.maxWidth="",Ft.width=Ft.height="100%";else{const Qe=this._overlayRef.getConfig().maxHeight,Te=this._overlayRef.getConfig().maxWidth;Ft.height=(0,o.HM)($e.height),Ft.top=(0,o.HM)($e.top),Ft.bottom=(0,o.HM)($e.bottom),Ft.width=(0,o.HM)($e.width),Ft.left=(0,o.HM)($e.left),Ft.right=(0,o.HM)($e.right),Ft.alignItems="center"===De.overlayX?"center":"end"===De.overlayX?"flex-end":"flex-start",Ft.justifyContent="center"===De.overlayY?"center":"bottom"===De.overlayY?"flex-end":"flex-start",Qe&&(Ft.maxHeight=(0,o.HM)(Qe)),Te&&(Ft.maxWidth=(0,o.HM)(Te))}this._lastBoundingBoxSize=$e,Ge(this._boundingBox.style,Ft)}_resetBoundingBoxStyles(){Ge(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ge(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ce,De){const $e={},Ft=this._hasExactPosition(),Qe=this._hasFlexibleDimensions,Te=this._overlayRef.getConfig();if(Ft){const Me=this._viewportRuler.getViewportScrollPosition();Ge($e,this._getExactOverlayY(De,ce,Me)),Ge($e,this._getExactOverlayX(De,ce,Me))}else $e.position="static";let xe="",ve=this._getOffset(De,"x"),re=this._getOffset(De,"y");ve&&(xe+=`translateX(${ve}px) `),re&&(xe+=`translateY(${re}px)`),$e.transform=xe.trim(),Te.maxHeight&&(Ft?$e.maxHeight=(0,o.HM)(Te.maxHeight):Qe&&($e.maxHeight="")),Te.maxWidth&&(Ft?$e.maxWidth=(0,o.HM)(Te.maxWidth):Qe&&($e.maxWidth="")),Ge(this._pane.style,$e)}_getExactOverlayY(ce,De,$e){let Ft={top:"",bottom:""},Qe=this._getOverlayPoint(De,this._overlayRect,ce);return this._isPushed&&(Qe=this._pushOverlayOnScreen(Qe,this._overlayRect,$e)),"bottom"===ce.overlayY?Ft.bottom=this._document.documentElement.clientHeight-(Qe.y+this._overlayRect.height)+"px":Ft.top=(0,o.HM)(Qe.y),Ft}_getExactOverlayX(ce,De,$e){let Te,Ft={left:"",right:""},Qe=this._getOverlayPoint(De,this._overlayRect,ce);return this._isPushed&&(Qe=this._pushOverlayOnScreen(Qe,this._overlayRect,$e)),Te=this._isRtl()?"end"===ce.overlayX?"left":"right":"end"===ce.overlayX?"right":"left","right"===Te?Ft.right=this._document.documentElement.clientWidth-(Qe.x+this._overlayRect.width)+"px":Ft.left=(0,o.HM)(Qe.x),Ft}_getScrollVisibility(){const ce=this._getOriginRect(),De=this._pane.getBoundingClientRect(),$e=this._scrollables.map(Ft=>Ft.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ae(ce,$e),isOriginOutsideView:kt(ce,$e),isOverlayClipped:Ae(De,$e),isOverlayOutsideView:kt(De,$e)}}_subtractOverflows(ce,...De){return De.reduce(($e,Ft)=>$e-Math.max(Ft,0),ce)}_getNarrowedViewportRect(){const ce=this._document.documentElement.clientWidth,De=this._document.documentElement.clientHeight,$e=this._viewportRuler.getViewportScrollPosition();return{top:$e.top+this._viewportMargin,left:$e.left+this._viewportMargin,right:$e.left+ce-this._viewportMargin,bottom:$e.top+De-this._viewportMargin,width:ce-2*this._viewportMargin,height:De-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ce,De){return"x"===De?null==ce.offsetX?this._offsetX:ce.offsetX:null==ce.offsetY?this._offsetY:ce.offsetY}_validatePositions(){}_addPanelClasses(ce){this._pane&&(0,o.Eq)(ce).forEach(De=>{""!==De&&-1===this._appliedPanelClasses.indexOf(De)&&(this._appliedPanelClasses.push(De),this._pane.classList.add(De))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ce=>{this._pane.classList.remove(ce)}),this._appliedPanelClasses=[])}_getOriginRect(){const ce=this._origin;if(ce instanceof Q.SBq)return ce.nativeElement.getBoundingClientRect();if(ce instanceof Element)return ce.getBoundingClientRect();const De=ce.width||0,$e=ce.height||0;return{top:ce.y,bottom:ce.y+$e,left:ce.x,right:ce.x+De,height:$e,width:De}}}function Ge(je,ce){for(let De in ce)ce.hasOwnProperty(De)&&(je[De]=ce[De]);return je}function Nt(je){if("number"!=typeof je&&null!=je){const[ce,De]=je.split(Zt);return De&&"px"!==De?null:parseFloat(ce)}return je||null}function We(je){return{top:Math.floor(je.top),right:Math.floor(je.right),bottom:Math.floor(je.bottom),left:Math.floor(je.left),width:Math.floor(je.width),height:Math.floor(je.height)}}const ft="cdk-global-overlay-wrapper";class cn{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(ce){const De=ce.getConfig();this._overlayRef=ce,this._width&&!De.width&&ce.updateSize({width:this._width}),this._height&&!De.height&&ce.updateSize({height:this._height}),ce.hostElement.classList.add(ft),this._isDisposed=!1}top(ce=""){return this._bottomOffset="",this._topOffset=ce,this._alignItems="flex-start",this}left(ce=""){return this._xOffset=ce,this._xPosition="left",this}bottom(ce=""){return this._topOffset="",this._bottomOffset=ce,this._alignItems="flex-end",this}right(ce=""){return this._xOffset=ce,this._xPosition="right",this}start(ce=""){return this._xOffset=ce,this._xPosition="start",this}end(ce=""){return this._xOffset=ce,this._xPosition="end",this}width(ce=""){return this._overlayRef?this._overlayRef.updateSize({width:ce}):this._width=ce,this}height(ce=""){return this._overlayRef?this._overlayRef.updateSize({height:ce}):this._height=ce,this}centerHorizontally(ce=""){return this.left(ce),this._xPosition="center",this}centerVertically(ce=""){return this.top(ce),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ce=this._overlayRef.overlayElement.style,De=this._overlayRef.hostElement.style,$e=this._overlayRef.getConfig(),{width:Ft,height:Qe,maxWidth:Te,maxHeight:xe}=$e,ve=!("100%"!==Ft&&"100vw"!==Ft||Te&&"100%"!==Te&&"100vw"!==Te),re=!("100%"!==Qe&&"100vh"!==Qe||xe&&"100%"!==xe&&"100vh"!==xe),Me=this._xPosition,Pe=this._xOffset,Ut="rtl"===this._overlayRef.getConfig().direction;let Bn="",En="",Ue="";ve?Ue="flex-start":"center"===Me?(Ue="center",Ut?En=Pe:Bn=Pe):Ut?"left"===Me||"end"===Me?(Ue="flex-end",Bn=Pe):("right"===Me||"start"===Me)&&(Ue="flex-start",En=Pe):"left"===Me||"start"===Me?(Ue="flex-start",Bn=Pe):("right"===Me||"end"===Me)&&(Ue="flex-end",En=Pe),ce.position=this._cssPosition,ce.marginLeft=ve?"0":Bn,ce.marginTop=re?"0":this._topOffset,ce.marginBottom=this._bottomOffset,ce.marginRight=ve?"0":En,De.justifyContent=Ue,De.alignItems=re?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ce=this._overlayRef.overlayElement.style,De=this._overlayRef.hostElement,$e=De.style;De.classList.remove(ft),$e.justifyContent=$e.alignItems=ce.marginTop=ce.marginBottom=ce.marginLeft=ce.marginRight=ce.position="",this._overlayRef=null,this._isDisposed=!0}}let kn=(()=>{class je{constructor(De,$e,Ft,Qe){this._viewportRuler=De,this._document=$e,this._platform=Ft,this._overlayContainer=Qe}global(){return new cn}flexibleConnectedTo(De){return new ze(De,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(p.rL),Q.LFG(j.K0),Q.LFG(P.t4),Q.LFG(vi))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),an=0,Mn=(()=>{class je{constructor(De,$e,Ft,Qe,Te,xe,ve,re,Me,Pe,Ut,Bn){this.scrollStrategies=De,this._overlayContainer=$e,this._componentFactoryResolver=Ft,this._positionBuilder=Qe,this._keyboardDispatcher=Te,this._injector=xe,this._ngZone=ve,this._document=re,this._directionality=Me,this._location=Pe,this._outsideClickDispatcher=Ut,this._animationsModuleType=Bn}create(De){const $e=this._createHostElement(),Ft=this._createPaneElement($e),Qe=this._createPortalOutlet(Ft),Te=new mt(De);return Te.direction=Te.direction||this._directionality.value,new Ii(Qe,$e,Ft,Te,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(De){const $e=this._document.createElement("div");return $e.id="cdk-overlay-"+an++,$e.classList.add("cdk-overlay-pane"),De.appendChild($e),$e}_createHostElement(){const De=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(De),De}_createPortalOutlet(De){return this._appRef||(this._appRef=this._injector.get(Q.z2F)),new wt.u0(De,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return je.\u0275fac=function(De){return new(De||je)(Q.LFG(ht),Q.LFG(vi),Q.LFG(Q._Vd),Q.LFG(kn),Q.LFG(_i),Q.LFG(Q.zs3),Q.LFG(Q.R0b),Q.LFG(j.K0),Q.LFG(lt.Is),Q.LFG(j.Ye),Q.LFG(ii),Q.LFG(Q.QbO,8))},je.\u0275prov=Q.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();const Gt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],On=new Q.OlP("cdk-connected-overlay-scroll-strategy");let xt=(()=>{class je{constructor(De){this.elementRef=De}}return je.\u0275fac=function(De){return new(De||je)(Q.Y36(Q.SBq))},je.\u0275dir=Q.lG2({type:je,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),je})(),zt=(()=>{class je{get offsetX(){return this._offsetX}set offsetX(De){this._offsetX=De,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(De){this._offsetY=De,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(De){this._hasBackdrop=(0,o.Ig)(De)}get lockPosition(){return this._lockPosition}set lockPosition(De){this._lockPosition=(0,o.Ig)(De)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(De){this._flexibleDimensions=(0,o.Ig)(De)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(De){this._growAfterOpen=(0,o.Ig)(De)}get push(){return this._push}set push(De){this._push=(0,o.Ig)(De)}constructor(De,$e,Ft,Qe,Te){this._overlay=De,this._dir=Te,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=yt.w0.EMPTY,this._attachSubscription=yt.w0.EMPTY,this._detachSubscription=yt.w0.EMPTY,this._positionSubscription=yt.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Q.vpe,this.positionChange=new Q.vpe,this.attach=new Q.vpe,this.detach=new Q.vpe,this.overlayKeydown=new Q.vpe,this.overlayOutsideClick=new Q.vpe,this._templatePortal=new wt.UE($e,Ft),this._scrollStrategyFactory=Qe,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(De){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),De.origin&&this.open&&this._position.apply()),De.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Gt);const De=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=De.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=De.detachments().subscribe(()=>this.detach.emit()),De.keydownEvents().subscribe($e=>{this.overlayKeydown.next($e),$e.keyCode===jt.hY&&!this.disableClose&&!(0,jt.Vb)($e)&&($e.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe($e=>{this.overlayOutsideClick.next($e)})}_buildConfig(){const De=this._position=this.positionStrategy||this._createPositionStrategy(),$e=new mt({direction:this._dir,positionStrategy:De,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&($e.width=this.width),(this.height||0===this.height)&&($e.height=this.height),(this.minWidth||0===this.minWidth)&&($e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&($e.minHeight=this.minHeight),this.backdropClass&&($e.backdropClass=this.backdropClass),this.panelClass&&($e.panelClass=this.panelClass),$e}_updatePositionStrategy(De){const $e=this.positions.map(Ft=>({originX:Ft.originX,originY:Ft.originY,overlayX:Ft.overlayX,overlayY:Ft.overlayY,offsetX:Ft.offsetX||this.offsetX,offsetY:Ft.offsetY||this.offsetY,panelClass:Ft.panelClass||void 0}));return De.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions($e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const De=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(De),De}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof xt?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(De=>{this.backdropClick.emit(De)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,Ye.o)(()=>this.positionChange.observers.length>0)).subscribe(De=>{this.positionChange.emit(De),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return je.\u0275fac=function(De){return new(De||je)(Q.Y36(Mn),Q.Y36(Q.Rgc),Q.Y36(Q.s_b),Q.Y36(On),Q.Y36(lt.Is,8))},je.\u0275dir=Q.lG2({type:je,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Q.TTD]}),je})();const Fn={provide:On,deps:[Mn],useFactory:function Wn(je){return()=>je.scrollStrategies.reposition()}};let It=(()=>{class je{}return je.\u0275fac=function(De){return new(De||je)},je.\u0275mod=Q.oAB({type:je}),je.\u0275inj=Q.cJS({providers:[Mn,Fn],imports:[lt.vT,wt.eL,p.Cl,p.Cl]}),je})()},3353:(ni,Wt,F)=>{"use strict";F.d(Wt,{Mq:()=>pt,Oy:()=>kt,_i:()=>jt,ht:()=>sn,i$:()=>wt,kV:()=>nn,qK:()=>ke,sA:()=>Cn,t4:()=>o});var p=F(4650),j=F(6895);let Q;try{Q=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Q=!1}let st,o=(()=>{class Ae{constructor(ht){this._platformId=ht,this.isBrowser=this._platformId?(0,j.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Q)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ae.\u0275fac=function(ht){return new(ht||Ae)(p.LFG(p.Lbi))},Ae.\u0275prov=p.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();const _t=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ke(){if(st)return st;if("object"!=typeof document||!document)return st=new Set(_t),st;let Ae=document.createElement("input");return st=new Set(_t.filter(ct=>(Ae.setAttribute("type",ct),Ae.type===ct))),st}let Ye,it,yt,en;function wt(Ae){return function lt(){if(null==Ye&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ye=!0}))}finally{Ye=Ye||!1}return Ye}()?Ae:!!Ae.capture}function pt(){if(null==yt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return yt=!1,yt;if("scrollBehavior"in document.documentElement.style)yt=!0;else{const Ae=Element.prototype.scrollTo;yt=!!Ae&&!/\{\s*\[native code\]\s*\}/.test(Ae.toString())}}return yt}function jt(){if("object"!=typeof document||!document)return 0;if(null==it){const Ae=document.createElement("div"),ct=Ae.style;Ae.dir="rtl",ct.width="1px",ct.overflow="auto",ct.visibility="hidden",ct.pointerEvents="none",ct.position="absolute";const ht=document.createElement("div"),mt=ht.style;mt.width="2px",mt.height="1px",Ae.appendChild(ht),document.body.appendChild(Ae),it=0,0===Ae.scrollLeft&&(Ae.scrollLeft=1,it=0===Ae.scrollLeft?1:2),Ae.remove()}return it}function nn(Ae){if(function Ct(){if(null==en){const Ae=typeof document<"u"?document.head:null;en=!(!Ae||!Ae.createShadowRoot&&!Ae.attachShadow)}return en}()){const ct=Ae.getRootNode?Ae.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&ct instanceof ShadowRoot)return ct}return null}function sn(){let Ae=typeof document<"u"&&document?document.activeElement:null;for(;Ae&&Ae.shadowRoot;){const ct=Ae.shadowRoot.activeElement;if(ct===Ae)break;Ae=ct}return Ae}function Cn(Ae){return Ae.composedPath?Ae.composedPath()[0]:Ae.target}function kt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(ni,Wt,F)=>{"use strict";F.d(Wt,{C5:()=>lt,Pl:()=>sn,UE:()=>wt,eL:()=>kt,en:()=>yt,u0:()=>jt});var p=F(4650),j=F(6895);class Ye{attach(ht){return this._attachedHost=ht,ht.attach(this)}detach(){let ht=this._attachedHost;null!=ht&&(this._attachedHost=null,ht.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ht){this._attachedHost=ht}}class lt extends Ye{constructor(ht,mt,Je,qt,ln){super(),this.component=ht,this.viewContainerRef=mt,this.injector=Je,this.componentFactoryResolver=qt,this.projectableNodes=ln}}class wt extends Ye{constructor(ht,mt,Je,qt){super(),this.templateRef=ht,this.viewContainerRef=mt,this.context=Je,this.injector=qt}get origin(){return this.templateRef.elementRef}attach(ht,mt=this.context){return this.context=mt,super.attach(ht)}detach(){return this.context=void 0,super.detach()}}class it extends Ye{constructor(ht){super(),this.element=ht instanceof p.SBq?ht.nativeElement:ht}}class yt{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ht){return ht instanceof lt?(this._attachedPortal=ht,this.attachComponentPortal(ht)):ht instanceof wt?(this._attachedPortal=ht,this.attachTemplatePortal(ht)):this.attachDomPortal&&ht instanceof it?(this._attachedPortal=ht,this.attachDomPortal(ht)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ht){this._disposeFn=ht}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class jt extends yt{constructor(ht,mt,Je,qt,ln){super(),this.outletElement=ht,this._componentFactoryResolver=mt,this._appRef=Je,this._defaultInjector=qt,this.attachDomPortal=Dn=>{const ti=Dn.element,_n=this._document.createComment("dom-portal");ti.parentNode.insertBefore(_n,ti),this.outletElement.appendChild(ti),this._attachedPortal=Dn,super.setDisposeFn(()=>{_n.parentNode&&_n.parentNode.replaceChild(ti,_n)})},this._document=ln}attachComponentPortal(ht){const Je=(ht.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ht.component);let qt;return ht.viewContainerRef?(qt=ht.viewContainerRef.createComponent(Je,ht.viewContainerRef.length,ht.injector||ht.viewContainerRef.injector,ht.projectableNodes||void 0),this.setDisposeFn(()=>qt.destroy())):(qt=Je.create(ht.injector||this._defaultInjector||p.zs3.NULL),this._appRef.attachView(qt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(qt.hostView),qt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(qt)),this._attachedPortal=ht,qt}attachTemplatePortal(ht){let mt=ht.viewContainerRef,Je=mt.createEmbeddedView(ht.templateRef,ht.context,{injector:ht.injector});return Je.rootNodes.forEach(qt=>this.outletElement.appendChild(qt)),Je.detectChanges(),this.setDisposeFn(()=>{let qt=mt.indexOf(Je);-1!==qt&&mt.remove(qt)}),this._attachedPortal=ht,Je}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ht){return ht.hostView.rootNodes[0]}}let sn=(()=>{class ct extends yt{constructor(mt,Je,qt){super(),this._componentFactoryResolver=mt,this._viewContainerRef=Je,this._isInitialized=!1,this.attached=new p.vpe,this.attachDomPortal=ln=>{const Dn=ln.element,ti=this._document.createComment("dom-portal");ln.setAttachedHost(this),Dn.parentNode.insertBefore(ti,Dn),this._getRootNode().appendChild(Dn),this._attachedPortal=ln,super.setDisposeFn(()=>{ti.parentNode&&ti.parentNode.replaceChild(Dn,ti)})},this._document=qt}get portal(){return this._attachedPortal}set portal(mt){this.hasAttached()&&!mt&&!this._isInitialized||(this.hasAttached()&&super.detach(),mt&&super.attach(mt),this._attachedPortal=mt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(mt){mt.setAttachedHost(this);const Je=null!=mt.viewContainerRef?mt.viewContainerRef:this._viewContainerRef,ln=(mt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(mt.component),Dn=Je.createComponent(ln,Je.length,mt.injector||Je.injector,mt.projectableNodes||void 0);return Je!==this._viewContainerRef&&this._getRootNode().appendChild(Dn.hostView.rootNodes[0]),super.setDisposeFn(()=>Dn.destroy()),this._attachedPortal=mt,this._attachedRef=Dn,this.attached.emit(Dn),Dn}attachTemplatePortal(mt){mt.setAttachedHost(this);const Je=this._viewContainerRef.createEmbeddedView(mt.templateRef,mt.context,{injector:mt.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=mt,this._attachedRef=Je,this.attached.emit(Je),Je}_getRootNode(){const mt=this._viewContainerRef.element.nativeElement;return mt.nodeType===mt.ELEMENT_NODE?mt:mt.parentNode}}return ct.\u0275fac=function(mt){return new(mt||ct)(p.Y36(p._Vd),p.Y36(p.s_b),p.Y36(j.K0))},ct.\u0275dir=p.lG2({type:ct,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[p.qOj]}),ct})(),kt=(()=>{class ct{}return ct.\u0275fac=function(mt){return new(mt||ct)},ct.\u0275mod=p.oAB({type:ct}),ct.\u0275inj=p.cJS({}),ct})()},8605:(ni,Wt,F)=>{"use strict";F.d(Wt,{ZD:()=>Ft,mF:()=>Mn,Cl:()=>Qe,rL:()=>xt});var p=F(1281),j=F(4650),Q=F(7579),o=F(9646),P=F(9751),st=F(4968),_t=F(4408),ke=F(727);const Ye={schedule(Te){let xe=requestAnimationFrame,ve=cancelAnimationFrame;const{delegate:re}=Ye;re&&(xe=re.requestAnimationFrame,ve=re.cancelAnimationFrame);const Me=xe(Pe=>{ve=void 0,Te(Pe)});return new ke.w0(()=>ve?.(Me))},requestAnimationFrame(...Te){const{delegate:xe}=Ye;return(xe?.requestAnimationFrame||requestAnimationFrame)(...Te)},cancelAnimationFrame(...Te){const{delegate:xe}=Ye;return(xe?.cancelAnimationFrame||cancelAnimationFrame)(...Te)},delegate:void 0};var wt=F(640);const yt=new class it extends wt.v{flush(xe){this._active=!0;const ve=this._scheduled;this._scheduled=void 0;const{actions:re}=this;let Me;xe=xe||re.shift();do{if(Me=xe.execute(xe.state,xe.delay))break}while((xe=re[0])&&xe.id===ve&&re.shift());if(this._active=!1,Me){for(;(xe=re[0])&&xe.id===ve&&re.shift();)xe.unsubscribe();throw Me}}}(class lt extends _t.o{constructor(xe,ve){super(xe,ve),this.scheduler=xe,this.work=ve}requestAsyncId(xe,ve,re=0){return null!==re&&re>0?super.requestAsyncId(xe,ve,re):(xe.actions.push(this),xe._scheduled||(xe._scheduled=Ye.requestAnimationFrame(()=>xe.flush(void 0))))}recycleAsyncId(xe,ve,re=0){var Me;if(null!=re?re>0:this.delay>0)return super.recycleAsyncId(xe,ve,re);const{actions:Pe}=xe;null!=ve&&(null===(Me=Pe[Pe.length-1])||void 0===Me?void 0:Me.id)!==ve&&(Ye.cancelAnimationFrame(ve),xe._scheduled=void 0)}});let en,jt=1;const Ct={};function nn(Te){return Te in Ct&&(delete Ct[Te],!0)}const sn={setImmediate(Te){const xe=jt++;return Ct[xe]=!0,en||(en=Promise.resolve()),en.then(()=>nn(xe)&&Te()),xe},clearImmediate(Te){nn(Te)}},{setImmediate:kt,clearImmediate:Ae}=sn,ct={setImmediate(...Te){const{delegate:xe}=ct;return(xe?.setImmediate||kt)(...Te)},clearImmediate(Te){const{delegate:xe}=ct;return(xe?.clearImmediate||Ae)(Te)},delegate:void 0},Je=new class mt extends wt.v{flush(xe){this._active=!0;const ve=this._scheduled;this._scheduled=void 0;const{actions:re}=this;let Me;xe=xe||re.shift();do{if(Me=xe.execute(xe.state,xe.delay))break}while((xe=re[0])&&xe.id===ve&&re.shift());if(this._active=!1,Me){for(;(xe=re[0])&&xe.id===ve&&re.shift();)xe.unsubscribe();throw Me}}}(class ht extends _t.o{constructor(xe,ve){super(xe,ve),this.scheduler=xe,this.work=ve}requestAsyncId(xe,ve,re=0){return null!==re&&re>0?super.requestAsyncId(xe,ve,re):(xe.actions.push(this),xe._scheduled||(xe._scheduled=ct.setImmediate(xe.flush.bind(xe,void 0))))}recycleAsyncId(xe,ve,re=0){var Me;if(null!=re?re>0:this.delay>0)return super.recycleAsyncId(xe,ve,re);const{actions:Pe}=xe;null!=ve&&(null===(Me=Pe[Pe.length-1])||void 0===Me?void 0:Me.id)!==ve&&(ct.clearImmediate(ve),xe._scheduled===ve&&(xe._scheduled=void 0))}});var ln=F(4986),Dn=F(4482),ti=F(8421),_n=F(5403),ii=F(5963);function vi(Te,xe=ln.z){return function _i(Te){return(0,Dn.e)((xe,ve)=>{let re=!1,Me=null,Pe=null,Ut=!1;const Bn=()=>{if(Pe?.unsubscribe(),Pe=null,re){re=!1;const Ue=Me;Me=null,ve.next(Ue)}Ut&&ve.complete()},En=()=>{Pe=null,Ut&&ve.complete()};xe.subscribe((0,_n.x)(ve,Ue=>{re=!0,Me=Ue,Pe||(0,ti.Xf)(Te(Ue)).subscribe(Pe=(0,_n.x)(ve,Bn,En))},()=>{Ut=!0,(!re||!Pe||Pe.closed)&&ve.complete()}))})}(()=>(0,ii.H)(Te,xe))}var Ii=F(9300),Yt=F(2722),Zt=F(8675),ze=F(3353),Ge=F(6895),Nt=F(445);const We=["contentWrapper"],Ot=["*"],Re=new j.OlP("VIRTUAL_SCROLL_STRATEGY");let Mn=(()=>{class Te{constructor(ve,re,Me){this._ngZone=ve,this._platform=re,this._scrolled=new Q.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Me}register(ve){this.scrollContainers.has(ve)||this.scrollContainers.set(ve,ve.elementScrolled().subscribe(()=>this._scrolled.next(ve)))}deregister(ve){const re=this.scrollContainers.get(ve);re&&(re.unsubscribe(),this.scrollContainers.delete(ve))}scrolled(ve=20){return this._platform.isBrowser?new P.y(re=>{this._globalSubscription||this._addGlobalListener();const Me=ve>0?this._scrolled.pipe(vi(ve)).subscribe(re):this._scrolled.subscribe(re);return this._scrolledCount++,()=>{Me.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,o.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((ve,re)=>this.deregister(re)),this._scrolled.complete()}ancestorScrolled(ve,re){const Me=this.getAncestorScrollContainers(ve);return this.scrolled(re).pipe((0,Ii.h)(Pe=>!Pe||Me.indexOf(Pe)>-1))}getAncestorScrollContainers(ve){const re=[];return this.scrollContainers.forEach((Me,Pe)=>{this._scrollableContainsElement(Pe,ve)&&re.push(Pe)}),re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(ve,re){let Me=(0,p.fI)(re),Pe=ve.getElementRef().nativeElement;do{if(Me==Pe)return!0}while(Me=Me.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const ve=this._getWindow();return(0,st.R)(ve.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Te.\u0275fac=function(ve){return new(ve||Te)(j.LFG(j.R0b),j.LFG(ze.t4),j.LFG(Ge.K0,8))},Te.\u0275prov=j.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Gt=(()=>{class Te{constructor(ve,re,Me,Pe){this.elementRef=ve,this.scrollDispatcher=re,this.ngZone=Me,this.dir=Pe,this._destroyed=new Q.x,this._elementScrolled=new P.y(Ut=>this.ngZone.runOutsideAngular(()=>(0,st.R)(this.elementRef.nativeElement,"scroll").pipe((0,Yt.R)(this._destroyed)).subscribe(Ut)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(ve){const re=this.elementRef.nativeElement,Me=this.dir&&"rtl"==this.dir.value;null==ve.left&&(ve.left=Me?ve.end:ve.start),null==ve.right&&(ve.right=Me?ve.start:ve.end),null!=ve.bottom&&(ve.top=re.scrollHeight-re.clientHeight-ve.bottom),Me&&0!=(0,ze._i)()?(null!=ve.left&&(ve.right=re.scrollWidth-re.clientWidth-ve.left),2==(0,ze._i)()?ve.left=ve.right:1==(0,ze._i)()&&(ve.left=ve.right?-ve.right:ve.right)):null!=ve.right&&(ve.left=re.scrollWidth-re.clientWidth-ve.right),this._applyScrollToOptions(ve)}_applyScrollToOptions(ve){const re=this.elementRef.nativeElement;(0,ze.Mq)()?re.scrollTo(ve):(null!=ve.top&&(re.scrollTop=ve.top),null!=ve.left&&(re.scrollLeft=ve.left))}measureScrollOffset(ve){const re="left",Pe=this.elementRef.nativeElement;if("top"==ve)return Pe.scrollTop;if("bottom"==ve)return Pe.scrollHeight-Pe.clientHeight-Pe.scrollTop;const Ut=this.dir&&"rtl"==this.dir.value;return"start"==ve?ve=Ut?"right":re:"end"==ve&&(ve=Ut?re:"right"),Ut&&2==(0,ze._i)()?ve==re?Pe.scrollWidth-Pe.clientWidth-Pe.scrollLeft:Pe.scrollLeft:Ut&&1==(0,ze._i)()?ve==re?Pe.scrollLeft+Pe.scrollWidth-Pe.clientWidth:-Pe.scrollLeft:ve==re?Pe.scrollLeft:Pe.scrollWidth-Pe.clientWidth-Pe.scrollLeft}}return Te.\u0275fac=function(ve){return new(ve||Te)(j.Y36(j.SBq),j.Y36(Mn),j.Y36(j.R0b),j.Y36(Nt.Is,8))},Te.\u0275dir=j.lG2({type:Te,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),Te})(),xt=(()=>{class Te{constructor(ve,re,Me){this._platform=ve,this._change=new Q.x,this._changeListener=Pe=>{this._change.next(Pe)},this._document=Me,re.runOutsideAngular(()=>{if(ve.isBrowser){const Pe=this._getWindow();Pe.addEventListener("resize",this._changeListener),Pe.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const ve=this._getWindow();ve.removeEventListener("resize",this._changeListener),ve.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const ve={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),ve}getViewportRect(){const ve=this.getViewportScrollPosition(),{width:re,height:Me}=this.getViewportSize();return{top:ve.top,left:ve.left,bottom:ve.top+Me,right:ve.left+re,height:Me,width:re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const ve=this._document,re=this._getWindow(),Me=ve.documentElement,Pe=Me.getBoundingClientRect();return{top:-Pe.top||ve.body.scrollTop||re.scrollY||Me.scrollTop||0,left:-Pe.left||ve.body.scrollLeft||re.scrollX||Me.scrollLeft||0}}change(ve=20){return ve>0?this._change.pipe(vi(ve)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const ve=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:ve.innerWidth,height:ve.innerHeight}:{width:0,height:0}}}return Te.\u0275fac=function(ve){return new(ve||Te)(j.LFG(ze.t4),j.LFG(j.R0b),j.LFG(Ge.K0,8))},Te.\u0275prov=j.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();const zt=new j.OlP("VIRTUAL_SCROLLABLE");let Wn=(()=>{class Te extends Gt{constructor(ve,re,Me,Pe){super(ve,re,Me,Pe)}measureViewportSize(ve){const re=this.elementRef.nativeElement;return"horizontal"===ve?re.clientWidth:re.clientHeight}}return Te.\u0275fac=function(ve){return new(ve||Te)(j.Y36(j.SBq),j.Y36(Mn),j.Y36(j.R0b),j.Y36(Nt.Is,8))},Te.\u0275dir=j.lG2({type:Te,features:[j.qOj]}),Te})();const It=typeof requestAnimationFrame<"u"?yt:Je;let li=(()=>{class Te extends Wn{get orientation(){return this._orientation}set orientation(ve){this._orientation!==ve&&(this._orientation=ve,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(ve){this._appendOnly=(0,p.Ig)(ve)}constructor(ve,re,Me,Pe,Ut,Bn,En,Ue){super(ve,Bn,Me,Ut),this.elementRef=ve,this._changeDetectorRef=re,this._scrollStrategy=Pe,this.scrollable=Ue,this._platform=(0,j.f3M)(ze.t4),this._detachedSubject=new Q.x,this._renderedRangeSubject=new Q.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new P.y(ue=>this._scrollStrategy.scrolledIndexChange.subscribe(Ce=>Promise.resolve().then(()=>this.ngZone.run(()=>ue.next(Ce))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=ke.w0.EMPTY,this._viewportChanges=En.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,Zt.O)(null),vi(0,It)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(ve){this.ngZone.runOutsideAngular(()=>{this._forOf=ve,this._forOf.dataStream.pipe((0,Yt.R)(this._detachedSubject)).subscribe(re=>{const Me=re.length;Me!==this._dataLength&&(this._dataLength=Me,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(ve){return this.getElementRef().nativeElement.getBoundingClientRect()[ve]}setTotalContentSize(ve){this._totalContentSize!==ve&&(this._totalContentSize=ve,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(ve){(function Fn(Te,xe){return Te.start==xe.start&&Te.end==xe.end})(this._renderedRange,ve)||(this.appendOnly&&(ve={start:0,end:Math.max(this._renderedRange.end,ve.end)}),this._renderedRangeSubject.next(this._renderedRange=ve),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(ve,re="to-start"){ve=this.appendOnly&&"to-start"===re?0:ve;const Pe="horizontal"==this.orientation,Ut=Pe?"X":"Y";let En=`translate${Ut}(${Number((Pe&&this.dir&&"rtl"==this.dir.value?-1:1)*ve)}px)`;this._renderedContentOffset=ve,"to-end"===re&&(En+=` translate${Ut}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=En&&(this._renderedContentTransform=En,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(ve,re="auto"){const Me={behavior:re};"horizontal"===this.orientation?Me.start=ve:Me.top=ve,this.scrollable.scrollTo(Me)}scrollToIndex(ve,re="auto"){this._scrollStrategy.scrollToIndex(ve,re)}measureScrollOffset(ve){let re;return re=this.scrollable==this?Me=>super.measureScrollOffset(Me):Me=>this.scrollable.measureScrollOffset(Me),Math.max(0,re(ve??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(ve){let re;const Ut="rtl"==this.dir?.value;re="start"==ve?Ut?"right":"left":"end"==ve?Ut?"left":"right":ve||("horizontal"===this.orientation?"left":"top");const Bn=this.scrollable.measureBoundingClientRectWithScrollOffset(re);return this.elementRef.nativeElement.getBoundingClientRect()[re]-Bn}measureRenderedContentSize(){const ve=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?ve.offsetWidth:ve.offsetHeight}measureRangeSize(ve){return this._forOf?this._forOf.measureRangeSize(ve,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(ve){ve&&this._runAfterChangeDetection.push(ve),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const ve=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const re of ve)re()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return Te.\u0275fac=function(ve){return new(ve||Te)(j.Y36(j.SBq),j.Y36(j.sBO),j.Y36(j.R0b),j.Y36(Re,8),j.Y36(Nt.Is,8),j.Y36(Mn),j.Y36(xt),j.Y36(zt,8))},Te.\u0275cmp=j.Xpm({type:Te,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(ve,re){if(1&ve&&j.Gf(We,7),2&ve){let Me;j.iGM(Me=j.CRH())&&(re._contentWrapper=Me.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(ve,re){2&ve&&j.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===re.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==re.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[j._Bn([{provide:Gt,useFactory:(xe,ve)=>xe||ve,deps:[[new j.FiY,new j.tBr(zt)],Te]}]),j.qOj,j.jDz],ngContentSelectors:Ot,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(ve,re){1&ve&&(j.F$t(),j.TgZ(0,"div",0,1),j.Hsn(2),j.qZA(),j._UZ(3,"div",2)),2&ve&&(j.xp6(3),j.Udp("width",re._totalContentWidth)("height",re._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),Te})(),Ft=(()=>{class Te{}return Te.\u0275fac=function(ve){return new(ve||Te)},Te.\u0275mod=j.oAB({type:Te}),Te.\u0275inj=j.cJS({}),Te})(),Qe=(()=>{class Te{}return Te.\u0275fac=function(ve){return new(ve||Te)},Te.\u0275mod=j.oAB({type:Te}),Te.\u0275inj=j.cJS({imports:[Nt.vT,Ft,li,Nt.vT,Ft]}),Te})()},6895:(ni,Wt,F)=>{"use strict";F.d(Wt,{Do:()=>sn,ED:()=>_r,EM:()=>ya,HT:()=>o,JF:()=>Wa,K0:()=>st,Mx:()=>wn,NF:()=>sa,O5:()=>wi,OU:()=>us,Ov:()=>ko,PC:()=>Co,RF:()=>Qr,S$:()=>en,V_:()=>Ye,Ye:()=>Cn,b0:()=>nn,bD:()=>Ys,ez:()=>Fa,mk:()=>I,n9:()=>Ao,q:()=>Q,sg:()=>mi,tP:()=>Es,uU:()=>zr,w_:()=>P});var p=F(4650);let j=null;function Q(){return j}function o(H){j||(j=H)}class P{}const st=new p.OlP("DocumentToken");let _t=(()=>{class H{historyGo(W){throw new Error("Not implemented")}}return H.\u0275fac=function(W){return new(W||H)},H.\u0275prov=p.Yz7({token:H,factory:function(){return function ke(){return(0,p.LFG)(lt)}()},providedIn:"platform"}),H})();const Ye=new p.OlP("Location Initialized");let lt=(()=>{class H extends _t{constructor(W){super(),this._doc=W,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(W){const Oe=Q().getGlobalEventTarget(this._doc,"window");return Oe.addEventListener("popstate",W,!1),()=>Oe.removeEventListener("popstate",W)}onHashChange(W){const Oe=Q().getGlobalEventTarget(this._doc,"window");return Oe.addEventListener("hashchange",W,!1),()=>Oe.removeEventListener("hashchange",W)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(W){this._location.pathname=W}pushState(W,Oe,V){wt()?this._history.pushState(W,Oe,V):this._location.hash=V}replaceState(W,Oe,V){wt()?this._history.replaceState(W,Oe,V):this._location.hash=V}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}}return H.\u0275fac=function(W){return new(W||H)(p.LFG(st))},H.\u0275prov=p.Yz7({token:H,factory:function(){return function it(){return new lt((0,p.LFG)(st))}()},providedIn:"platform"}),H})();function wt(){return!!window.history.pushState}function yt(H,ge){if(0==H.length)return ge;if(0==ge.length)return H;let W=0;return H.endsWith("/")&&W++,ge.startsWith("/")&&W++,2==W?H+ge.substring(1):1==W?H+ge:H+"/"+ge}function pt(H){const ge=H.match(/#|\?|$/),W=ge&&ge.index||H.length;return H.slice(0,W-("/"===H[W-1]?1:0))+H.slice(W)}function jt(H){return H&&"?"!==H[0]?"?"+H:H}let en=(()=>{class H{historyGo(W){throw new Error("Not implemented")}}return H.\u0275fac=function(W){return new(W||H)},H.\u0275prov=p.Yz7({token:H,factory:function(){return(0,p.f3M)(nn)},providedIn:"root"}),H})();const Ct=new p.OlP("appBaseHref");let nn=(()=>{class H extends en{constructor(W,Oe){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=Oe??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return yt(this._baseHref,W)}path(W=!1){const Oe=this._platformLocation.pathname+jt(this._platformLocation.search),V=this._platformLocation.hash;return V&&W?`${Oe}${V}`:Oe}pushState(W,Oe,V,C){const M=this.prepareExternalUrl(V+jt(C));this._platformLocation.pushState(W,Oe,M)}replaceState(W,Oe,V,C){const M=this.prepareExternalUrl(V+jt(C));this._platformLocation.replaceState(W,Oe,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return H.\u0275fac=function(W){return new(W||H)(p.LFG(_t),p.LFG(Ct,8))},H.\u0275prov=p.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),sn=(()=>{class H extends en{constructor(W,Oe){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=Oe&&(this._baseHref=Oe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){let Oe=this._platformLocation.hash;return null==Oe&&(Oe="#"),Oe.length>0?Oe.substring(1):Oe}prepareExternalUrl(W){const Oe=yt(this._baseHref,W);return Oe.length>0?"#"+Oe:Oe}pushState(W,Oe,V,C){let M=this.prepareExternalUrl(V+jt(C));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.pushState(W,Oe,M)}replaceState(W,Oe,V,C){let M=this.prepareExternalUrl(V+jt(C));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.replaceState(W,Oe,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return H.\u0275fac=function(W){return new(W||H)(p.LFG(_t),p.LFG(Ct,8))},H.\u0275prov=p.Yz7({token:H,factory:H.\u0275fac}),H})(),Cn=(()=>{class H{constructor(W){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const Oe=this._locationStrategy.getBaseHref();this._basePath=function ht(H){if(new RegExp("^(https?:)?//").test(H)){const[,W]=H.split(/\/\/[^\/]+/);return W}return H}(pt(ct(Oe))),this._locationStrategy.onPopState(V=>{this._subject.emit({url:this.path(!0),pop:!0,state:V.state,type:V.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,Oe=""){return this.path()==this.normalize(W+jt(Oe))}normalize(W){return H.stripTrailingSlash(function Ae(H,ge){if(!H||!ge.startsWith(H))return ge;const W=ge.substring(H.length);return""===W||["/",";","?","#"].includes(W[0])?W:ge}(this._basePath,ct(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,Oe="",V=null){this._locationStrategy.pushState(V,"",W,Oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+jt(Oe)),V)}replaceState(W,Oe="",V=null){this._locationStrategy.replaceState(V,"",W,Oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+jt(Oe)),V)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Oe=>{this._notifyUrlChangeListeners(Oe.url,Oe.state)})),()=>{const Oe=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(Oe,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",Oe){this._urlChangeListeners.forEach(V=>V(W,Oe))}subscribe(W,Oe,V){return this._subject.subscribe({next:W,error:Oe,complete:V})}}return H.normalizeQueryParams=jt,H.joinWithSlash=yt,H.stripTrailingSlash=pt,H.\u0275fac=function(W){return new(W||H)(p.LFG(en))},H.\u0275prov=p.Yz7({token:H,factory:function(){return function kt(){return new Cn((0,p.LFG)(en))}()},providedIn:"root"}),H})();function ct(H){return H.replace(/\/index.html$/,"")}var ln=(()=>((ln=ln||{})[ln.Format=0]="Format",ln[ln.Standalone=1]="Standalone",ln))(),Dn=(()=>((Dn=Dn||{})[Dn.Narrow=0]="Narrow",Dn[Dn.Abbreviated=1]="Abbreviated",Dn[Dn.Wide=2]="Wide",Dn[Dn.Short=3]="Short",Dn))(),ti=(()=>((ti=ti||{})[ti.Short=0]="Short",ti[ti.Medium=1]="Medium",ti[ti.Long=2]="Long",ti[ti.Full=3]="Full",ti))(),_n=(()=>((_n=_n||{})[_n.Decimal=0]="Decimal",_n[_n.Group=1]="Group",_n[_n.List=2]="List",_n[_n.PercentSign=3]="PercentSign",_n[_n.PlusSign=4]="PlusSign",_n[_n.MinusSign=5]="MinusSign",_n[_n.Exponential=6]="Exponential",_n[_n.SuperscriptingExponent=7]="SuperscriptingExponent",_n[_n.PerMille=8]="PerMille",_n[_n.Infinity=9]="Infinity",_n[_n.NaN=10]="NaN",_n[_n.TimeSeparator=11]="TimeSeparator",_n[_n.CurrencyDecimal=12]="CurrencyDecimal",_n[_n.CurrencyGroup=13]="CurrencyGroup",_n))();function Nt(H,ge){return Fn((0,p.cg1)(H)[p.wAp.DateFormat],ge)}function We(H,ge){return Fn((0,p.cg1)(H)[p.wAp.TimeFormat],ge)}function Ot(H,ge){return Fn((0,p.cg1)(H)[p.wAp.DateTimeFormat],ge)}function Re(H,ge){const W=(0,p.cg1)(H),Oe=W[p.wAp.NumberSymbols][ge];if(typeof Oe>"u"){if(ge===_n.CurrencyDecimal)return W[p.wAp.NumberSymbols][_n.Decimal];if(ge===_n.CurrencyGroup)return W[p.wAp.NumberSymbols][_n.Group]}return Oe}function On(H){if(!H[p.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${H[p.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fn(H,ge){for(let W=ge;W>-1;W--)if(typeof H[W]<"u")return H[W];throw new Error("Locale data API: locale data undefined")}function It(H){const[ge,W]=H.split(":");return{hours:+ge,minutes:+W}}const De=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$e={},Ft=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Qe=(()=>((Qe=Qe||{})[Qe.Short=0]="Short",Qe[Qe.ShortGMT=1]="ShortGMT",Qe[Qe.Long=2]="Long",Qe[Qe.Extended=3]="Extended",Qe))(),Te=(()=>((Te=Te||{})[Te.FullYear=0]="FullYear",Te[Te.Month=1]="Month",Te[Te.Date=2]="Date",Te[Te.Hours=3]="Hours",Te[Te.Minutes=4]="Minutes",Te[Te.Seconds=5]="Seconds",Te[Te.FractionalSeconds=6]="FractionalSeconds",Te[Te.Day=7]="Day",Te))(),xe=(()=>((xe=xe||{})[xe.DayPeriods=0]="DayPeriods",xe[xe.Days=1]="Days",xe[xe.Months=2]="Months",xe[xe.Eras=3]="Eras",xe))();function ve(H,ge,W,Oe){let V=function ri(H){if(Rt(H))return H;if("number"==typeof H&&!isNaN(H))return new Date(H);if("string"==typeof H){if(H=H.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(H)){const[V,C=1,M=1]=H.split("-").map($=>+$);return re(V,C-1,M)}const W=parseFloat(H);if(!isNaN(H-W))return new Date(W);let Oe;if(Oe=H.match(De))return function zn(H){const ge=new Date(0);let W=0,Oe=0;const V=H[8]?ge.setUTCFullYear:ge.setFullYear,C=H[8]?ge.setUTCHours:ge.setHours;H[9]&&(W=Number(H[9]+H[10]),Oe=Number(H[9]+H[11])),V.call(ge,Number(H[1]),Number(H[2])-1,Number(H[3]));const M=Number(H[4]||0)-W,$=Number(H[5]||0)-Oe,be=Number(H[6]||0),Ve=Math.floor(1e3*parseFloat("0."+(H[7]||0)));return C.call(ge,M,$,be,Ve),ge}(Oe)}const ge=new Date(H);if(!Rt(ge))throw new Error(`Unable to convert "${H}" into a date`);return ge}(H);ge=Me(W,ge)||ge;let $,M=[];for(;ge;){if($=Ft.exec(ge),!$){M.push(ge);break}{M=M.concat($.slice(1));const Mt=M.pop();if(!Mt)break;ge=Mt}}let be=V.getTimezoneOffset();Oe&&(be=Kt(Oe,be),V=function Hn(H,ge,W){const Oe=W?-1:1,V=H.getTimezoneOffset();return function Yn(H,ge){return(H=new Date(H.getTime())).setMinutes(H.getMinutes()+ge),H}(H,Oe*(Kt(ge,V)-V))}(V,Oe,!0));let Ve="";return M.forEach(Mt=>{const Tt=function Jt(H){if(nt[H])return nt[H];let ge;switch(H){case"G":case"GG":case"GGG":ge=ue(xe.Eras,Dn.Abbreviated);break;case"GGGG":ge=ue(xe.Eras,Dn.Wide);break;case"GGGGG":ge=ue(xe.Eras,Dn.Narrow);break;case"y":ge=En(Te.FullYear,1,0,!1,!0);break;case"yy":ge=En(Te.FullYear,2,0,!0,!0);break;case"yyy":ge=En(Te.FullYear,3,0,!1,!0);break;case"yyyy":ge=En(Te.FullYear,4,0,!1,!0);break;case"Y":ge=we(1);break;case"YY":ge=we(2,!0);break;case"YYY":ge=we(3);break;case"YYYY":ge=we(4);break;case"M":case"L":ge=En(Te.Month,1,1);break;case"MM":case"LL":ge=En(Te.Month,2,1);break;case"MMM":ge=ue(xe.Months,Dn.Abbreviated);break;case"MMMM":ge=ue(xe.Months,Dn.Wide);break;case"MMMMM":ge=ue(xe.Months,Dn.Narrow);break;case"LLL":ge=ue(xe.Months,Dn.Abbreviated,ln.Standalone);break;case"LLLL":ge=ue(xe.Months,Dn.Wide,ln.Standalone);break;case"LLLLL":ge=ue(xe.Months,Dn.Narrow,ln.Standalone);break;case"w":ge=U(1);break;case"ww":ge=U(2);break;case"W":ge=U(1,!0);break;case"d":ge=En(Te.Date,1);break;case"dd":ge=En(Te.Date,2);break;case"c":case"cc":ge=En(Te.Day,1);break;case"ccc":ge=ue(xe.Days,Dn.Abbreviated,ln.Standalone);break;case"cccc":ge=ue(xe.Days,Dn.Wide,ln.Standalone);break;case"ccccc":ge=ue(xe.Days,Dn.Narrow,ln.Standalone);break;case"cccccc":ge=ue(xe.Days,Dn.Short,ln.Standalone);break;case"E":case"EE":case"EEE":ge=ue(xe.Days,Dn.Abbreviated);break;case"EEEE":ge=ue(xe.Days,Dn.Wide);break;case"EEEEE":ge=ue(xe.Days,Dn.Narrow);break;case"EEEEEE":ge=ue(xe.Days,Dn.Short);break;case"a":case"aa":case"aaa":ge=ue(xe.DayPeriods,Dn.Abbreviated);break;case"aaaa":ge=ue(xe.DayPeriods,Dn.Wide);break;case"aaaaa":ge=ue(xe.DayPeriods,Dn.Narrow);break;case"b":case"bb":case"bbb":ge=ue(xe.DayPeriods,Dn.Abbreviated,ln.Standalone,!0);break;case"bbbb":ge=ue(xe.DayPeriods,Dn.Wide,ln.Standalone,!0);break;case"bbbbb":ge=ue(xe.DayPeriods,Dn.Narrow,ln.Standalone,!0);break;case"B":case"BB":case"BBB":ge=ue(xe.DayPeriods,Dn.Abbreviated,ln.Format,!0);break;case"BBBB":ge=ue(xe.DayPeriods,Dn.Wide,ln.Format,!0);break;case"BBBBB":ge=ue(xe.DayPeriods,Dn.Narrow,ln.Format,!0);break;case"h":ge=En(Te.Hours,1,-12);break;case"hh":ge=En(Te.Hours,2,-12);break;case"H":ge=En(Te.Hours,1);break;case"HH":ge=En(Te.Hours,2);break;case"m":ge=En(Te.Minutes,1);break;case"mm":ge=En(Te.Minutes,2);break;case"s":ge=En(Te.Seconds,1);break;case"ss":ge=En(Te.Seconds,2);break;case"S":ge=En(Te.FractionalSeconds,1);break;case"SS":ge=En(Te.FractionalSeconds,2);break;case"SSS":ge=En(Te.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ge=Ke(Qe.Short);break;case"ZZZZZ":ge=Ke(Qe.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ge=Ke(Qe.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ge=Ke(Qe.Long);break;default:return null}return nt[H]=ge,ge}(Mt);Ve+=Tt?Tt(V,W,be):"''"===Mt?"'":Mt.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ve}function re(H,ge,W){const Oe=new Date(0);return Oe.setFullYear(H,ge,W),Oe.setHours(0,0,0),Oe}function Me(H,ge){const W=function ii(H){return(0,p.cg1)(H)[p.wAp.LocaleId]}(H);if($e[W]=$e[W]||{},$e[W][ge])return $e[W][ge];let Oe="";switch(ge){case"shortDate":Oe=Nt(H,ti.Short);break;case"mediumDate":Oe=Nt(H,ti.Medium);break;case"longDate":Oe=Nt(H,ti.Long);break;case"fullDate":Oe=Nt(H,ti.Full);break;case"shortTime":Oe=We(H,ti.Short);break;case"mediumTime":Oe=We(H,ti.Medium);break;case"longTime":Oe=We(H,ti.Long);break;case"fullTime":Oe=We(H,ti.Full);break;case"short":const V=Me(H,"shortTime"),C=Me(H,"shortDate");Oe=Pe(Ot(H,ti.Short),[V,C]);break;case"medium":const M=Me(H,"mediumTime"),$=Me(H,"mediumDate");Oe=Pe(Ot(H,ti.Medium),[M,$]);break;case"long":const be=Me(H,"longTime"),Ve=Me(H,"longDate");Oe=Pe(Ot(H,ti.Long),[be,Ve]);break;case"full":const Mt=Me(H,"fullTime"),Tt=Me(H,"fullDate");Oe=Pe(Ot(H,ti.Full),[Mt,Tt])}return Oe&&($e[W][ge]=Oe),Oe}function Pe(H,ge){return ge&&(H=H.replace(/\{([^}]+)}/g,function(W,Oe){return null!=ge&&Oe in ge?ge[Oe]:W})),H}function Ut(H,ge,W="-",Oe,V){let C="";(H<0||V&&H<=0)&&(V?H=1-H:(H=-H,C=W));let M=String(H);for(;M.length<ge;)M="0"+M;return Oe&&(M=M.slice(M.length-ge)),C+M}function En(H,ge,W=0,Oe=!1,V=!1){return function(C,M){let $=function Ue(H,ge){switch(H){case Te.FullYear:return ge.getFullYear();case Te.Month:return ge.getMonth();case Te.Date:return ge.getDate();case Te.Hours:return ge.getHours();case Te.Minutes:return ge.getMinutes();case Te.Seconds:return ge.getSeconds();case Te.FractionalSeconds:return ge.getMilliseconds();case Te.Day:return ge.getDay();default:throw new Error(`Unknown DateType value "${H}".`)}}(H,C);if((W>0||$>-W)&&($+=W),H===Te.Hours)0===$&&-12===W&&($=12);else if(H===Te.FractionalSeconds)return function Bn(H,ge){return Ut(H,3).substring(0,ge)}($,ge);const be=Re(M,_n.MinusSign);return Ut($,ge,be,Oe,V)}}function ue(H,ge,W=ln.Format,Oe=!1){return function(V,C){return function Ce(H,ge,W,Oe,V,C){switch(W){case xe.Months:return function Yt(H,ge,W){const Oe=(0,p.cg1)(H),C=Fn([Oe[p.wAp.MonthsFormat],Oe[p.wAp.MonthsStandalone]],ge);return Fn(C,W)}(ge,V,Oe)[H.getMonth()];case xe.Days:return function Ii(H,ge,W){const Oe=(0,p.cg1)(H),C=Fn([Oe[p.wAp.DaysFormat],Oe[p.wAp.DaysStandalone]],ge);return Fn(C,W)}(ge,V,Oe)[H.getDay()];case xe.DayPeriods:const M=H.getHours(),$=H.getMinutes();if(C){const Ve=function xt(H){const ge=(0,p.cg1)(H);return On(ge),(ge[p.wAp.ExtraData][2]||[]).map(Oe=>"string"==typeof Oe?It(Oe):[It(Oe[0]),It(Oe[1])])}(ge),Mt=function zt(H,ge,W){const Oe=(0,p.cg1)(H);On(Oe);const C=Fn([Oe[p.wAp.ExtraData][0],Oe[p.wAp.ExtraData][1]],ge)||[];return Fn(C,W)||[]}(ge,V,Oe),Tt=Ve.findIndex(on=>{if(Array.isArray(on)){const[pn,si]=on,di=M>=pn.hours&&$>=pn.minutes,Ri=M<si.hours||M===si.hours&&$<si.minutes;if(pn.hours<si.hours){if(di&&Ri)return!0}else if(di||Ri)return!0}else if(on.hours===M&&on.minutes===$)return!0;return!1});if(-1!==Tt)return Mt[Tt]}return function vi(H,ge,W){const Oe=(0,p.cg1)(H),C=Fn([Oe[p.wAp.DayPeriodsFormat],Oe[p.wAp.DayPeriodsStandalone]],ge);return Fn(C,W)}(ge,V,Oe)[M<12?0:1];case xe.Eras:return function Zt(H,ge){return Fn((0,p.cg1)(H)[p.wAp.Eras],ge)}(ge,Oe)[H.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${W}`)}}(V,C,H,ge,W,Oe)}}function Ke(H){return function(ge,W,Oe){const V=-1*Oe,C=Re(W,_n.MinusSign),M=V>0?Math.floor(V/60):Math.ceil(V/60);switch(H){case Qe.Short:return(V>=0?"+":"")+Ut(M,2,C)+Ut(Math.abs(V%60),2,C);case Qe.ShortGMT:return"GMT"+(V>=0?"+":"")+Ut(M,1,C);case Qe.Long:return"GMT"+(V>=0?"+":"")+Ut(M,2,C)+":"+Ut(Math.abs(V%60),2,C);case Qe.Extended:return 0===Oe?"Z":(V>=0?"+":"")+Ut(M,2,C)+":"+Ut(Math.abs(V%60),2,C);default:throw new Error(`Unknown zone width "${H}"`)}}}const bt=0,Pt=4;function ee(H){return re(H.getFullYear(),H.getMonth(),H.getDate()+(Pt-H.getDay()))}function U(H,ge=!1){return function(W,Oe){let V;if(ge){const C=new Date(W.getFullYear(),W.getMonth(),1).getDay()-1,M=W.getDate();V=1+Math.floor((M+C)/7)}else{const C=ee(W),M=function me(H){const ge=re(H,bt,1).getDay();return re(H,0,1+(ge<=Pt?Pt:Pt+7)-ge)}(C.getFullYear()),$=C.getTime()-M.getTime();V=1+Math.round($/6048e5)}return Ut(V,H,Re(Oe,_n.MinusSign))}}function we(H,ge=!1){return function(W,Oe){return Ut(ee(W).getFullYear(),H,Re(Oe,_n.MinusSign),ge)}}const nt={};function Kt(H,ge){H=H.replace(/:/g,"");const W=Date.parse("Jan 01, 1970 00:00:00 "+H)/6e4;return isNaN(W)?ge:W}function Rt(H){return H instanceof Date&&!isNaN(H.valueOf())}function wn(H,ge){ge=encodeURIComponent(ge);for(const W of H.split(";")){const Oe=W.indexOf("="),[V,C]=-1==Oe?[W,""]:[W.slice(0,Oe),W.slice(Oe+1)];if(V.trim()===ge)return decodeURIComponent(C)}return null}const at=/\s+/,vt=[];let I=(()=>{class H{constructor(W,Oe,V,C){this._iterableDiffers=W,this._keyValueDiffers=Oe,this._ngEl=V,this._renderer=C,this.initialClasses=vt,this.stateMap=new Map}set klass(W){this.initialClasses=null!=W?W.trim().split(at):vt}set ngClass(W){this.rawClass="string"==typeof W?W.trim().split(at):W}ngDoCheck(){for(const Oe of this.initialClasses)this._updateState(Oe,!0);const W=this.rawClass;if(Array.isArray(W)||W instanceof Set)for(const Oe of W)this._updateState(Oe,!0);else if(null!=W)for(const Oe of Object.keys(W))this._updateState(Oe,Boolean(W[Oe]));this._applyStateDiff()}_updateState(W,Oe){const V=this.stateMap.get(W);void 0!==V?(V.enabled!==Oe&&(V.changed=!0,V.enabled=Oe),V.touched=!0):this.stateMap.set(W,{enabled:Oe,changed:!0,touched:!0})}_applyStateDiff(){for(const W of this.stateMap){const Oe=W[0],V=W[1];V.changed?(this._toggleClass(Oe,V.enabled),V.changed=!1):V.touched||(V.enabled&&this._toggleClass(Oe,!1),this.stateMap.delete(Oe)),V.touched=!1}}_toggleClass(W,Oe){(W=W.trim()).length>0&&W.split(at).forEach(V=>{Oe?this._renderer.addClass(this._ngEl.nativeElement,V):this._renderer.removeClass(this._ngEl.nativeElement,V)})}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),H})();class An{constructor(ge,W,Oe,V){this.$implicit=ge,this.ngForOf=W,this.index=Oe,this.count=V}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mi=(()=>{class H{set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}constructor(W,Oe,V){this._viewContainer=W,this._template=Oe,this._differs=V,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const Oe=this._viewContainer;W.forEachOperation((V,C,M)=>{if(null==V.previousIndex)Oe.createEmbeddedView(this._template,new An(V.item,this._ngForOf,-1,-1),null===M?void 0:M);else if(null==M)Oe.remove(null===C?void 0:C);else if(null!==C){const $=Oe.get(C);Oe.move($,M),fn($,V)}});for(let V=0,C=Oe.length;V<C;V++){const $=Oe.get(V).context;$.index=V,$.count=C,$.ngForOf=this._ngForOf}W.forEachIdentityChange(V=>{fn(Oe.get(V.currentIndex),V)})}static ngTemplateContextGuard(W,Oe){return!0}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),H})();function fn(H,ge){H.context.$implicit=ge.item}let wi=(()=>{class H{constructor(W,Oe){this._viewContainer=W,this._context=new yi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Oe}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){xr("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){xr("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,Oe){return!0}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.s_b),p.Y36(p.Rgc))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),H})();class yi{constructor(){this.$implicit=null,this.ngIf=null}}function xr(H,ge){if(ge&&!ge.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,p.AaK)(ge)}'.`)}class Ni{constructor(ge,W){this._viewContainerRef=ge,this._templateRef=W,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ge){ge&&!this._created?this.create():!ge&&this._created&&this.destroy()}}let Qr=(()=>{class H{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(W){this._ngSwitch=W,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(W){this._defaultViews.push(W)}_matchCase(W){const Oe=W==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||Oe,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Oe}_updateDefaultCases(W){if(this._defaultViews.length>0&&W!==this._defaultUsed){this._defaultUsed=W;for(const Oe of this._defaultViews)Oe.enforceState(W)}}}return H.\u0275fac=function(W){return new(W||H)},H.\u0275dir=p.lG2({type:H,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),H})(),Ao=(()=>{class H{constructor(W,Oe,V){this.ngSwitch=V,V._addCase(),this._view=new Ni(W,Oe)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(Qr,9))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),H})(),_r=(()=>{class H{constructor(W,Oe,V){V._addDefault(new Ni(W,Oe))}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(Qr,9))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngSwitchDefault",""]],standalone:!0}),H})(),Co=(()=>{class H{constructor(W,Oe,V){this._ngEl=W,this._differs=Oe,this._renderer=V,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,Oe){const[V,C]=W.split("."),M=-1===V.indexOf("-")?void 0:p.JOm.DashCase;null!=Oe?this._renderer.setStyle(this._ngEl.nativeElement,V,C?`${Oe}${C}`:Oe,M):this._renderer.removeStyle(this._ngEl.nativeElement,V,M)}_applyChanges(W){W.forEachRemovedItem(Oe=>this._setStyle(Oe.key,null)),W.forEachAddedItem(Oe=>this._setStyle(Oe.key,Oe.currentValue)),W.forEachChangedItem(Oe=>this._setStyle(Oe.key,Oe.currentValue))}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),H})(),Es=(()=>{class H{constructor(W){this._viewContainerRef=W,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(W){if(W.ngTemplateOutlet||W.ngTemplateOutletInjector){const Oe=this._viewContainerRef;if(this._viewRef&&Oe.remove(Oe.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:V,ngTemplateOutletContext:C,ngTemplateOutletInjector:M}=this;this._viewRef=Oe.createEmbeddedView(V,C,M?{injector:M}:void 0)}else this._viewRef=null}else this._viewRef&&W.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.s_b))},H.\u0275dir=p.lG2({type:H,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[p.TTD]}),H})();function Go(H,ge){return new p.vHH(2100,!1)}class ma{createSubscription(ge,W){return ge.subscribe({next:W,error:Oe=>{throw Oe}})}dispose(ge){ge.unsubscribe()}}class Gs{createSubscription(ge,W){return ge.then(W,Oe=>{throw Oe})}dispose(ge){}}const $s=new Gs,So=new ma;let ko=(()=>{class H{constructor(W){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=W}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(W){return this._obj?W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue:(W&&this._subscribe(W),this._latestValue)}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,Oe=>this._updateLatestValue(W,Oe))}_selectStrategy(W){if((0,p.QGY)(W))return $s;if((0,p.F4k)(W))return So;throw Go()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,Oe){W===this._obj&&(this._latestValue=Oe,this._ref.markForCheck())}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.sBO,16))},H.\u0275pipe=p.Yjl({name:"async",type:H,pure:!1,standalone:!0}),H})();const Ar=new p.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),_s=new p.OlP("DATE_PIPE_DEFAULT_OPTIONS");let zr=(()=>{class H{constructor(W,Oe,V){this.locale=W,this.defaultTimezone=Oe,this.defaultOptions=V}transform(W,Oe,V,C){if(null==W||""===W||W!=W)return null;try{return ve(W,Oe??this.defaultOptions?.dateFormat??"mediumDate",C||this.locale,V??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(M){throw Go()}}}return H.\u0275fac=function(W){return new(W||H)(p.Y36(p.soG,16),p.Y36(Ar,24),p.Y36(_s,24))},H.\u0275pipe=p.Yjl({name:"date",type:H,pure:!0,standalone:!0}),H})(),us=(()=>{class H{transform(W,Oe,V){if(null==W)return null;if(!this.supports(W))throw Go();return W.slice(Oe,V)}supports(W){return"string"==typeof W||Array.isArray(W)}}return H.\u0275fac=function(W){return new(W||H)},H.\u0275pipe=p.Yjl({name:"slice",type:H,pure:!1,standalone:!0}),H})(),Fa=(()=>{class H{}return H.\u0275fac=function(W){return new(W||H)},H.\u0275mod=p.oAB({type:H}),H.\u0275inj=p.cJS({}),H})();const Ys="browser";function sa(H){return H===Ys}let ya=(()=>{class H{}return H.\u0275prov=(0,p.Yz7)({token:H,providedIn:"root",factory:()=>new Ea((0,p.LFG)(st),window)}),H})();class Ea{constructor(ge,W){this.document=ge,this.window=W,this.offset=()=>[0,0]}setOffset(ge){this.offset=Array.isArray(ge)?()=>ge:ge}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ge){this.supportsScrolling()&&this.window.scrollTo(ge[0],ge[1])}scrollToAnchor(ge){if(!this.supportsScrolling())return;const W=function Zi(H,ge){const W=H.getElementById(ge)||H.getElementsByName(ge)[0];if(W)return W;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const Oe=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let V=Oe.currentNode;for(;V;){const C=V.shadowRoot;if(C){const M=C.getElementById(ge)||C.querySelector(`[name="${ge}"]`);if(M)return M}V=Oe.nextNode()}}return null}(this.document,ge);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(ge){if(this.supportScrollRestoration()){const W=this.window.history;W&&W.scrollRestoration&&(W.scrollRestoration=ge)}}scrollToElement(ge){const W=ge.getBoundingClientRect(),Oe=W.left+this.window.pageXOffset,V=W.top+this.window.pageYOffset,C=this.offset();this.window.scrollTo(Oe-C[0],V-C[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ge=Ts(this.window.history)||Ts(Object.getPrototypeOf(this.window.history));return!(!ge||!ge.writable&&!ge.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ts(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class Wa{}},529:(ni,Wt,F)=>{"use strict";F.d(Wt,{JF:()=>Ke,LE:()=>nn,TP:()=>Zt,WM:()=>lt,eN:()=>ii});var p=F(6895),j=F(4650),Q=F(9646),o=F(9751),P=F(4351),st=F(9300),_t=F(4004);class ke{}class Ye{}class lt{constructor(ee){this.normalizedNames=new Map,this.lazyUpdate=null,ee?this.lazyInit="string"==typeof ee?()=>{this.headers=new Map,ee.split("\n").forEach(U=>{const we=U.indexOf(":");if(we>0){const nt=U.slice(0,we),Jt=nt.toLowerCase(),Kt=U.slice(we+1).trim();this.maybeSetNormalizedName(nt,Jt),this.headers.has(Jt)?this.headers.get(Jt).push(Kt):this.headers.set(Jt,[Kt])}})}:()=>{this.headers=new Map,Object.entries(ee).forEach(([U,we])=>{let nt;if(nt="string"==typeof we?[we]:"number"==typeof we?[we.toString()]:we.map(Jt=>Jt.toString()),nt.length>0){const Jt=U.toLowerCase();this.headers.set(Jt,nt),this.maybeSetNormalizedName(U,Jt)}})}:this.headers=new Map}has(ee){return this.init(),this.headers.has(ee.toLowerCase())}get(ee){this.init();const U=this.headers.get(ee.toLowerCase());return U&&U.length>0?U[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ee){return this.init(),this.headers.get(ee.toLowerCase())||null}append(ee,U){return this.clone({name:ee,value:U,op:"a"})}set(ee,U){return this.clone({name:ee,value:U,op:"s"})}delete(ee,U){return this.clone({name:ee,value:U,op:"d"})}maybeSetNormalizedName(ee,U){this.normalizedNames.has(U)||this.normalizedNames.set(U,ee)}init(){this.lazyInit&&(this.lazyInit instanceof lt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ee=>this.applyUpdate(ee)),this.lazyUpdate=null))}copyFrom(ee){ee.init(),Array.from(ee.headers.keys()).forEach(U=>{this.headers.set(U,ee.headers.get(U)),this.normalizedNames.set(U,ee.normalizedNames.get(U))})}clone(ee){const U=new lt;return U.lazyInit=this.lazyInit&&this.lazyInit instanceof lt?this.lazyInit:this,U.lazyUpdate=(this.lazyUpdate||[]).concat([ee]),U}applyUpdate(ee){const U=ee.name.toLowerCase();switch(ee.op){case"a":case"s":let we=ee.value;if("string"==typeof we&&(we=[we]),0===we.length)return;this.maybeSetNormalizedName(ee.name,U);const nt=("a"===ee.op?this.headers.get(U):void 0)||[];nt.push(...we),this.headers.set(U,nt);break;case"d":const Jt=ee.value;if(Jt){let Kt=this.headers.get(U);if(!Kt)return;Kt=Kt.filter(Yn=>-1===Jt.indexOf(Yn)),0===Kt.length?(this.headers.delete(U),this.normalizedNames.delete(U)):this.headers.set(U,Kt)}else this.headers.delete(U),this.normalizedNames.delete(U)}}forEach(ee){this.init(),Array.from(this.normalizedNames.keys()).forEach(U=>ee(this.normalizedNames.get(U),this.headers.get(U)))}}class it{encodeKey(ee){return en(ee)}encodeValue(ee){return en(ee)}decodeKey(ee){return decodeURIComponent(ee)}decodeValue(ee){return decodeURIComponent(ee)}}const pt=/%(\d[a-f0-9])/gi,jt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function en(me){return encodeURIComponent(me).replace(pt,(ee,U)=>jt[U]??ee)}function Ct(me){return`${me}`}class nn{constructor(ee={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ee.encoder||new it,ee.fromString){if(ee.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yt(me,ee){const U=new Map;return me.length>0&&me.replace(/^\?/,"").split("&").forEach(nt=>{const Jt=nt.indexOf("="),[Kt,Yn]=-1==Jt?[ee.decodeKey(nt),""]:[ee.decodeKey(nt.slice(0,Jt)),ee.decodeValue(nt.slice(Jt+1))],Hn=U.get(Kt)||[];Hn.push(Yn),U.set(Kt,Hn)}),U}(ee.fromString,this.encoder)}else ee.fromObject?(this.map=new Map,Object.keys(ee.fromObject).forEach(U=>{const we=ee.fromObject[U],nt=Array.isArray(we)?we.map(Ct):[Ct(we)];this.map.set(U,nt)})):this.map=null}has(ee){return this.init(),this.map.has(ee)}get(ee){this.init();const U=this.map.get(ee);return U?U[0]:null}getAll(ee){return this.init(),this.map.get(ee)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ee,U){return this.clone({param:ee,value:U,op:"a"})}appendAll(ee){const U=[];return Object.keys(ee).forEach(we=>{const nt=ee[we];Array.isArray(nt)?nt.forEach(Jt=>{U.push({param:we,value:Jt,op:"a"})}):U.push({param:we,value:nt,op:"a"})}),this.clone(U)}set(ee,U){return this.clone({param:ee,value:U,op:"s"})}delete(ee,U){return this.clone({param:ee,value:U,op:"d"})}toString(){return this.init(),this.keys().map(ee=>{const U=this.encoder.encodeKey(ee);return this.map.get(ee).map(we=>U+"="+this.encoder.encodeValue(we)).join("&")}).filter(ee=>""!==ee).join("&")}clone(ee){const U=new nn({encoder:this.encoder});return U.cloneFrom=this.cloneFrom||this,U.updates=(this.updates||[]).concat(ee),U}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ee=>this.map.set(ee,this.cloneFrom.map.get(ee))),this.updates.forEach(ee=>{switch(ee.op){case"a":case"s":const U=("a"===ee.op?this.map.get(ee.param):void 0)||[];U.push(Ct(ee.value)),this.map.set(ee.param,U);break;case"d":if(void 0===ee.value){this.map.delete(ee.param);break}{let we=this.map.get(ee.param)||[];const nt=we.indexOf(Ct(ee.value));-1!==nt&&we.splice(nt,1),we.length>0?this.map.set(ee.param,we):this.map.delete(ee.param)}}}),this.cloneFrom=this.updates=null)}}class Cn{constructor(){this.map=new Map}set(ee,U){return this.map.set(ee,U),this}get(ee){return this.map.has(ee)||this.map.set(ee,ee.defaultValue()),this.map.get(ee)}delete(ee){return this.map.delete(ee),this}has(ee){return this.map.has(ee)}keys(){return this.map.keys()}}function Ae(me){return typeof ArrayBuffer<"u"&&me instanceof ArrayBuffer}function ct(me){return typeof Blob<"u"&&me instanceof Blob}function ht(me){return typeof FormData<"u"&&me instanceof FormData}class Je{constructor(ee,U,we,nt){let Jt;if(this.url=U,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ee.toUpperCase(),function kt(me){switch(me){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||nt?(this.body=void 0!==we?we:null,Jt=nt):Jt=we,Jt&&(this.reportProgress=!!Jt.reportProgress,this.withCredentials=!!Jt.withCredentials,Jt.responseType&&(this.responseType=Jt.responseType),Jt.headers&&(this.headers=Jt.headers),Jt.context&&(this.context=Jt.context),Jt.params&&(this.params=Jt.params)),this.headers||(this.headers=new lt),this.context||(this.context=new Cn),this.params){const Kt=this.params.toString();if(0===Kt.length)this.urlWithParams=U;else{const Yn=U.indexOf("?");this.urlWithParams=U+(-1===Yn?"?":Yn<U.length-1?"&":"")+Kt}}else this.params=new nn,this.urlWithParams=U}serializeBody(){return null===this.body?null:Ae(this.body)||ct(this.body)||ht(this.body)||function mt(me){return typeof URLSearchParams<"u"&&me instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nn?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ht(this.body)?null:ct(this.body)?this.body.type||null:Ae(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nn?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ee={}){const U=ee.method||this.method,we=ee.url||this.url,nt=ee.responseType||this.responseType,Jt=void 0!==ee.body?ee.body:this.body,Kt=void 0!==ee.withCredentials?ee.withCredentials:this.withCredentials,Yn=void 0!==ee.reportProgress?ee.reportProgress:this.reportProgress;let Hn=ee.headers||this.headers,ri=ee.params||this.params;const zn=ee.context??this.context;return void 0!==ee.setHeaders&&(Hn=Object.keys(ee.setHeaders).reduce((Rt,Ee)=>Rt.set(Ee,ee.setHeaders[Ee]),Hn)),ee.setParams&&(ri=Object.keys(ee.setParams).reduce((Rt,Ee)=>Rt.set(Ee,ee.setParams[Ee]),ri)),new Je(U,we,Jt,{params:ri,headers:Hn,context:zn,reportProgress:Yn,responseType:nt,withCredentials:Kt})}}var qt=(()=>((qt=qt||{})[qt.Sent=0]="Sent",qt[qt.UploadProgress=1]="UploadProgress",qt[qt.ResponseHeader=2]="ResponseHeader",qt[qt.DownloadProgress=3]="DownloadProgress",qt[qt.Response=4]="Response",qt[qt.User=5]="User",qt))();class ln{constructor(ee,U=200,we="OK"){this.headers=ee.headers||new lt,this.status=void 0!==ee.status?ee.status:U,this.statusText=ee.statusText||we,this.url=ee.url||null,this.ok=this.status>=200&&this.status<300}}class Dn extends ln{constructor(ee={}){super(ee),this.type=qt.ResponseHeader}clone(ee={}){return new Dn({headers:ee.headers||this.headers,status:void 0!==ee.status?ee.status:this.status,statusText:ee.statusText||this.statusText,url:ee.url||this.url||void 0})}}class ti extends ln{constructor(ee={}){super(ee),this.type=qt.Response,this.body=void 0!==ee.body?ee.body:null}clone(ee={}){return new ti({body:void 0!==ee.body?ee.body:this.body,headers:ee.headers||this.headers,status:void 0!==ee.status?ee.status:this.status,statusText:ee.statusText||this.statusText,url:ee.url||this.url||void 0})}}class _n extends ln{constructor(ee){super(ee,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ee.url||"(unknown url)"}`:`Http failure response for ${ee.url||"(unknown url)"}: ${ee.status} ${ee.statusText}`,this.error=ee.error||null}}function _i(me,ee){return{body:ee,headers:me.headers,context:me.context,observe:me.observe,params:me.params,reportProgress:me.reportProgress,responseType:me.responseType,withCredentials:me.withCredentials}}let ii=(()=>{class me{constructor(U){this.handler=U}request(U,we,nt={}){let Jt;if(U instanceof Je)Jt=U;else{let Hn,ri;Hn=nt.headers instanceof lt?nt.headers:new lt(nt.headers),nt.params&&(ri=nt.params instanceof nn?nt.params:new nn({fromObject:nt.params})),Jt=new Je(U,we,void 0!==nt.body?nt.body:null,{headers:Hn,context:nt.context,params:ri,reportProgress:nt.reportProgress,responseType:nt.responseType||"json",withCredentials:nt.withCredentials})}const Kt=(0,Q.of)(Jt).pipe((0,P.b)(Hn=>this.handler.handle(Hn)));if(U instanceof Je||"events"===nt.observe)return Kt;const Yn=Kt.pipe((0,st.h)(Hn=>Hn instanceof ti));switch(nt.observe||"body"){case"body":switch(Jt.responseType){case"arraybuffer":return Yn.pipe((0,_t.U)(Hn=>{if(null!==Hn.body&&!(Hn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Hn.body}));case"blob":return Yn.pipe((0,_t.U)(Hn=>{if(null!==Hn.body&&!(Hn.body instanceof Blob))throw new Error("Response is not a Blob.");return Hn.body}));case"text":return Yn.pipe((0,_t.U)(Hn=>{if(null!==Hn.body&&"string"!=typeof Hn.body)throw new Error("Response is not a string.");return Hn.body}));default:return Yn.pipe((0,_t.U)(Hn=>Hn.body))}case"response":return Yn;default:throw new Error(`Unreachable: unhandled observe type ${nt.observe}}`)}}delete(U,we={}){return this.request("DELETE",U,we)}get(U,we={}){return this.request("GET",U,we)}head(U,we={}){return this.request("HEAD",U,we)}jsonp(U,we){return this.request("JSONP",U,{params:(new nn).append(we,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(U,we={}){return this.request("OPTIONS",U,we)}patch(U,we,nt={}){return this.request("PATCH",U,_i(nt,we))}post(U,we,nt={}){return this.request("POST",U,_i(nt,we))}put(U,we,nt={}){return this.request("PUT",U,_i(nt,we))}}return me.\u0275fac=function(U){return new(U||me)(j.LFG(ke))},me.\u0275prov=j.Yz7({token:me,factory:me.\u0275fac}),me})();function vi(me,ee){return ee(me)}function Ii(me,ee){return(U,we)=>ee.intercept(U,{handle:nt=>me(nt,we)})}const Zt=new j.OlP("HTTP_INTERCEPTORS"),ze=new j.OlP("HTTP_INTERCEPTOR_FNS");function Ge(){let me=null;return(ee,U)=>(null===me&&(me=((0,j.f3M)(Zt,{optional:!0})??[]).reduceRight(Ii,vi)),me(ee,U))}let Nt=(()=>{class me extends ke{constructor(U,we){super(),this.backend=U,this.injector=we,this.chain=null}handle(U){if(null===this.chain){const we=Array.from(new Set(this.injector.get(ze)));this.chain=we.reduceRight((nt,Jt)=>function Yt(me,ee,U){return(we,nt)=>U.runInContext(()=>ee(we,Jt=>me(Jt,nt)))}(nt,Jt,this.injector),vi)}return this.chain(U,we=>this.backend.handle(we))}}return me.\u0275fac=function(U){return new(U||me)(j.LFG(Ye),j.LFG(j.lqb))},me.\u0275prov=j.Yz7({token:me,factory:me.\u0275fac}),me})();const zt=/^\)\]\}',?\n/;let Fn=(()=>{class me{constructor(U){this.xhrFactory=U}handle(U){if("JSONP"===U.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.y(we=>{const nt=this.xhrFactory.build();if(nt.open(U.method,U.urlWithParams),U.withCredentials&&(nt.withCredentials=!0),U.headers.forEach((se,le)=>nt.setRequestHeader(se,le.join(","))),U.headers.has("Accept")||nt.setRequestHeader("Accept","application/json, text/plain, */*"),!U.headers.has("Content-Type")){const se=U.detectContentTypeHeader();null!==se&&nt.setRequestHeader("Content-Type",se)}if(U.responseType){const se=U.responseType.toLowerCase();nt.responseType="json"!==se?se:"text"}const Jt=U.serializeBody();let Kt=null;const Yn=()=>{if(null!==Kt)return Kt;const se=nt.statusText||"OK",le=new lt(nt.getAllResponseHeaders()),Fe=function Wn(me){return"responseURL"in me&&me.responseURL?me.responseURL:/^X-Request-URL:/m.test(me.getAllResponseHeaders())?me.getResponseHeader("X-Request-URL"):null}(nt)||U.url;return Kt=new Dn({headers:le,status:nt.status,statusText:se,url:Fe}),Kt},Hn=()=>{let{headers:se,status:le,statusText:Fe,url:Et}=Yn(),rn=null;204!==le&&(rn=typeof nt.response>"u"?nt.responseText:nt.response),0===le&&(le=rn?200:0);let Gn=le>=200&&le<300;if("json"===U.responseType&&"string"==typeof rn){const Ai=rn;rn=rn.replace(zt,"");try{rn=""!==rn?JSON.parse(rn):null}catch(yr){rn=Ai,Gn&&(Gn=!1,rn={error:yr,text:rn})}}Gn?(we.next(new ti({body:rn,headers:se,status:le,statusText:Fe,url:Et||void 0})),we.complete()):we.error(new _n({error:rn,headers:se,status:le,statusText:Fe,url:Et||void 0}))},ri=se=>{const{url:le}=Yn(),Fe=new _n({error:se,status:nt.status||0,statusText:nt.statusText||"Unknown Error",url:le||void 0});we.error(Fe)};let zn=!1;const Rt=se=>{zn||(we.next(Yn()),zn=!0);let le={type:qt.DownloadProgress,loaded:se.loaded};se.lengthComputable&&(le.total=se.total),"text"===U.responseType&&nt.responseText&&(le.partialText=nt.responseText),we.next(le)},Ee=se=>{let le={type:qt.UploadProgress,loaded:se.loaded};se.lengthComputable&&(le.total=se.total),we.next(le)};return nt.addEventListener("load",Hn),nt.addEventListener("error",ri),nt.addEventListener("timeout",ri),nt.addEventListener("abort",ri),U.reportProgress&&(nt.addEventListener("progress",Rt),null!==Jt&&nt.upload&&nt.upload.addEventListener("progress",Ee)),nt.send(Jt),we.next({type:qt.Sent}),()=>{nt.removeEventListener("error",ri),nt.removeEventListener("abort",ri),nt.removeEventListener("load",Hn),nt.removeEventListener("timeout",ri),U.reportProgress&&(nt.removeEventListener("progress",Rt),null!==Jt&&nt.upload&&nt.upload.removeEventListener("progress",Ee)),nt.readyState!==nt.DONE&&nt.abort()}})}}return me.\u0275fac=function(U){return new(U||me)(j.LFG(p.JF))},me.\u0275prov=j.Yz7({token:me,factory:me.\u0275fac}),me})();const It=new j.OlP("XSRF_ENABLED"),je=new j.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),De=new j.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class $e{}let Ft=(()=>{class me{constructor(U,we,nt){this.doc=U,this.platform=we,this.cookieName=nt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const U=this.doc.cookie||"";return U!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(U,this.cookieName),this.lastCookieString=U),this.lastToken}}return me.\u0275fac=function(U){return new(U||me)(j.LFG(p.K0),j.LFG(j.Lbi),j.LFG(je))},me.\u0275prov=j.Yz7({token:me,factory:me.\u0275fac}),me})();function Qe(me,ee){const U=me.url.toLowerCase();if(!(0,j.f3M)(It)||"GET"===me.method||"HEAD"===me.method||U.startsWith("http://")||U.startsWith("https://"))return ee(me);const we=(0,j.f3M)($e).getToken(),nt=(0,j.f3M)(De);return null!=we&&!me.headers.has(nt)&&(me=me.clone({headers:me.headers.set(nt,we)})),ee(me)}var xe=(()=>((xe=xe||{})[xe.Interceptors=0]="Interceptors",xe[xe.LegacyInterceptors=1]="LegacyInterceptors",xe[xe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",xe[xe.NoXsrfProtection=3]="NoXsrfProtection",xe[xe.JsonpSupport=4]="JsonpSupport",xe[xe.RequestsMadeViaParent=5]="RequestsMadeViaParent",xe))();function ve(me,ee){return{\u0275kind:me,\u0275providers:ee}}function re(...me){const ee=[ii,Fn,Nt,{provide:ke,useExisting:Nt},{provide:Ye,useExisting:Fn},{provide:ze,useValue:Qe,multi:!0},{provide:It,useValue:!0},{provide:$e,useClass:Ft}];for(const U of me)ee.push(...U.\u0275providers);return(0,j.MR2)(ee)}const Pe=new j.OlP("LEGACY_INTERCEPTOR_FN");let Ke=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=j.oAB({type:me}),me.\u0275inj=j.cJS({providers:[re(ve(xe.LegacyInterceptors,[{provide:Pe,useFactory:Ge},{provide:ze,useExisting:Pe,multi:!0}]))]}),me})()},4650:(ni,Wt,F)=>{"use strict";F.d(Wt,{$8M:()=>or,$WT:()=>Tr,$Z:()=>tg,AFp:()=>h0,ALo:()=>Iv,AaK:()=>ke,B6R:()=>Ai,BQk:()=>Qc,CHM:()=>bs,CRH:()=>jv,CZH:()=>$g,CqO:()=>If,D6c:()=>ww,DdM:()=>Cv,Dn7:()=>kv,EJc:()=>zx,EiD:()=>ol,EpF:()=>Dg,F$t:()=>Of,F4k:()=>Mg,FYo:()=>Lm,FiY:()=>qe,Gf:()=>Vv,GfV:()=>Dh,GkF:()=>Sf,Gpc:()=>wt,Gre:()=>ci,Hsn:()=>sp,Ikx:()=>fa,JOm:()=>Ua,JVY:()=>Ip,JZr:()=>en,KtG:()=>Aa,L6k:()=>nc,LAX:()=>vm,LFG:()=>Ke,Lbi:()=>Fx,Lck:()=>Fb,MAs:()=>ep,MMx:()=>py,MR2:()=>Tm,NdJ:()=>al,O4$:()=>Pl,OlP:()=>eo,Oqu:()=>gn,P3R:()=>Dm,PXZ:()=>ew,Q6J:()=>tp,QGY:()=>op,QbO:()=>Lx,Qsj:()=>__,R0b:()=>hc,RDi:()=>Ap,Rgc:()=>rm,SBq:()=>Bd,Sil:()=>Ux,Suo:()=>Uv,TTD:()=>qs,TgZ:()=>np,Tol:()=>e,Udp:()=>ku,VKq:()=>Ev,W1O:()=>Zv,WFA:()=>Sl,XFs:()=>It,Xpm:()=>Gn,Xts:()=>Ju,Y36:()=>od,YKP:()=>fv,YNc:()=>Tc,Yjl:()=>To,Yz7:()=>Re,Z0I:()=>an,ZZ4:()=>Ny,_Bn:()=>pv,_UZ:()=>Tf,_Vd:()=>Ul,_c5:()=>bw,_uU:()=>Lt,aQg:()=>zy,c2e:()=>Bx,cJS:()=>cn,cg1:()=>ru,d8E:()=>Qo,dDg:()=>Kx,dqk:()=>Ft,eBb:()=>xu,eFA:()=>D0,eJc:()=>wy,ekj:()=>th,eoX:()=>x0,evT:()=>nd,f3M:()=>Pt,g9A:()=>f0,h0i:()=>fp,hGG:()=>xw,hij:()=>un,iGM:()=>zv,ifc:()=>Hn,ip1:()=>d0,jDz:()=>gv,kL8:()=>bd,kcU:()=>da,lG2:()=>so,lcZ:()=>Pv,lqb:()=>Hc,lri:()=>v0,mCW:()=>zc,n5z:()=>At,n_E:()=>Vg,oAB:()=>Wi,oJD:()=>Lp,oxw:()=>Pf,pB0:()=>bm,q3G:()=>Er,qLn:()=>td,qOj:()=>yf,qZA:()=>ip,qzn:()=>bu,rWj:()=>b0,s9C:()=>kf,sBO:()=>ow,s_b:()=>jg,soG:()=>Zg,tBr:()=>Xe,tb:()=>C0,tp0:()=>fe,uIk:()=>wf,vHH:()=>Ct,vpe:()=>ou,wAp:()=>Ki,xi3:()=>Ov,xp6:()=>$m,ynx:()=>rp,z2F:()=>Wg,z3N:()=>Ml,zSh:()=>bh,zs3:()=>Eu});var p=F(7579),j=F(727),Q=F(9751),o=F(6451),P=F(3099);function st(r){for(let s in r)if(r[s]===st)return s;throw Error("Could not find renamed property on target object.")}function _t(r,s){for(const c in s)s.hasOwnProperty(c)&&!r.hasOwnProperty(c)&&(r[c]=s[c])}function ke(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ke).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const c=s.indexOf("\n");return-1===c?s:s.substring(0,c)}function Ye(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const lt=st({__forward_ref__:st});function wt(r){return r.__forward_ref__=wt,r.toString=function(){return ke(this())},r}function it(r){return yt(r)?r():r}function yt(r){return"function"==typeof r&&r.hasOwnProperty(lt)&&r.__forward_ref__===wt}function pt(r){return r&&!!r.\u0275providers}const en="https://g.co/ng/security#xss";class Ct extends Error{constructor(s,c){super(nn(s,c)),this.code=s}}function nn(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}function sn(r){return"string"==typeof r?r:null==r?"":String(r)}function ht(r,s){throw new Ct(-201,!1)}function ze(r,s){null==r&&function Ge(r,s,c,f){throw new Error(`ASSERTION ERROR: ${r}`+(null==f?"":` [Expected=> ${c} ${f} ${s} <=Actual]`))}(s,r,null,"!=")}function Re(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function cn(r){return{providers:r.providers||[],imports:r.imports||[]}}function kn(r){return Mn(r,xt)||Mn(r,Wn)}function an(r){return null!==kn(r)}function Mn(r,s){return r.hasOwnProperty(s)?r[s]:null}function On(r){return r&&(r.hasOwnProperty(zt)||r.hasOwnProperty(Fn))?r[zt]:null}const xt=st({\u0275prov:st}),zt=st({\u0275inj:st}),Wn=st({ngInjectableDef:st}),Fn=st({ngInjectorDef:st});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let li;function ce(r){const s=li;return li=r,s}function De(r,s,c){const f=kn(r);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&It.Optional?null:void 0!==s?s:void ht(ke(r))}const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ve={},re="__NG_DI_FLAG__",Me="ngTempTokenPath",Pe="ngTokenPath",Ut=/\n/gm,Bn="\u0275",En="__source";let Ue;function ue(r){const s=Ue;return Ue=r,s}function Ce(r,s=It.Default){if(void 0===Ue)throw new Ct(-203,!1);return null===Ue?De(r,void 0,s):Ue.get(r,s&It.Optional?null:void 0,s)}function Ke(r,s=It.Default){return(function je(){return li}()||Ce)(it(r),s)}function Pt(r,s=It.Default){return Ke(r,me(s))}function me(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function ee(r){const s=[];for(let c=0;c<r.length;c++){const f=it(r[c]);if(Array.isArray(f)){if(0===f.length)throw new Ct(900,!1);let y,x=It.Default;for(let S=0;S<f.length;S++){const N=f[S],X=we(N);"number"==typeof X?-1===X?y=N.token:x|=X:y=N}s.push(Ke(y,x))}else s.push(Ke(f))}return s}function U(r,s){return r[re]=s,r.prototype[re]=s,r}function we(r){return r[re]}function Kt(r){return{toString:r}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Hn=(()=>{return(r=Hn||(Hn={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Hn;var r})();const ri={},zn=[],Rt=st({\u0275cmp:st}),Ee=st({\u0275dir:st}),se=st({\u0275pipe:st}),le=st({\u0275mod:st}),Fe=st({\u0275fac:st}),Et=st({__NG_ELEMENT_ID__:st});let rn=0;function Gn(r){return Kt(()=>{const s=Ho(r),c={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,data:r.data||{},encapsulation:r.encapsulation||Hn.Emulated,id:"c"+rn++,styles:r.styles||zn,_:null,schemas:r.schemas||null,tView:null};wo(c);const f=r.dependencies;return c.directiveDefs=wn(f,!1),c.pipeDefs=wn(f,!0),c})}function Ai(r,s,c){const f=r.\u0275cmp;f.directiveDefs=wn(s,!1),f.pipeDefs=wn(c,!0)}function yr(r){return $i(r)||gr(r)}function Rr(r){return null!==r}function Wi(r){return Kt(()=>({type:r.type,bootstrap:r.bootstrap||zn,declarations:r.declarations||zn,imports:r.imports||zn,exports:r.exports||zn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function vr(r,s){if(null==r)return ri;const c={};for(const f in r)if(r.hasOwnProperty(f)){let y=r[f],x=y;Array.isArray(y)&&(x=y[1],y=y[0]),c[y]=f,s&&(s[y]=x)}return c}function so(r){return Kt(()=>{const s=Ho(r);return wo(s),s})}function To(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function $i(r){return r[Rt]||null}function gr(r){return r[Ee]||null}function br(r){return r[se]||null}function Tr(r){const s=$i(r)||gr(r)||br(r);return null!==s&&s.standalone}function Hr(r,s){const c=r[le]||null;if(!c&&!0===s)throw new Error(`Type ${ke(r)} does not have '\u0275mod' property.`);return c}function Ho(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,exportAs:r.exportAs||null,standalone:!0===r.standalone,selectors:r.selectors||zn,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vr(r.inputs,s),outputs:vr(r.outputs)}}function wo(r){r.features?.forEach(s=>s(r))}function wn(r,s){if(!r)return null;const c=s?br:yr;return()=>("function"==typeof r?r():r).map(f=>c(f)).filter(Rr)}const at=0,vt=1,I=2,ie=3,Se=4,et=5,An=6,mi=7,fn=8,xi=9,wi=10,yi=11,xr=12,Ni=13,Qr=14,Ao=15,_r=16,mo=17,rr=18,cr=19,Co=20,Es=21,fr=22,ma=1,Gs=2,$s=7,So=8,ko=9,dr=10;function go(r){return Array.isArray(r)&&"object"==typeof r[ma]}function _o(r){return Array.isArray(r)&&!0===r[ma]}function ao(r){return 0!=(4&r.flags)}function Ar(r){return r.componentOffset>-1}function _s(r){return 1==(1&r.flags)}function zr(r){return!!r.template}function Sr(r){return 0!=(256&r[I])}function Ro(r,s){return r.hasOwnProperty(Fe)?r[Fe]:null}class aa{constructor(s,c,f){this.previousValue=s,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function qs(){return ya}function ya(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ts),Ea}function Ea(){const r=Za(this),s=r?.current;if(s){const c=r.previous;if(c===ri)r.previous=s;else for(let f in s)c[f]=s[f];r.current=null,this.ngOnChanges(s)}}function Ts(r,s,c,f){const y=this.declaredInputs[c],x=Za(r)||function Wa(r,s){return r[Zi]=s}(r,{previous:ri,current:null}),S=x.current||(x.current={}),N=x.previous,X=N[y];S[y]=new aa(X&&X.currentValue,s,N===ri),r[f]=s}qs.ngInherit=!0;const Zi="__ngSimpleChanges__";function Za(r){return r[Zi]||null}const Nr=function(r,s,c){},Ta="svg";function wr(r){for(;Array.isArray(r);)r=r[at];return r}function Lr(r,s){return wr(s[r])}function Vr(r,s){return wr(s[r.index])}function ps(r,s){return r.data[s]}function vs(r,s){return r[s]}function Do(r,s){const c=s[r];return go(c)?c:c[at]}function Rs(r){return 64==(64&r[I])}function Fo(r,s){return null==s?null:r[s]}function Yi(r){r[rr]=0}function vo(r,s){r[et]+=s;let c=r,f=r[ie];for(;null!==f&&(1===s&&1===c[et]||-1===s&&0===c[et]);)f[et]+=s,c=f,f=f[ie]}const zi={lFrame:Ns(null),bindingsEnabled:!0};function xn(){return zi.bindingsEnabled}function Sn(){return zi.lFrame.lView}function Xi(){return zi.lFrame.tView}function bs(r){return zi.lFrame.contextLView=r,r[fn]}function Aa(r){return zi.lFrame.contextLView=null,r}function Ir(){let r=Ya();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ya(){return zi.lFrame.currentTNode}function Lo(r,s){const c=zi.lFrame;c.currentTNode=r,c.isParent=s}function Sa(){return zi.lFrame.isParent}function Ls(){zi.lFrame.isParent=!1}function Mo(){const r=zi.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function is(){return zi.lFrame.bindingIndex++}function Ks(r){const s=zi.lFrame,c=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,c}function ba(r,s){const c=zi.lFrame;c.bindingIndex=c.bindingRootIndex=r,Pa(s)}function Pa(r){zi.lFrame.currentDirectiveIndex=r}function ul(r){const s=zi.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}function La(){return zi.lFrame.currentQueryIndex}function dl(r){zi.lFrame.currentQueryIndex=r}function Ba(r){const s=r[vt];return 2===s.type?s.declTNode:1===s.type?r[An]:null}function Oa(r,s,c){if(c&It.SkipSelf){let y=s,x=r;for(;!(y=y.parent,null!==y||c&It.Host||(y=Ba(x),null===y||(x=x[Ao],10&y.type))););if(null===y)return!1;s=y,r=x}const f=zi.lFrame=Ka();return f.currentTNode=s,f.lView=r,!0}function Xs(r){const s=Ka(),c=r[vt];zi.lFrame=s,s.currentTNode=c.firstChild,s.lView=r,s.tView=c,s.contextLView=r,s.bindingIndex=c.bindingStartIndex,s.inI18n=!1}function Ka(){const r=zi.lFrame,s=null===r?null:r.child;return null===s?Ns(r):s}function Ns(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function hl(){const r=zi.lFrame;return zi.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Xa=hl;function Il(){const r=hl();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Wo(){return zi.lFrame.selectedIndex}function rs(r){zi.lFrame.selectedIndex=r}function Pr(){const r=zi.lFrame;return ps(r.tView,r.selectedIndex)}function Pl(){zi.lFrame.currentNamespace=Ta}function da(){!function Ja(){zi.lFrame.currentNamespace=null}()}function Na(r,s){for(let c=s.directiveStart,f=s.directiveEnd;c<f;c++){const x=r.data[c].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:N,ngAfterViewInit:X,ngAfterViewChecked:_e,ngOnDestroy:Ne}=x;S&&(r.contentHooks??(r.contentHooks=[])).push(-c,S),N&&((r.contentHooks??(r.contentHooks=[])).push(c,N),(r.contentCheckHooks??(r.contentCheckHooks=[])).push(c,N)),X&&(r.viewHooks??(r.viewHooks=[])).push(-c,X),_e&&((r.viewHooks??(r.viewHooks=[])).push(c,_e),(r.viewCheckHooks??(r.viewCheckHooks=[])).push(c,_e)),null!=Ne&&(r.destroyHooks??(r.destroyHooks=[])).push(c,Ne)}}function Js(r,s,c){ge(r,s,3,c)}function zs(r,s,c,f){(3&r[I])===c&&ge(r,s,c,f)}function H(r,s){let c=r[I];(3&c)===s&&(c&=2047,c+=1,r[I]=c)}function ge(r,s,c,f){const x=f??-1,S=s.length-1;let N=0;for(let X=void 0!==f?65535&r[rr]:0;X<S;X++)if("number"==typeof s[X+1]){if(N=s[X],null!=f&&N>=f)break}else s[X]<0&&(r[rr]+=65536),(N<x||-1==x)&&(W(r,c,s,X),r[rr]=(4294901760&r[rr])+X+2),X++}function W(r,s,c,f){const y=c[f]<0,x=c[f+1],N=r[y?-c[f]:c[f]];if(y){if(r[I]>>11<r[rr]>>16&&(3&r[I])===s){r[I]+=2048,Nr(4,N,x);try{x.call(N)}finally{Nr(5,N,x)}}}else{Nr(4,N,x);try{x.call(N)}finally{Nr(5,N,x)}}}const Oe=-1;class V{constructor(s,c,f){this.factory=s,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function pn(r,s,c){let f=0;for(;f<c.length;){const y=c[f];if("number"==typeof y){if(0!==y)break;f++;const x=c[f++],S=c[f++],N=c[f++];r.setAttribute(s,S,N,x)}else{const x=y,S=c[++f];di(x)?r.setProperty(s,x,S):r.setAttribute(s,x,S),f++}}return f}function si(r){return 3===r||4===r||6===r}function di(r){return 64===r.charCodeAt(0)}function Ri(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let c=-1;for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?c=y:0===c||Vi(r,c,y,null,-1===c||2===c?s[++f]:null)}}return r}function Vi(r,s,c,f,y){let x=0,S=r.length;if(-1===s)S=-1;else for(;x<r.length;){const N=r[x++];if("number"==typeof N){if(N===s){S=-1;break}if(N>s){S=x-1;break}}}for(;x<r.length;){const N=r[x];if("number"==typeof N)break;if(N===c){if(null===f)return void(null!==y&&(r[x+1]=y));if(f===r[x+1])return void(r[x+2]=y)}x++,null!==f&&x++,null!==y&&x++}-1!==S&&(r.splice(S,0,s),x=S+1),r.splice(x++,0,c),null!==f&&r.splice(x++,0,f),null!==y&&r.splice(x++,0,y)}function Ei(r){return r!==Oe}function In(r){return 32767&r}function sr(r,s){let c=function Ui(r){return r>>16}(r),f=s;for(;c>0;)f=f[Ao],c--;return f}let Wr=!0;function co(r){const s=Wr;return Wr=r,s}const Qs=255,Yo=5;let No=0;const bo={};function fs(r,s){const c=ea(r,s);if(-1!==c)return c;const f=s[vt];f.firstCreatePass&&(r.injectorIndex=s.length,zo(f.data,r),zo(s,null),zo(f.blueprint,null));const y=Or(r,s),x=r.injectorIndex;if(Ei(y)){const S=In(y),N=sr(y,s),X=N[vt].data;for(let _e=0;_e<8;_e++)s[x+_e]=N[S+_e]|X[S+_e]}return s[x+8]=y,x}function zo(r,s){r.push(0,0,0,0,0,0,0,0,s)}function ea(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Or(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let c=0,f=null,y=s;for(;null!==y;){if(f=Gi(y),null===f)return Oe;if(c++,y=y[Ao],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return Oe}function Vo(r,s,c){!function Vs(r,s,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(Et)&&(f=c[Et]),null==f&&(f=c[Et]=No++);const y=f&Qs;s.data[r+(y>>Yo)]|=1<<y}(r,s,c)}function Di(r,s,c){if(c&It.Optional||void 0!==r)return r;ht()}function Fi(r,s,c,f){if(c&It.Optional&&void 0===f&&(f=null),!(c&(It.Self|It.Host))){const y=r[xi],x=ce(void 0);try{return y?y.get(s,f,c&It.Optional):De(s,f,c&It.Optional)}finally{ce(x)}}return Di(f,0,c)}function Hi(r,s,c,f=It.Default,y){if(null!==r){if(1024&s[I]){const S=function ui(r,s,c,f,y){let x=r,S=s;for(;null!==x&&null!==S&&1024&S[I]&&!(256&S[I]);){const N=ar(x,S,c,f|It.Self,bo);if(N!==bo)return N;let X=x.parent;if(!X){const _e=S[Es];if(_e){const Ne=_e.get(c,bo,f);if(Ne!==bo)return Ne}X=Gi(S),S=S[Ao]}x=X}return y}(r,s,c,f,bo);if(S!==bo)return S}const x=ar(r,s,c,f,bo);if(x!==bo)return x}return Fi(s,c,f,y)}function ar(r,s,c,f,y){const x=function xs(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Et)?r[Et]:void 0;return"number"==typeof s?s>=0?s&Qs:pe:s}(c);if("function"==typeof x){if(!Oa(s,r,f))return f&It.Host?Di(y,0,f):Fi(s,c,f,y);try{const S=x(f);if(null!=S||f&It.Optional)return S;ht()}finally{Xa()}}else if("number"==typeof x){let S=null,N=ea(r,s),X=Oe,_e=f&It.Host?s[_r][An]:null;for((-1===N||f&It.SkipSelf)&&(X=-1===N?Or(r,s):s[N+8],X!==Oe&&k(f,!1)?(S=s[vt],N=In(X),s=sr(X,s)):N=-1);-1!==N;){const Ne=s[vt];if(he(x,N,Ne.data)){const gt=xo(N,s,c,S,f,_e);if(gt!==bo)return gt}X=s[N+8],X!==Oe&&k(f,s[vt].data[N+8]===_e)&&he(x,N,s)?(S=Ne,N=In(X),s=sr(X,s)):N=-1}}return y}function xo(r,s,c,f,y,x){const S=s[vt],N=S.data[r+8],Ne=qo(N,S,c,null==f?Ar(N)&&Wr:f!=S&&0!=(3&N.type),y&It.Host&&x===N);return null!==Ne?uo(s,S,Ne,N):bo}function qo(r,s,c,f,y){const x=r.providerIndexes,S=s.data,N=1048575&x,X=r.directiveStart,Ne=x>>20,Qt=y?N+Ne:r.directiveEnd;for(let yn=f?N:N+Ne;yn<Qt;yn++){const $n=S[yn];if(yn<X&&c===$n||yn>=X&&$n.type===c)return yn}if(y){const yn=S[X];if(yn&&zr(yn)&&yn.type===c)return X}return null}function uo(r,s,c,f){let y=r[c];const x=s.data;if(function C(r){return r instanceof V}(y)){const S=y;S.resolving&&function kt(r,s){const c=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Ct(-200,`Circular dependency in DI detected for ${r}${c}`)}(function Cn(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():sn(r)}(x[c]));const N=co(S.canSeeViewProviders);S.resolving=!0;const X=S.injectImpl?ce(S.injectImpl):null;Oa(r,f,It.Default);try{y=r[c]=S.factory(void 0,x,r,f),s.firstCreatePass&&c>=f.directiveStart&&function Qa(r,s,c){const{ngOnChanges:f,ngOnInit:y,ngDoCheck:x}=s.type.prototype;if(f){const S=ya(s);(c.preOrderHooks??(c.preOrderHooks=[])).push(r,S),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(r,S)}y&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-r,y),x&&((c.preOrderHooks??(c.preOrderHooks=[])).push(r,x),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(r,x))}(c,x[c],s)}finally{null!==X&&ce(X),co(N),S.resolving=!1,Xa()}}return y}function he(r,s,c){return!!(c[s+(r>>Yo)]&1<<r)}function k(r,s){return!(r&It.Self||r&It.Host&&s)}class Z{constructor(s,c){this._tNode=s,this._lView=c}get(s,c,f){return Hi(this._tNode,this._lView,s,me(f),c)}}function pe(){return new Z(Ir(),Sn())}function At(r){return Kt(()=>{const s=r.prototype.constructor,c=s[Fe]||Tn(s),f=Object.prototype;let y=Object.getPrototypeOf(r.prototype).constructor;for(;y&&y!==f;){const x=y[Fe]||Tn(y);if(x&&x!==c)return x;y=Object.getPrototypeOf(y)}return x=>new x})}function Tn(r){return yt(r)?()=>{const s=Tn(it(r));return s&&s()}:Ro(r)}function Gi(r){const s=r[vt],c=s.type;return 2===c?s.declTNode:1===c?r[An]:null}function or(r){return function za(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const c=r.attrs;if(c){const f=c.length;let y=0;for(;y<f;){const x=c[y];if(si(x))break;if(0===x)y+=2;else if("number"==typeof x)for(y++;y<f&&"string"==typeof c[y];)y++;else{if(x===s)return c[y+1];y+=2}}}return null}(Ir(),r)}const ho="__parameters__";function Jl(r,s,c){return Kt(()=>{const f=function fc(r){return function(...c){if(r){const f=r(...c);for(const y in f)this[y]=f[y]}}}(s);function y(...x){if(this instanceof y)return f.apply(this,x),this;const S=new y(...x);return N.annotation=S,N;function N(X,_e,Ne){const gt=X.hasOwnProperty(ho)?X[ho]:Object.defineProperty(X,ho,{value:[]})[ho];for(;gt.length<=Ne;)gt.push(null);return(gt[Ne]=gt[Ne]||[]).push(S),X}}return c&&(y.prototype=Object.create(c.prototype)),y.prototype.ngMetadataName=r,y.annotationCls=y,y})}class eo{constructor(s,c){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Re({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pl(r,s){r.forEach(c=>Array.isArray(c)?pl(c,s):s(c))}function zu(r,s,c){s>=r.length?r.push(c):r.splice(s,0,c)}function cu(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function O(r,s){const c=[];for(let f=0;f<r;f++)c.push(s);return c}function t(r,s,c){let f=h(r,s);return f>=0?r[1|f]=c:(f=~f,function G(r,s,c,f){let y=r.length;if(y==s)r.push(c,f);else if(1===y)r.push(f,r[0]),r[0]=c;else{for(y--,r.push(r[y-1],r[y]);y>s;)r[y]=r[y-2],y--;r[s]=c,r[s+1]=f}}(r,f,s,c)),f}function l(r,s){const c=h(r,s);if(c>=0)return r[1|c]}function h(r,s){return function b(r,s,c){let f=0,y=r.length>>c;for(;y!==f;){const x=f+(y-f>>1),S=r[x<<c];if(s===S)return x<<c;S>s?y=x:f=x+1}return~(y<<c)}(r,s,1)}const Xe=U(Jl("Inject",r=>({token:r})),-1),qe=U(Jl("Optional"),8),fe=U(Jl("SkipSelf"),4);var Ua=(()=>((Ua=Ua||{})[Ua.Important=1]="Important",Ua[Ua.DashCase=2]="DashCase",Ua))();const Ll=new Map;let Vu=0;const Md="__ngContext__";function na(r,s){go(s)?(r[Md]=s[Co],function Dd(r){Ll.set(r[Co],r)}(s)):r[Md]=s}let gl;function tc(r,s){return gl(r,s)}function Bl(r){const s=r[ie];return _o(s)?s[ie]:s}function xp(r){return Cp(r[Ni])}function wp(r){return Cp(r[Se])}function Cp(r){for(;null!==r&&!_o(r);)r=r[Se];return r}function hu(r,s,c,f,y){if(null!=f){let x,S=!1;_o(f)?x=f:go(f)&&(S=!0,f=f[at]);const N=wr(f);0===r&&null!==c?null==y?pm(s,c,N):Lc(s,c,N,y||null,!0):1===r&&null!==c?Lc(s,c,N,y||null,!0):2===r?function Uo(r,s,c){const f=yc(r,s);f&&function fm(r,s,c,f){r.removeChild(s,c,f)}(r,f,s,c)}(s,N,S):3===r&&s.destroyNode(N),null!=x&&function n_(r,s,c,f,y){const x=c[$s];x!==wr(c)&&hu(s,r,f,x,y);for(let N=dr;N<c.length;N++){const X=c[N];bc(X[vt],X,r,s,f,x)}}(s,r,x,c,y)}}function Jo(r,s,c){return r.createElement(s,c)}function Cl(r,s){const c=r[ko],f=c.indexOf(s),y=s[ie];512&s[I]&&(s[I]&=-513,vo(y,-1)),c.splice(f,1)}function Ad(r,s){if(r.length<=dr)return;const c=dr+s,f=r[c];if(f){const y=f[mo];null!==y&&y!==r&&Cl(y,f),s>0&&(r[c-1][Se]=f[Se]);const x=cu(r,dr+s);!function ki(r,s){bc(r,s,s[yi],2,null,null),s[at]=null,s[An]=null}(f[vt],f);const S=x[cr];null!==S&&S.detachView(x[vt]),f[ie]=null,f[Se]=null,f[I]&=-65}return f}function Fc(r,s){if(!(128&s[I])){const c=s[yi];c.destroyNode&&bc(r,s,c,3,null,null),function nl(r){let s=r[Ni];if(!s)return pu(r[vt],r);for(;s;){let c=null;if(go(s))c=s[Ni];else{const f=s[dr];f&&(c=f)}if(!c){for(;s&&!s[Se]&&s!==r;)go(s)&&pu(s[vt],s),s=s[ie];null===s&&(s=r),go(s)&&pu(s[vt],s),c=s&&s[Se]}s=c}}(s)}}function pu(r,s){if(!(128&s[I])){s[I]&=-65,s[I]|=128,function Ep(r,s){let c;if(null!=r&&null!=(c=r.destroyHooks))for(let f=0;f<c.length;f+=2){const y=s[c[f]];if(!(y instanceof V)){const x=c[f+1];if(Array.isArray(x))for(let S=0;S<x.length;S+=2){const N=y[x[S]],X=x[S+1];Nr(4,N,X);try{X.call(N)}finally{Nr(5,N,X)}}else{Nr(4,y,x);try{x.call(y)}finally{Nr(5,y,x)}}}}}(r,s),function fu(r,s){const c=r.cleanup,f=s[mi];let y=-1;if(null!==c)for(let x=0;x<c.length-1;x+=2)if("string"==typeof c[x]){const S=c[x+3];S>=0?f[y=S]():f[y=-S].unsubscribe(),x+=2}else{const S=f[y=c[x+1]];c[x].call(S)}if(null!==f){for(let x=y+1;x<f.length;x++)(0,f[x])();s[mi]=null}}(r,s),1===s[vt].type&&s[yi].destroy();const c=s[mo];if(null!==c&&_o(s[ie])){c!==s[ie]&&Cl(c,s);const f=s[cr];null!==f&&f.detachView(r)}!function sm(r){Ll.delete(r[Co])}(s)}}function Sd(r,s,c){return function Dp(r,s,c){let f=s;for(;null!==f&&40&f.type;)f=(s=f).parent;if(null===f)return c[at];{const{componentOffset:y}=f;if(y>-1){const{encapsulation:x}=r.data[f.directiveStart+y];if(x===Hn.None||x===Hn.Emulated)return null}return Vr(f,c)}}(r,s.parent,c)}function Lc(r,s,c,f,y){r.insertBefore(s,c,f,y)}function pm(r,s,c){r.appendChild(s,c)}function rh(r,s,c,f,y){null!==f?Lc(r,s,c,f,y):pm(r,s,c)}function yc(r,s){return r.parentNode(s)}function sh(r,s,c){return Gu(r,s,c)}let mu,Pd,_u,$u,Gu=function Mp(r,s,c){return 40&r.type?Vr(r,c):null};function Bc(r,s,c,f){const y=Sd(r,f,s),x=s[yi],N=sh(f.parent||s[An],f,s);if(null!=y)if(Array.isArray(c))for(let X=0;X<c.length;X++)rh(x,y,c[X],N,!1);else rh(x,y,c,N,!1);void 0!==mu&&mu(x,f,s,c,y)}function ia(r,s){if(null!==s){const c=s.type;if(3&c)return Vr(s,r);if(4&c)return Id(-1,r[s.index]);if(8&c){const f=s.child;if(null!==f)return ia(r,f);{const y=r[s.index];return _o(y)?Id(-1,y):wr(y)}}if(32&c)return tc(s,r)()||wr(r[s.index]);{const f=yl(r,s);return null!==f?Array.isArray(f)?f[0]:ia(Bl(r[_r]),f):ia(r,s.next)}}return null}function yl(r,s){return null!==s?r[_r][An].projection[s.projection]:null}function Id(r,s){const c=dr+r+1;if(c<s.length){const f=s[c],y=f[vt].firstChild;if(null!==y)return ia(f,y)}return s[$s]}function ah(r,s,c,f,y,x,S){for(;null!=c;){const N=f[c.index],X=c.type;if(S&&0===s&&(N&&na(wr(N),f),c.flags|=2),32!=(32&c.flags))if(8&X)ah(r,s,c.child,f,y,x,!1),hu(s,r,y,N,x);else if(32&X){const _e=tc(c,f);let Ne;for(;Ne=_e();)hu(s,r,y,Ne,x);hu(s,r,y,N,x)}else 16&X?mm(r,s,f,c,y,x):hu(s,r,y,N,x);c=S?c.projectionNext:c.next}}function bc(r,s,c,f,y,x){ah(c,f,r.firstChild,s,y,x,!1)}function mm(r,s,c,f,y,x){const S=c[_r],X=S[An].projection[f.projection];if(Array.isArray(X))for(let _e=0;_e<X.length;_e++)hu(s,r,y,X[_e],x);else ah(r,s,X,S[ie],y,x,!0)}function Nc(r,s,c){""===c?r.removeAttribute(s,"class"):r.setAttribute(s,"class",c)}function Tp(r,s,c){const{mergedAttrs:f,classes:y,styles:x}=c;null!==f&&pn(r,s,f),null!==y&&Nc(r,s,y),null!==x&&function _m(r,s,c){r.setAttribute(s,"style",c)}(r,s,x)}function gu(r){return function lh(){if(void 0===Pd&&(Pd=null,Ft.trustedTypes))try{Pd=Ft.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Pd}()?.createHTML(r)||r}function Ap(r){_u=r}function pa(){if(void 0===$u&&($u=null,Ft.trustedTypes))try{$u=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return $u}function uh(r){return pa()?.createHTML(r)||r}function zl(r){return pa()?.createScriptURL(r)||r}class yu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${en})`}}class vu extends yu{getTypeName(){return"HTML"}}class Od extends yu{getTypeName(){return"Style"}}class El extends yu{getTypeName(){return"Script"}}class Dl extends yu{getTypeName(){return"URL"}}class s_ extends yu{getTypeName(){return"ResourceURL"}}function Ml(r){return r instanceof yu?r.changingThisBreaksApplicationSecurity:r}function bu(r,s){const c=function a_(r){return r instanceof yu&&r.getTypeName()||null}(r);if(null!=c&&c!==s){if("ResourceURL"===c&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${c} (see ${en})`)}return c===s}function Ip(r){return new vu(r)}function nc(r){return new Od(r)}function xu(r){return new El(r)}function vm(r){return new Dl(r)}function bm(r){return new s_(r)}class dh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const c=(new window.DOMParser).parseFromString(gu(s),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(s):(c.removeChild(c.firstChild),c)}catch{return null}}}class Pp{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const c=this.inertDocument.createElement("template");return c.innerHTML=gu(s),c}}const Wu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zc(r){return(r=String(r)).match(Wu)?r:"unsafe:"+r}function Tl(r){const s={};for(const c of r.split(","))s[c]=!0;return s}function Yu(...r){const s={};for(const c of r)for(const f in c)c.hasOwnProperty(f)&&(s[f]=!0);return s}const qu=Tl("area,br,col,hr,img,wbr"),hh=Tl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Op=Tl("rp,rt"),ph=Yu(qu,Yu(hh,Tl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yu(Op,Tl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yu(Op,hh)),kp=Tl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rp=Yu(kp,Tl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Tl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vc=Tl("script,style,template");class qr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let c=s.firstChild,f=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?f=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,f&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let y=this.checkClobberedElement(c,c.nextSibling);if(y){c=y;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(s){const c=s.nodeName.toLowerCase();if(!ph.hasOwnProperty(c))return this.sanitizedSomething=!0,!Vc.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const f=s.attributes;for(let y=0;y<f.length;y++){const x=f.item(y),S=x.name,N=S.toLowerCase();if(!Rp.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let X=x.value;kp[N]&&(X=zc(X)),this.buf.push(" ",S,'="',Vl(X),'"')}return this.buf.push(">"),!0}endElement(s){const c=s.nodeName.toLowerCase();ph.hasOwnProperty(c)&&!qu.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(s){this.buf.push(Vl(s))}checkClobberedElement(s,c){if(c&&(s.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return c}}const Fp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ic=/([^\#-~ |!])/g;function Vl(r){return r.replace(/&/g,"&amp;").replace(Fp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(ic,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rl;function ol(r,s){let c=null;try{rl=rl||function xm(r){const s=new Pp(r);return function Zu(){try{return!!(new window.DOMParser).parseFromString(gu(""),"text/html")}catch{return!1}}()?new dh(s):s}(r);let f=s?String(s):"";c=rl.getInertBodyElement(f);let y=5,x=f;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,f=x,x=c.innerHTML,c=rl.getInertBodyElement(f)}while(f!==x);return gu((new qr).sanitizeChildren(Us(c)||c))}finally{if(c){const f=Us(c)||c;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function Us(r){return"content"in r&&function Cm(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Er=(()=>((Er=Er||{})[Er.NONE=0]="NONE",Er[Er.HTML=1]="HTML",Er[Er.STYLE=2]="STYLE",Er[Er.SCRIPT=3]="SCRIPT",Er[Er.URL=4]="URL",Er[Er.RESOURCE_URL=5]="RESOURCE_URL",Er))();function Lp(r){const s=jc();return s?uh(s.sanitize(Er.HTML,r)||""):bu(r,"HTML")?uh(Ml(r)):ol(function ch(){return void 0!==_u?_u:typeof document<"u"?document:void 0}(),sn(r))}function mh(r){const s=jc();return s?s.sanitize(Er.URL,r)||"":bu(r,"URL")?Ml(r):zc(sn(r))}function Bp(r){const s=jc();if(s)return zl(s.sanitize(Er.RESOURCE_URL,r)||"");if(bu(r,"ResourceURL"))return zl(Ml(r));throw new Ct(904,!1)}function Dm(r,s,c){return function Em(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?Bp:mh}(s,c)(r)}function jc(){const r=Sn();return r&&r[xr]}const Ju=new eo("ENVIRONMENT_INITIALIZER"),gh=new eo("INJECTOR",-1),Vp=new eo("INJECTOR_DEF_TYPES");class Mm{get(s,c=ve){if(c===ve){const f=new Error(`NullInjectorError: No provider for ${ke(s)}!`);throw f.name="NullInjectorError",f}return c}}function Tm(r){return{\u0275providers:r}}function u_(...r){return{\u0275providers:_h(0,r),\u0275fromNgModule:!0}}function _h(r,...s){const c=[],f=new Set;let y;return pl(s,x=>{const S=x;Rd(S,c,[],f)&&(y||(y=[]),y.push(S))}),void 0!==y&&Am(y,c),c}function Am(r,s){for(let c=0;c<r.length;c++){const{providers:y}=r[c];yh(y,x=>{s.push(x)})}}function Rd(r,s,c,f){if(!(r=it(r)))return!1;let y=null,x=On(r);const S=!x&&$i(r);if(x||S){if(S&&!S.standalone)return!1;y=r}else{const X=r.ngModule;if(x=On(X),!x)return!1;y=X}const N=f.has(y);if(S){if(N)return!1;if(f.add(y),S.dependencies){const X="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const _e of X)Rd(_e,s,c,f)}}else{if(!x)return!1;{if(null!=x.imports&&!N){let _e;f.add(y);try{pl(x.imports,Ne=>{Rd(Ne,s,c,f)&&(_e||(_e=[]),_e.push(Ne))})}finally{}void 0!==_e&&Am(_e,s)}if(!N){const _e=Ro(y)||(()=>new y);s.push({provide:y,useFactory:_e,deps:zn},{provide:Vp,useValue:y,multi:!0},{provide:Ju,useValue:()=>Ke(y),multi:!0})}const X=x.providers;null==X||N||yh(X,Ne=>{s.push(Ne)})}}return y!==r&&void 0!==r.providers}function yh(r,s){for(let c of r)pt(c)&&(c=c.\u0275providers),Array.isArray(c)?yh(c,s):s(c)}const wu=st({provide:String,useValue:st});function vh(r){return null!==r&&"object"==typeof r&&wu in r}function rc(r){return"function"==typeof r}const bh=new eo("Set Injector scope."),xh={},h_={};let wh;function Ch(){return void 0===wh&&(wh=new Mm),wh}class Hc{}class Pm extends Hc{get destroyed(){return this._destroyed}constructor(s,c,f,y){super(),this.parent=c,this.source=f,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fd(s,S=>this.processProvider(S)),this.records.set(gh,Gc(void 0,this)),y.has("environment")&&this.records.set(Hc,Gc(void 0,this));const x=this.records.get(bh);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(Vp.multi,zn,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const c=ue(this),f=ce(void 0);try{return s()}finally{ue(c),ce(f)}}get(s,c=ve,f=It.Default){this.assertNotDestroyed(),f=me(f);const y=ue(this),x=ce(void 0);try{if(!(f&It.SkipSelf)){let N=this.records.get(s);if(void 0===N){const X=function p_(r){return"function"==typeof r||"object"==typeof r&&r instanceof eo}(s)&&kn(s);N=X&&this.injectableDefInScope(X)?Gc(Up(s),xh):null,this.records.set(s,N)}if(null!=N)return this.hydrate(s,N)}return(f&It.Self?Ch():this.parent).get(s,c=f&It.Optional&&c===ve?null:c)}catch(S){if("NullInjectorError"===S.name){if((S[Me]=S[Me]||[]).unshift(ke(s)),y)throw S;return function nt(r,s,c,f){const y=r[Me];throw s[En]&&y.unshift(s[En]),r.message=function Jt(r,s,c,f=null){r=r&&"\n"===r.charAt(0)&&r.charAt(1)==Bn?r.slice(2):r;let y=ke(s);if(Array.isArray(s))y=s.map(ke).join(" -> ");else if("object"==typeof s){let x=[];for(let S in s)if(s.hasOwnProperty(S)){let N=s[S];x.push(S+":"+("string"==typeof N?JSON.stringify(N):ke(N)))}y=`{${x.join(", ")}}`}return`${c}${f?"("+f+")":""}[${y}]: ${r.replace(Ut,"\n  ")}`}("\n"+r.message,y,c,f),r[Pe]=y,r[Me]=null,r}(S,s,"R3InjectorError",this.source)}throw S}finally{ce(x),ue(y)}}resolveInjectorInitializers(){const s=ue(this),c=ce(void 0);try{const f=this.get(Ju.multi,zn,It.Self);for(const y of f)y()}finally{ue(s),ce(c)}}toString(){const s=[],c=this.records;for(const f of c.keys())s.push(ke(f));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ct(205,!1)}processProvider(s){let c=rc(s=it(s))?s:it(s&&s.provide);const f=function km(r){return vh(r)?Gc(void 0,r.useValue):Gc(jp(r),xh)}(s);if(rc(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=Gc(void 0,xh,!0),y.factory=()=>ee(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,f)}hydrate(s,c){return c.value===xh&&(c.value=h_,c.value=c.factory()),"object"==typeof c.value&&c.value&&function sl(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(s){if(!s.providedIn)return!1;const c=it(s.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Up(r){const s=kn(r),c=null!==s?s.factory:Ro(r);if(null!==c)return c;if(r instanceof eo)throw new Ct(204,!1);if(r instanceof Function)return function Om(r){const s=r.length;if(s>0)throw O(s,"?"),new Ct(204,!1);const c=function Gt(r){return r&&(r[xt]||r[Wn])||null}(r);return null!==c?()=>c.factory(r):()=>new r}(r);throw new Ct(204,!1)}function jp(r,s,c){let f;if(rc(r)){const y=it(r);return Ro(y)||Up(y)}if(vh(r))f=()=>it(r.useValue);else if(function Cu(r){return!(!r||!r.useFactory)}(r))f=()=>r.useFactory(...ee(r.deps||[]));else if(function Sm(r){return!(!r||!r.useExisting)}(r))f=()=>Ke(it(r.useExisting));else{const y=it(r&&(r.useClass||r.provide));if(!function xc(r){return!!r.deps}(r))return Ro(y)||Up(y);f=()=>new y(...ee(r.deps))}return f}function Gc(r,s,c=!1){return{factory:r,value:s,multi:c?[]:void 0}}function Fd(r,s){for(const c of r)Array.isArray(c)?Fd(c,s):c&&pt(c)?Fd(c.\u0275providers,s):s(c)}class f_{}class Rm{}class Fm{resolveComponentFactory(s){throw function m_(r){const s=Error(`No component factory found for ${ke(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Ul=(()=>{class r{}return r.NULL=new Fm,r})();function Ld(){return Qu(Ir(),Sn())}function Qu(r,s){return new Bd(Vr(r,s))}let Bd=(()=>{class r{constructor(c){this.nativeElement=c}}return r.__NG_ELEMENT_ID__=Ld,r})();function g_(r){return r instanceof Bd?r.nativeElement:r}class Lm{}let __=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function y_(){const r=Sn(),c=Do(Ir().index,r);return(go(c)?c:r)[yi]}(),r})(),v_=(()=>{class r{}return r.\u0275prov=Re({token:r,providedIn:"root",factory:()=>null}),r})();class Dh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const b_=new Dh("15.2.10"),$c={},Gp="ngOriginalError";function ed(r){return r[Gp]}class td{constructor(){this._console=console}handleError(s){const c=this._findOriginalError(s);this._console.error("ERROR",s),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(s){let c=s&&ed(s);for(;c&&ed(c);)c=ed(c);return c||null}}function nd(r){return r.ownerDocument}function jl(r){return r instanceof Function?r():r}function Ih(r,s,c){let f=r.length;for(;;){const y=r.indexOf(s,c);if(-1===y)return y;if(0===y||r.charCodeAt(y-1)<=32){const x=s.length;if(y+x===f||r.charCodeAt(y+x)<=32)return y}c=y+1}}const Ph="ng-template";function Oh(r,s,c){let f=0,y=!0;for(;f<r.length;){let x=r[f++];if("string"==typeof x&&y){const S=r[f++];if(c&&"class"===x&&-1!==Ih(S.toLowerCase(),s,0))return!0}else{if(1===x){for(;f<r.length&&"string"==typeof(x=r[f++]);)if(x.toLowerCase()===s)return!0;return!1}"number"==typeof x&&(y=!1)}}return!1}function Vm(r){return 4===r.type&&r.value!==Ph}function w_(r,s,c){return s===(4!==r.type||c?r.value:Ph)}function C_(r,s,c){let f=4;const y=r.attrs||[],x=function D_(r){for(let s=0;s<r.length;s++)if(si(r[s]))return s;return r.length}(y);let S=!1;for(let N=0;N<s.length;N++){const X=s[N];if("number"!=typeof X){if(!S)if(4&f){if(f=2|1&f,""!==X&&!w_(r,X,c)||""===X&&1===s.length){if(Hl(f))return!1;S=!0}}else{const _e=8&f?X:s[++N];if(8&f&&null!==r.attrs){if(!Oh(r.attrs,_e,c)){if(Hl(f))return!1;S=!0}continue}const gt=E_(8&f?"class":X,y,Vm(r),c);if(-1===gt){if(Hl(f))return!1;S=!0;continue}if(""!==_e){let Qt;Qt=gt>x?"":y[gt+1].toLowerCase();const yn=8&f?Qt:null;if(yn&&-1!==Ih(yn,_e,0)||2&f&&_e!==Qt){if(Hl(f))return!1;S=!0}}}}else{if(!S&&!Hl(f)&&!Hl(X))return!1;if(S&&Hl(X))continue;S=!1,f=X|1&f}}return Hl(f)||S}function Hl(r){return 0==(1&r)}function E_(r,s,c,f){if(null===s)return-1;let y=0;if(f||!c){let x=!1;for(;y<s.length;){const S=s[y];if(S===r)return y;if(3===S||6===S)x=!0;else{if(1===S||2===S){let N=s[++y];for(;"string"==typeof N;)N=s[++y];continue}if(4===S)break;if(0===S){y+=4;continue}}y+=x?1:2}return-1}return function jm(r,s){let c=r.indexOf(4);if(c>-1)for(c++;c<r.length;){const f=r[c];if("number"==typeof f)return-1;if(f===s)return c;c++}return-1}(s,r)}function Um(r,s,c=!1){for(let f=0;f<s.length;f++)if(C_(r,s[f],c))return!0;return!1}function id(r,s){e:for(let c=0;c<s.length;c++){const f=s[c];if(r.length===f.length){for(let y=0;y<r.length;y++)if(r[y]!==f[y])continue e;return!0}}return!1}function Hm(r,s){return r?":not("+s.trim()+")":s}function M_(r){let s=r[0],c=1,f=2,y="",x=!1;for(;c<r.length;){let S=r[c];if("string"==typeof S)if(2&f){const N=r[++c];y+="["+S+(N.length>0?'="'+N+'"':"")+"]"}else 8&f?y+="."+S:4&f&&(y+=" "+S);else""!==y&&!Hl(S)&&(s+=Hm(x,y),y=""),f=S,x=x||!Hl(f);c++}return""!==y&&(s+=Hm(x,y)),s}const ur={};function $m(r){Zm(Xi(),Sn(),Wo()+r,!1)}function Zm(r,s,c,f){if(!f)if(3==(3&s[I])){const x=r.preOrderCheckHooks;null!==x&&Js(s,x,c)}else{const x=r.preOrderHooks;null!==x&&zs(s,x,0,c)}rs(c)}function rd(r,s=null,c=null,f){const y=Wp(r,s,c,f);return y.resolveInjectorInitializers(),y}function Wp(r,s=null,c=null,f,y=new Set){const x=[c||zn,u_(r)];return f=f||("object"==typeof r?void 0:ke(r)),new Pm(x,s||Ch(),f||null,y)}let Eu=(()=>{class r{static create(c,f){if(Array.isArray(c))return rd({name:""},f,c,"");{const y=c.name??"";return rd({name:y},c.parent,c.providers,y)}}}return r.THROW_IF_NOT_FOUND=ve,r.NULL=new Mm,r.\u0275prov=Re({token:r,providedIn:"any",factory:()=>Ke(gh)}),r.__NG_ELEMENT_ID__=-1,r})();function od(r,s=It.Default){const c=Sn();return null===c?Ke(r,s):Hi(Ir(),c,it(r),s)}function tg(){throw new Error("invalid")}function ig(r,s){const c=r.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const x=c[f+1];if(-1!==x){const S=r.data[x];dl(c[f]),S.contentQueries(2,s[x],x)}}}function sd(r,s,c,f,y,x,S,N,X,_e,Ne){const gt=s.blueprint.slice();return gt[at]=y,gt[I]=76|f,(null!==Ne||r&&1024&r[I])&&(gt[I]|=1024),Yi(gt),gt[ie]=gt[Ao]=r,gt[fn]=c,gt[wi]=S||r&&r[wi],gt[yi]=N||r&&r[yi],gt[xr]=X||r&&r[xr]||null,gt[xi]=_e||r&&r[xi]||null,gt[An]=x,gt[Co]=function du(){return Vu++}(),gt[Es]=Ne,gt[_r]=2==s.type?r[_r]:gt,gt}function wc(r,s,c,f,y){let x=r.data[s];if(null===x)x=function Yc(r,s,c,f,y){const x=Ya(),S=Sa(),X=r.data[s]=function Cc(r,s,c,f,y,x){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:y,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?x:x&&x.parent,c,s,f,y);return null===r.firstChild&&(r.firstChild=X),null!==x&&(S?null==x.child&&null!==X.parent&&(x.child=X):null===x.next&&(x.next=X,X.prev=x)),X}(r,s,c,f,y),function Ia(){return zi.lFrame.inI18n}()&&(x.flags|=32);else if(64&x.type){x.type=c,x.value=f,x.attrs=y;const S=function ca(){const r=zi.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();x.injectorIndex=null===S?-1:S.injectorIndex}return Lo(x,!0),x}function Hd(r,s,c,f){if(0===c)return-1;const y=s.length;for(let x=0;x<c;x++)s.push(f),r.blueprint.push(f),r.data.push(null);return y}function Qp(r,s,c){Xs(s);try{const f=r.viewQuery;null!==f&&Zh(1,f,c);const y=r.template;null!==y&&rg(r,s,y,1,c),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ig(r,s),r.staticViewQueries&&Zh(2,r.viewQuery,c);const x=r.components;null!==x&&function Gl(r,s){for(let c=0;c<s.length;c++)cg(r,s[c])}(s,x)}catch(f){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),f}finally{s[I]&=-5,Il()}}function qc(r,s,c,f){const y=s[I];if(128!=(128&y)){Xs(s);try{Yi(s),function ua(r){return zi.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==c&&rg(r,s,c,2,f);const S=3==(3&y);if(S){const _e=r.preOrderCheckHooks;null!==_e&&Js(s,_e,null)}else{const _e=r.preOrderHooks;null!==_e&&zs(s,_e,0,null),H(s,0)}if(function hf(r){for(let s=xp(r);null!==s;s=wp(s)){if(!s[Gs])continue;const c=s[ko];for(let f=0;f<c.length;f++){const y=c[f];512&y[I]||vo(y[ie],1),y[I]|=512}}}(s),function cd(r){for(let s=xp(r);null!==s;s=wp(s))for(let c=dr;c<s.length;c++){const f=s[c],y=f[vt];Rs(f)&&qc(y,f,y.template,f[fn])}}(s),null!==r.contentQueries&&ig(r,s),S){const _e=r.contentCheckHooks;null!==_e&&Js(s,_e)}else{const _e=r.contentHooks;null!==_e&&zs(s,_e,1),H(s,1)}!function ng(r,s){const c=r.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const y=c[f];if(y<0)rs(~y);else{const x=y,S=c[++f],N=c[++f];ba(S,x),N(2,s[x])}}}finally{rs(-1)}}(r,s);const N=r.components;null!==N&&function ra(r,s){for(let c=0;c<s.length;c++)Gh(r,s[c])}(s,N);const X=r.viewQuery;if(null!==X&&Zh(2,X,f),S){const _e=r.viewCheckHooks;null!==_e&&Js(s,_e)}else{const _e=r.viewHooks;null!==_e&&zs(s,_e,2),H(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[I]&=-41,512&s[I]&&(s[I]&=-513,vo(s[ie],-1))}finally{Il()}}}function rg(r,s,c,f,y){const x=Wo(),S=2&f;try{rs(-1),S&&s.length>fr&&Zm(r,s,fr,!1),Nr(S?2:0,y),c(f,y)}finally{rs(x),Nr(S?3:1,y)}}function ef(r,s,c){if(ao(s)){const y=s.directiveEnd;for(let x=s.directiveStart;x<y;x++){const S=r.data[x];S.contentQueries&&S.contentQueries(1,c[x],x)}}}function zh(r,s,c){xn()&&(function ad(r,s,c,f){const y=c.directiveStart,x=c.directiveEnd;Ar(c)&&function ja(r,s,c){const f=Vr(s,r),y=tf(c),x=r[wi],S=$h(r,sd(r,y,null,c.onPush?32:16,f,s,x,x.createRenderer(f,c),null,null,null));r[s.index]=S}(s,c,r.data[y+c.componentOffset]),r.firstCreatePass||fs(c,s),na(f,s);const S=c.initialInputs;for(let N=y;N<x;N++){const X=r.data[N],_e=uo(s,r,N,c);na(_e,s),null!==S&&bl(0,N-y,_e,X,0,S),zr(X)&&(Do(c.index,s)[fn]=uo(s,r,N,c))}}(r,s,c,Vr(c,s)),64==(64&c.flags)&&lf(r,s,c))}function Vh(r,s,c=Vr){const f=s.localNames;if(null!==f){let y=s.index+1;for(let x=0;x<f.length;x+=2){const S=f[x+1],N=-1===S?c(s,r):r[S];r[y++]=N}}}function tf(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Gr(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Gr(r,s,c,f,y,x,S,N,X,_e){const Ne=fr+f,gt=Ne+y,Qt=function nf(r,s){const c=[];for(let f=0;f<s;f++)c.push(f<r?null:ur);return c}(Ne,gt),yn="function"==typeof _e?_e():_e;return Qt[vt]={type:r,blueprint:Qt,template:c,queries:null,viewQuery:N,declTNode:s,data:Qt.slice().fill(null,Ne),bindingStartIndex:Ne,expandoStartIndex:gt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:X,consts:yn,incompleteFirstPass:!1}}function rf(r,s,c,f){const y=ff(s);null===c?y.push(f):(y.push(c),r.firstCreatePass&&oc(r).push(f,y.length-1))}function Mu(r,s,c,f){for(let y in r)if(r.hasOwnProperty(y)){c=null===c?{}:c;const x=r[y];null===f?sf(c,s,y,x):f.hasOwnProperty(y)&&sf(c,s,f[y],x)}return c}function sf(r,s,c,f){r.hasOwnProperty(c)?r[c].push(s,f):r[c]=[s,f]}function vl(r,s,c,f,y,x,S,N){const X=Vr(s,c);let Ne,_e=s.inputs;!N&&null!=_e&&(Ne=_e[f])?(Wh(r,c,Ne,f,y),Ar(s)&&function j_(r,s){const c=Do(s,r);16&c[I]||(c[I]|=32)}(c,s.index)):3&s.type&&(f=function U_(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(f),y=null!=S?S(y,s.value||"",f):y,x.setProperty(X,f,y))}function af(r,s,c,f){if(xn()){const y=null===f?null:{"":-1},x=function cf(r,s){const c=r.directiveRegistry;let f=null,y=null;if(c)for(let x=0;x<c.length;x++){const S=c[x];if(Um(s,S.selectors,!1))if(f||(f=[]),zr(S))if(null!==S.findHostDirectiveDefs){const N=[];y=y||new Map,S.findHostDirectiveDefs(S,N,y),f.unshift(...N,S),uf(r,s,N.length)}else f.unshift(S),uf(r,s,0);else y=y||new Map,S.findHostDirectiveDefs?.(S,f,y),f.push(S)}return null===f?null:[f,y]}(r,c);let S,N;null===x?S=N=null:[S,N]=x,null!==S&&sg(r,s,c,S,y,N),y&&function $_(r,s,c){if(s){const f=r.localNames=[];for(let y=0;y<s.length;y+=2){const x=c[s[y+1]];if(null==x)throw new Ct(-301,!1);f.push(s[y],x)}}}(c,f,y)}c.mergedAttrs=Ri(c.mergedAttrs,c.attrs)}function sg(r,s,c,f,y,x){for(let _e=0;_e<f.length;_e++)Vo(fs(c,s),r,f[_e].type);!function ag(r,s,c){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+c,r.providerIndexes=s}(c,r.data.length,f.length);for(let _e=0;_e<f.length;_e++){const Ne=f[_e];Ne.providersResolver&&Ne.providersResolver(Ne)}let S=!1,N=!1,X=Hd(r,s,f.length,null);for(let _e=0;_e<f.length;_e++){const Ne=f[_e];c.mergedAttrs=Ri(c.mergedAttrs,Ne.hostAttrs),df(r,c,s,X,Ne),Z_(X,Ne,y),null!==Ne.contentQueries&&(c.flags|=4),(null!==Ne.hostBindings||null!==Ne.hostAttrs||0!==Ne.hostVars)&&(c.flags|=64);const gt=Ne.type.prototype;!S&&(gt.ngOnChanges||gt.ngOnInit||gt.ngDoCheck)&&((r.preOrderHooks??(r.preOrderHooks=[])).push(c.index),S=!0),!N&&(gt.ngOnChanges||gt.ngDoCheck)&&((r.preOrderCheckHooks??(r.preOrderCheckHooks=[])).push(c.index),N=!0),X++}!function V_(r,s,c){const y=s.directiveEnd,x=r.data,S=s.attrs,N=[];let X=null,_e=null;for(let Ne=s.directiveStart;Ne<y;Ne++){const gt=x[Ne],Qt=c?c.get(gt):null,$n=Qt?Qt.outputs:null;X=Mu(gt.inputs,Ne,X,Qt?Qt.inputs:null),_e=Mu(gt.outputs,Ne,_e,$n);const fi=null===X||null===S||Vm(s)?null:lg(X,Ne,S);N.push(fi)}null!==X&&(X.hasOwnProperty("class")&&(s.flags|=8),X.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=N,s.inputs=X,s.outputs=_e}(r,c,x)}function lf(r,s,c){const f=c.directiveStart,y=c.directiveEnd,x=c.index,S=function cl(){return zi.lFrame.currentDirectiveIndex}();try{rs(x);for(let N=f;N<y;N++){const X=r.data[N],_e=s[N];Pa(N),(null!==X.hostBindings||0!==X.hostVars||null!==X.hostAttrs)&&jh(X,_e)}}finally{rs(-1),Pa(S)}}function jh(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function uf(r,s,c){s.componentOffset=c,(r.components??(r.components=[])).push(s.index)}function Z_(r,s,c){if(c){if(s.exportAs)for(let f=0;f<s.exportAs.length;f++)c[s.exportAs[f]]=r;zr(s)&&(c[""]=r)}}function df(r,s,c,f,y){r.data[f]=y;const x=y.factory||(y.factory=Ro(y.type)),S=new V(x,zr(y),od);r.blueprint[f]=S,c[f]=S,function G_(r,s,c,f,y){const x=y.hostBindings;if(x){let S=r.hostBindingOpCodes;null===S&&(S=r.hostBindingOpCodes=[]);const N=~s.index;(function Uh(r){let s=r.length;for(;s>0;){const c=r[--s];if("number"==typeof c&&c<0)return c}return 0})(S)!=N&&S.push(N),S.push(c,f,x)}}(r,s,f,Hd(r,c,y.hostVars,ur),y)}function Al(r,s,c,f,y,x){const S=Vr(r,s);!function Hh(r,s,c,f,y,x,S){if(null==x)r.removeAttribute(s,y,c);else{const N=null==S?sn(x):S(x,f||"",y);r.setAttribute(s,y,N,c)}}(s[yi],S,x,r.value,c,f,y)}function bl(r,s,c,f,y,x){const S=x[s];if(null!==S){const N=f.setInput;for(let X=0;X<S.length;){const _e=S[X++],Ne=S[X++],gt=S[X++];null!==N?f.setInput(c,gt,_e,Ne):c[Ne]=gt}}}function lg(r,s,c){let f=null,y=0;for(;y<c.length;){const x=c[y];if(0!==x)if(5!==x){if("number"==typeof x)break;if(r.hasOwnProperty(x)){null===f&&(f=[]);const S=r[x];for(let N=0;N<S.length;N+=2)if(S[N]===s){f.push(x,S[N+1],c[y+1]);break}}y+=2}else y+=2;else y+=4}return f}function ld(r,s,c,f){return[r,!0,!1,s,null,0,f,c,null,null]}function Gh(r,s){const c=Do(s,r);if(Rs(c)){const f=c[vt];48&c[I]?qc(f,c,f.template,c[fn]):c[et]>0&&pf(c)}}function pf(r){for(let f=xp(r);null!==f;f=wp(f))for(let y=dr;y<f.length;y++){const x=f[y];if(Rs(x))if(512&x[I]){const S=x[vt];qc(S,x,S.template,x[fn])}else x[et]>0&&pf(x)}const c=r[vt].components;if(null!==c)for(let f=0;f<c.length;f++){const y=Do(c[f],r);Rs(y)&&y[et]>0&&pf(y)}}function cg(r,s){const c=Do(s,r),f=c[vt];(function ug(r,s){for(let c=s.length;c<r.blueprint.length;c++)s.push(r.blueprint[c])})(f,c),Qp(f,c,c[fn])}function $h(r,s){return r[Ni]?r[Qr][Se]=s:r[Ni]=s,r[Qr]=s,s}function Gd(r){for(;r;){r[I]|=32;const s=Bl(r);if(Sr(r)&&!s)return r;r=s}return null}function $d(r,s,c,f=!0){const y=s[wi];y.begin&&y.begin();try{qc(r,s,r.template,c)}catch(S){throw f&&gf(s,S),S}finally{y.end&&y.end()}}function Zh(r,s,c){dl(0),s(r,c)}function ff(r){return r[mi]||(r[mi]=[])}function oc(r){return r.cleanup||(r.cleanup=[])}function mf(r,s,c){return(null===r||zr(r))&&(c=function Eo(r){for(;Array.isArray(r);){if("object"==typeof r[ma])return r;r=r[at]}return null}(c[s.index])),c[yi]}function gf(r,s){const c=r[xi],f=c?c.get(td,null):null;f&&f.handleError(s)}function Wh(r,s,c,f,y){for(let x=0;x<c.length;){const S=c[x++],N=c[x++],X=s[S],_e=r.data[S];null!==_e.setInput?_e.setInput(X,y,f,N):X[N]=y}}function Yh(r,s,c){let f=c?r.styles:null,y=c?r.classes:null,x=0;if(null!==s)for(let S=0;S<s.length;S++){const N=s[S];"number"==typeof N?x=N:1==x?y=Ye(y,N):2==x&&(f=Ye(f,N+": "+s[++S]+";"))}c?r.styles=f:r.stylesWithoutHost=f,c?r.classes=y:r.classesWithoutHost=y}function qh(r,s,c,f,y=!1){for(;null!==c;){const x=s[c.index];if(null!==x&&f.push(wr(x)),_o(x))for(let N=dr;N<x.length;N++){const X=x[N],_e=X[vt].firstChild;null!==_e&&qh(X[vt],X,_e,f)}const S=c.type;if(8&S)qh(r,s,c.child,f);else if(32&S){const N=tc(c,s);let X;for(;X=N();)f.push(X)}else if(16&S){const N=yl(s,c);if(Array.isArray(N))f.push(...N);else{const X=Bl(s[_r]);qh(X[vt],X,N,f,!0)}}c=y?c.projectionNext:c.next}return f}class ud{get rootNodes(){const s=this._lView,c=s[vt];return qh(c,s,c.firstChild,[])}constructor(s,c){this._lView=s,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fn]}set context(s){this._lView[fn]=s}get destroyed(){return 128==(128&this._lView[I])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[ie];if(_o(s)){const c=s[So],f=c?c.indexOf(this):-1;f>-1&&(Ad(s,f),cu(c,f))}this._attachedToViewContainer=!1}Fc(this._lView[vt],this._lView)}onDestroy(s){rf(this._lView[vt],this._lView,null,s)}markForCheck(){Gd(this._cdRefInjectingView||this._lView)}detach(){this._lView[I]&=-65}reattach(){this._lView[I]|=64}detectChanges(){$d(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ih(r,s){bc(r,s,s[yi],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=s}}class hg extends ud{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;$d(s[vt],s,s[fn],!1)}checkNoChanges(){}get context(){return null}}class dd extends Ul{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const c=$i(s);return new Tu(c,this.ngModule)}}function _f(r){const s=[];for(let c in r)r.hasOwnProperty(c)&&s.push({propName:r[c],templateName:c});return s}class $l{constructor(s,c){this.injector=s,this.parentInjector=c}get(s,c,f){f=me(f);const y=this.injector.get(s,$c,f);return y!==$c||c===$c?y:this.parentInjector.get(s,c,f)}}class Tu extends Rm{get inputs(){return _f(this.componentDef.inputs)}get outputs(){return _f(this.componentDef.outputs)}constructor(s,c){super(),this.componentDef=s,this.ngModule=c,this.componentType=s.type,this.selector=function T_(r){return r.map(M_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!c}create(s,c,f,y){let x=(y=y||this.ngModule)instanceof Hc?y:y?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const S=x?new $l(s,x):s,N=S.get(Lm,null);if(null===N)throw new Ct(407,!1);const X=S.get(v_,null),_e=N.createRenderer(null,this.componentDef),Ne=this.componentDef.selectors[0][0]||"div",gt=f?function og(r,s,c){return r.selectRootElement(s,c===Hn.ShadowDom)}(_e,f,this.componentDef.encapsulation):Jo(_e,Ne,function pg(r){const s=r.toLowerCase();return"svg"===s?Ta:"math"===s?"math":null}(Ne)),Qt=this.componentDef.onPush?288:272,yn=Gr(0,null,null,1,0,null,null,null,null,null),$n=sd(null,yn,null,Qt,null,null,N,_e,X,S,null);let fi,Mi;Xs($n);try{const Bi=this.componentDef;let ir,ai=null;Bi.findHostDirectiveDefs?(ir=[],ai=new Map,Bi.findHostDirectiveDefs(Bi,ir,ai),ir.push(Bi)):ir=[Bi];const pr=function fg(r,s){const c=r[vt],f=fr;return r[f]=s,wc(c,f,2,"#host",null)}($n,gt),Cs=function Kh(r,s,c,f,y,x,S,N){const X=y[vt];!function mg(r,s,c,f){for(const y of r)s.mergedAttrs=Ri(s.mergedAttrs,y.hostAttrs);null!==s.mergedAttrs&&(Yh(s,s.mergedAttrs,!0),null!==c&&Tp(f,c,s))}(f,r,s,S);const _e=x.createRenderer(s,c),Ne=sd(y,tf(c),null,c.onPush?32:16,y[r.index],r,x,_e,N||null,null,null);return X.firstCreatePass&&uf(X,r,f.length-1),$h(y,Ne),y[r.index]=Ne}(pr,gt,Bi,ir,$n,N,_e);Mi=ps(yn,fr),gt&&function Jh(r,s,c,f){if(f)pn(r,c,["ng-version",b_.full]);else{const{attrs:y,classes:x}=function Gm(r){const s=[],c=[];let f=1,y=2;for(;f<r.length;){let x=r[f];if("string"==typeof x)2===y?""!==x&&s.push(x,r[++f]):8===y&&c.push(x);else{if(!Hl(y))break;y=x}f++}return{attrs:s,classes:c}}(s.selectors[0]);y&&pn(r,c,y),x&&x.length>0&&Nc(r,c,x.join(" "))}}(_e,Bi,gt,f),void 0!==c&&function W_(r,s,c){const f=r.projection=[];for(let y=0;y<s.length;y++){const x=c[y];f.push(null!=x?Array.from(x):null)}}(Mi,this.ngContentSelectors,c),fi=function Xh(r,s,c,f,y,x){const S=Ir(),N=y[vt],X=Vr(S,y);sg(N,y,S,c,null,f);for(let Ne=0;Ne<c.length;Ne++)na(uo(y,N,S.directiveStart+Ne,S),y);lf(N,y,S),X&&na(X,y);const _e=uo(y,N,S.directiveStart+S.componentOffset,S);if(r[fn]=y[fn]=_e,null!==x)for(const Ne of x)Ne(_e,s);return ef(N,S,r),_e}(Cs,Bi,ir,ai,$n,[Y_]),Qp(yn,$n,null)}finally{Il()}return new hd(this.componentType,fi,Qu(Mi,$n),$n,Mi)}}class hd extends f_{constructor(s,c,f,y,x){super(),this.location=f,this._rootLView=y,this._tNode=x,this.instance=c,this.hostView=this.changeDetectorRef=new hg(y),this.componentType=s}setInput(s,c){const f=this._tNode.inputs;let y;if(null!==f&&(y=f[s])){const x=this._rootLView;Wh(x[vt],x,y,s,c),Gd(Do(this._tNode.index,x))}}get injector(){return new Z(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Y_(){const r=Ir();Na(Sn()[vt],r)}function yf(r){let s=function gg(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),c=!0;const f=[r];for(;s;){let y;if(zr(r))y=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ct(903,!1);y=s.\u0275dir}if(y){if(c){f.push(y);const S=r;S.inputs=Kc(r.inputs),S.declaredInputs=Kc(r.declaredInputs),S.outputs=Kc(r.outputs);const N=y.hostBindings;N&&K_(r,N);const X=y.viewQuery,_e=y.contentQueries;if(X&&pd(r,X),_e&&vf(r,_e),_t(r.inputs,y.inputs),_t(r.declaredInputs,y.declaredInputs),_t(r.outputs,y.outputs),zr(y)&&y.data.animation){const Ne=r.data;Ne.animation=(Ne.animation||[]).concat(y.data.animation)}}const x=y.features;if(x)for(let S=0;S<x.length;S++){const N=x[S];N&&N.ngInherit&&N(r),N===yf&&(c=!1)}}s=Object.getPrototypeOf(s)}!function q_(r){let s=0,c=null;for(let f=r.length-1;f>=0;f--){const y=r[f];y.hostVars=s+=y.hostVars,y.hostAttrs=Ri(y.hostAttrs,c=Ri(c,y.hostAttrs))}}(f)}function Kc(r){return r===ri?{}:r===zn?[]:r}function pd(r,s){const c=r.viewQuery;r.viewQuery=c?(f,y)=>{s(f,y),c(f,y)}:s}function vf(r,s){const c=r.contentQueries;r.contentQueries=c?(f,y,x)=>{s(f,y,x),c(f,y,x)}:s}function K_(r,s){const c=r.hostBindings;r.hostBindings=c?(f,y)=>{s(f,y),c(f,y)}:s}function Qh(r){return!!xf(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function xf(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ac(r,s,c){return r[s]=c}function js(r,s,c){return!Object.is(r[s],c)&&(r[s]=c,!0)}function Zl(r,s,c,f){const y=js(r,s,c);return js(r,s+1,f)||y}function wf(r,s,c,f){const y=Sn();return js(y,is(),s)&&(Xi(),Al(Pr(),y,r,s,c,f)),wf}function Wl(r,s,c,f){return js(r,is(),c)?s+sn(c)+f:ur}function Tc(r,s,c,f,y,x,S,N){const X=Sn(),_e=Xi(),Ne=r+fr,gt=_e.firstCreatePass?function Mf(r,s,c,f,y,x,S,N,X){const _e=s.consts,Ne=wc(s,r,4,S||null,Fo(_e,N));af(s,c,Ne,Fo(_e,X)),Na(s,Ne);const gt=Ne.tView=Gr(2,Ne,f,y,x,s.directiveRegistry,s.pipeRegistry,null,s.schemas,_e);return null!==s.queries&&(s.queries.template(s,Ne),gt.queries=s.queries.embeddedTView(Ne)),Ne}(Ne,_e,X,s,c,f,y,x,S):_e.data[Ne];Lo(gt,!1);const Qt=X[yi].createComment("");Bc(_e,X,Qt,gt),na(Qt,X),$h(X,X[Ne]=ld(Qt,X,Qt,gt)),_s(gt)&&zh(_e,X,gt),null!=S&&Vh(X,gt,N)}function ep(r){return vs(function qa(){return zi.lFrame.contextLView}(),fr+r)}function tp(r,s,c){const f=Sn();return js(f,is(),s)&&vl(Xi(),Pr(),f,r,s,f[yi],c,!1),tp}function vd(r,s,c,f,y){const S=y?"class":"style";Wh(r,c,s.inputs[S],S,f)}function np(r,s,c,f){const y=Sn(),x=Xi(),S=fr+r,N=y[yi],X=x.firstCreatePass?function ty(r,s,c,f,y,x){const S=s.consts,X=wc(s,r,2,f,Fo(S,y));return af(s,c,X,Fo(S,x)),null!==X.attrs&&Yh(X,X.attrs,!1),null!==X.mergedAttrs&&Yh(X,X.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,X),X}(S,x,y,s,c,f):x.data[S],_e=y[S]=Jo(N,s,function Ss(){return zi.lFrame.currentNamespace}()),Ne=_s(X);return Lo(X,!0),Tp(N,_e,X),32!=(32&X.flags)&&Bc(x,y,_e,X),0===function te(){return zi.lFrame.elementDepthCount}()&&na(_e,y),function q(){zi.lFrame.elementDepthCount++}(),Ne&&(zh(x,y,X),ef(x,X,y)),null!==f&&Vh(y,X),np}function ip(){let r=Ir();Sa()?Ls():(r=r.parent,Lo(r,!1));const s=r;!function Le(){zi.lFrame.elementDepthCount--}();const c=Xi();return c.firstCreatePass&&(Na(c,r),ao(r)&&c.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Ve(r){return 0!=(8&r.flags)}(s)&&vd(c,s,Sn(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Mt(r){return 0!=(16&r.flags)}(s)&&vd(c,s,Sn(),s.stylesWithoutHost,!1),ip}function Tf(r,s,c,f){return np(r,s,c,f),ip(),Tf}function rp(r,s,c){const f=Sn(),y=Xi(),x=r+fr,S=y.firstCreatePass?function Af(r,s,c,f,y){const x=s.consts,S=Fo(x,f),N=wc(s,r,8,"ng-container",S);return null!==S&&Yh(N,S,!0),af(s,c,N,Fo(x,y)),null!==s.queries&&s.queries.elementStart(s,N),N}(x,y,f,s,c):y.data[x];Lo(S,!0);const N=f[x]=f[yi].createComment("");return Bc(y,f,N,S),na(N,f),_s(S)&&(zh(y,f,S),ef(y,S,f)),null!=c&&Vh(f,S),rp}function Qc(){let r=Ir();const s=Xi();return Sa()?Ls():(r=r.parent,Lo(r,!1)),s.firstCreatePass&&(Na(s,r),ao(r)&&s.queries.elementEnd(r)),Qc}function Sf(r,s,c){return rp(r,s,c),Qc(),Sf}function Dg(){return Sn()}function op(r){return!!r&&"function"==typeof r.then}function Mg(r){return!!r&&"function"==typeof r.subscribe}const If=Mg;function al(r,s,c,f){const y=Sn(),x=Xi(),S=Ir();return Yl(x,y,y[yi],S,r,s,f),al}function Sl(r,s){const c=Ir(),f=Sn(),y=Xi();return Yl(y,f,mf(ul(y.data),c,f),c,r,s),Sl}function Yl(r,s,c,f,y,x,S){const N=_s(f),_e=r.firstCreatePass&&oc(r),Ne=s[fn],gt=ff(s);let Qt=!0;if(3&f.type||S){const fi=Vr(f,s),Mi=S?S(fi):fi,Bi=gt.length,ir=S?pr=>S(wr(pr[f.index])):f.index;let ai=null;if(!S&&N&&(ai=function eu(r,s,c,f){const y=r.cleanup;if(null!=y)for(let x=0;x<y.length-1;x+=2){const S=y[x];if(S===c&&y[x+1]===f){const N=s[mi],X=y[x+2];return N.length>X?N[X]:null}"string"==typeof S&&(x+=2)}return null}(r,s,y,f.index)),null!==ai)(ai.__ngLastListenerFn__||ai).__ngNextListenerFn__=x,ai.__ngLastListenerFn__=x,Qt=!1;else{x=Xd(f,s,Ne,x,!1);const pr=c.listen(Mi,y,x);gt.push(x,pr),_e&&_e.push(y,ir,Bi,Bi+1)}}else x=Xd(f,s,Ne,x,!1);const yn=f.outputs;let $n;if(Qt&&null!==yn&&($n=yn[y])){const fi=$n.length;if(fi)for(let Mi=0;Mi<fi;Mi+=2){const Cs=s[$n[Mi]][$n[Mi+1]].subscribe(x),oa=gt.length;gt.push(x,Cs),_e&&_e.push(y,f.index,oa,-(oa+1))}}}function Ac(r,s,c,f){try{return Nr(6,s,c),!1!==c(f)}catch(y){return gf(r,y),!1}finally{Nr(7,s,c)}}function Xd(r,s,c,f,y){return function x(S){if(S===Function)return f;Gd(r.componentOffset>-1?Do(r.index,s):s);let X=Ac(s,c,f,S),_e=x.__ngNextListenerFn__;for(;_e;)X=Ac(s,c,_e,S)&&X,_e=_e.__ngNextListenerFn__;return y&&!1===X&&(S.preventDefault(),S.returnValue=!1),X}}function Pf(r=1){return function Kl(r){return(zi.lFrame.contextLView=function pc(r,s){for(;r>0;)s=s[Ao],r--;return s}(r,zi.lFrame.contextLView))[fn]}(r)}function Tg(r,s){let c=null;const f=function kh(r){const s=r.attrs;if(null!=s){const c=s.indexOf(5);if(!(1&c))return s[c+1]}return null}(r);for(let y=0;y<s.length;y++){const x=s[y];if("*"!==x){if(null===f?Um(r,x,!0):id(f,x))return y}else c=y}return c}function Of(r){const s=Sn()[_r][An];if(!s.projection){const f=s.projection=O(r?r.length:1,null),y=f.slice();let x=s.child;for(;null!==x;){const S=r?Tg(x,r):0;null!==S&&(y[S]?y[S].projectionNext=x:f[S]=x,y[S]=x),x=x.next}}}function sp(r,s=0,c){const f=Sn(),y=Xi(),x=wc(y,fr+r,16,null,c||null);null===x.projection&&(x.projection=s),Ls(),32!=(32&x.flags)&&function Nl(r,s,c){mm(s[yi],0,s,c,Sd(r,c,s),sh(c.parent||s[An],c,s))}(y,f,x)}function kf(r,s,c){return ap(r,"",s,"",c),kf}function ap(r,s,c,f,y){const x=Sn(),S=Wl(x,s,c,f);return S!==ur&&vl(Xi(),Pr(),x,r,S,x[yi],y,!1),ap}function lp(r,s){return r<<17|s<<2}function tu(r){return r>>17&32767}function nu(r){return 2|r}function Ic(r){return(131068&r)>>2}function Jd(r,s){return-131069&r|s<<2}function Qd(r){return 1|r}function Uf(r,s,c,f,y){const x=r[c+1],S=null===s;let N=f?tu(x):Ic(x),X=!1;for(;0!==N&&(!1===X||S);){const Ne=r[N+1];eh(r[N],s)&&(X=!0,r[N+1]=f?Qd(Ne):nu(Ne)),N=f?tu(Ne):Ic(Ne)}X&&(r[c+1]=f?nu(x):Qd(x))}function eh(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&h(r,s)>=0}const ws={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jf(r){return r.substring(ws.key,ws.keyEnd)}function Hf(r,s){const c=ws.textEnd;return c===s?-1:(s=ws.keyEnd=function kg(r,s,c){for(;s<c&&r.charCodeAt(s)>32;)s++;return s}(r,ws.key=s,c),iu(r,s,c))}function iu(r,s,c){for(;s<c&&r.charCodeAt(s)<=32;)s++;return s}function ku(r,s,c){return a(r,s,c,!1),ku}function th(r,s){return a(r,s,null,!0),th}function e(r){d(ye,i,r,!0)}function i(r,s){for(let c=function iy(r){return function Og(r){ws.key=0,ws.keyEnd=0,ws.value=0,ws.valueEnd=0,ws.textEnd=r.length}(r),Hf(r,iu(r,0,ws.textEnd))}(s);c>=0;c=Hf(s,c))t(r,jf(s),!0)}function a(r,s,c,f){const y=Sn(),x=Xi(),S=Ks(2);x.firstUpdatePass&&g(x,r,S,f),s!==ur&&js(y,S,s)&&rt(x,x.data[Wo()],y,y[yi],r,y[S+1]=function Dt(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=ke(Ml(r)))),r}(s,c),f,S)}function d(r,s,c,f){const y=Xi(),x=Ks(2);y.firstUpdatePass&&g(y,null,x,f);const S=Sn();if(c!==ur&&js(S,x,c)){const N=y.data[Wo()];if(Bt(N,f)&&!m(y,x)){let X=f?N.classesWithoutHost:N.stylesWithoutHost;null!==X&&(c=Ye(X,c||"")),vd(y,N,S,c,f)}else!function Be(r,s,c,f,y,x,S,N){y===ur&&(y=zn);let X=0,_e=0,Ne=0<y.length?y[0]:null,gt=0<x.length?x[0]:null;for(;null!==Ne||null!==gt;){const Qt=X<y.length?y[X+1]:void 0,yn=_e<x.length?x[_e+1]:void 0;let fi,$n=null;Ne===gt?(X+=2,_e+=2,Qt!==yn&&($n=gt,fi=yn)):null===gt||null!==Ne&&Ne<gt?(X+=2,$n=Ne):(_e+=2,$n=gt,fi=yn),null!==$n&&rt(r,s,c,f,$n,fi,S,N),Ne=X<y.length?y[X]:null,gt=_e<x.length?x[_e]:null}}(y,N,S,S[yi],S[x+1],S[x+1]=function ne(r,s,c){if(null==c||""===c)return zn;const f=[],y=Ml(c);if(Array.isArray(y))for(let x=0;x<y.length;x++)r(f,y[x],!0);else if("object"==typeof y)for(const x in y)y.hasOwnProperty(x)&&r(f,x,y[x]);else"string"==typeof y&&s(f,y);return f}(r,s,c),f,x)}}function m(r,s){return s>=r.expandoStartIndex}function g(r,s,c,f){const y=r.data;if(null===y[c+1]){const x=y[Wo()],S=m(r,c);Bt(x,f)&&null===s&&!S&&(s=!1),s=function v(r,s,c,f){const y=ul(r);let x=f?s.residualClasses:s.residualStyles;if(null===y)0===(f?s.classBindings:s.styleBindings)&&(c=Y(c=z(null,r,s,c,f),s.attrs,f),x=null);else{const S=s.directiveStylingLast;if(-1===S||r[S]!==y)if(c=z(y,r,s,c,f),null===x){let X=function w(r,s,c){const f=c?s.classBindings:s.styleBindings;if(0!==Ic(f))return r[tu(f)]}(r,s,f);void 0!==X&&Array.isArray(X)&&(X=z(null,r,s,X[1],f),X=Y(X,s.attrs,f),function E(r,s,c,f){r[tu(c?s.classBindings:s.styleBindings)]=f}(r,s,f,X))}else x=function R(r,s,c){let f;const y=s.directiveEnd;for(let x=1+s.directiveStylingLast;x<y;x++)f=Y(f,r[x].hostAttrs,c);return Y(f,s.attrs,c)}(r,s,f)}return void 0!==x&&(f?s.residualClasses=x:s.residualStyles=x),c}(y,x,s,f),function Ou(r,s,c,f,y,x){let S=x?s.classBindings:s.styleBindings,N=tu(S),X=Ic(S);r[f]=c;let Ne,_e=!1;if(Array.isArray(c)?(Ne=c[1],(null===Ne||h(c,Ne)>0)&&(_e=!0)):Ne=c,y)if(0!==X){const Qt=tu(r[N+1]);r[f+1]=lp(Qt,N),0!==Qt&&(r[Qt+1]=Jd(r[Qt+1],f)),r[N+1]=function ny(r,s){return 131071&r|s<<17}(r[N+1],f)}else r[f+1]=lp(N,0),0!==N&&(r[N+1]=Jd(r[N+1],f)),N=f;else r[f+1]=lp(X,0),0===N?N=f:r[X+1]=Jd(r[X+1],f),X=f;_e&&(r[f+1]=nu(r[f+1])),Uf(r,Ne,f,!0),Uf(r,Ne,f,!1),function Sg(r,s,c,f,y){const x=y?r.residualClasses:r.residualStyles;null!=x&&"string"==typeof s&&h(x,s)>=0&&(c[f+1]=Qd(c[f+1]))}(s,Ne,r,f,x),S=lp(N,X),x?s.classBindings=S:s.styleBindings=S}(y,x,s,c,S,f)}}function z(r,s,c,f,y){let x=null;const S=c.directiveEnd;let N=c.directiveStylingLast;for(-1===N?N=c.directiveStart:N++;N<S&&(x=s[N],f=Y(f,x.hostAttrs,y),x!==r);)N++;return null!==r&&(c.directiveStylingLast=N),f}function Y(r,s,c){const f=c?1:2;let y=-1;if(null!==s)for(let x=0;x<s.length;x++){const S=s[x];"number"==typeof S?y=S:y===f&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),t(r,S,!!c||s[++x]))}return void 0===r?null:r}function ye(r,s,c){const f=String(s);""!==f&&!f.includes(" ")&&t(r,f,c)}function rt(r,s,c,f,y,x,S,N){if(!(3&s.type))return;const X=r.data,_e=X[N+1],Ne=function lc(r){return 1==(1&r)}(_e)?St(X,s,c,y,Ic(_e),S):void 0;ot(Ne)||(ot(x)||function cp(r){return 2==(2&r)}(_e)&&(x=St(X,null,c,y,N,S)),function gm(r,s,c,f,y){if(s)y?r.addClass(c,f):r.removeClass(c,f);else{let x=-1===f.indexOf("-")?void 0:Ua.DashCase;null==y?r.removeStyle(c,f,x):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),x|=Ua.Important),r.setStyle(c,f,y,x))}}(f,S,Lr(Wo(),c),y,x))}function St(r,s,c,f,y,x){const S=null===s;let N;for(;y>0;){const X=r[y],_e=Array.isArray(X),Ne=_e?X[1]:X,gt=null===Ne;let Qt=c[y+1];Qt===ur&&(Qt=gt?zn:void 0);let yn=gt?l(Qt,f):Ne===f?Qt:void 0;if(_e&&!ot(yn)&&(yn=l(X,f)),ot(yn)&&(N=yn,S))return N;const $n=r[y+1];y=S?tu($n):Ic($n)}if(null!==s){let X=x?s.residualClasses:s.residualStyles;null!=X&&(N=l(X,f))}return N}function ot(r){return void 0!==r}function Bt(r,s){return 0!=(r.flags&(s?8:16))}function Lt(r,s=""){const c=Sn(),f=Xi(),y=r+fr,x=f.firstCreatePass?wc(f,y,1,s,null):f.data[y],S=c[y]=function _l(r,s){return r.createText(s)}(c[yi],s);Bc(f,c,S,x),Lo(x,!1)}function gn(r){return un("",r,""),gn}function un(r,s,c){const f=Sn(),y=Wl(f,r,s,c);return y!==ur&&function sc(r,s,c){const f=Lr(s,r);!function um(r,s,c){r.setValue(s,c)}(r[yi],f,c)}(f,Wo(),y),un}function ci(r,s,c){d(t,i,Wl(Sn(),r,s,c),!0)}function fa(r,s,c){const f=Sn();return js(f,is(),s)&&vl(Xi(),Pr(),f,r,s,f[yi],c,!0),fa}function Qo(r,s,c){const f=Sn();if(js(f,is(),s)){const x=Xi(),S=Pr();vl(x,S,f,r,s,mf(ul(x.data),S,f),c,!0)}return Qo}const es=void 0;var Ra=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hs(r){const c=Math.floor(Math.abs(r)),f=r.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let ts={};function ru(r){const s=function Fg(r){return r.toLowerCase().replace(/_/g,"-")}(r);let c=Wf(s);if(c)return c;const f=s.split("-")[0];if(c=Wf(f),c)return c;if("en"===f)return Ra;throw new Ct(701,!1)}function bd(r){return ru(r)[Ki.PluralCase]}function Wf(r){return r in ts||(ts[r]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[r]),ts[r]}var Ki=(()=>((Ki=Ki||{})[Ki.LocaleId=0]="LocaleId",Ki[Ki.DayPeriodsFormat=1]="DayPeriodsFormat",Ki[Ki.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ki[Ki.DaysFormat=3]="DaysFormat",Ki[Ki.DaysStandalone=4]="DaysStandalone",Ki[Ki.MonthsFormat=5]="MonthsFormat",Ki[Ki.MonthsStandalone=6]="MonthsStandalone",Ki[Ki.Eras=7]="Eras",Ki[Ki.FirstDayOfWeek=8]="FirstDayOfWeek",Ki[Ki.WeekendRange=9]="WeekendRange",Ki[Ki.DateFormat=10]="DateFormat",Ki[Ki.TimeFormat=11]="TimeFormat",Ki[Ki.DateTimeFormat=12]="DateTimeFormat",Ki[Ki.NumberSymbols=13]="NumberSymbols",Ki[Ki.NumberFormats=14]="NumberFormats",Ki[Ki.CurrencyCode=15]="CurrencyCode",Ki[Ki.CurrencySymbol=16]="CurrencySymbol",Ki[Ki.CurrencyName=17]="CurrencyName",Ki[Ki.Currencies=18]="Currencies",Ki[Ki.Directionality=19]="Directionality",Ki[Ki.PluralCase=20]="PluralCase",Ki[Ki.ExtraData=21]="ExtraData",Ki))();const Ga="en-US";let hp=Ga;function ly(r,s,c,f,y){if(r=it(r),Array.isArray(r))for(let x=0;x<r.length;x++)ly(r[x],s,c,f,y);else{const x=Xi(),S=Sn();let N=rc(r)?r:it(r.provide),X=jp(r);const _e=Ir(),Ne=1048575&_e.providerIndexes,gt=_e.directiveStart,Qt=_e.providerIndexes>>20;if(rc(r)||!r.multi){const yn=new V(X,y,od),$n=uy(N,s,y?Ne:Ne+Qt,gt);-1===$n?(Vo(fs(_e,S),x,N),cy(x,r,s.length),s.push(N),_e.directiveStart++,_e.directiveEnd++,y&&(_e.providerIndexes+=1048576),c.push(yn),S.push(yn)):(c[$n]=yn,S[$n]=yn)}else{const yn=uy(N,s,Ne+Qt,gt),$n=uy(N,s,Ne,Ne+Qt),Mi=$n>=0&&c[$n];if(y&&!Mi||!y&&!(yn>=0&&c[yn])){Vo(fs(_e,S),x,N);const Bi=function Rb(r,s,c,f,y){const x=new V(r,c,od);return x.multi=[],x.index=s,x.componentProviders=0,hv(x,y,f&&!c),x}(y?kb:Ob,c.length,y,f,X);!y&&Mi&&(c[$n].providerFactory=Bi),cy(x,r,s.length,0),s.push(N),_e.directiveStart++,_e.directiveEnd++,y&&(_e.providerIndexes+=1048576),c.push(Bi),S.push(Bi)}else cy(x,r,yn>-1?yn:$n,hv(c[y?$n:yn],X,!y&&f));!y&&f&&Mi&&c[$n].componentProviders++}}}function cy(r,s,c,f){const y=rc(s),x=function Im(r){return!!r.useClass}(s);if(y||x){const X=(x?it(s.useClass):s).prototype.ngOnDestroy;if(X){const _e=r.destroyHooks||(r.destroyHooks=[]);if(!y&&s.multi){const Ne=_e.indexOf(c);-1===Ne?_e.push(c,[f,X]):_e[Ne+1].push(f,X)}else _e.push(c,X)}}}function hv(r,s,c){return c&&r.componentProviders++,r.multi.push(s)-1}function uy(r,s,c,f){for(let y=c;y<f;y++)if(s[y]===r)return y;return-1}function Ob(r,s,c,f){return dy(this.multi,[])}function kb(r,s,c,f){const y=this.multi;let x;if(this.providerFactory){const S=this.providerFactory.componentProviders,N=uo(c,c[vt],this.providerFactory.index,f);x=N.slice(0,S),dy(y,x);for(let X=S;X<N.length;X++)x.push(N[X])}else x=[],dy(y,x);return x}function dy(r,s){for(let c=0;c<r.length;c++)s.push((0,r[c])());return s}function pv(r,s=[]){return c=>{c.providersResolver=(f,y)=>function Pb(r,s,c){const f=Xi();if(f.firstCreatePass){const y=zr(r);ly(c,f.data,f.blueprint,y,!0),ly(s,f.data,f.blueprint,y,!1)}}(f,y?y(r):r,s)}}class fp{}class fv{}function Fb(r,s){return new mv(r,s??null)}class mv extends fp{constructor(s,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dd(this);const f=Hr(s);this._bootstrapComponents=jl(f.bootstrap),this._r3Injector=Wp(s,c,[{provide:fp,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],ke(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class hy extends fv{constructor(s){super(),this.moduleType=s}create(s){return new mv(this.moduleType,s)}}class Lb extends fp{constructor(s,c,f){super(),this.componentFactoryResolver=new dd(this),this.instance=null;const y=new Pm([...s,{provide:fp,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],c||Ch(),f,new Set(["environment"]));this.injector=y,y.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function py(r,s,c=null){return new Lb(r,s,c).injector}let Bb=(()=>{class r{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const f=_h(0,c.type),y=f.length>0?py([f],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,y)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Re({token:r,providedIn:"environment",factory:()=>new r(Ke(Hc))}),r})();function gv(r){r.getStandaloneInjector=s=>s.get(Bb).getOrCreateStandaloneInjector(r)}function Cv(r,s,c){const f=Mo()+r,y=Sn();return y[f]===ur?ac(y,f,c?s.call(c):s()):function Dc(r,s){return r[s]}(y,f)}function Ev(r,s,c,f){return Dv(Sn(),Mo(),r,s,c,f)}function nm(r,s){const c=r[s];return c===ur?void 0:c}function Dv(r,s,c,f,y,x){const S=s+c;return js(r,S,y)?ac(r,S+1,x?f.call(x,y):f(y)):nm(r,S+1)}function Tv(r,s,c,f,y,x,S,N){const X=s+c;return function Jc(r,s,c,f,y){const x=Zl(r,s,c,f);return js(r,s+2,y)||x}(r,X,y,x,S)?ac(r,X+3,N?f.call(N,y,x,S):f(y,x,S)):nm(r,X+3)}function Iv(r,s){const c=Xi();let f;const y=r+fr;c.firstCreatePass?(f=function ex(r,s){if(s)for(let c=s.length-1;c>=0;c--){const f=s[c];if(r===f.name)return f}}(s,c.pipeRegistry),c.data[y]=f,f.onDestroy&&(c.destroyHooks??(c.destroyHooks=[])).push(y,f.onDestroy)):f=c.data[y];const x=f.factory||(f.factory=Ro(f.type)),S=ce(od);try{const N=co(!1),X=x();return co(N),function ey(r,s,c,f){c>=r.data.length&&(r.data[c]=null,r.blueprint[c]=null),s[c]=f}(c,Sn(),y,X),X}finally{ce(S)}}function Pv(r,s,c){const f=r+fr,y=Sn(),x=vs(y,f);return im(y,f)?Dv(y,Mo(),s,x.transform,c,x):x.transform(c)}function Ov(r,s,c,f){const y=r+fr,x=Sn(),S=vs(x,y);return im(x,y)?function Mv(r,s,c,f,y,x,S){const N=s+c;return Zl(r,N,y,x)?ac(r,N+2,S?f.call(S,y,x):f(y,x)):nm(r,N+2)}(x,Mo(),s,S.transform,c,f,S):S.transform(c,f)}function kv(r,s,c,f,y){const x=r+fr,S=Sn(),N=vs(S,x);return im(S,x)?Tv(S,Mo(),s,N.transform,c,f,y,N):N.transform(c,f,y)}function im(r,s){return r[vt].data[s].pure}function my(r){return s=>{setTimeout(r,void 0,s)}}const ou=class ix extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,c,f){let y=s,x=c||(()=>null),S=f;if(s&&"object"==typeof s){const X=s;y=X.next?.bind(X),x=X.error?.bind(X),S=X.complete?.bind(X)}this.__isAsync&&(x=my(x),y&&(y=my(y)),S&&(S=my(S)));const N=super.subscribe({next:y,error:x,complete:S});return s instanceof j.w0&&s.add(N),N}};function rx(){return this._results[Symbol.iterator]()}class Vg{get changes(){return this._changes||(this._changes=new ou)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Vg.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=rx)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,c){return this._results.reduce(s,c)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,c){const f=this;f.dirty=!1;const y=function xa(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function lu(r,s,c){if(r.length!==s.length)return!1;for(let f=0;f<r.length;f++){let y=r[f],x=s[f];if(c&&(y=c(y),x=c(x)),x!==y)return!1}return!0}(f._results,y,c))&&(f._results=y,f.length=y.length,f.last=y[this.length-1],f.first=y[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rm=(()=>{class r{}return r.__NG_ELEMENT_ID__=ax,r})();const ox=rm,sx=class extends ox{constructor(s,c,f){super(),this._declarationLView=s,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(s,c){const f=this._declarationTContainer.tView,y=sd(this._declarationLView,f,s,16,null,f.declTNode,null,null,null,null,c||null);y[mo]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[cr];return null!==S&&(y[cr]=S.createEmbeddedView(f)),Qp(f,y,s),new ud(y)}};function ax(){return Ug(Ir(),Sn())}function Ug(r,s){return 4&r.type?new sx(s,r,Qu(r,s)):null}let jg=(()=>{class r{}return r.__NG_ELEMENT_ID__=lx,r})();function lx(){return Lv(Ir(),Sn())}const cx=jg,Rv=class extends cx{constructor(s,c,f){super(),this._lContainer=s,this._hostTNode=c,this._hostLView=f}get element(){return Qu(this._hostTNode,this._hostLView)}get injector(){return new Z(this._hostTNode,this._hostLView)}get parentInjector(){const s=Or(this._hostTNode,this._hostLView);if(Ei(s)){const c=sr(s,this._hostLView),f=In(s);return new Z(c[vt].data[f+8],c)}return new Z(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const c=Fv(this._lContainer);return null!==c&&c[s]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(s,c,f){let y,x;"number"==typeof f?y=f:null!=f&&(y=f.index,x=f.injector);const S=s.createEmbeddedView(c||{},x);return this.insert(S,y),S}createComponent(s,c,f,y,x){const S=s&&!function ec(r){return"function"==typeof r}(s);let N;if(S)N=c;else{const gt=c||{};N=gt.index,f=gt.injector,y=gt.projectableNodes,x=gt.environmentInjector||gt.ngModuleRef}const X=S?s:new Tu($i(s)),_e=f||this.parentInjector;if(!x&&null==X.ngModule){const Qt=(S?_e:this.parentInjector).get(Hc,null);Qt&&(x=Qt)}const Ne=X.create(_e,y,void 0,x);return this.insert(Ne.hostView,N),Ne}insert(s,c){const f=s._lView,y=f[vt];if(function la(r){return _o(r[ie])}(f)){const Ne=this.indexOf(s);if(-1!==Ne)this.detach(Ne);else{const gt=f[ie],Qt=new Rv(gt,gt[An],gt[ie]);Qt.detach(Qt.indexOf(s))}}const x=this._adjustIndex(c),S=this._lContainer;!function dm(r,s,c,f){const y=dr+f,x=c.length;f>0&&(c[y-1][Se]=s),f<x-dr?(s[Se]=c[y],zu(c,dr+f,s)):(c.push(s),s[Se]=null),s[ie]=c;const S=s[mo];null!==S&&c!==S&&function hm(r,s){const c=r[ko];s[_r]!==s[ie][ie][_r]&&(r[Gs]=!0),null===c?r[ko]=[s]:c.push(s)}(S,s);const N=s[cr];null!==N&&N.insertView(r),s[I]|=64}(y,f,S,x);const N=Id(x,S),X=f[yi],_e=yc(X,S[$s]);return null!==_e&&function Rc(r,s,c,f,y,x){f[at]=y,f[An]=s,bc(r,f,c,1,y,x)}(y,S[An],X,f,_e,N),s.attachToViewContainerRef(),zu(gy(S),x,s),s}move(s,c){return this.insert(s,c)}indexOf(s){const c=Fv(this._lContainer);return null!==c?c.indexOf(s):-1}remove(s){const c=this._adjustIndex(s,-1),f=Ad(this._lContainer,c);f&&(cu(gy(this._lContainer),c),Fc(f[vt],f))}detach(s){const c=this._adjustIndex(s,-1),f=Ad(this._lContainer,c);return f&&null!=cu(gy(this._lContainer),c)?new ud(f):null}_adjustIndex(s,c=0){return s??this.length+c}};function Fv(r){return r[So]}function gy(r){return r[So]||(r[So]=[])}function Lv(r,s){let c;const f=s[r.index];if(_o(f))c=f;else{let y;if(8&r.type)y=wr(f);else{const x=s[yi];y=x.createComment("");const S=Vr(r,s);Lc(x,yc(x,S),y,function vc(r,s){return r.nextSibling(s)}(x,S),!1)}s[r.index]=c=ld(f,s,y,r),$h(s,c)}return new Rv(c,r,s)}class _y{constructor(s){this.queryList=s,this.matches=null}clone(){return new _y(this.queryList)}setDirty(){this.queryList.setDirty()}}class yy{constructor(s=[]){this.queries=s}createEmbeddedView(s){const c=s.queries;if(null!==c){const f=null!==s.contentQueries?s.contentQueries[0]:c.length,y=[];for(let x=0;x<f;x++){const S=c.getByIndex(x);y.push(this.queries[S.indexInDeclarationView].clone())}return new yy(y)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let c=0;c<this.queries.length;c++)null!==$v(s,c).matches&&this.queries[c].setDirty()}}class Bv{constructor(s,c,f=null){this.predicate=s,this.flags=c,this.read=f}}class vy{constructor(s=[]){this.queries=s}elementStart(s,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(s,c)}elementEnd(s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(s)}embeddedTView(s){let c=null;for(let f=0;f<this.length;f++){const y=null!==c?c.length:0,x=this.getByIndex(f).embeddedTView(s,y);x&&(x.indexInDeclarationView=f,null!==c?c.push(x):c=[x])}return null!==c?new vy(c):null}template(s,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(s,c)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class by{constructor(s,c=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(s,c){this.isApplyingToNode(c)&&this.matchTNode(s,c)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,c){this.elementStart(s,c)}embeddedTView(s,c){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,c),new by(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=s.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(s,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let y=0;y<f.length;y++){const x=f[y];this.matchTNodeWithReadOption(s,c,ux(c,x)),this.matchTNodeWithReadOption(s,c,qo(c,s,x,!1,!1))}else f===rm?4&c.type&&this.matchTNodeWithReadOption(s,c,-1):this.matchTNodeWithReadOption(s,c,qo(c,s,f,!1,!1))}matchTNodeWithReadOption(s,c,f){if(null!==f){const y=this.metadata.read;if(null!==y)if(y===Bd||y===jg||y===rm&&4&c.type)this.addMatch(c.index,-2);else{const x=qo(c,s,y,!1,!1);null!==x&&this.addMatch(c.index,x)}else this.addMatch(c.index,f)}}addMatch(s,c){null===this.matches?this.matches=[s,c]:this.matches.push(s,c)}}function ux(r,s){const c=r.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===s)return c[f+1];return null}function hx(r,s,c,f){return-1===c?function dx(r,s){return 11&r.type?Qu(r,s):4&r.type?Ug(r,s):null}(s,r):-2===c?function px(r,s,c){return c===Bd?Qu(s,r):c===rm?Ug(s,r):c===jg?Lv(s,r):void 0}(r,s,f):uo(r,r[vt],c,s)}function Nv(r,s,c,f){const y=s[cr].queries[f];if(null===y.matches){const x=r.data,S=c.matches,N=[];for(let X=0;X<S.length;X+=2){const _e=S[X];N.push(_e<0?null:hx(s,x[_e],S[X+1],c.metadata.read))}y.matches=N}return y.matches}function xy(r,s,c,f){const y=r.queries.getByIndex(c),x=y.matches;if(null!==x){const S=Nv(r,s,y,c);for(let N=0;N<x.length;N+=2){const X=x[N];if(X>0)f.push(S[N/2]);else{const _e=x[N+1],Ne=s[-X];for(let gt=dr;gt<Ne.length;gt++){const Qt=Ne[gt];Qt[mo]===Qt[ie]&&xy(Qt[vt],Qt,_e,f)}if(null!==Ne[ko]){const gt=Ne[ko];for(let Qt=0;Qt<gt.length;Qt++){const yn=gt[Qt];xy(yn[vt],yn,_e,f)}}}}}return f}function zv(r){const s=Sn(),c=Xi(),f=La();dl(f+1);const y=$v(c,f);if(r.dirty&&function ks(r){return 4==(4&r[I])}(s)===(2==(2&y.metadata.flags))){if(null===y.matches)r.reset([]);else{const x=y.crossesNgTemplate?xy(c,s,f,[]):Nv(c,s,y,f);r.reset(x,g_),r.notifyOnChanges()}return!0}return!1}function Vv(r,s,c){const f=Xi();f.firstCreatePass&&(Gv(f,new Bv(r,s,c),-1),2==(2&s)&&(f.staticViewQueries=!0)),Hv(f,Sn(),s)}function Uv(r,s,c,f){const y=Xi();if(y.firstCreatePass){const x=Ir();Gv(y,new Bv(s,c,f),x.index),function mx(r,s){const c=r.contentQueries||(r.contentQueries=[]);s!==(c.length?c[c.length-1]:-1)&&c.push(r.queries.length-1,s)}(y,r),2==(2&c)&&(y.staticContentQueries=!0)}Hv(y,Sn(),c)}function jv(){return function fx(r,s){return r[cr].queries[s].queryList}(Sn(),La())}function Hv(r,s,c){const f=new Vg(4==(4&c));rf(r,s,f,f.destroy),null===s[cr]&&(s[cr]=new yy),s[cr].queries.push(new _y(f))}function Gv(r,s,c){null===r.queries&&(r.queries=new vy),r.queries.track(new by(s,c))}function $v(r,s){return r.queries.getByIndex(s)}function Zv(r,s){return Ug(r,s)}function wy(r){return!!Hr(r)}function Gg(...r){}const d0=new eo("Application Initializer");let $g=(()=>{class r{constructor(c){this.appInits=c,this.resolve=Gg,this.reject=Gg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,y)=>{this.resolve=f,this.reject=y})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let y=0;y<this.appInits.length;y++){const x=this.appInits[y]();if(op(x))c.push(x);else if(If(x)){const S=new Promise((N,X)=>{x.subscribe({complete:N,error:X})});c.push(S)}}Promise.all(c).then(()=>{f()}).catch(y=>{this.reject(y)}),0===c.length&&f(),this.initialized=!0}}return r.\u0275fac=function(c){return new(c||r)(Ke(d0,8))},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const h0=new eo("AppId",{providedIn:"root",factory:function p0(){return`${Ty()}${Ty()}${Ty()}`}});function Ty(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const f0=new eo("Platform Initializer"),Fx=new eo("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lx=new eo("AnimationModuleType");let Bx=(()=>{class r{log(c){console.log(c)}warn(c){console.warn(c)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Zg=new eo("LocaleId",{providedIn:"root",factory:()=>Pt(Zg,It.Optional|It.SkipSelf)||function Nx(){return typeof $localize<"u"&&$localize.locale||Ga}()}),zx=new eo("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Vx{constructor(s,c){this.ngModuleFactory=s,this.componentFactories=c}}let Ux=(()=>{class r{compileModuleSync(c){return new hy(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),x=jl(Hr(c).declarations).reduce((S,N)=>{const X=$i(N);return X&&S.push(new Tu(X)),S},[]);return new Vx(f,x)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Gx=(()=>Promise.resolve(0))();function Ay(r){typeof Zone>"u"?Gx.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class hc{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ou(!1),this.onMicrotaskEmpty=new ou(!1),this.onStable=new ou(!1),this.onError=new ou(!1),typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!f&&c,y.shouldCoalesceRunChangeDetection=f,y.lastRequestAnimationFrameId=-1,y.nativeRequestAnimationFrame=function $x(){let r=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c);const f=s[Zone.__symbol__("OriginalDelegate")];f&&(s=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Yx(r){const s=()=>{!function Wx(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ft,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Iy(r),r.isCheckStableRunning=!0,Sy(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Iy(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,y,x,S,N)=>{try{return _0(r),c.invokeTask(y,x,S,N)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||r.shouldCoalesceRunChangeDetection)&&s(),y0(r)}},onInvoke:(c,f,y,x,S,N,X)=>{try{return _0(r),c.invoke(y,x,S,N,X)}finally{r.shouldCoalesceRunChangeDetection&&s(),y0(r)}},onHasTask:(c,f,y,x)=>{c.hasTask(y,x),f===y&&("microTask"==x.change?(r._hasPendingMicrotasks=x.microTask,Iy(r),Sy(r)):"macroTask"==x.change&&(r.hasPendingMacrotasks=x.macroTask))},onHandleError:(c,f,y,x)=>(c.handleError(y,x),r.runOutsideAngular(()=>r.onError.emit(x)),!1)})}(y)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hc.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(hc.isInAngularZone())throw new Ct(909,!1)}run(s,c,f){return this._inner.run(s,c,f)}runTask(s,c,f,y){const x=this._inner,S=x.scheduleEventTask("NgZoneEvent: "+y,s,Zx,Gg,Gg);try{return x.runTask(S,c,f)}finally{x.cancelTask(S)}}runGuarded(s,c,f){return this._inner.runGuarded(s,c,f)}runOutsideAngular(s){return this._outer.run(s)}}const Zx={};function Sy(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Iy(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function _0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function y0(r){r._nesting--,Sy(r)}class qx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ou,this.onMicrotaskEmpty=new ou,this.onStable=new ou,this.onError=new ou}run(s,c,f){return s.apply(c,f)}runGuarded(s,c,f){return s.apply(c,f)}runOutsideAngular(s){return s()}runTask(s,c,f,y){return s.apply(c,f)}}const v0=new eo(""),b0=new eo("");let Py,Kx=(()=>{class r{constructor(c,f,y){this._ngZone=c,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Py||(function Xx(r){Py=r}(y),y.addToWindow(f)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hc.assertNotInAngularZone(),Ay(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ay(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,y){let x=-1;f&&f>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==x),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:x,updateCb:y})}whenStable(c,f,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,y),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,f,y){return[]}}return r.\u0275fac=function(c){return new(c||r)(Ke(hc),Ke(x0),Ke(b0))},r.\u0275prov=Re({token:r,factory:r.\u0275fac}),r})(),x0=(()=>{class r{constructor(){this._applications=new Map}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return Py?.findTestabilityInTree(this,c,f)??null}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Lu=!1;let Cd=null;const w0=new eo("AllowMultipleToken"),Oy=new eo("PlatformDestroyListeners"),C0=new eo("appBootstrapListener");class ew{constructor(s,c){this.name=s,this.token=c}}function D0(r,s,c=[]){const f=`Platform: ${s}`,y=new eo(f);return(x=[])=>{let S=ky();if(!S||S.injector.get(w0,!1)){const N=[...c,...x,{provide:y,useValue:!0}];r?r(N):function tw(r){if(Cd&&!Cd.get(w0,!1))throw new Ct(400,!1);Cd=r;const s=r.get(T0);(function E0(r){const s=r.get(f0,null);s&&s.forEach(c=>c())})(r)}(function M0(r=[],s){return Eu.create({name:s,providers:[{provide:bh,useValue:"platform"},{provide:Oy,useValue:new Set([()=>Cd=null])},...r]})}(N,f))}return function iw(r){const s=ky();if(!s)throw new Ct(401,!1);return s}()}}function ky(){return Cd?.get(T0)??null}let T0=(()=>{class r{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const y=function S0(r,s){let c;return c="noop"===r?new qx:("zone.js"===r?void 0:r)||new hc(s),c}(f?.ngZone,function A0(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(f)),x=[{provide:hc,useValue:y}];return y.run(()=>{const S=Eu.create({providers:x,parent:this.injector,name:c.moduleType.name}),N=c.create(S),X=N.injector.get(td,null);if(!X)throw new Ct(402,!1);return y.runOutsideAngular(()=>{const _e=y.onError.subscribe({next:Ne=>{X.handleError(Ne)}});N.onDestroy(()=>{Yg(this._modules,N),_e.unsubscribe()})}),function I0(r,s,c){try{const f=c();return op(f)?f.catch(y=>{throw s.runOutsideAngular(()=>r.handleError(y)),y}):f}catch(f){throw s.runOutsideAngular(()=>r.handleError(f)),f}}(X,y,()=>{const _e=N.injector.get($g);return _e.runInitializers(),_e.donePromise.then(()=>(function Bg(r){ze(r,"Expected localeId to be defined"),"string"==typeof r&&(hp=r.toLowerCase().replace(/_/g,"-"))}(N.injector.get(Zg,Ga)||Ga),this._moduleDoBootstrap(N),N))})})}bootstrapModule(c,f=[]){const y=P0({},f);return function Jx(r,s,c){const f=new hy(c);return Promise.resolve(f)}(0,0,c).then(x=>this.bootstrapModuleFactory(x,y))}_moduleDoBootstrap(c){const f=c.injector.get(Wg);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(y=>f.bootstrap(y));else{if(!c.instance.ngDoBootstrap)throw new Ct(-403,!1);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ct(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(Oy,null);c&&(c.forEach(f=>f()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(c){return new(c||r)(Ke(Eu))},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function P0(r,s){return Array.isArray(s)?s.reduce(P0,r):{...r,...s}}let Wg=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,f,y){this._zone=c,this._injector=f,this._exceptionHandler=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new Q.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),S=new Q.y(N=>{let X;this._zone.runOutsideAngular(()=>{X=this._zone.onStable.subscribe(()=>{hc.assertNotInAngularZone(),Ay(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{hc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{X.unsubscribe(),_e.unsubscribe()}});this.isStable=(0,o.T)(x,S.pipe((0,P.B)()))}bootstrap(c,f){const y=c instanceof Rm;if(!this._injector.get($g).done){!y&&Tr(c);throw new Ct(405,Lu)}let S;S=y?c:this._injector.get(Ul).resolveComponentFactory(c),this.componentTypes.push(S.componentType);const N=function Qx(r){return r.isBoundToModule}(S)?void 0:this._injector.get(fp),_e=S.create(Eu.NULL,[],f||S.selector,N),Ne=_e.location.nativeElement,gt=_e.injector.get(v0,null);return gt?.registerApplication(Ne),_e.onDestroy(()=>{this.detachView(_e.hostView),Yg(this.components,_e),gt?.unregisterApplication(Ne)}),this._loadComponent(_e),_e}tick(){if(this._runningTick)throw new Ct(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;Yg(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const f=this._injector.get(C0,[]);f.push(...this._bootstrapListeners),f.forEach(y=>y(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Yg(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ct(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(c){return new(c||r)(Ke(hc),Ke(Hc),Ke(td))},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Yg(r,s){const c=r.indexOf(s);c>-1&&r.splice(c,1)}let ow=(()=>{class r{}return r.__NG_ELEMENT_ID__=sw,r})();function sw(r){return function aw(r,s,c){if(Ar(r)&&!c){const f=Do(r.index,s);return new ud(f,f)}return 47&r.type?new ud(s[_r],s):null}(Ir(),Sn(),16==(16&r))}class L0{constructor(){}supports(s){return Qh(s)}create(s){return new pw(s)}}const hw=(r,s)=>s;class pw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hw}forEachItem(s){let c;for(c=this._itHead;null!==c;c=c._next)s(c)}forEachOperation(s){let c=this._itHead,f=this._removalsHead,y=0,x=null;for(;c||f;){const S=!f||c&&c.currentIndex<N0(f,y,x)?c:f,N=N0(S,y,x),X=S.currentIndex;if(S===f)y--,f=f._nextRemoved;else if(c=c._next,null==S.previousIndex)y++;else{x||(x=[]);const _e=N-y,Ne=X-y;if(_e!=Ne){for(let Qt=0;Qt<_e;Qt++){const yn=Qt<x.length?x[Qt]:x[Qt]=0,$n=yn+Qt;Ne<=$n&&$n<_e&&(x[Qt]=yn+1)}x[S.previousIndex]=Ne-_e}}N!==X&&s(S,N,X)}}forEachPreviousItem(s){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)s(c)}forEachAddedItem(s){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)s(c)}forEachMovedItem(s){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)s(c)}forEachRemovedItem(s){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)s(c)}forEachIdentityChange(s){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)s(c)}diff(s){if(null==s&&(s=[]),!Qh(s))throw new Ct(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let y,x,S,c=this._itHead,f=!1;if(Array.isArray(s)){this.length=s.length;for(let N=0;N<this.length;N++)x=s[N],S=this._trackByFn(N,x),null!==c&&Object.is(c.trackById,S)?(f&&(c=this._verifyReinsertion(c,x,S,N)),Object.is(c.item,x)||this._addIdentityChange(c,x)):(c=this._mismatch(c,x,S,N),f=!0),c=c._next}else y=0,function Au(r,s){if(Array.isArray(r))for(let c=0;c<r.length;c++)s(r[c]);else{const c=r[Symbol.iterator]();let f;for(;!(f=c.next()).done;)s(f.value)}}(s,N=>{S=this._trackByFn(y,N),null!==c&&Object.is(c.trackById,S)?(f&&(c=this._verifyReinsertion(c,N,S,y)),Object.is(c.item,N)||this._addIdentityChange(c,N)):(c=this._mismatch(c,N,S,y),f=!0),c=c._next,y++}),this.length=y;return this._truncate(c),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,c,f,y){let x;return null===s?x=this._itTail:(x=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(s.item,c)||this._addIdentityChange(s,c),this._reinsertAfter(s,x,y)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(f,y))?(Object.is(s.item,c)||this._addIdentityChange(s,c),this._moveAfter(s,x,y)):s=this._addAfter(new fw(c,f),x,y),s}_verifyReinsertion(s,c,f,y){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==x?s=this._reinsertAfter(x,s._prev,y):s.currentIndex!=y&&(s.currentIndex=y,this._addToMoves(s,y)),s}_truncate(s){for(;null!==s;){const c=s._next;this._addToRemovals(this._unlink(s)),s=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const y=s._prevRemoved,x=s._nextRemoved;return null===y?this._removalsHead=x:y._nextRemoved=x,null===x?this._removalsTail=y:x._prevRemoved=y,this._insertAfter(s,c,f),this._addToMoves(s,f),s}_moveAfter(s,c,f){return this._unlink(s),this._insertAfter(s,c,f),this._addToMoves(s,f),s}_addAfter(s,c,f){return this._insertAfter(s,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,c,f){const y=null===c?this._itHead:c._next;return s._next=y,s._prev=c,null===y?this._itTail=s:y._prev=s,null===c?this._itHead=s:c._next=s,null===this._linkedRecords&&(this._linkedRecords=new B0),this._linkedRecords.put(s),s.currentIndex=f,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const c=s._prev,f=s._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,s}_addToMoves(s,c){return s.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new B0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,c){return s.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class fw{constructor(s,c){this.item=s,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mw{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,s))return f;return null}remove(s){const c=s._prevDup,f=s._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class B0{constructor(){this.map=new Map}put(s){const c=s.trackById;let f=this.map.get(c);f||(f=new mw,this.map.set(c,f)),f.add(s)}get(s,c){const y=this.map.get(s);return y?y.get(s,c):null}remove(s){const c=s.trackById;return this.map.get(c).remove(s)&&this.map.delete(c),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function N0(r,s,c){const f=r.previousIndex;if(null===f)return f;let y=0;return c&&f<c.length&&(y=c[f]),f+s+y}class z0{constructor(){}supports(s){return s instanceof Map||xf(s)}create(){return new gw}}class gw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let c;for(c=this._mapHead;null!==c;c=c._next)s(c)}forEachPreviousItem(s){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)s(c)}forEachChangedItem(s){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)s(c)}forEachAddedItem(s){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)s(c)}forEachRemovedItem(s){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)s(c)}diff(s){if(s){if(!(s instanceof Map||xf(s)))throw new Ct(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(s,(f,y)=>{if(c&&c.key===y)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const x=this._getOrCreateRecordForKey(y,f);c=this._insertBeforeOrAppend(c,x)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,c){if(s){const f=s._prev;return c._next=s,c._prev=f,s._prev=c,f&&(f._next=c),s===this._mapHead&&(this._mapHead=c),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(s,c){if(this._records.has(s)){const y=this._records.get(s);this._maybeAddToChanges(y,c);const x=y._prev,S=y._next;return x&&(x._next=S),S&&(S._prev=x),y._next=null,y._prev=null,y}const f=new _w(s);return this._records.set(s,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,c){Object.is(c,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=c,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,c){s instanceof Map?s.forEach(c):Object.keys(s).forEach(f=>c(s[f],f))}}class _w{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function V0(){return new Ny([new L0])}let Ny=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(null!=f){const y=f.factories.slice();c=c.concat(y)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||V0()),deps:[[r,new fe,new qe]]}}find(c){const f=this.factories.find(y=>y.supports(c));if(null!=f)return f;throw new Ct(901,!1)}}return r.\u0275prov=Re({token:r,providedIn:"root",factory:V0}),r})();function U0(){return new zy([new z0])}let zy=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(f){const y=f.factories.slice();c=c.concat(y)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||U0()),deps:[[r,new fe,new qe]]}}find(c){const f=this.factories.find(y=>y.supports(c));if(f)return f;throw new Ct(901,!1)}}return r.\u0275prov=Re({token:r,providedIn:"root",factory:U0}),r})();const bw=D0(null,"core",[]);let xw=(()=>{class r{constructor(c){}}return r.\u0275fac=function(c){return new(c||r)(Ke(Wg))},r.\u0275mod=Wi({type:r}),r.\u0275inj=cn({}),r})();function ww(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(ni,Wt,F)=>{"use strict";F.d(Wt,{Cf:()=>nn,EJ:()=>Ws,F:()=>An,Fj:()=>pt,JJ:()=>Fn,JL:()=>It,JU:()=>ke,Kr:()=>Ps,NI:()=>xi,On:()=>Es,QS:()=>Yi,UX:()=>Fs,YN:()=>_a,Zs:()=>Za,_Y:()=>fr,a5:()=>On,gN:()=>Gt,kI:()=>kt,qu:()=>la,sg:()=>zr,u:()=>Zs,u5:()=>zi});var p=F(4650),j=F(6895),Q=F(2076),o=F(4128),P=F(4004);let st=(()=>{class oe{constructor(q,Le){this._renderer=q,this._elementRef=Le,this.onChange=xn=>{},this.onTouched=()=>{}}setProperty(q,Le){this._renderer.setProperty(this._elementRef.nativeElement,q,Le)}registerOnTouched(q){this.onTouched=q}registerOnChange(q){this.onChange=q}setDisabledState(q){this.setProperty("disabled",q)}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(p.Qsj),p.Y36(p.SBq))},oe.\u0275dir=p.lG2({type:oe}),oe})(),_t=(()=>{class oe extends st{}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275dir=p.lG2({type:oe,features:[p.qOj]}),oe})();const ke=new p.OlP("NgValueAccessor"),wt={provide:ke,useExisting:(0,p.Gpc)(()=>pt),multi:!0},yt=new p.OlP("CompositionEventMode");let pt=(()=>{class oe extends st{constructor(q,Le,xn){super(q,Le),this._compositionMode=xn,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function it(){const oe=(0,j.q)()?(0,j.q)().getUserAgent():"";return/android (\d+)/.test(oe.toLowerCase())}())}writeValue(q){this.setProperty("value",q??"")}_handleInput(q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(q)}_compositionStart(){this._composing=!0}_compositionEnd(q){this._composing=!1,this._compositionMode&&this.onChange(q)}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(yt,8))},oe.\u0275dir=p.lG2({type:oe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,Le){1&q&&p.NdJ("input",function(Ti){return Le._handleInput(Ti.target.value)})("blur",function(){return Le.onTouched()})("compositionstart",function(){return Le._compositionStart()})("compositionend",function(Ti){return Le._compositionEnd(Ti.target.value)})},features:[p._Bn([wt]),p.qOj]}),oe})();const jt=!1;function en(oe){return null==oe||("string"==typeof oe||Array.isArray(oe))&&0===oe.length}function Ct(oe){return null!=oe&&"number"==typeof oe.length}const nn=new p.OlP("NgValidators"),sn=new p.OlP("NgAsyncValidators"),Cn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kt{static min(te){return function Ae(oe){return te=>{if(en(te.value)||en(oe))return null;const q=parseFloat(te.value);return!isNaN(q)&&q<oe?{min:{min:oe,actual:te.value}}:null}}(te)}static max(te){return function ct(oe){return te=>{if(en(te.value)||en(oe))return null;const q=parseFloat(te.value);return!isNaN(q)&&q>oe?{max:{max:oe,actual:te.value}}:null}}(te)}static required(te){return ht(te)}static requiredTrue(te){return mt(te)}static email(te){return function Je(oe){return en(oe.value)||Cn.test(oe.value)?null:{email:!0}}(te)}static minLength(te){return function qt(oe){return te=>en(te.value)||!Ct(te.value)?null:te.value.length<oe?{minlength:{requiredLength:oe,actualLength:te.value.length}}:null}(te)}static maxLength(te){return function ln(oe){return te=>Ct(te.value)&&te.value.length>oe?{maxlength:{requiredLength:oe,actualLength:te.value.length}}:null}(te)}static pattern(te){return function Dn(oe){if(!oe)return ti;let te,q;return"string"==typeof oe?(q="","^"!==oe.charAt(0)&&(q+="^"),q+=oe,"$"!==oe.charAt(oe.length-1)&&(q+="$"),te=new RegExp(q)):(q=oe.toString(),te=oe),Le=>{if(en(Le.value))return null;const xn=Le.value;return te.test(xn)?null:{pattern:{requiredPattern:q,actualValue:xn}}}}(te)}static nullValidator(te){return null}static compose(te){return Zt(te)}static composeAsync(te){return Ge(te)}}function ht(oe){return en(oe.value)?{required:!0}:null}function mt(oe){return!0===oe.value?null:{required:!0}}function ti(oe){return null}function _n(oe){return null!=oe}function _i(oe){const te=(0,p.QGY)(oe)?(0,Q.D)(oe):oe;if(jt&&!(0,p.CqO)(te)){let q="Expected async validator to return Promise or Observable.";throw"object"==typeof oe&&(q+=" Are you using a synchronous validator where an async validator is expected?"),new p.vHH(-1101,q)}return te}function ii(oe){let te={};return oe.forEach(q=>{te=null!=q?{...te,...q}:te}),0===Object.keys(te).length?null:te}function vi(oe,te){return te.map(q=>q(oe))}function Yt(oe){return oe.map(te=>function Ii(oe){return!oe.validate}(te)?te:q=>te.validate(q))}function Zt(oe){if(!oe)return null;const te=oe.filter(_n);return 0==te.length?null:function(q){return ii(vi(q,te))}}function ze(oe){return null!=oe?Zt(Yt(oe)):null}function Ge(oe){if(!oe)return null;const te=oe.filter(_n);return 0==te.length?null:function(q){const Le=vi(q,te).map(_i);return(0,o.D)(Le).pipe((0,P.U)(ii))}}function Nt(oe){return null!=oe?Ge(Yt(oe)):null}function We(oe,te){return null===oe?[te]:Array.isArray(oe)?[...oe,te]:[oe,te]}function Ot(oe){return oe._rawValidators}function Re(oe){return oe._rawAsyncValidators}function ft(oe){return oe?Array.isArray(oe)?oe:[oe]:[]}function cn(oe,te){return Array.isArray(oe)?oe.includes(te):oe===te}function kn(oe,te){const q=ft(te);return ft(oe).forEach(xn=>{cn(q,xn)||q.push(xn)}),q}function an(oe,te){return ft(te).filter(q=>!cn(oe,q))}class Mn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(te){this._rawValidators=te||[],this._composedValidatorFn=ze(this._rawValidators)}_setAsyncValidators(te){this._rawAsyncValidators=te||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(te){this._onDestroyCallbacks.push(te)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(te=>te()),this._onDestroyCallbacks=[]}reset(te){this.control&&this.control.reset(te)}hasError(te,q){return!!this.control&&this.control.hasError(te,q)}getError(te,q){return this.control?this.control.getError(te,q):null}}class Gt extends Mn{get formDirective(){return null}get path(){return null}}class On extends Mn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xt{constructor(te){this._cd=te}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Fn=(()=>{class oe extends xt{constructor(q){super(q)}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(On,2))},oe.\u0275dir=p.lG2({type:oe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,Le){2&q&&p.ekj("ng-untouched",Le.isUntouched)("ng-touched",Le.isTouched)("ng-pristine",Le.isPristine)("ng-dirty",Le.isDirty)("ng-valid",Le.isValid)("ng-invalid",Le.isInvalid)("ng-pending",Le.isPending)},features:[p.qOj]}),oe})(),It=(()=>{class oe extends xt{constructor(q){super(q)}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(Gt,10))},oe.\u0275dir=p.lG2({type:oe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(q,Le){2&q&&p.ekj("ng-untouched",Le.isUntouched)("ng-touched",Le.isTouched)("ng-pristine",Le.isPristine)("ng-dirty",Le.isDirty)("ng-valid",Le.isValid)("ng-invalid",Le.isInvalid)("ng-pending",Le.isPending)("ng-submitted",Le.isSubmitted)},features:[p.qOj]}),oe})();function Ut(oe,te){return oe?`with name: '${te}'`:`at index: ${te}`}const ue=!1,Ce="VALID",Ke="INVALID",bt="PENDING",Pt="DISABLED";function me(oe){return(nt(oe)?oe.validators:oe)||null}function U(oe,te){return(nt(te)?te.asyncValidators:oe)||null}function nt(oe){return null!=oe&&!Array.isArray(oe)&&"object"==typeof oe}function Jt(oe,te,q){const Le=oe.controls;if(!(te?Object.keys(Le):Le).length)throw new p.vHH(1e3,ue?function Bn(oe){return`\n    There are no form controls registered with this ${oe?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(te):"");if(!Le[q])throw new p.vHH(1001,ue?function En(oe,te){return`Cannot find form control ${Ut(oe,te)}`}(te,q):"")}function Kt(oe,te,q){oe._forEachChild((Le,xn)=>{if(void 0===q[xn])throw new p.vHH(1002,ue?function Ue(oe,te){return`Must supply a value for form control ${Ut(oe,te)}`}(te,xn):"")})}class Yn{constructor(te,q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(te),this._assignAsyncValidators(q)}get validator(){return this._composedValidatorFn}set validator(te){this._rawValidators=this._composedValidatorFn=te}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(te){this._rawAsyncValidators=this._composedAsyncValidatorFn=te}get parent(){return this._parent}get valid(){return this.status===Ce}get invalid(){return this.status===Ke}get pending(){return this.status==bt}get disabled(){return this.status===Pt}get enabled(){return this.status!==Pt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(te){this._assignValidators(te)}setAsyncValidators(te){this._assignAsyncValidators(te)}addValidators(te){this.setValidators(kn(te,this._rawValidators))}addAsyncValidators(te){this.setAsyncValidators(kn(te,this._rawAsyncValidators))}removeValidators(te){this.setValidators(an(te,this._rawValidators))}removeAsyncValidators(te){this.setAsyncValidators(an(te,this._rawAsyncValidators))}hasValidator(te){return cn(this._rawValidators,te)}hasAsyncValidator(te){return cn(this._rawAsyncValidators,te)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(te={}){this.touched=!0,this._parent&&!te.onlySelf&&this._parent.markAsTouched(te)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(te=>te.markAllAsTouched())}markAsUntouched(te={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(q=>{q.markAsUntouched({onlySelf:!0})}),this._parent&&!te.onlySelf&&this._parent._updateTouched(te)}markAsDirty(te={}){this.pristine=!1,this._parent&&!te.onlySelf&&this._parent.markAsDirty(te)}markAsPristine(te={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(q=>{q.markAsPristine({onlySelf:!0})}),this._parent&&!te.onlySelf&&this._parent._updatePristine(te)}markAsPending(te={}){this.status=bt,!1!==te.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!te.onlySelf&&this._parent.markAsPending(te)}disable(te={}){const q=this._parentMarkedDirty(te.onlySelf);this.status=Pt,this.errors=null,this._forEachChild(Le=>{Le.disable({...te,onlySelf:!0})}),this._updateValue(),!1!==te.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...te,skipPristineCheck:q}),this._onDisabledChange.forEach(Le=>Le(!0))}enable(te={}){const q=this._parentMarkedDirty(te.onlySelf);this.status=Ce,this._forEachChild(Le=>{Le.enable({...te,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:te.emitEvent}),this._updateAncestors({...te,skipPristineCheck:q}),this._onDisabledChange.forEach(Le=>Le(!1))}_updateAncestors(te){this._parent&&!te.onlySelf&&(this._parent.updateValueAndValidity(te),te.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(te){this._parent=te}getRawValue(){return this.value}updateValueAndValidity(te={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ce||this.status===bt)&&this._runAsyncValidator(te.emitEvent)),!1!==te.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!te.onlySelf&&this._parent.updateValueAndValidity(te)}_updateTreeValidity(te={emitEvent:!0}){this._forEachChild(q=>q._updateTreeValidity(te)),this.updateValueAndValidity({onlySelf:!0,emitEvent:te.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pt:Ce}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(te){if(this.asyncValidator){this.status=bt,this._hasOwnPendingAsyncValidator=!0;const q=_i(this.asyncValidator(this));this._asyncValidationSubscription=q.subscribe(Le=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Le,{emitEvent:te})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(te,q={}){this.errors=te,this._updateControlsErrors(!1!==q.emitEvent)}get(te){let q=te;return null==q||(Array.isArray(q)||(q=q.split(".")),0===q.length)?null:q.reduce((Le,xn)=>Le&&Le._find(xn),this)}getError(te,q){const Le=q?this.get(q):this;return Le&&Le.errors?Le.errors[te]:null}hasError(te,q){return!!this.getError(te,q)}get root(){let te=this;for(;te._parent;)te=te._parent;return te}_updateControlsErrors(te){this.status=this._calculateStatus(),te&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(te)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Pt:this.errors?Ke:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bt)?bt:this._anyControlsHaveStatus(Ke)?Ke:Ce}_anyControlsHaveStatus(te){return this._anyControls(q=>q.status===te)}_anyControlsDirty(){return this._anyControls(te=>te.dirty)}_anyControlsTouched(){return this._anyControls(te=>te.touched)}_updatePristine(te={}){this.pristine=!this._anyControlsDirty(),this._parent&&!te.onlySelf&&this._parent._updatePristine(te)}_updateTouched(te={}){this.touched=this._anyControlsTouched(),this._parent&&!te.onlySelf&&this._parent._updateTouched(te)}_registerOnCollectionChange(te){this._onCollectionChange=te}_setUpdateStrategy(te){nt(te)&&null!=te.updateOn&&(this._updateOn=te.updateOn)}_parentMarkedDirty(te){return!te&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(te){return null}_assignValidators(te){this._rawValidators=Array.isArray(te)?te.slice():te,this._composedValidatorFn=function ee(oe){return Array.isArray(oe)?ze(oe):oe||null}(this._rawValidators)}_assignAsyncValidators(te){this._rawAsyncValidators=Array.isArray(te)?te.slice():te,this._composedAsyncValidatorFn=function we(oe){return Array.isArray(oe)?Nt(oe):oe||null}(this._rawAsyncValidators)}}class Hn extends Yn{constructor(te,q,Le){super(me(q),U(Le,q)),this.controls=te,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(te,q){return this.controls[te]?this.controls[te]:(this.controls[te]=q,q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange),q)}addControl(te,q,Le={}){this.registerControl(te,q),this.updateValueAndValidity({emitEvent:Le.emitEvent}),this._onCollectionChange()}removeControl(te,q={}){this.controls[te]&&this.controls[te]._registerOnCollectionChange(()=>{}),delete this.controls[te],this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}setControl(te,q,Le={}){this.controls[te]&&this.controls[te]._registerOnCollectionChange(()=>{}),delete this.controls[te],q&&this.registerControl(te,q),this.updateValueAndValidity({emitEvent:Le.emitEvent}),this._onCollectionChange()}contains(te){return this.controls.hasOwnProperty(te)&&this.controls[te].enabled}setValue(te,q={}){Kt(this,!0,te),Object.keys(te).forEach(Le=>{Jt(this,!0,Le),this.controls[Le].setValue(te[Le],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(te,q={}){null!=te&&(Object.keys(te).forEach(Le=>{const xn=this.controls[Le];xn&&xn.patchValue(te[Le],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(te={},q={}){this._forEachChild((Le,xn)=>{Le.reset(te[xn],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this._reduceChildren({},(te,q,Le)=>(te[Le]=q.getRawValue(),te))}_syncPendingControls(){let te=this._reduceChildren(!1,(q,Le)=>!!Le._syncPendingControls()||q);return te&&this.updateValueAndValidity({onlySelf:!0}),te}_forEachChild(te){Object.keys(this.controls).forEach(q=>{const Le=this.controls[q];Le&&te(Le,q)})}_setUpControls(){this._forEachChild(te=>{te.setParent(this),te._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(te){for(const[q,Le]of Object.entries(this.controls))if(this.contains(q)&&te(Le))return!0;return!1}_reduceValue(){return this._reduceChildren({},(q,Le,xn)=>((Le.enabled||this.disabled)&&(q[xn]=Le.value),q))}_reduceChildren(te,q){let Le=te;return this._forEachChild((xn,Ti)=>{Le=q(Le,xn,Ti)}),Le}_allControlsDisabled(){for(const te of Object.keys(this.controls))if(this.controls[te].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(te){return this.controls.hasOwnProperty(te)?this.controls[te]:null}}class Rt extends Hn{}const se=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>le}),le="always";function Fe(oe,te){return[...te.path,oe]}function Et(oe,te,q=le){yr(oe,te),te.valueAccessor.writeValue(oe.value),(oe.disabled||"always"===q)&&te.valueAccessor.setDisabledState?.(oe.disabled),function Wi(oe,te){te.valueAccessor.registerOnChange(q=>{oe._pendingValue=q,oe._pendingChange=!0,oe._pendingDirty=!0,"change"===oe.updateOn&&vr(oe,te)})}(oe,te),function so(oe,te){const q=(Le,xn)=>{te.valueAccessor.writeValue(Le),xn&&te.viewToModelUpdate(Le)};oe.registerOnChange(q),te._registerOnDestroy(()=>{oe._unregisterOnChange(q)})}(oe,te),function oo(oe,te){te.valueAccessor.registerOnTouched(()=>{oe._pendingTouched=!0,"blur"===oe.updateOn&&oe._pendingChange&&vr(oe,te),"submit"!==oe.updateOn&&oe.markAsTouched()})}(oe,te),function Ai(oe,te){if(te.valueAccessor.setDisabledState){const q=Le=>{te.valueAccessor.setDisabledState(Le)};oe.registerOnDisabledChange(q),te._registerOnDestroy(()=>{oe._unregisterOnDisabledChange(q)})}}(oe,te)}function rn(oe,te,q=!0){const Le=()=>{};te.valueAccessor&&(te.valueAccessor.registerOnChange(Le),te.valueAccessor.registerOnTouched(Le)),Rr(oe,te),oe&&(te._invokeOnDestroyCallbacks(),oe._registerOnCollectionChange(()=>{}))}function Gn(oe,te){oe.forEach(q=>{q.registerOnValidatorChange&&q.registerOnValidatorChange(te)})}function yr(oe,te){const q=Ot(oe);null!==te.validator?oe.setValidators(We(q,te.validator)):"function"==typeof q&&oe.setValidators([q]);const Le=Re(oe);null!==te.asyncValidator?oe.setAsyncValidators(We(Le,te.asyncValidator)):"function"==typeof Le&&oe.setAsyncValidators([Le]);const xn=()=>oe.updateValueAndValidity();Gn(te._rawValidators,xn),Gn(te._rawAsyncValidators,xn)}function Rr(oe,te){let q=!1;if(null!==oe){if(null!==te.validator){const xn=Ot(oe);if(Array.isArray(xn)&&xn.length>0){const Ti=xn.filter(Ur=>Ur!==te.validator);Ti.length!==xn.length&&(q=!0,oe.setValidators(Ti))}}if(null!==te.asyncValidator){const xn=Re(oe);if(Array.isArray(xn)&&xn.length>0){const Ti=xn.filter(Ur=>Ur!==te.asyncValidator);Ti.length!==xn.length&&(q=!0,oe.setAsyncValidators(Ti))}}}const Le=()=>{};return Gn(te._rawValidators,Le),Gn(te._rawAsyncValidators,Le),q}function vr(oe,te){oe._pendingDirty&&oe.markAsDirty(),oe.setValue(oe._pendingValue,{emitModelToViewChange:!1}),te.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1}function To(oe,te){yr(oe,te)}function wo(oe,te){if(!oe.hasOwnProperty("model"))return!1;const q=oe.model;return!!q.isFirstChange()||!Object.is(te,q.currentValue)}function at(oe,te){oe._syncPendingControls(),te.forEach(q=>{const Le=q.control;"submit"===Le.updateOn&&Le._pendingChange&&(q.viewToModelUpdate(Le._pendingValue),Le._pendingChange=!1)})}function vt(oe,te){if(!te)return null;let q,Le,xn;return Array.isArray(te),te.forEach(Ti=>{Ti.constructor===pt?q=Ti:function wn(oe){return Object.getPrototypeOf(oe.constructor)===_t}(Ti)?Le=Ti:xn=Ti}),xn||Le||q||null}const Se={provide:Gt,useExisting:(0,p.Gpc)(()=>An)},et=(()=>Promise.resolve())();let An=(()=>{class oe extends Gt{constructor(q,Le,xn){super(),this.callSetDisabledState=xn,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Hn({},ze(q),Nt(Le))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(q){et.then(()=>{const Le=this._findContainer(q.path);q.control=Le.registerControl(q.name,q.control),Et(q.control,q,this.callSetDisabledState),q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(q)})}getControl(q){return this.form.get(q.path)}removeControl(q){et.then(()=>{const Le=this._findContainer(q.path);Le&&Le.removeControl(q.name),this._directives.delete(q)})}addFormGroup(q){et.then(()=>{const Le=this._findContainer(q.path),xn=new Hn({});To(xn,q),Le.registerControl(q.name,xn),xn.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(q){et.then(()=>{const Le=this._findContainer(q.path);Le&&Le.removeControl(q.name)})}getFormGroup(q){return this.form.get(q.path)}updateModel(q,Le){et.then(()=>{this.form.get(q.path).setValue(Le)})}setValue(q){this.control.setValue(q)}onSubmit(q){return this.submitted=!0,at(this.form,this._directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(q){return q.pop(),q.length?this.form.get(q):this.form}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(nn,10),p.Y36(sn,10),p.Y36(se,8))},oe.\u0275dir=p.lG2({type:oe,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,Le){1&q&&p.NdJ("submit",function(Ti){return Le.onSubmit(Ti)})("reset",function(){return Le.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Se]),p.qOj]}),oe})();function mi(oe,te){const q=oe.indexOf(te);q>-1&&oe.splice(q,1)}function fn(oe){return"object"==typeof oe&&null!==oe&&2===Object.keys(oe).length&&"value"in oe&&"disabled"in oe}const xi=class extends Yn{constructor(te=null,q,Le){super(me(q),U(Le,q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(te),this._setUpdateStrategy(q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nt(q)&&(q.nonNullable||q.initialValueIsDefault)&&(this.defaultValue=fn(te)?te.value:te)}setValue(te,q={}){this.value=this._pendingValue=te,this._onChange.length&&!1!==q.emitModelToViewChange&&this._onChange.forEach(Le=>Le(this.value,!1!==q.emitViewToModelChange)),this.updateValueAndValidity(q)}patchValue(te,q={}){this.setValue(te,q)}reset(te=this.defaultValue,q={}){this._applyFormState(te),this.markAsPristine(q),this.markAsUntouched(q),this.setValue(this.value,q),this._pendingChange=!1}_updateValue(){}_anyControls(te){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(te){this._onChange.push(te)}_unregisterOnChange(te){mi(this._onChange,te)}registerOnDisabledChange(te){this._onDisabledChange.push(te)}_unregisterOnDisabledChange(te){mi(this._onDisabledChange,te)}_forEachChild(te){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(te){fn(te)?(this.value=this._pendingValue=te.value,te.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=te}},cr={provide:On,useExisting:(0,p.Gpc)(()=>Es)},Co=(()=>Promise.resolve())();let Es=(()=>{class oe extends On{constructor(q,Le,xn,Ti,Ur,Sn){super(),this._changeDetectorRef=Ur,this.callSetDisabledState=Sn,this.control=new xi,this._registered=!1,this.update=new p.vpe,this._parent=q,this._setValidators(Le),this._setAsyncValidators(xn),this.valueAccessor=vt(0,Ti)}ngOnChanges(q){if(this._checkForErrors(),!this._registered||"name"in q){if(this._registered&&(this._checkName(),this.formDirective)){const Le=q.name.previousValue;this.formDirective.removeControl({name:Le,path:this._getPath(Le)})}this._setUpControl()}"isDisabled"in q&&this._updateDisabled(q),wo(q,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Et(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(q){Co.then(()=>{this.control.setValue(q,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(q){const Le=q.isDisabled.currentValue,xn=0!==Le&&(0,p.D6c)(Le);Co.then(()=>{xn&&!this.control.disabled?this.control.disable():!xn&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(q){return this._parent?Fe(q,this._parent):[q]}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(Gt,9),p.Y36(nn,10),p.Y36(sn,10),p.Y36(ke,10),p.Y36(p.sBO,8),p.Y36(se,8))},oe.\u0275dir=p.lG2({type:oe,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([cr]),p.qOj,p.TTD]}),oe})(),fr=(()=>{class oe{}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275dir=p.lG2({type:oe,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),oe})(),So=(()=>{class oe{}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275mod=p.oAB({type:oe}),oe.\u0275inj=p.cJS({}),oe})();const _o=new p.OlP("NgModelWithFormControlWarning"),_s={provide:Gt,useExisting:(0,p.Gpc)(()=>zr)};let zr=(()=>{class oe extends Gt{constructor(q,Le,xn){super(),this.callSetDisabledState=xn,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(q),this._setAsyncValidators(Le)}ngOnChanges(q){this._checkFormPresent(),q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(q){const Le=this.form.get(q.path);return Et(Le,q,this.callSetDisabledState),Le.updateValueAndValidity({emitEvent:!1}),this.directives.push(q),Le}getControl(q){return this.form.get(q.path)}removeControl(q){rn(q.control||null,q,!1),function I(oe,te){const q=oe.indexOf(te);q>-1&&oe.splice(q,1)}(this.directives,q)}addFormGroup(q){this._setUpFormContainer(q)}removeFormGroup(q){this._cleanUpFormContainer(q)}getFormGroup(q){return this.form.get(q.path)}addFormArray(q){this._setUpFormContainer(q)}removeFormArray(q){this._cleanUpFormContainer(q)}getFormArray(q){return this.form.get(q.path)}updateModel(q,Le){this.form.get(q.path).setValue(Le)}onSubmit(q){return this.submitted=!0,at(this.form,this.directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_updateDomValue(){this.directives.forEach(q=>{const Le=q.control,xn=this.form.get(q.path);Le!==xn&&(rn(Le||null,q),(oe=>oe instanceof xi)(xn)&&(Et(xn,q,this.callSetDisabledState),q.control=xn))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(q){const Le=this.form.get(q.path);To(Le,q),Le.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(q){if(this.form){const Le=this.form.get(q.path);Le&&function $i(oe,te){return Rr(oe,te)}(Le,q)&&Le.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yr(this.form,this),this._oldForm&&Rr(this._oldForm,this)}_checkFormPresent(){}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(nn,10),p.Y36(sn,10),p.Y36(se,8))},oe.\u0275dir=p.lG2({type:oe,selectors:[["","formGroup",""]],hostBindings:function(q,Le){1&q&&p.NdJ("submit",function(Ti){return Le.onSubmit(Ti)})("reset",function(){return Le.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([_s]),p.qOj,p.TTD]}),oe})();const cs={provide:On,useExisting:(0,p.Gpc)(()=>Zs)};let Zs=(()=>{class oe extends On{set isDisabled(q){}constructor(q,Le,xn,Ti,Ur){super(),this._ngModelWarningConfig=Ur,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=q,this._setValidators(Le),this._setAsyncValidators(xn),this.valueAccessor=vt(0,Ti)}ngOnChanges(q){this._added||this._setUpControl(),wo(q,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}get path(){return Fe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return oe._ngModelWarningSentOnce=!1,oe.\u0275fac=function(q){return new(q||oe)(p.Y36(Gt,13),p.Y36(nn,10),p.Y36(sn,10),p.Y36(ke,10),p.Y36(_o,8))},oe.\u0275dir=p.lG2({type:oe,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([cs]),p.qOj,p.TTD]}),oe})();const Ms={provide:ke,useExisting:(0,p.Gpc)(()=>Ws),multi:!0};function Zo(oe,te){return null==oe?`${te}`:(te&&"object"==typeof te&&(te="Object"),`${oe}: ${te}`.slice(0,50))}let Ws=(()=>{class oe extends _t{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){this.value=q;const xn=Zo(this._getOptionId(q),q);this.setProperty("value",xn)}registerOnChange(q){this.onChange=Le=>{this.value=this._getOptionValue(Le),q(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(q){for(const Le of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Le),q))return Le;return null}_getOptionValue(q){const Le=function ga(oe){return oe.split(":")[0]}(q);return this._optionMap.has(Le)?this._optionMap.get(Le):q}}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275dir=p.lG2({type:oe,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(q,Le){1&q&&p.NdJ("change",function(Ti){return Le.onChange(Ti.target.value)})("blur",function(){return Le.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Ms]),p.qOj]}),oe})(),_a=(()=>{class oe{constructor(q,Le,xn){this._element=q,this._renderer=Le,this._select=xn,this._select&&(this.id=this._select._registerOption())}set ngValue(q){null!=this._select&&(this._select._optionMap.set(this.id,q),this._setElementValue(Zo(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._setElementValue(q),this._select&&this._select.writeValue(this._select.value)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ws,9))},oe.\u0275dir=p.lG2({type:oe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),oe})();const us={provide:ke,useExisting:(0,p.Gpc)(()=>lo),multi:!0};function ds(oe,te){return null==oe?`${te}`:("string"==typeof te&&(te=`'${te}'`),te&&"object"==typeof te&&(te="Object"),`${oe}: ${te}`.slice(0,50))}let lo=(()=>{class oe extends _t{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){let Le;if(this.value=q,Array.isArray(q)){const xn=q.map(Ti=>this._getOptionId(Ti));Le=(Ti,Ur)=>{Ti._setSelected(xn.indexOf(Ur.toString())>-1)}}else Le=(xn,Ti)=>{xn._setSelected(!1)};this._optionMap.forEach(Le)}registerOnChange(q){this.onChange=Le=>{const xn=[],Ti=Le.selectedOptions;if(void 0!==Ti){const Ur=Ti;for(let Sn=0;Sn<Ur.length;Sn++){const bs=this._getOptionValue(Ur[Sn].value);xn.push(bs)}}else{const Ur=Le.options;for(let Sn=0;Sn<Ur.length;Sn++){const Xi=Ur[Sn];if(Xi.selected){const bs=this._getOptionValue(Xi.value);xn.push(bs)}}}this.value=xn,q(xn)}}_registerOption(q){const Le=(this._idCounter++).toString();return this._optionMap.set(Le,q),Le}_getOptionId(q){for(const Le of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Le)._value,q))return Le;return null}_getOptionValue(q){const Le=function Fa(oe){return oe.split(":")[0]}(q);return this._optionMap.has(Le)?this._optionMap.get(Le)._value:q}}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275dir=p.lG2({type:oe,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(q,Le){1&q&&p.NdJ("change",function(Ti){return Le.onChange(Ti.target)})("blur",function(){return Le.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([us]),p.qOj]}),oe})(),Ps=(()=>{class oe{constructor(q,Le,xn){this._element=q,this._renderer=Le,this._select=xn,this._select&&(this.id=this._select._registerOption(this))}set ngValue(q){null!=this._select&&(this._value=q,this._setElementValue(ds(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._select?(this._value=q,this._setElementValue(ds(this.id,q)),this._select.writeValue(this._select.value)):this._setElementValue(q)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}_setSelected(q){this._renderer.setProperty(this._element.nativeElement,"selected",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return oe.\u0275fac=function(q){return new(q||oe)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(lo,9))},oe.\u0275dir=p.lG2({type:oe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),oe})(),ys=(()=>{class oe{constructor(){this._validator=ti}ngOnChanges(q){if(this.inputName in q){const Le=this.normalizeInput(q[this.inputName].currentValue);this._enabled=this.enabled(Le),this._validator=this._enabled?this.createValidator(Le):ti,this._onChange&&this._onChange()}}validate(q){return this._validator(q)}registerOnValidatorChange(q){this._onChange=q}enabled(q){return null!=q}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275dir=p.lG2({type:oe,features:[p.TTD]}),oe})();const Ea={provide:nn,useExisting:(0,p.Gpc)(()=>Zi),multi:!0},Ts={provide:nn,useExisting:(0,p.Gpc)(()=>Za),multi:!0};let Zi=(()=>{class oe extends ys{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=q=>ht}enabled(q){return q}}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275dir=p.lG2({type:oe,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(q,Le){2&q&&p.uIk("required",Le._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Ea]),p.qOj]}),oe})(),Za=(()=>{class oe extends Zi{constructor(){super(...arguments),this.createValidator=q=>mt}}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275dir=p.lG2({type:oe,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(q,Le){2&q&&p.uIk("required",Le._enabled?"":null)},features:[p._Bn([Ts]),p.qOj]}),oe})(),ps=(()=>{class oe{}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275mod=p.oAB({type:oe}),oe.\u0275inj=p.cJS({imports:[So]}),oe})();class vs extends Yn{constructor(te,q,Le){super(me(q),U(Le,q)),this.controls=te,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(te){return this.controls[this._adjustIndex(te)]}push(te,q={}){this.controls.push(te),this._registerControl(te),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}insert(te,q,Le={}){this.controls.splice(te,0,q),this._registerControl(q),this.updateValueAndValidity({emitEvent:Le.emitEvent})}removeAt(te,q={}){let Le=this._adjustIndex(te);Le<0&&(Le=0),this.controls[Le]&&this.controls[Le]._registerOnCollectionChange(()=>{}),this.controls.splice(Le,1),this.updateValueAndValidity({emitEvent:q.emitEvent})}setControl(te,q,Le={}){let xn=this._adjustIndex(te);xn<0&&(xn=0),this.controls[xn]&&this.controls[xn]._registerOnCollectionChange(()=>{}),this.controls.splice(xn,1),q&&(this.controls.splice(xn,0,q),this._registerControl(q)),this.updateValueAndValidity({emitEvent:Le.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(te,q={}){Kt(this,!1,te),te.forEach((Le,xn)=>{Jt(this,!1,xn),this.at(xn).setValue(Le,{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(te,q={}){null!=te&&(te.forEach((Le,xn)=>{this.at(xn)&&this.at(xn).patchValue(Le,{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(te=[],q={}){this._forEachChild((Le,xn)=>{Le.reset(te[xn],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this.controls.map(te=>te.getRawValue())}clear(te={}){this.controls.length<1||(this._forEachChild(q=>q._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:te.emitEvent}))}_adjustIndex(te){return te<0?te+this.length:te}_syncPendingControls(){let te=this.controls.reduce((q,Le)=>!!Le._syncPendingControls()||q,!1);return te&&this.updateValueAndValidity({onlySelf:!0}),te}_forEachChild(te){this.controls.forEach((q,Le)=>{te(q,Le)})}_updateValue(){this.value=this.controls.filter(te=>te.enabled||this.disabled).map(te=>te.value)}_anyControls(te){return this.controls.some(q=>q.enabled&&te(q))}_setUpControls(){this._forEachChild(te=>this._registerControl(te))}_allControlsDisabled(){for(const te of this.controls)if(te.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(te){te.setParent(this),te._registerOnCollectionChange(this._onCollectionChange)}_find(te){return this.at(te)??null}}function Rs(oe){return!!oe&&(void 0!==oe.asyncValidators||void 0!==oe.validators||void 0!==oe.updateOn)}let la=(()=>{class oe{constructor(){this.useNonNullable=!1}get nonNullable(){const q=new oe;return q.useNonNullable=!0,q}group(q,Le=null){const xn=this._reduceControls(q);let Ti={};return Rs(Le)?Ti=Le:null!==Le&&(Ti.validators=Le.validator,Ti.asyncValidators=Le.asyncValidator),new Hn(xn,Ti)}record(q,Le=null){const xn=this._reduceControls(q);return new Rt(xn,Le)}control(q,Le,xn){let Ti={};return this.useNonNullable?(Rs(Le)?Ti=Le:(Ti.validators=Le,Ti.asyncValidators=xn),new xi(q,{...Ti,nonNullable:!0})):new xi(q,Le,xn)}array(q,Le,xn){const Ti=q.map(Ur=>this._createControl(Ur));return new vs(Ti,Le,xn)}_reduceControls(q){const Le={};return Object.keys(q).forEach(xn=>{Le[xn]=this._createControl(q[xn])}),Le}_createControl(q){return q instanceof xi||q instanceof Yn?q:Array.isArray(q)?this.control(q[0],q.length>1?q[1]:null,q.length>2?q[2]:null):this.control(q)}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275prov=p.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})(),Yi=(()=>{class oe extends la{group(q,Le=null){return super.group(q,Le)}control(q,Le,xn){return super.control(q,Le,xn)}array(q,Le,xn){return super.array(q,Le,xn)}}return oe.\u0275fac=function(){let te;return function(Le){return(te||(te=p.n5z(oe)))(Le||oe)}}(),oe.\u0275prov=p.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})(),zi=(()=>{class oe{static withConfig(q){return{ngModule:oe,providers:[{provide:se,useValue:q.callSetDisabledState??le}]}}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275mod=p.oAB({type:oe}),oe.\u0275inj=p.cJS({imports:[ps]}),oe})(),Fs=(()=>{class oe{static withConfig(q){return{ngModule:oe,providers:[{provide:_o,useValue:q.warnOnNgModelWithFormControl??"always"},{provide:se,useValue:q.callSetDisabledState??le}]}}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275mod=p.oAB({type:oe}),oe.\u0275inj=p.cJS({imports:[ps]}),oe})()},3805:(ni,Wt,F)=>{"use strict";F.d(Wt,{XC:()=>Gt,Bb:()=>De,ZL:()=>ce});var p=F(4650),j=F(3238),Q=F(6895),o=F(8605),P=F(8184),st=F(7253),_t=F(1281),ke=F(3353),Ye=F(7340),lt=F(727),wt=F(7579),it=F(9770),yt=F(6451),pt=F(9646),jt=F(4968),en=F(9521),Ct=F(4080),nn=F(4006),sn=F(9549),Cn=F(8675),kt=F(3900),Ae=F(5698),ct=F(9300),ht=F(4004),mt=F(8505),Je=F(4986),qt=F(7272),ln=F(4482),Dn=F(5403),ti=F(5032),_i=F(9718),ii=F(5577),vi=F(8421);function Ii($e,Ft){return Ft?Qe=>(0,qt.z)(Ft.pipe((0,Ae.q)(1),function _n(){return(0,ln.e)(($e,Ft)=>{$e.subscribe((0,Dn.x)(Ft,ti.Z))})}()),Qe.pipe(Ii($e))):(0,ii.z)((Qe,Te)=>(0,vi.Xf)($e(Qe,Te)).pipe((0,Ae.q)(1),(0,_i.h)(Qe)))}var Yt=F(5963),ze=F(445);const Ge=["panel"];function Nt($e,Ft){if(1&$e&&(p.TgZ(0,"div",0,1),p.Hsn(2),p.qZA()),2&$e){const Qe=Ft.id,Te=p.oxw();p.Q6J("id",Te.id)("ngClass",Te._classList)("@panelAnimation",Te.isOpen?"visible":"hidden"),p.uIk("aria-label",Te.ariaLabel||null)("aria-labelledby",Te._getPanelAriaLabelledby(Qe))}}const We=["*"],Ot=(0,Ye.X$)("panelAnimation",[(0,Ye.SB)("void, hidden",(0,Ye.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,Ye.eR)(":enter, hidden => visible",[(0,Ye.ru)([(0,Ye.jt)("0.03s linear",(0,Ye.oB)({opacity:1})),(0,Ye.jt)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,Ye.oB)({transform:"scaleY(1)"}))])]),(0,Ye.eR)(":leave, visible => hidden",[(0,Ye.jt)("0.075s linear",(0,Ye.oB)({opacity:0}))])]);let Re=0;class ft{constructor(Ft,Qe){this.source=Ft,this.option=Qe}}const cn=(0,j.Kr)(class{}),kn=new p.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function an(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1}}});let Mn=(()=>{class $e extends cn{get isOpen(){return this._isOpen&&this.showPanel}_setColor(Qe){this._color=Qe,this._setThemeClasses(this._classList)}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(Qe){this._autoActiveFirstOption=(0,_t.Ig)(Qe)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(Qe){this._autoSelectActiveOption=(0,_t.Ig)(Qe)}set classList(Qe){this._classList=Qe&&Qe.length?(0,_t.du)(Qe).reduce((Te,xe)=>(Te[xe]=!0,Te),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}constructor(Qe,Te,xe,ve){super(),this._changeDetectorRef=Qe,this._elementRef=Te,this._defaults=xe,this._activeOptionChanges=lt.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this._autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this._autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.optionSelected=new p.vpe,this.opened=new p.vpe,this.closed=new p.vpe,this.optionActivated=new p.vpe,this._classList={},this.id="mat-autocomplete-"+Re++,this.inertGroups=ve?.SAFARI||!1}ngAfterContentInit(){this._keyManager=new st.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(Qe=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[Qe]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(Qe){this.panel&&(this.panel.nativeElement.scrollTop=Qe)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(Qe){const Te=new ft(this,Qe);this.optionSelected.emit(Te)}_getPanelAriaLabelledby(Qe){return this.ariaLabel?null:this.ariaLabelledby?(Qe?Qe+" ":"")+this.ariaLabelledby:Qe}_setVisibilityClasses(Qe){Qe[this._visibleClass]=this.showPanel,Qe[this._hiddenClass]=!this.showPanel}_setThemeClasses(Qe){Qe["mat-primary"]="primary"===this._color,Qe["mat-warn"]="warn"===this._color,Qe["mat-accent"]="accent"===this._color}}return $e.\u0275fac=function(Qe){return new(Qe||$e)(p.Y36(p.sBO),p.Y36(p.SBq),p.Y36(kn),p.Y36(ke.t4))},$e.\u0275dir=p.lG2({type:$e,viewQuery:function(Qe,Te){if(1&Qe&&(p.Gf(p.Rgc,7),p.Gf(Ge,5)),2&Qe){let xe;p.iGM(xe=p.CRH())&&(Te.template=xe.first),p.iGM(xe=p.CRH())&&(Te.panel=xe.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[p.qOj]}),$e})(),Gt=(()=>{class $e extends Mn{constructor(){super(...arguments),this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(Qe){this._hideSingleSelectionIndicator=(0,_t.Ig)(Qe),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const Qe of this.options)Qe._changeDetectorRef.markForCheck()}}return $e.\u0275fac=function(){let Ft;return function(Te){return(Ft||(Ft=p.n5z($e)))(Te||$e)}}(),$e.\u0275cmp=p.Xpm({type:$e,selectors:[["mat-autocomplete"]],contentQueries:function(Qe,Te,xe){if(1&Qe&&(p.Suo(xe,j.K7,5),p.Suo(xe,j.ey,5)),2&Qe){let ve;p.iGM(ve=p.CRH())&&(Te.optionGroups=ve),p.iGM(ve=p.CRH())&&(Te.options=ve)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[p._Bn([{provide:j.HF,useExisting:$e}]),p.qOj],ngContentSelectors:We,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(Qe,Te){1&Qe&&(p.F$t(),p.YNc(0,Nt,3,5,"ng-template"))},dependencies:[Q.mk],styles:[".mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mdc-menu-surface.mat-mdc-autocomplete-panel{width:100%;max-height:256px;position:static;visibility:hidden;transform-origin:center top;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-autocomplete-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) .mdc-menu-surface.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above .mdc-menu-surface.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}.mdc-menu-surface.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}.mdc-menu-surface.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[Ot]},changeDetection:0}),$e})();const zt={provide:nn.JU,useExisting:(0,p.Gpc)(()=>ce),multi:!0},Fn=new p.OlP("mat-autocomplete-scroll-strategy"),li={provide:Fn,deps:[P.aV],useFactory:function It($e){return()=>$e.scrollStrategies.reposition()}};let je=(()=>{class $e{get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(Qe){this._autocompleteDisabled=(0,_t.Ig)(Qe)}constructor(Qe,Te,xe,ve,re,Me,Pe,Ut,Bn,En,Ue){this._element=Qe,this._overlay=Te,this._viewContainerRef=xe,this._zone=ve,this._changeDetectorRef=re,this._dir=Pe,this._formField=Ut,this._document=Bn,this._viewportRuler=En,this._defaults=Ue,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=lt.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new wt.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,it.P)(()=>{const ue=this.autocomplete?this.autocomplete.options:null;return ue?ue.changes.pipe((0,Cn.O)(ue),(0,kt.w)(()=>(0,yt.T)(...ue.map(Ce=>Ce.onSelectionChange)))):this._zone.onStable.pipe((0,Ae.q)(1),(0,kt.w)(()=>this.optionSelections))}),this._scrollStrategy=Me}ngAfterViewInit(){const Qe=this._getWindow();typeof Qe<"u"&&this._zone.runOutsideAngular(()=>Qe.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(Qe){Qe.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const Qe=this._getWindow();typeof Qe<"u"&&Qe.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,yt.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,ct.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,ct.h)(()=>this._overlayAttached)):(0,pt.of)()).pipe((0,ht.U)(Qe=>Qe instanceof j.rN?Qe:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,yt.T)((0,jt.R)(this._document,"click"),(0,jt.R)(this._document,"auxclick"),(0,jt.R)(this._document,"touchend")).pipe((0,ct.h)(Qe=>{const Te=(0,ke.sA)(Qe),xe=this._formField?this._formField._elementRef.nativeElement:null,ve=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&Te!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!xe||!xe.contains(Te))&&(!ve||!ve.contains(Te))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(Te)}))}writeValue(Qe){Promise.resolve(null).then(()=>this._assignOptionValue(Qe))}registerOnChange(Qe){this._onChange=Qe}registerOnTouched(Qe){this._onTouched=Qe}setDisabledState(Qe){this._element.nativeElement.disabled=Qe}_handleKeydown(Qe){const Te=Qe.keyCode,xe=(0,en.Vb)(Qe);if(Te===en.hY&&!xe&&Qe.preventDefault(),this.activeOption&&Te===en.K5&&this.panelOpen&&!xe)this.activeOption._selectViaInteraction(),this._resetActiveItem(),Qe.preventDefault();else if(this.autocomplete){const ve=this.autocomplete._keyManager.activeItem,re=Te===en.LH||Te===en.JH;Te===en.Mf||re&&!xe&&this.panelOpen?this.autocomplete._keyManager.onKeydown(Qe):re&&this._canOpen()&&this.openPanel(),(re||this.autocomplete._keyManager.activeItem!==ve)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(Qe){let Te=Qe.target,xe=Te.value;"number"===Te.type&&(xe=""==xe?null:parseFloat(xe)),this._previousValue!==xe&&(this._previousValue=xe,this._pendingAutoselectedOption=null,this._onChange(xe),this._canOpen()&&this._document.activeElement===Qe.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(Qe=!1){this._formField&&"auto"===this._formField.floatLabel&&(Qe?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const Qe=this._zone.onStable.pipe((0,Ae.q)(1)),Te=this.autocomplete.options.changes.pipe((0,mt.b)(()=>this._positionStrategy.reapplyLastPosition()),function Zt($e,Ft=Je.z){const Qe=(0,Yt.H)($e,Ft);return Ii(()=>Qe)}(0));return(0,yt.T)(Qe,Te).pipe((0,kt.w)(()=>(this._zone.run(()=>{const xe=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),xe!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,Ae.q)(1)).subscribe(xe=>this._setValueAndClose(xe))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(Qe){const Te=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(Qe):Qe;this._updateNativeInputValue(Te??"")}_updateNativeInputValue(Qe){this._formField?this._formField._control.value=Qe:this._element.nativeElement.value=Qe,this._previousValue=Qe}_setValueAndClose(Qe){const Te=Qe?Qe.source:this._pendingAutoselectedOption;Te&&(this._clearPreviousSelectedOption(Te),this._assignOptionValue(Te.value),this._onChange(Te.value),this.autocomplete._emitSelectEvent(Te),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(Qe){this.autocomplete.options.forEach(Te=>{Te!==Qe&&Te.selected&&Te.deselect()})}_attachOverlay(){let Qe=this._overlayRef;Qe?(this._positionStrategy.setOrigin(this._getConnectedElement()),Qe.updateSize({width:this._getPanelWidth()})):(this._portal=new Ct.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),Qe=this._overlay.create(this._getOverlayConfig()),this._overlayRef=Qe,this._handleOverlayEvents(Qe),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&Qe&&Qe.updateSize({width:this._getPanelWidth()})})),Qe&&!Qe.hasAttached()&&(Qe.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const Te=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this.panelOpen&&Te!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new P.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const Qe=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(Qe),this._positionStrategy=Qe,Qe}_setStrategyPositions(Qe){const Te=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],xe=this._aboveClass,ve=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:xe},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:xe}];let re;re="above"===this.position?ve:"below"===this.position?Te:[...Te,...ve],Qe.withPositions(re)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const Qe=this.autocomplete;Qe.autoActiveFirstOption?Qe._keyManager.setFirstItemActive():Qe._keyManager.setActiveItem(-1)}_canOpen(){const Qe=this._element.nativeElement;return!Qe.readOnly&&!Qe.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(Qe){const Te=this.autocomplete,xe=(0,j.CB)(Qe,Te.options,Te.optionGroups);if(0===Qe&&1===xe)Te._setScrollTop(0);else if(Te.panel){const ve=Te.options.toArray()[Qe];if(ve){const re=ve._getHostElement(),Me=(0,j.jH)(re.offsetTop,re.offsetHeight,Te._getScrollTop(),Te.panel.nativeElement.offsetHeight);Te._setScrollTop(Me)}}}_handleOverlayEvents(Qe){Qe.keydownEvents().subscribe(Te=>{(Te.keyCode===en.hY&&!(0,en.Vb)(Te)||Te.keyCode===en.LH&&(0,en.Vb)(Te,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),Te.stopPropagation(),Te.preventDefault())}),Qe.outsidePointerEvents().subscribe()}}return $e.\u0275fac=function(Qe){return new(Qe||$e)(p.Y36(p.SBq),p.Y36(P.aV),p.Y36(p.s_b),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(Fn),p.Y36(ze.Is,8),p.Y36(sn.G_,9),p.Y36(Q.K0,8),p.Y36(o.rL),p.Y36(kn,8))},$e.\u0275dir=p.lG2({type:$e,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[p.TTD]}),$e})(),ce=(()=>{class $e extends je{constructor(){super(...arguments),this._aboveClass="mat-mdc-autocomplete-panel-above"}}return $e.\u0275fac=function(){let Ft;return function(Te){return(Ft||(Ft=p.n5z($e)))(Te||$e)}}(),$e.\u0275dir=p.lG2({type:$e,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(Qe,Te){1&Qe&&p.NdJ("focusin",function(){return Te._handleFocus()})("blur",function(){return Te._onTouched()})("input",function(ve){return Te._handleInput(ve)})("keydown",function(ve){return Te._handleKeydown(ve)})("click",function(){return Te._handleClick()}),2&Qe&&p.uIk("autocomplete",Te.autocompleteAttribute)("role",Te.autocompleteDisabled?null:"combobox")("aria-autocomplete",Te.autocompleteDisabled?null:"list")("aria-activedescendant",Te.panelOpen&&Te.activeOption?Te.activeOption.id:null)("aria-expanded",Te.autocompleteDisabled?null:Te.panelOpen.toString())("aria-owns",Te.autocompleteDisabled||!Te.panelOpen||null==Te.autocomplete?null:Te.autocomplete.id)("aria-haspopup",Te.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[p._Bn([zt]),p.qOj]}),$e})(),De=(()=>{class $e{}return $e.\u0275fac=function(Qe){return new(Qe||$e)},$e.\u0275mod=p.oAB({type:$e}),$e.\u0275inj=p.cJS({providers:[li],imports:[P.U8,j.Ng,j.BQ,Q.ez,o.ZD,j.Ng,j.BQ]}),$e})()},4859:(ni,Wt,F)=>{"use strict";F.d(Wt,{RK:()=>vi,lW:()=>ht,ot:()=>Yt});var p=F(3353),j=F(4650),Q=F(7253),o=F(3238);const P=["mat-button",""],st=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],_t=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],yt=["mat-icon-button",""],pt=["*"],nn=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],sn=(0,o.pj)((0,o.Id)((0,o.Kr)(class{constructor(Zt){this._elementRef=Zt}})));let Cn=(()=>{class Zt extends sn{constructor(Ge,Nt,We,Ot){super(Ge),this._platform=Nt,this._ngZone=We,this._animationMode=Ot,this._focusMonitor=(0,j.f3M)(Q.tE),this._isFab=!1;const Re=Ge.nativeElement.classList;for(const ft of nn)this._hasHostAttributes(ft.selector)&&ft.mdcClasses.forEach(cn=>{Re.add(cn)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ge="program",Nt){Ge?this._focusMonitor.focusVia(this._elementRef.nativeElement,Ge,Nt):this._elementRef.nativeElement.focus(Nt)}_hasHostAttributes(...Ge){return Ge.some(Nt=>this._elementRef.nativeElement.hasAttribute(Nt))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return Zt.\u0275fac=function(Ge){j.$Z()},Zt.\u0275dir=j.lG2({type:Zt,viewQuery:function(Ge,Nt){if(1&Ge&&j.Gf(o.wG,5),2&Ge){let We;j.iGM(We=j.CRH())&&(Nt.ripple=We.first)}},features:[j.qOj]}),Zt})(),ht=(()=>{class Zt extends Cn{constructor(Ge,Nt,We,Ot){super(Ge,Nt,We,Ot)}}return Zt.\u0275fac=function(Ge){return new(Ge||Zt)(j.Y36(j.SBq),j.Y36(p.t4),j.Y36(j.R0b),j.Y36(j.QbO,8))},Zt.\u0275cmp=j.Xpm({type:Zt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(Ge,Nt){2&Ge&&(j.uIk("disabled",Nt.disabled||null),j.ekj("_mat-animation-noopable","NoopAnimations"===Nt._animationMode)("mat-unthemed",!Nt.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[j.qOj],attrs:P,ngContentSelectors:_t,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Ge,Nt){1&Ge&&(j.F$t(st),j._UZ(0,"span",0),j.Hsn(1),j.TgZ(2,"span",1),j.Hsn(3,1),j.qZA(),j.Hsn(4,2),j._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&Ge&&(j.ekj("mdc-button__ripple",!Nt._isFab)("mdc-fab__ripple",Nt._isFab),j.xp6(6),j.Q6J("matRippleDisabled",Nt._isRippleDisabled())("matRippleTrigger",Nt._elementRef.nativeElement))},dependencies:[o.wG],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),Zt})(),vi=(()=>{class Zt extends Cn{constructor(Ge,Nt,We,Ot){super(Ge,Nt,We,Ot)}}return Zt.\u0275fac=function(Ge){return new(Ge||Zt)(j.Y36(j.SBq),j.Y36(p.t4),j.Y36(j.R0b),j.Y36(j.QbO,8))},Zt.\u0275cmp=j.Xpm({type:Zt,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(Ge,Nt){2&Ge&&(j.uIk("disabled",Nt.disabled||null),j.ekj("_mat-animation-noopable","NoopAnimations"===Nt._animationMode)("mat-unthemed",!Nt.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[j.qOj],attrs:yt,ngContentSelectors:pt,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(Ge,Nt){1&Ge&&(j.F$t(),j._UZ(0,"span",0),j.Hsn(1),j._UZ(2,"span",1)(3,"span",2)(4,"span",3)),2&Ge&&(j.xp6(3),j.Q6J("matRippleDisabled",Nt._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",Nt._elementRef.nativeElement))},dependencies:[o.wG],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),Zt})(),Yt=(()=>{class Zt{}return Zt.\u0275fac=function(Ge){return new(Ge||Zt)},Zt.\u0275mod=j.oAB({type:Zt}),Zt.\u0275inj=j.cJS({imports:[o.BQ,o.si,o.BQ]}),Zt})()},3546:(ni,Wt,F)=>{"use strict";F.d(Wt,{QW:()=>mt,a8:()=>lt,dn:()=>yt});var p=F(4650),j=F(6895),Q=F(3238);const o=["*"],Ye=new p.OlP("MAT_CARD_CONFIG");let lt=(()=>{class Je{constructor(ln){this.appearance=ln?.appearance||"raised"}}return Je.\u0275fac=function(ln){return new(ln||Je)(p.Y36(Ye,8))},Je.\u0275cmp=p.Xpm({type:Je,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(ln,Dn){2&ln&&p.ekj("mat-mdc-card-outlined","outlined"===Dn.appearance)("mdc-card--outlined","outlined"===Dn.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:o,decls:1,vars:0,template:function(ln,Dn){1&ln&&(p.F$t(),p.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),Je})(),yt=(()=>{class Je{}return Je.\u0275fac=function(ln){return new(ln||Je)},Je.\u0275dir=p.lG2({type:Je,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),Je})(),mt=(()=>{class Je{}return Je.\u0275fac=function(ln){return new(ln||Je)},Je.\u0275mod=p.oAB({type:Je}),Je.\u0275inj=p.cJS({imports:[Q.BQ,j.ez,Q.BQ]}),Je})()},3238:(ni,Wt,F)=>{"use strict";F.d(Wt,{yN:()=>Cn,mZ:()=>kt,_A:()=>Yt,rD:()=>cn,sG:()=>Zt,K7:()=>Ut,HF:()=>ve,BQ:()=>ht,XK:()=>Re,ey:()=>Ce,Ng:()=>Pt,rN:()=>Ue,wG:()=>Ft,si:()=>Qe,CB:()=>Ke,jH:()=>bt,pj:()=>Dn,Kr:()=>ti,Id:()=>ln,FD:()=>_i,dB:()=>ii,sb:()=>_n});var p=F(4650),j=F(7253),Q=F(445),P=F(6895),st=F(3353),_t=F(1281),ke=F(9751),Ye=F(7579),lt=F(9521);const yt=["text"];function pt(me,ee){if(1&me&&p._UZ(0,"mat-pseudo-checkbox",6),2&me){const U=p.oxw();p.Q6J("state",U.selected?"checked":"unchecked")("disabled",U.disabled)}}function jt(me,ee){if(1&me&&p._UZ(0,"mat-pseudo-checkbox",7),2&me){const U=p.oxw();p.Q6J("disabled",U.disabled)}}function en(me,ee){if(1&me&&(p.TgZ(0,"span",8),p._uU(1),p.qZA()),2&me){const U=p.oxw();p.xp6(1),p.hij("(",U.group.label,")")}}const Ct=[[["mat-icon"]],"*"],nn=["mat-icon","*"];let Cn=(()=>{class me{}return me.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",me.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",me.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",me.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",me})(),kt=(()=>{class me{}return me.COMPLEX="375ms",me.ENTERING="225ms",me.EXITING="195ms",me})();const ct=new p.OlP("mat-sanity-checks",{providedIn:"root",factory:function Ae(){return!0}});let ht=(()=>{class me{constructor(U,we,nt){this._sanityChecks=we,this._document=nt,this._hasDoneGlobalChecks=!1,U._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(U){return!(0,st.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[U])}}return me.\u0275fac=function(U){return new(U||me)(p.LFG(j.qm),p.LFG(ct,8),p.LFG(P.K0))},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({imports:[Q.vT,Q.vT]}),me})();function ln(me){return class extends me{get disabled(){return this._disabled}set disabled(ee){this._disabled=(0,_t.Ig)(ee)}constructor(...ee){super(...ee),this._disabled=!1}}}function Dn(me,ee){return class extends me{get color(){return this._color}set color(U){const we=U||this.defaultColor;we!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),we&&this._elementRef.nativeElement.classList.add(`mat-${we}`),this._color=we)}constructor(...U){super(...U),this.defaultColor=ee,this.color=ee}}}function ti(me){return class extends me{get disableRipple(){return this._disableRipple}set disableRipple(ee){this._disableRipple=(0,_t.Ig)(ee)}constructor(...ee){super(...ee),this._disableRipple=!1}}}function _n(me,ee=0){return class extends me{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(U){this._tabIndex=null!=U?(0,_t.su)(U):this.defaultTabIndex}constructor(...U){super(...U),this._tabIndex=ee,this.defaultTabIndex=ee}}}function _i(me){return class extends me{updateErrorState(){const ee=this.errorState,Jt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Jt!==ee&&(this.errorState=Jt,this.stateChanges.next())}constructor(...ee){super(...ee),this.errorState=!1}}}function ii(me){return class extends me{constructor(...ee){super(...ee),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new ke.y(U=>{this._isInitialized?this._notifySubscriber(U):this._pendingSubscribers.push(U)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(ee){ee.next(),ee.complete()}}}const vi=new p.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function Ii(){return(0,p.f3M)(p.soG)}});class Yt{constructor(){this._localeChanges=new Ye.x,this.localeChanges=this._localeChanges}getValidDateOrNull(ee){return this.isDateInstance(ee)&&this.isValid(ee)?ee:null}deserialize(ee){return null==ee||this.isDateInstance(ee)&&this.isValid(ee)?ee:this.invalid()}setLocale(ee){this.locale=ee,this._localeChanges.next()}compareDate(ee,U){return this.getYear(ee)-this.getYear(U)||this.getMonth(ee)-this.getMonth(U)||this.getDate(ee)-this.getDate(U)}sameDate(ee,U){if(ee&&U){let we=this.isValid(ee),nt=this.isValid(U);return we&&nt?!this.compareDate(ee,U):we==nt}return ee==U}clampDate(ee,U,we){return U&&this.compareDate(ee,U)<0?U:we&&this.compareDate(ee,we)>0?we:ee}}const Zt=new p.OlP("mat-date-formats"),ze=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Ge(me,ee){const U=Array(me);for(let we=0;we<me;we++)U[we]=ee(we);return U}let Nt=(()=>{class me extends Yt{constructor(U,we){super(),this.useUtcForDisplay=!1,super.setLocale(U)}getYear(U){return U.getFullYear()}getMonth(U){return U.getMonth()}getDate(U){return U.getDate()}getDayOfWeek(U){return U.getDay()}getMonthNames(U){const we=new Intl.DateTimeFormat(this.locale,{month:U,timeZone:"utc"});return Ge(12,nt=>this._format(we,new Date(2017,nt,1)))}getDateNames(){const U=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Ge(31,we=>this._format(U,new Date(2017,0,we+1)))}getDayOfWeekNames(U){const we=new Intl.DateTimeFormat(this.locale,{weekday:U,timeZone:"utc"});return Ge(7,nt=>this._format(we,new Date(2017,0,nt+1)))}getYearName(U){const we=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(we,U)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(U){return this.getDate(this._createDateWithOverflow(this.getYear(U),this.getMonth(U)+1,0))}clone(U){return new Date(U.getTime())}createDate(U,we,nt){let Jt=this._createDateWithOverflow(U,we,nt);return Jt.getMonth(),Jt}today(){return new Date}parse(U,we){return"number"==typeof U?new Date(U):U?new Date(Date.parse(U)):null}format(U,we){if(!this.isValid(U))throw Error("NativeDateAdapter: Cannot format invalid date.");const nt=new Intl.DateTimeFormat(this.locale,{...we,timeZone:"utc"});return this._format(nt,U)}addCalendarYears(U,we){return this.addCalendarMonths(U,12*we)}addCalendarMonths(U,we){let nt=this._createDateWithOverflow(this.getYear(U),this.getMonth(U)+we,this.getDate(U));return this.getMonth(nt)!=((this.getMonth(U)+we)%12+12)%12&&(nt=this._createDateWithOverflow(this.getYear(nt),this.getMonth(nt),0)),nt}addCalendarDays(U,we){return this._createDateWithOverflow(this.getYear(U),this.getMonth(U),this.getDate(U)+we)}toIso8601(U){return[U.getUTCFullYear(),this._2digit(U.getUTCMonth()+1),this._2digit(U.getUTCDate())].join("-")}deserialize(U){if("string"==typeof U){if(!U)return null;if(ze.test(U)){let we=new Date(U);if(this.isValid(we))return we}}return super.deserialize(U)}isDateInstance(U){return U instanceof Date}isValid(U){return!isNaN(U.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(U,we,nt){const Jt=new Date;return Jt.setFullYear(U,we,nt),Jt.setHours(0,0,0,0),Jt}_2digit(U){return("00"+U).slice(-2)}_format(U,we){const nt=new Date;return nt.setUTCFullYear(we.getFullYear(),we.getMonth(),we.getDate()),nt.setUTCHours(we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds()),U.format(nt)}}return me.\u0275fac=function(U){return new(U||me)(p.LFG(vi,8),p.LFG(st.t4))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();const We={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Ot=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({providers:[{provide:Yt,useClass:Nt}]}),me})(),Re=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({providers:[{provide:Zt,useValue:We}],imports:[Ot]}),me})(),cn=(()=>{class me{isErrorState(U,we){return!!(U&&U.invalid&&(U.touched||we&&we.submitted))}}return me.\u0275fac=function(U){return new(U||me)},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();class On{constructor(ee,U,we,nt=!1){this._renderer=ee,this.element=U,this.config=we,this._animationForciblyDisabledThroughCss=nt,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xt=(0,st.i$)({passive:!0,capture:!0});class zt{constructor(){this._events=new Map,this._delegateEventHandler=ee=>{const U=(0,st.sA)(ee);U&&this._events.get(ee.type)?.forEach((we,nt)=>{(nt===U||nt.contains(U))&&we.forEach(Jt=>Jt.handleEvent(ee))})}}addHandler(ee,U,we,nt){const Jt=this._events.get(U);if(Jt){const Kt=Jt.get(we);Kt?Kt.add(nt):Jt.set(we,new Set([nt]))}else this._events.set(U,new Map([[we,new Set([nt])]])),ee.runOutsideAngular(()=>{document.addEventListener(U,this._delegateEventHandler,xt)})}removeHandler(ee,U,we){const nt=this._events.get(ee);if(!nt)return;const Jt=nt.get(U);Jt&&(Jt.delete(we),0===Jt.size&&nt.delete(U),0===nt.size&&(this._events.delete(ee),document.removeEventListener(ee,this._delegateEventHandler,xt)))}}const Wn={enterDuration:225,exitDuration:150},It=(0,st.i$)({passive:!0,capture:!0}),li=["mousedown","touchstart"],je=["mouseup","mouseleave","touchend","touchcancel"];class ce{constructor(ee,U,we,nt){this._target=ee,this._ngZone=U,this._platform=nt,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,nt.isBrowser&&(this._containerElement=(0,_t.fI)(we))}fadeInRipple(ee,U,we={}){const nt=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Jt={...Wn,...we.animation};we.centered&&(ee=nt.left+nt.width/2,U=nt.top+nt.height/2);const Kt=we.radius||function De(me,ee,U){const we=Math.max(Math.abs(me-U.left),Math.abs(me-U.right)),nt=Math.max(Math.abs(ee-U.top),Math.abs(ee-U.bottom));return Math.sqrt(we*we+nt*nt)}(ee,U,nt),Yn=ee-nt.left,Hn=U-nt.top,ri=Jt.enterDuration,zn=document.createElement("div");zn.classList.add("mat-ripple-element"),zn.style.left=Yn-Kt+"px",zn.style.top=Hn-Kt+"px",zn.style.height=2*Kt+"px",zn.style.width=2*Kt+"px",null!=we.color&&(zn.style.backgroundColor=we.color),zn.style.transitionDuration=`${ri}ms`,this._containerElement.appendChild(zn);const Rt=window.getComputedStyle(zn),se=Rt.transitionDuration,le="none"===Rt.transitionProperty||"0s"===se||"0s, 0s"===se||0===nt.width&&0===nt.height,Fe=new On(this,zn,we,le);zn.style.transform="scale3d(1, 1, 1)",Fe.state=0,we.persistent||(this._mostRecentTransientRipple=Fe);let Et=null;return!le&&(ri||Jt.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const rn=()=>this._finishRippleTransition(Fe),Gn=()=>this._destroyRipple(Fe);zn.addEventListener("transitionend",rn),zn.addEventListener("transitioncancel",Gn),Et={onTransitionEnd:rn,onTransitionCancel:Gn}}),this._activeRipples.set(Fe,Et),(le||!ri)&&this._finishRippleTransition(Fe),Fe}fadeOutRipple(ee){if(2===ee.state||3===ee.state)return;const U=ee.element,we={...Wn,...ee.config.animation};U.style.transitionDuration=`${we.exitDuration}ms`,U.style.opacity="0",ee.state=2,(ee._animationForciblyDisabledThroughCss||!we.exitDuration)&&this._finishRippleTransition(ee)}fadeOutAll(){this._getActiveRipples().forEach(ee=>ee.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(ee=>{ee.config.persistent||ee.fadeOut()})}setupTriggerEvents(ee){const U=(0,_t.fI)(ee);!this._platform.isBrowser||!U||U===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=U,li.forEach(we=>{ce._eventManager.addHandler(this._ngZone,we,U,this)}))}handleEvent(ee){"mousedown"===ee.type?this._onMousedown(ee):"touchstart"===ee.type?this._onTouchStart(ee):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{je.forEach(U=>{this._triggerElement.addEventListener(U,this,It)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(ee){0===ee.state?this._startFadeOutTransition(ee):2===ee.state&&this._destroyRipple(ee)}_startFadeOutTransition(ee){const U=ee===this._mostRecentTransientRipple,{persistent:we}=ee.config;ee.state=1,!we&&(!U||!this._isPointerDown)&&ee.fadeOut()}_destroyRipple(ee){const U=this._activeRipples.get(ee)??null;this._activeRipples.delete(ee),this._activeRipples.size||(this._containerRect=null),ee===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),ee.state=3,null!==U&&(ee.element.removeEventListener("transitionend",U.onTransitionEnd),ee.element.removeEventListener("transitioncancel",U.onTransitionCancel)),ee.element.remove()}_onMousedown(ee){const U=(0,j.X6)(ee),we=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!U&&!we&&(this._isPointerDown=!0,this.fadeInRipple(ee.clientX,ee.clientY,this._target.rippleConfig))}_onTouchStart(ee){if(!this._target.rippleDisabled&&!(0,j.yG)(ee)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const U=ee.changedTouches;for(let we=0;we<U.length;we++)this.fadeInRipple(U[we].clientX,U[we].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(ee=>{!ee.config.persistent&&(1===ee.state||ee.config.terminateOnPointerUp&&0===ee.state)&&ee.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const ee=this._triggerElement;ee&&(li.forEach(U=>ce._eventManager.removeHandler(U,ee,this)),this._pointerUpEventsRegistered&&je.forEach(U=>ee.removeEventListener(U,this,It)))}}ce._eventManager=new zt;const $e=new p.OlP("mat-ripple-global-options");let Ft=(()=>{class me{get disabled(){return this._disabled}set disabled(U){U&&this.fadeOutAllNonPersistent(),this._disabled=U,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(U){this._trigger=U,this._setupTriggerEventsIfEnabled()}constructor(U,we,nt,Jt,Kt){this._elementRef=U,this._animationMode=Kt,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Jt||{},this._rippleRenderer=new ce(this,we,U,nt)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(U,we=0,nt){return"number"==typeof U?this._rippleRenderer.fadeInRipple(U,we,{...this.rippleConfig,...nt}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...U})}}return me.\u0275fac=function(U){return new(U||me)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(st.t4),p.Y36($e,8),p.Y36(p.QbO,8))},me.\u0275dir=p.lG2({type:me,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(U,we){2&U&&p.ekj("mat-ripple-unbounded",we.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),me})(),Qe=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({imports:[ht,ht]}),me})(),Te=(()=>{class me{constructor(U){this._animationMode=U,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return me.\u0275fac=function(U){return new(U||me)(p.Y36(p.QbO,8))},me.\u0275cmp=p.Xpm({type:me,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(U,we){2&U&&p.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===we.state)("mat-pseudo-checkbox-checked","checked"===we.state)("mat-pseudo-checkbox-disabled",we.disabled)("mat-pseudo-checkbox-minimal","minimal"===we.appearance)("mat-pseudo-checkbox-full","full"===we.appearance)("_mat-animation-noopable","NoopAnimations"===we._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(U,we){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),me})(),xe=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({imports:[ht]}),me})();const ve=new p.OlP("MAT_OPTION_PARENT_COMPONENT"),Ut=new p.OlP("MatOptgroup");let En=0;class Ue{constructor(ee,U=!1){this.source=ee,this.isUserInput=U}}let ue=(()=>{class me{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(U){this._disabled=(0,_t.Ig)(U)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(U,we,nt,Jt){this._element=U,this._changeDetectorRef=we,this._parent=nt,this.group=Jt,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+En++,this.onSelectionChange=new p.vpe,this._stateChanges=new Ye.x}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(U,we){const nt=this._getHostElement();"function"==typeof nt.focus&&nt.focus(we)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(U){(U.keyCode===lt.K5||U.keyCode===lt.L_)&&!(0,lt.Vb)(U)&&(this._selectViaInteraction(),U.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const U=this.viewValue;U!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=U)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(U=!1){this.onSelectionChange.emit(new Ue(this,U))}}return me.\u0275fac=function(U){p.$Z()},me.\u0275dir=p.lG2({type:me,viewQuery:function(U,we){if(1&U&&p.Gf(yt,7),2&U){let nt;p.iGM(nt=p.CRH())&&(we._text=nt.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),me})(),Ce=(()=>{class me extends ue{constructor(U,we,nt,Jt){super(U,we,nt,Jt)}}return me.\u0275fac=function(U){return new(U||me)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(ve,8),p.Y36(Ut,8))},me.\u0275cmp=p.Xpm({type:me,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(U,we){1&U&&p.NdJ("click",function(){return we._selectViaInteraction()})("keydown",function(Jt){return we._handleKeydown(Jt)}),2&U&&(p.Ikx("id",we.id),p.uIk("aria-selected",we.selected)("aria-disabled",we.disabled.toString()),p.ekj("mdc-list-item--selected",we.selected)("mat-mdc-option-multiple",we.multiple)("mat-mdc-option-active",we.active)("mdc-list-item--disabled",we.disabled))},exportAs:["matOption"],features:[p.qOj],ngContentSelectors:nn,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(U,we){1&U&&(p.F$t(Ct),p.YNc(0,pt,1,2,"mat-pseudo-checkbox",0),p.Hsn(1),p.TgZ(2,"span",1,2),p.Hsn(4,1),p.qZA(),p.YNc(5,jt,1,1,"mat-pseudo-checkbox",3),p.YNc(6,en,2,1,"span",4),p._UZ(7,"div",5)),2&U&&(p.Q6J("ngIf",we.multiple),p.xp6(5),p.Q6J("ngIf",!we.multiple&&we.selected&&!we.hideSingleSelectionIndicator),p.xp6(1),p.Q6J("ngIf",we.group&&we.group._inert),p.xp6(1),p.Q6J("matRippleTrigger",we._getHostElement())("matRippleDisabled",we.disabled||we.disableRipple))},dependencies:[Ft,P.O5,Te],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),me})();function Ke(me,ee,U){if(U.length){let we=ee.toArray(),nt=U.toArray(),Jt=0;for(let Kt=0;Kt<me+1;Kt++)we[Kt].group&&we[Kt].group===nt[Jt]&&Jt++;return Jt}return 0}function bt(me,ee,U,we){return me<U?me:me+ee>U+we?Math.max(0,me-we+ee):U}let Pt=(()=>{class me{}return me.\u0275fac=function(U){return new(U||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({imports:[Qe,P.ez,ht,xe]}),me})()},9602:(ni,Wt,F)=>{"use strict";F.d(Wt,{By:()=>$i,FA:()=>wn,_g:()=>Tr,nW:()=>rn,wx:()=>br,zY:()=>To});var p=F(7253),j=F(8184),Q=F(4080),o=F(6895),P=F(4650),st=F(4859),_t=F(8605),ke=F(3238),Ye=F(7579),lt=F(727),wt=F(6451),it=F(9646),yt=F(9521),pt=F(445),jt=F(3353),en=F(5698),Ct=F(8675),nn=F(9300),sn=F(1281),Cn=F(7340),kt=F(4006),Ae=F(9549);F(4144);const ht=["mat-calendar-body",""];function mt(at,vt){if(1&at&&(P.TgZ(0,"tr",3)(1,"td",4),P._uU(2),P.qZA()()),2&at){const I=P.oxw();P.xp6(1),P.Udp("padding-top",I._cellPadding)("padding-bottom",I._cellPadding),P.uIk("colspan",I.numCols),P.xp6(1),P.hij(" ",I.label," ")}}function Je(at,vt){if(1&at&&(P.TgZ(0,"td",4),P._uU(1),P.qZA()),2&at){const I=P.oxw(2);P.Udp("padding-top",I._cellPadding)("padding-bottom",I._cellPadding),P.uIk("colspan",I._firstRowOffset),P.xp6(1),P.hij(" ",I._firstRowOffset>=I.labelMinRequiredCells?I.label:""," ")}}function qt(at,vt){if(1&at){const I=P.EpF();P.TgZ(0,"td",8)(1,"button",9),P.NdJ("click",function(Se){const An=P.CHM(I).$implicit,mi=P.oxw(2);return P.KtG(mi._cellClicked(An,Se))})("focus",function(Se){const An=P.CHM(I).$implicit,mi=P.oxw(2);return P.KtG(mi._emitActiveDateChange(An,Se))}),P.TgZ(2,"span",10),P._uU(3),P.qZA(),P._UZ(4,"span",11),P.qZA()()}if(2&at){const I=vt.$implicit,ie=vt.index,Se=P.oxw().index,et=P.oxw();P.Udp("width",et._cellWidth)("padding-top",et._cellPadding)("padding-bottom",et._cellPadding),P.uIk("data-mat-row",Se)("data-mat-col",ie),P.xp6(1),P.ekj("mat-calendar-body-disabled",!I.enabled)("mat-calendar-body-active",et._isActiveCell(Se,ie))("mat-calendar-body-range-start",et._isRangeStart(I.compareValue))("mat-calendar-body-range-end",et._isRangeEnd(I.compareValue))("mat-calendar-body-in-range",et._isInRange(I.compareValue))("mat-calendar-body-comparison-bridge-start",et._isComparisonBridgeStart(I.compareValue,Se,ie))("mat-calendar-body-comparison-bridge-end",et._isComparisonBridgeEnd(I.compareValue,Se,ie))("mat-calendar-body-comparison-start",et._isComparisonStart(I.compareValue))("mat-calendar-body-comparison-end",et._isComparisonEnd(I.compareValue))("mat-calendar-body-in-comparison-range",et._isInComparisonRange(I.compareValue))("mat-calendar-body-preview-start",et._isPreviewStart(I.compareValue))("mat-calendar-body-preview-end",et._isPreviewEnd(I.compareValue))("mat-calendar-body-in-preview",et._isInPreview(I.compareValue)),P.Q6J("ngClass",I.cssClasses)("tabindex",et._isActiveCell(Se,ie)?0:-1),P.uIk("aria-label",I.ariaLabel)("aria-disabled",!I.enabled||null)("aria-pressed",et._isSelected(I.compareValue))("aria-current",et.todayValue===I.compareValue?"date":null)("aria-describedby",et._getDescribedby(I.compareValue)),P.xp6(1),P.ekj("mat-calendar-body-selected",et._isSelected(I.compareValue))("mat-calendar-body-comparison-identical",et._isComparisonIdentical(I.compareValue))("mat-calendar-body-today",et.todayValue===I.compareValue),P.xp6(1),P.hij(" ",I.displayValue," ")}}function ln(at,vt){if(1&at&&(P.TgZ(0,"tr",5),P.YNc(1,Je,2,6,"td",6),P.YNc(2,qt,5,48,"td",7),P.qZA()),2&at){const I=vt.$implicit,ie=vt.index,Se=P.oxw();P.xp6(1),P.Q6J("ngIf",0===ie&&Se._firstRowOffset),P.xp6(1),P.Q6J("ngForOf",I)}}function Dn(at,vt){if(1&at&&(P.TgZ(0,"th",5)(1,"span",6),P._uU(2),P.qZA(),P.TgZ(3,"span",7),P._uU(4),P.qZA()()),2&at){const I=vt.$implicit;P.xp6(2),P.Oqu(I.long),P.xp6(2),P.Oqu(I.narrow)}}const ti=["*"];function _n(at,vt){}function _i(at,vt){if(1&at){const I=P.EpF();P.TgZ(0,"mat-month-view",5),P.NdJ("activeDateChange",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et.activeDate=Se)})("_userSelection",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._dateSelected(Se))})("dragStarted",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._dragStarted(Se))})("dragEnded",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._dragEnded(Se))}),P.qZA()}if(2&at){const I=P.oxw();P.Q6J("activeDate",I.activeDate)("selected",I.selected)("dateFilter",I.dateFilter)("maxDate",I.maxDate)("minDate",I.minDate)("dateClass",I.dateClass)("comparisonStart",I.comparisonStart)("comparisonEnd",I.comparisonEnd)("startDateAccessibleName",I.startDateAccessibleName)("endDateAccessibleName",I.endDateAccessibleName)("activeDrag",I._activeDrag)}}function ii(at,vt){if(1&at){const I=P.EpF();P.TgZ(0,"mat-year-view",6),P.NdJ("activeDateChange",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et.activeDate=Se)})("monthSelected",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._monthSelectedInYearView(Se))})("selectedChange",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._goToDateInView(Se,"month"))}),P.qZA()}if(2&at){const I=P.oxw();P.Q6J("activeDate",I.activeDate)("selected",I.selected)("dateFilter",I.dateFilter)("maxDate",I.maxDate)("minDate",I.minDate)("dateClass",I.dateClass)}}function vi(at,vt){if(1&at){const I=P.EpF();P.TgZ(0,"mat-multi-year-view",7),P.NdJ("activeDateChange",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et.activeDate=Se)})("yearSelected",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._yearSelectedInMultiYearView(Se))})("selectedChange",function(Se){P.CHM(I);const et=P.oxw();return P.KtG(et._goToDateInView(Se,"year"))}),P.qZA()}if(2&at){const I=P.oxw();P.Q6J("activeDate",I.activeDate)("selected",I.selected)("dateFilter",I.dateFilter)("maxDate",I.maxDate)("minDate",I.minDate)("dateClass",I.dateClass)}}function Ii(at,vt){}const Yt=["button"];function Zt(at,vt){1&at&&(P.O4$(),P.TgZ(0,"svg",3),P._UZ(1,"path",4),P.qZA())}const ze=[[["","matDatepickerToggleIcon",""]]],Ge=["[matDatepickerToggleIcon]"],Nt=[[["input","matStartDate",""]],[["input","matEndDate",""]]],We=["input[matStartDate]","input[matEndDate]"];let ft=(()=>{class at{constructor(){this.changes=new Ye.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(I,ie){return`${I} \u2013 ${ie}`}formatYearRangeLabel(I,ie){return`${I} to ${ie}`}}return at.\u0275fac=function(I){return new(I||at)},at.\u0275prov=P.Yz7({token:at,factory:at.\u0275fac,providedIn:"root"}),at})();class cn{constructor(vt,I,ie,Se,et={},An=vt,mi){this.value=vt,this.displayValue=I,this.ariaLabel=ie,this.enabled=Se,this.cssClasses=et,this.compareValue=An,this.rawValue=mi}}let kn=1,an=(()=>{class at{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(I,ie){this._elementRef=I,this._ngZone=ie,this._platform=(0,P.f3M)(jt.t4),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new P.vpe,this.previewChange=new P.vpe,this.activeDateChange=new P.vpe,this.dragStarted=new P.vpe,this.dragEnded=new P.vpe,this._didDragSinceMouseDown=!1,this._enterHandler=Se=>{if(this._skipNextFocus&&"focus"===Se.type)this._skipNextFocus=!1;else if(Se.target&&this.isRange){const et=this._getCellFromElement(Se.target);et&&this._ngZone.run(()=>this.previewChange.emit({value:et.enabled?et:null,event:Se}))}},this._touchmoveHandler=Se=>{if(!this.isRange)return;const et=Wn(Se),An=et?this._getCellFromElement(et):null;et!==Se.target&&(this._didDragSinceMouseDown=!0),Gt(Se.target)&&Se.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:An?.enabled?An:null,event:Se}))},this._leaveHandler=Se=>{null!==this.previewEnd&&this.isRange&&("blur"!==Se.type&&(this._didDragSinceMouseDown=!0),Se.target&&this._getCellFromElement(Se.target)&&(!Se.relatedTarget||!this._getCellFromElement(Se.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:Se})))},this._mousedownHandler=Se=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;const et=Se.target&&this._getCellFromElement(Se.target);!et||!this._isInRange(et.rawValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:et.rawValue,event:Se})})},this._mouseupHandler=Se=>{if(!this.isRange)return;const et=Gt(Se.target);et?et.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{const An=this._getCellFromElement(et);this.dragEnded.emit({value:An?.rawValue??null,event:Se})}):this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:Se})})},this._touchendHandler=Se=>{const et=Wn(Se);et&&this._mouseupHandler({target:et})},this._id="mat-calendar-body-"+kn++,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,ie.runOutsideAngular(()=>{const Se=I.nativeElement;Se.addEventListener("mouseenter",this._enterHandler,!0),Se.addEventListener("touchmove",this._touchmoveHandler,!0),Se.addEventListener("focus",this._enterHandler,!0),Se.addEventListener("mouseleave",this._leaveHandler,!0),Se.addEventListener("blur",this._leaveHandler,!0),Se.addEventListener("mousedown",this._mousedownHandler),Se.addEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(I,ie){this._didDragSinceMouseDown||I.enabled&&this.selectedValueChange.emit({value:I.value,event:ie})}_emitActiveDateChange(I,ie){I.enabled&&this.activeDateChange.emit({value:I.value,event:ie})}_isSelected(I){return this.startValue===I||this.endValue===I}ngOnChanges(I){const ie=I.numCols,{rows:Se,numCols:et}=this;(I.rows||ie)&&(this._firstRowOffset=Se&&Se.length&&Se[0].length?et-Se[0].length:0),(I.cellAspectRatio||ie||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/et+"%"),(ie||!this._cellWidth)&&(this._cellWidth=100/et+"%")}ngOnDestroy(){const I=this._elementRef.nativeElement;I.removeEventListener("mouseenter",this._enterHandler,!0),I.removeEventListener("touchmove",this._touchmoveHandler,!0),I.removeEventListener("focus",this._enterHandler,!0),I.removeEventListener("mouseleave",this._leaveHandler,!0),I.removeEventListener("blur",this._leaveHandler,!0),I.removeEventListener("mousedown",this._mousedownHandler),I.removeEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(I,ie){let Se=I*this.numCols+ie;return I&&(Se-=this._firstRowOffset),Se==this.activeCell}_focusActiveCell(I=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,en.q)(1)).subscribe(()=>{setTimeout(()=>{const ie=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");ie&&(I||(this._skipNextFocus=!0),ie.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(I){return On(I,this.startValue,this.endValue)}_isRangeEnd(I){return xt(I,this.startValue,this.endValue)}_isInRange(I){return zt(I,this.startValue,this.endValue,this.isRange)}_isComparisonStart(I){return On(I,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(I,ie,Se){if(!this._isComparisonStart(I)||this._isRangeStart(I)||!this._isInRange(I))return!1;let et=this.rows[ie][Se-1];if(!et){const An=this.rows[ie-1];et=An&&An[An.length-1]}return et&&!this._isRangeEnd(et.compareValue)}_isComparisonBridgeEnd(I,ie,Se){if(!this._isComparisonEnd(I)||this._isRangeEnd(I)||!this._isInRange(I))return!1;let et=this.rows[ie][Se+1];if(!et){const An=this.rows[ie+1];et=An&&An[0]}return et&&!this._isRangeStart(et.compareValue)}_isComparisonEnd(I){return xt(I,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(I){return zt(I,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(I){return this.comparisonStart===this.comparisonEnd&&I===this.comparisonStart}_isPreviewStart(I){return On(I,this.previewStart,this.previewEnd)}_isPreviewEnd(I){return xt(I,this.previewStart,this.previewEnd)}_isInPreview(I){return zt(I,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(I){return this.isRange?this.startValue===I&&this.endValue===I?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===I?this._startDateLabelId:this.endValue===I?this._endDateLabelId:null:null}_getCellFromElement(I){const ie=Gt(I);if(ie){const Se=ie.getAttribute("data-mat-row"),et=ie.getAttribute("data-mat-col");if(Se&&et)return this.rows[parseInt(Se)][parseInt(et)]}return null}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.SBq),P.Y36(P.R0b))},at.\u0275cmp=P.Xpm({type:at,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[P.TTD],attrs:ht,decls:6,vars:6,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],[1,"mat-calendar-body-hidden-label",3,"id"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(I,ie){1&I&&(P.YNc(0,mt,3,6,"tr",0),P.YNc(1,ln,3,2,"tr",1),P.TgZ(2,"label",2),P._uU(3),P.qZA(),P.TgZ(4,"label",2),P._uU(5),P.qZA()),2&I&&(P.Q6J("ngIf",ie._firstRowOffset<ie.labelMinRequiredCells),P.xp6(1),P.Q6J("ngForOf",ie.rows),P.xp6(1),P.Q6J("id",ie._startDateLabelId),P.xp6(1),P.hij(" ",ie.startDateAccessibleName,"\n"),P.xp6(1),P.Q6J("id",ie._endDateLabelId),P.xp6(1),P.hij(" ",ie.endDateAccessibleName,"\n"))},dependencies:[o.mk,o.sg,o.O5],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),at})();function Mn(at){return"TD"===at?.nodeName}function Gt(at){let vt;return Mn(at)?vt=at:Mn(at.parentNode)?vt=at.parentNode:Mn(at.parentNode?.parentNode)&&(vt=at.parentNode.parentNode),null!=vt?.getAttribute("data-mat-row")?vt:null}function On(at,vt,I){return null!==I&&vt!==I&&at<I&&at===vt}function xt(at,vt,I){return null!==vt&&vt!==I&&at>=vt&&at===I}function zt(at,vt,I,ie){return ie&&null!==vt&&null!==I&&vt!==I&&at>=vt&&at<=I}function Wn(at){const vt=at.changedTouches[0];return document.elementFromPoint(vt.clientX,vt.clientY)}class Fn{constructor(vt,I){this.start=vt,this.end=I}}let It=(()=>{class at{constructor(I,ie){this.selection=I,this._adapter=ie,this._selectionChanged=new Ye.x,this.selectionChanged=this._selectionChanged,this.selection=I}updateSelection(I,ie){const Se=this.selection;this.selection=I,this._selectionChanged.next({selection:I,source:ie,oldValue:Se})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(I){return this._adapter.isDateInstance(I)&&this._adapter.isValid(I)}}return at.\u0275fac=function(I){P.$Z()},at.\u0275prov=P.Yz7({token:at,factory:at.\u0275fac}),at})(),li=(()=>{class at extends It{constructor(I){super(null,I)}add(I){super.updateSelection(I,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const I=new at(this._adapter);return I.updateSelection(this.selection,this),I}}return at.\u0275fac=function(I){return new(I||at)(P.LFG(ke._A))},at.\u0275prov=P.Yz7({token:at,factory:at.\u0275fac}),at})(),je=(()=>{class at extends It{constructor(I){super(new Fn(null,null),I)}add(I){let{start:ie,end:Se}=this.selection;null==ie?ie=I:null==Se?Se=I:(ie=I,Se=null),super.updateSelection(new Fn(ie,Se),this)}isValid(){const{start:I,end:ie}=this.selection;return null==I&&null==ie||(null!=I&&null!=ie?this._isValidDateInstance(I)&&this._isValidDateInstance(ie)&&this._adapter.compareDate(I,ie)<=0:(null==I||this._isValidDateInstance(I))&&(null==ie||this._isValidDateInstance(ie)))}isComplete(){return null!=this.selection.start&&null!=this.selection.end}clone(){const I=new at(this._adapter);return I.updateSelection(this.selection,this),I}}return at.\u0275fac=function(I){return new(I||at)(P.LFG(ke._A))},at.\u0275prov=P.Yz7({token:at,factory:at.\u0275fac}),at})();const De={provide:It,deps:[[new P.FiY,new P.tp0,It],ke._A],useFactory:function ce(at,vt){return at||new li(vt)}},Ft={provide:It,deps:[[new P.FiY,new P.tp0,It],ke._A],useFactory:function $e(at,vt){return at||new je(vt)}},Qe=new P.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let Te=(()=>{class at{constructor(I){this._dateAdapter=I}selectionFinished(I,ie){let{start:Se,end:et}=ie;return null==Se?Se=I:null==et&&I&&this._dateAdapter.compareDate(I,Se)>=0?et=I:(Se=I,et=null),new Fn(Se,et)}createPreview(I,ie){let Se=null,et=null;return ie.start&&!ie.end&&I&&(Se=ie.start,et=I),new Fn(Se,et)}createDrag(I,ie,Se){let et=ie.start,An=ie.end;if(!et||!An)return null;const mi=this._dateAdapter,fn=0!==mi.compareDate(et,An),xi=mi.getYear(Se)-mi.getYear(I),wi=mi.getMonth(Se)-mi.getMonth(I),yi=mi.getDate(Se)-mi.getDate(I);return fn&&mi.sameDate(I,ie.start)?(et=Se,mi.compareDate(Se,An)>0&&(An=mi.addCalendarYears(An,xi),An=mi.addCalendarMonths(An,wi),An=mi.addCalendarDays(An,yi))):fn&&mi.sameDate(I,ie.end)?(An=Se,mi.compareDate(Se,et)<0&&(et=mi.addCalendarYears(et,xi),et=mi.addCalendarMonths(et,wi),et=mi.addCalendarDays(et,yi))):(et=mi.addCalendarYears(et,xi),et=mi.addCalendarMonths(et,wi),et=mi.addCalendarDays(et,yi),An=mi.addCalendarYears(An,xi),An=mi.addCalendarMonths(An,wi),An=mi.addCalendarDays(An,yi)),new Fn(et,An)}}return at.\u0275fac=function(I){return new(I||at)(P.LFG(ke._A))},at.\u0275prov=P.Yz7({token:at,factory:at.\u0275fac}),at})();const ve={provide:Qe,deps:[[new P.FiY,new P.tp0,Qe],ke._A],useFactory:function xe(at,vt){return at||new Te(vt)}};let Me=(()=>{class at{get activeDate(){return this._activeDate}set activeDate(I){const ie=this._activeDate,Se=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Se,this.minDate,this.maxDate),this._hasSameMonthAndYear(ie,this._activeDate)||this._init()}get selected(){return this._selected}set selected(I){this._selected=I instanceof Fn?I:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(I){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get maxDate(){return this._maxDate}set maxDate(I){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}constructor(I,ie,Se,et,An){this._changeDetectorRef=I,this._dateFormats=ie,this._dateAdapter=Se,this._dir=et,this._rangeStrategy=An,this._rerenderSubscription=lt.w0.EMPTY,this.activeDrag=null,this.selectedChange=new P.vpe,this._userSelection=new P.vpe,this.dragStarted=new P.vpe,this.dragEnded=new P.vpe,this.activeDateChange=new P.vpe,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Ct.O)(null)).subscribe(()=>this._init())}ngOnChanges(I){const ie=I.comparisonStart||I.comparisonEnd;ie&&!ie.firstChange&&this._setRanges(this.selected),I.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(I){const ie=I.value,Se=this._getDateFromDayOfMonth(ie);let et,An;this._selected instanceof Fn?(et=this._getDateInCurrentMonth(this._selected.start),An=this._getDateInCurrentMonth(this._selected.end)):et=An=this._getDateInCurrentMonth(this._selected),(et!==ie||An!==ie)&&this.selectedChange.emit(Se),this._userSelection.emit({value:Se,event:I.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(I){const Se=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(I.value),this._dateAdapter.compareDate(Se,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(I){const ie=this._activeDate,Se=this._isRtl();switch(I.keyCode){case yt.oh:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,Se?1:-1);break;case yt.SV:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,Se?-1:1);break;case yt.LH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case yt.JH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case yt.Sd:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case yt.uR:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case yt.Ku:this.activeDate=I.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case yt.VM:this.activeDate=I.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case yt.K5:case yt.L_:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&I.preventDefault());case yt.hY:return void(null!=this._previewEnd&&!(0,yt.Vb)(I)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:I}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:I})),I.preventDefault(),I.stopPropagation()));default:return}this._dateAdapter.compareDate(ie,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),I.preventDefault()}_handleCalendarBodyKeyup(I){(I.keyCode===yt.L_||I.keyCode===yt.K5)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:I}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let I=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(I)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(I){this._matCalendarBody._focusActiveCell(I)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:I,value:ie}){if(this._rangeStrategy){const Se=ie?ie.rawValue:null,et=this._rangeStrategy.createPreview(Se,this.selected,I);if(this._previewStart=this._getCellCompareValue(et.start),this._previewEnd=this._getCellCompareValue(et.end),this.activeDrag&&Se){const An=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,Se,I);An&&(this._previewStart=this._getCellCompareValue(An.start),this._previewEnd=this._getCellCompareValue(An.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(I){if(this.activeDrag)if(I.value){const ie=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,I.value,I.event);this.dragEnded.emit({value:ie??null,event:I.event})}else this.dragEnded.emit({value:null,event:I.event})}_getDateFromDayOfMonth(I){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),I)}_initWeekdays(){const I=this._dateAdapter.getFirstDayOfWeek(),ie=this._dateAdapter.getDayOfWeekNames("narrow");let et=this._dateAdapter.getDayOfWeekNames("long").map((An,mi)=>({long:An,narrow:ie[mi]}));this._weekdays=et.slice(I).concat(et.slice(0,I))}_createWeekCells(){const I=this._dateAdapter.getNumDaysInMonth(this.activeDate),ie=this._dateAdapter.getDateNames();this._weeks=[[]];for(let Se=0,et=this._firstWeekOffset;Se<I;Se++,et++){7==et&&(this._weeks.push([]),et=0);const An=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),Se+1),mi=this._shouldEnableDate(An),fn=this._dateAdapter.format(An,this._dateFormats.display.dateA11yLabel),xi=this.dateClass?this.dateClass(An,"month"):void 0;this._weeks[this._weeks.length-1].push(new cn(Se+1,ie[Se],fn,mi,xi,this._getCellCompareValue(An),An))}}_shouldEnableDate(I){return!!I&&(!this.minDate||this._dateAdapter.compareDate(I,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(I,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(I))}_getDateInCurrentMonth(I){return I&&this._hasSameMonthAndYear(I,this.activeDate)?this._dateAdapter.getDate(I):null}_hasSameMonthAndYear(I,ie){return!(!I||!ie||this._dateAdapter.getMonth(I)!=this._dateAdapter.getMonth(ie)||this._dateAdapter.getYear(I)!=this._dateAdapter.getYear(ie))}_getCellCompareValue(I){if(I){const ie=this._dateAdapter.getYear(I),Se=this._dateAdapter.getMonth(I),et=this._dateAdapter.getDate(I);return new Date(ie,Se,et).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(I){I instanceof Fn?(this._rangeStart=this._getCellCompareValue(I.start),this._rangeEnd=this._getCellCompareValue(I.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(I),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(I){return!this.dateFilter||this.dateFilter(I)}_clearPreview(){this._previewStart=this._previewEnd=null}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.sBO),P.Y36(ke.sG,8),P.Y36(ke._A,8),P.Y36(pt.Is,8),P.Y36(Qe,8))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-month-view"]],viewQuery:function(I,ie){if(1&I&&P.Gf(an,5),2&I){let Se;P.iGM(Se=P.CRH())&&(ie._matCalendarBody=Se.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[P.TTD],decls:7,vars:15,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName","selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(I,ie){1&I&&(P.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),P.YNc(3,Dn,5,2,"th",2),P.qZA(),P.TgZ(4,"tr"),P._UZ(5,"th",3),P.qZA()(),P.TgZ(6,"tbody",4),P.NdJ("selectedValueChange",function(et){return ie._dateSelected(et)})("activeDateChange",function(et){return ie._updateActiveDate(et)})("previewChange",function(et){return ie._previewChanged(et)})("dragStarted",function(et){return ie.dragStarted.emit(et)})("dragEnded",function(et){return ie._dragEnded(et)})("keyup",function(et){return ie._handleCalendarBodyKeyup(et)})("keydown",function(et){return ie._handleCalendarBodyKeydown(et)}),P.qZA()()),2&I&&(P.xp6(3),P.Q6J("ngForOf",ie._weekdays),P.xp6(3),P.Q6J("label",ie._monthLabel)("rows",ie._weeks)("todayValue",ie._todayDate)("startValue",ie._rangeStart)("endValue",ie._rangeEnd)("comparisonStart",ie._comparisonRangeStart)("comparisonEnd",ie._comparisonRangeEnd)("previewStart",ie._previewStart)("previewEnd",ie._previewEnd)("isRange",ie._isRange)("labelMinRequiredCells",3)("activeCell",ie._dateAdapter.getDate(ie.activeDate)-1)("startDateAccessibleName",ie.startDateAccessibleName)("endDateAccessibleName",ie.endDateAccessibleName))},dependencies:[o.sg,an],encapsulation:2,changeDetection:0}),at})();const Pe=24;let Bn=(()=>{class at{get activeDate(){return this._activeDate}set activeDate(I){let ie=this._activeDate;const Se=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Se,this.minDate,this.maxDate),En(this._dateAdapter,ie,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(I){this._selected=I instanceof Fn?I:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I)),this._setSelectedYear(I)}get minDate(){return this._minDate}set minDate(I){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get maxDate(){return this._maxDate}set maxDate(I){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}constructor(I,ie,Se){this._changeDetectorRef=I,this._dateAdapter=ie,this._dir=Se,this._rerenderSubscription=lt.w0.EMPTY,this.selectedChange=new P.vpe,this.yearSelected=new P.vpe,this.activeDateChange=new P.vpe,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Ct.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const ie=this._dateAdapter.getYear(this._activeDate)-Ue(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let Se=0,et=[];Se<Pe;Se++)et.push(ie+Se),4==et.length&&(this._years.push(et.map(An=>this._createCellForYear(An))),et=[]);this._changeDetectorRef.markForCheck()}_yearSelected(I){const ie=I.value,Se=this._dateAdapter.createDate(ie,0,1),et=this._getDateFromYear(ie);this.yearSelected.emit(Se),this.selectedChange.emit(et)}_updateActiveDate(I){const Se=this._activeDate;this.activeDate=this._getDateFromYear(I.value),this._dateAdapter.compareDate(Se,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(I){const ie=this._activeDate,Se=this._isRtl();switch(I.keyCode){case yt.oh:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Se?1:-1);break;case yt.SV:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Se?-1:1);break;case yt.LH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case yt.JH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case yt.Sd:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Ue(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case yt.uR:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Pe-Ue(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case yt.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,I.altKey?10*-Pe:-Pe);break;case yt.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,I.altKey?10*Pe:Pe);break;case yt.K5:case yt.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(ie,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),I.preventDefault()}_handleCalendarBodyKeyup(I){(I.keyCode===yt.L_||I.keyCode===yt.K5)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:I}),this._selectionKeyPressed=!1)}_getActiveCell(){return Ue(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(I){const ie=this._dateAdapter.getMonth(this.activeDate),Se=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(I,ie,1));return this._dateAdapter.createDate(I,ie,Math.min(this._dateAdapter.getDate(this.activeDate),Se))}_createCellForYear(I){const ie=this._dateAdapter.createDate(I,0,1),Se=this._dateAdapter.getYearName(ie),et=this.dateClass?this.dateClass(ie,"multi-year"):void 0;return new cn(I,Se,Se,this._shouldEnableYear(I),et)}_shouldEnableYear(I){if(null==I||this.maxDate&&I>this._dateAdapter.getYear(this.maxDate)||this.minDate&&I<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let Se=this._dateAdapter.createDate(I,0,1);this._dateAdapter.getYear(Se)==I;Se=this._dateAdapter.addCalendarDays(Se,1))if(this.dateFilter(Se))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(I){if(this._selectedYear=null,I instanceof Fn){const ie=I.start||I.end;ie&&(this._selectedYear=this._dateAdapter.getYear(ie))}else I&&(this._selectedYear=this._dateAdapter.getYear(I))}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.sBO),P.Y36(ke._A,8),P.Y36(pt.Is,8))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-multi-year-view"]],viewQuery:function(I,ie){if(1&I&&P.Gf(an,5),2&I){let Se;P.iGM(Se=P.CRH())&&(ie._matCalendarBody=Se.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(I,ie){1&I&&(P.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),P._UZ(3,"th",2),P.qZA()(),P.TgZ(4,"tbody",3),P.NdJ("selectedValueChange",function(et){return ie._yearSelected(et)})("activeDateChange",function(et){return ie._updateActiveDate(et)})("keyup",function(et){return ie._handleCalendarBodyKeyup(et)})("keydown",function(et){return ie._handleCalendarBodyKeydown(et)}),P.qZA()()),2&I&&(P.xp6(4),P.Q6J("rows",ie._years)("todayValue",ie._todayYear)("startValue",ie._selectedYear)("endValue",ie._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",ie._getActiveCell()))},dependencies:[an],encapsulation:2,changeDetection:0}),at})();function En(at,vt,I,ie,Se){const et=at.getYear(vt),An=at.getYear(I),mi=ue(at,ie,Se);return Math.floor((et-mi)/Pe)===Math.floor((An-mi)/Pe)}function Ue(at,vt,I,ie){return function Ce(at,vt){return(at%vt+vt)%vt}(at.getYear(vt)-ue(at,I,ie),Pe)}function ue(at,vt,I){let ie=0;return I?ie=at.getYear(I)-Pe+1:vt&&(ie=at.getYear(vt)),ie}let Ke=(()=>{class at{get activeDate(){return this._activeDate}set activeDate(I){let ie=this._activeDate;const Se=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Se,this.minDate,this.maxDate),this._dateAdapter.getYear(ie)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(I){this._selected=I instanceof Fn?I:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I)),this._setSelectedMonth(I)}get minDate(){return this._minDate}set minDate(I){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get maxDate(){return this._maxDate}set maxDate(I){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}constructor(I,ie,Se,et){this._changeDetectorRef=I,this._dateFormats=ie,this._dateAdapter=Se,this._dir=et,this._rerenderSubscription=lt.w0.EMPTY,this.selectedChange=new P.vpe,this.monthSelected=new P.vpe,this.activeDateChange=new P.vpe,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Ct.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(I){const ie=I.value,Se=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),ie,1);this.monthSelected.emit(Se);const et=this._getDateFromMonth(ie);this.selectedChange.emit(et)}_updateActiveDate(I){const Se=this._activeDate;this.activeDate=this._getDateFromMonth(I.value),this._dateAdapter.compareDate(Se,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(I){const ie=this._activeDate,Se=this._isRtl();switch(I.keyCode){case yt.oh:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,Se?1:-1);break;case yt.SV:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,Se?-1:1);break;case yt.LH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case yt.JH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case yt.Sd:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case yt.uR:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case yt.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,I.altKey?-10:-1);break;case yt.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,I.altKey?10:1);break;case yt.K5:case yt.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(ie,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),I.preventDefault()}_handleCalendarBodyKeyup(I){(I.keyCode===yt.L_||I.keyCode===yt.K5)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:I}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let I=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(ie=>ie.map(Se=>this._createCellForMonth(Se,I[Se]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(I){return I&&this._dateAdapter.getYear(I)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(I):null}_getDateFromMonth(I){const ie=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),I,1),Se=this._dateAdapter.getNumDaysInMonth(ie);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),I,Math.min(this._dateAdapter.getDate(this.activeDate),Se))}_createCellForMonth(I,ie){const Se=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),I,1),et=this._dateAdapter.format(Se,this._dateFormats.display.monthYearA11yLabel),An=this.dateClass?this.dateClass(Se,"year"):void 0;return new cn(I,ie.toLocaleUpperCase(),et,this._shouldEnableMonth(I),An)}_shouldEnableMonth(I){const ie=this._dateAdapter.getYear(this.activeDate);if(null==I||this._isYearAndMonthAfterMaxDate(ie,I)||this._isYearAndMonthBeforeMinDate(ie,I))return!1;if(!this.dateFilter)return!0;for(let et=this._dateAdapter.createDate(ie,I,1);this._dateAdapter.getMonth(et)==I;et=this._dateAdapter.addCalendarDays(et,1))if(this.dateFilter(et))return!0;return!1}_isYearAndMonthAfterMaxDate(I,ie){if(this.maxDate){const Se=this._dateAdapter.getYear(this.maxDate),et=this._dateAdapter.getMonth(this.maxDate);return I>Se||I===Se&&ie>et}return!1}_isYearAndMonthBeforeMinDate(I,ie){if(this.minDate){const Se=this._dateAdapter.getYear(this.minDate),et=this._dateAdapter.getMonth(this.minDate);return I<Se||I===Se&&ie<et}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(I){this._selectedMonth=I instanceof Fn?this._getMonthInCurrentYear(I.start)||this._getMonthInCurrentYear(I.end):this._getMonthInCurrentYear(I)}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.sBO),P.Y36(ke.sG,8),P.Y36(ke._A,8),P.Y36(pt.Is,8))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-year-view"]],viewQuery:function(I,ie){if(1&I&&P.Gf(an,5),2&I){let Se;P.iGM(Se=P.CRH())&&(ie._matCalendarBody=Se.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(I,ie){1&I&&(P.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),P._UZ(3,"th",2),P.qZA()(),P.TgZ(4,"tbody",3),P.NdJ("selectedValueChange",function(et){return ie._monthSelected(et)})("activeDateChange",function(et){return ie._updateActiveDate(et)})("keyup",function(et){return ie._handleCalendarBodyKeyup(et)})("keydown",function(et){return ie._handleCalendarBodyKeydown(et)}),P.qZA()()),2&I&&(P.xp6(4),P.Q6J("label",ie._yearLabel)("rows",ie._months)("todayValue",ie._todayMonth)("startValue",ie._selectedMonth)("endValue",ie._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",ie._dateAdapter.getMonth(ie.activeDate)))},dependencies:[an],encapsulation:2,changeDetection:0}),at})(),bt=1,Pt=(()=>{class at{constructor(I,ie,Se,et,An){this._intl=I,this.calendar=ie,this._dateAdapter=Se,this._dateFormats=et,this._id="mat-calendar-header-"+bt++,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>An.markForCheck())}get periodButtonText(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-Pe)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:Pe)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(I,ie){return"month"==this.calendar.currentView?this._dateAdapter.getYear(I)==this._dateAdapter.getYear(ie)&&this._dateAdapter.getMonth(I)==this._dateAdapter.getMonth(ie):"year"==this.calendar.currentView?this._dateAdapter.getYear(I)==this._dateAdapter.getYear(ie):En(this._dateAdapter,I,ie,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){const ie=this._dateAdapter.getYear(this.calendar.activeDate)-Ue(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),Se=ie+Pe-1;return[this._dateAdapter.getYearName(this._dateAdapter.createDate(ie,0,1)),this._dateAdapter.getYearName(this._dateAdapter.createDate(Se,0,1))]}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(ft),P.Y36((0,P.Gpc)(()=>me)),P.Y36(ke._A,8),P.Y36(ke.sG,8),P.Y36(P.sBO))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:ti,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"],[1,"mat-calendar-hidden-label",3,"id"]],template:function(I,ie){1&I&&(P.F$t(),P.TgZ(0,"div",0)(1,"div",1)(2,"button",2),P.NdJ("click",function(){return ie.currentPeriodClicked()}),P.TgZ(3,"span",3),P._uU(4),P.qZA(),P.O4$(),P.TgZ(5,"svg",4),P._UZ(6,"polygon",5),P.qZA()(),P.kcU(),P._UZ(7,"div",6),P.Hsn(8),P.TgZ(9,"button",7),P.NdJ("click",function(){return ie.previousClicked()}),P.qZA(),P.TgZ(10,"button",8),P.NdJ("click",function(){return ie.nextClicked()}),P.qZA()()(),P.TgZ(11,"label",9),P._uU(12),P.qZA()),2&I&&(P.xp6(2),P.uIk("aria-label",ie.periodButtonLabel)("aria-describedby",ie._periodButtonLabelId),P.xp6(2),P.Oqu(ie.periodButtonText),P.xp6(1),P.ekj("mat-calendar-invert","month"!==ie.calendar.currentView),P.xp6(4),P.Q6J("disabled",!ie.previousEnabled()),P.uIk("aria-label",ie.prevButtonLabel),P.xp6(1),P.Q6J("disabled",!ie.nextEnabled()),P.uIk("aria-label",ie.nextButtonLabel),P.xp6(1),P.Q6J("id",ie._periodButtonLabelId),P.xp6(1),P.Oqu(ie.periodButtonDescription))},dependencies:[st.lW,st.RK],encapsulation:2,changeDetection:0}),at})(),me=(()=>{class at{get startAt(){return this._startAt}set startAt(I){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get selected(){return this._selected}set selected(I){this._selected=I instanceof Fn?I:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get minDate(){return this._minDate}set minDate(I){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get maxDate(){return this._maxDate}set maxDate(I){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get activeDate(){return this._clampedActiveDate}set activeDate(I){this._clampedActiveDate=this._dateAdapter.clampDate(I,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(I){const ie=this._currentView!==I?I:null;this._currentView=I,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),ie&&this.viewChanged.emit(ie)}constructor(I,ie,Se,et){this._dateAdapter=ie,this._dateFormats=Se,this._changeDetectorRef=et,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new P.vpe,this.yearSelected=new P.vpe,this.monthSelected=new P.vpe,this.viewChanged=new P.vpe(!0),this._userSelection=new P.vpe,this._userDragDrop=new P.vpe,this._activeDrag=null,this.stateChanges=new Ye.x,this._intlChanges=I.changes.subscribe(()=>{et.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Q.C5(this.headerComponent||Pt),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(I){const ie=I.minDate&&!this._dateAdapter.sameDate(I.minDate.previousValue,I.minDate.currentValue)?I.minDate:void 0,Se=I.maxDate&&!this._dateAdapter.sameDate(I.maxDate.previousValue,I.maxDate.currentValue)?I.maxDate:void 0,et=ie||Se||I.dateFilter;if(et&&!et.firstChange){const An=this._getCurrentViewComponent();An&&(this._changeDetectorRef.detectChanges(),An._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(I){const ie=I.value;(this.selected instanceof Fn||ie&&!this._dateAdapter.sameDate(ie,this.selected))&&this.selectedChange.emit(ie),this._userSelection.emit(I)}_yearSelectedInMultiYearView(I){this.yearSelected.emit(I)}_monthSelectedInYearView(I){this.monthSelected.emit(I)}_goToDateInView(I,ie){this.activeDate=I,this.currentView=ie}_dragStarted(I){this._activeDrag=I}_dragEnded(I){this._activeDrag&&(I.value&&this._userDragDrop.emit(I),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(ft),P.Y36(ke._A,8),P.Y36(ke.sG,8),P.Y36(P.sBO))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-calendar"]],viewQuery:function(I,ie){if(1&I&&(P.Gf(Me,5),P.Gf(Ke,5),P.Gf(Bn,5)),2&I){let Se;P.iGM(Se=P.CRH())&&(ie.monthView=Se.first),P.iGM(Se=P.CRH())&&(ie.yearView=Se.first),P.iGM(Se=P.CRH())&&(ie.multiYearView=Se.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[P._Bn([De]),P.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(I,ie){1&I&&(P.YNc(0,_n,0,0,"ng-template",0),P.TgZ(1,"div",1),P.YNc(2,_i,1,11,"mat-month-view",2),P.YNc(3,ii,1,6,"mat-year-view",3),P.YNc(4,vi,1,6,"mat-multi-year-view",4),P.qZA()),2&I&&(P.Q6J("cdkPortalOutlet",ie._calendarHeaderPortal),P.xp6(1),P.Q6J("ngSwitch",ie.currentView),P.xp6(1),P.Q6J("ngSwitchCase","month"),P.xp6(1),P.Q6J("ngSwitchCase","year"),P.xp6(1),P.Q6J("ngSwitchCase","multi-year"))},dependencies:[o.RF,o.n9,p.kH,Q.Pl,Me,Ke,Bn],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}.mat-calendar-hidden-label{display:none}'],encapsulation:2,changeDetection:0}),at})();const ee={transformPanel:(0,Cn.X$)("transformPanel",[(0,Cn.eR)("void => enter-dropdown",(0,Cn.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Cn.F4)([(0,Cn.oB)({opacity:0,transform:"scale(1, 0.8)"}),(0,Cn.oB)({opacity:1,transform:"scale(1, 1)"})]))),(0,Cn.eR)("void => enter-dialog",(0,Cn.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Cn.F4)([(0,Cn.oB)({opacity:0,transform:"scale(0.7)"}),(0,Cn.oB)({transform:"none",opacity:1})]))),(0,Cn.eR)("* => void",(0,Cn.jt)("100ms linear",(0,Cn.oB)({opacity:0})))]),fadeInCalendar:(0,Cn.X$)("fadeInCalendar",[(0,Cn.SB)("void",(0,Cn.oB)({opacity:0})),(0,Cn.SB)("enter",(0,Cn.oB)({opacity:1})),(0,Cn.eR)("void => *",(0,Cn.jt)("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let U=0;const we=new P.OlP("mat-datepicker-scroll-strategy"),Jt={provide:we,deps:[j.aV],useFactory:function nt(at){return()=>at.scrollStrategies.reposition()}},Kt=(0,ke.pj)(class{constructor(at){this._elementRef=at}});let Yn=(()=>{class at extends Kt{constructor(I,ie,Se,et,An,mi){super(I),this._changeDetectorRef=ie,this._globalModel=Se,this._dateAdapter=et,this._rangeSelectionStrategy=An,this._subscriptions=new lt.w0,this._animationDone=new Ye.x,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=mi.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(I){const ie=this._model.selection,Se=I.value,et=ie instanceof Fn;if(et&&this._rangeSelectionStrategy){const An=this._rangeSelectionStrategy.selectionFinished(Se,ie,I.event);this._model.updateSelection(An,this)}else Se&&(et||!this._dateAdapter.sameDate(Se,ie))&&this._model.add(Se);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(I){this._model.updateSelection(I.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(I){this._isAnimating="start"===I.phaseName,this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(I,ie){this._model=I?this._globalModel.clone():this._globalModel,this._actionsPortal=I,ie&&this._changeDetectorRef.detectChanges()}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.SBq),P.Y36(P.sBO),P.Y36(It),P.Y36(ke._A),P.Y36(Qe,8),P.Y36(ft))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-datepicker-content"]],viewQuery:function(I,ie){if(1&I&&P.Gf(me,5),2&I){let Se;P.iGM(Se=P.CRH())&&(ie._calendar=Se.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(I,ie){1&I&&P.WFA("@transformPanel.start",function(et){return ie._handleAnimationEvent(et)})("@transformPanel.done",function(et){return ie._handleAnimationEvent(et)}),2&I&&(P.d8E("@transformPanel",ie._animationState),P.ekj("mat-datepicker-content-touch",ie.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[P.qOj],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(I,ie){if(1&I&&(P.TgZ(0,"div",0)(1,"mat-calendar",1),P.NdJ("yearSelected",function(et){return ie.datepicker._selectYear(et)})("monthSelected",function(et){return ie.datepicker._selectMonth(et)})("viewChanged",function(et){return ie.datepicker._viewChanged(et)})("_userSelection",function(et){return ie._handleUserSelection(et)})("_userDragDrop",function(et){return ie._handleUserDragDrop(et)}),P.qZA(),P.YNc(2,Ii,0,0,"ng-template",2),P.TgZ(3,"button",3),P.NdJ("focus",function(){return ie._closeButtonFocused=!0})("blur",function(){return ie._closeButtonFocused=!1})("click",function(){return ie.datepicker.close()}),P._uU(4),P.qZA()()),2&I){let Se;P.ekj("mat-datepicker-content-container-with-custom-header",ie.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",ie._actionsPortal),P.uIk("aria-modal",!0)("aria-labelledby",null!==(Se=ie._dialogLabelId)&&void 0!==Se?Se:void 0),P.xp6(1),P.Q6J("id",ie.datepicker.id)("ngClass",ie.datepicker.panelClass)("startAt",ie.datepicker.startAt)("startView",ie.datepicker.startView)("minDate",ie.datepicker._getMinDate())("maxDate",ie.datepicker._getMaxDate())("dateFilter",ie.datepicker._getDateFilter())("headerComponent",ie.datepicker.calendarHeaderComponent)("selected",ie._getSelected())("dateClass",ie.datepicker.dateClass)("comparisonStart",ie.comparisonStart)("comparisonEnd",ie.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",ie.startDateAccessibleName)("endDateAccessibleName",ie.endDateAccessibleName),P.xp6(1),P.Q6J("cdkPortalOutlet",ie._actionsPortal),P.xp6(1),P.ekj("cdk-visually-hidden",!ie._closeButtonFocused),P.Q6J("color",ie.color||"primary"),P.xp6(1),P.Oqu(ie._closeButtonText)}},dependencies:[o.mk,st.lW,p.mK,Q.Pl,me],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[ee.transformPanel,ee.fadeInCalendar]},changeDetection:0}),at})(),Hn=(()=>{class at{get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(I){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(I){this._color=I}get touchUi(){return this._touchUi}set touchUi(I){this._touchUi=(0,sn.Ig)(I)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(I){const ie=(0,sn.Ig)(I);ie!==this._disabled&&(this._disabled=ie,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(I){this._restoreFocus=(0,sn.Ig)(I)}get panelClass(){return this._panelClass}set panelClass(I){this._panelClass=(0,sn.du)(I)}get opened(){return this._opened}set opened(I){(0,sn.Ig)(I)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}constructor(I,ie,Se,et,An,mi,fn){this._overlay=I,this._ngZone=ie,this._viewContainerRef=Se,this._dateAdapter=An,this._dir=mi,this._model=fn,this._inputStateChanges=lt.w0.EMPTY,this._document=(0,P.f3M)(o.K0),this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new P.vpe,this.monthSelected=new P.vpe,this.viewChanged=new P.vpe(!0),this.openedStream=new P.vpe,this.closedStream=new P.vpe,this._opened=!1,this.id="mat-datepicker-"+U++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new Ye.x,this._scrollStrategy=et}ngOnChanges(I){const ie=I.xPosition||I.yPosition;if(ie&&!ie.firstChange&&this._overlayRef){const Se=this._overlayRef.getConfig().positionStrategy;Se instanceof j._G&&(this._setConnectedPositions(Se),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(I){this._model.add(I)}_selectYear(I){this.yearSelected.emit(I)}_selectMonth(I){this.monthSelected.emit(I)}_viewChanged(I){this.viewChanged.emit(I)}registerInput(I){return this._inputStateChanges.unsubscribe(),this.datepickerInput=I,this._inputStateChanges=I.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(I){this._actionsPortal=I,this._componentRef?.instance._assignActions(I,!0)}removeActions(I){I===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this._focusedElementBeforeOpen=(0,jt.ht)(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;const I=this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus,ie=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){const{instance:Se,location:et}=this._componentRef;Se._startExitAnimation(),Se._animationDone.pipe((0,en.q)(1)).subscribe(()=>{const An=this._document.activeElement;I&&(!An||An===this._document.activeElement||et.nativeElement.contains(An))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}I?setTimeout(ie):ie()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(I){I.datepicker=this,I.color=this.color,I._dialogLabelId=this.datepickerInput.getOverlayLabelId(),I._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const I=this.touchUi,ie=new Q.C5(Yn,this._viewContainerRef),Se=this._overlayRef=this._overlay.create(new j.X_({positionStrategy:I?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[I?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:I?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(I?"dialog":"popup")}));this._getCloseStream(Se).subscribe(et=>{et&&et.preventDefault(),this.close()}),Se.keydownEvents().subscribe(et=>{const An=et.keyCode;(An===yt.LH||An===yt.JH||An===yt.oh||An===yt.SV||An===yt.Ku||An===yt.VM)&&et.preventDefault()}),this._componentRef=Se.attach(ie),this._forwardContentValues(this._componentRef.instance),I||this._ngZone.onStable.pipe((0,en.q)(1)).subscribe(()=>Se.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const I=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(I)}_setConnectedPositions(I){const ie="end"===this.xPosition?"end":"start",Se="start"===ie?"end":"start",et="above"===this.yPosition?"bottom":"top",An="top"===et?"bottom":"top";return I.withPositions([{originX:ie,originY:An,overlayX:ie,overlayY:et},{originX:ie,originY:et,overlayX:ie,overlayY:An},{originX:Se,originY:An,overlayX:Se,overlayY:et},{originX:Se,originY:et,overlayX:Se,overlayY:An}])}_getCloseStream(I){const ie=["ctrlKey","shiftKey","metaKey"];return(0,wt.T)(I.backdropClick(),I.detachments(),I.keydownEvents().pipe((0,nn.h)(Se=>Se.keyCode===yt.hY&&!(0,yt.Vb)(Se)||this.datepickerInput&&(0,yt.Vb)(Se,"altKey")&&Se.keyCode===yt.LH&&ie.every(et=>!(0,yt.Vb)(Se,et)))))}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(j.aV),P.Y36(P.R0b),P.Y36(P.s_b),P.Y36(we),P.Y36(ke._A,8),P.Y36(pt.Is,8),P.Y36(It))},at.\u0275dir=P.lG2({type:at,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[P.TTD]}),at})();class zn{constructor(vt,I){this.target=vt,this.targetElement=I,this.value=this.target.value}}let Rt=(()=>{class at{get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(I){this._assignValueProgrammatically(I)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(I){const ie=(0,sn.Ig)(I),Se=this._elementRef.nativeElement;this._disabled!==ie&&(this._disabled=ie,this.stateChanges.next(void 0)),ie&&this._isInitialized&&Se.blur&&Se.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(I){this._model=I,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(ie=>{if(this._shouldHandleChangeEvent(ie)){const Se=this._getValueFromModel(ie.selection);this._lastValueValid=this._isValidValue(Se),this._cvaOnChange(Se),this._onTouched(),this._formatValue(Se),this.dateInput.emit(new zn(this,this._elementRef.nativeElement)),this.dateChange.emit(new zn(this,this._elementRef.nativeElement))}})}constructor(I,ie,Se){this._elementRef=I,this._dateAdapter=ie,this._dateFormats=Se,this.dateChange=new P.vpe,this.dateInput=new P.vpe,this.stateChanges=new Ye.x,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=lt.w0.EMPTY,this._localeSubscription=lt.w0.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=et=>{const An=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(et.value));return!An||this._matchesFilter(An)?null:{matDatepickerFilter:!0}},this._minValidator=et=>{const An=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(et.value)),mi=this._getMinDate();return!mi||!An||this._dateAdapter.compareDate(mi,An)<=0?null:{matDatepickerMin:{min:mi,actual:An}}},this._maxValidator=et=>{const An=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(et.value)),mi=this._getMaxDate();return!mi||!An||this._dateAdapter.compareDate(mi,An)>=0?null:{matDatepickerMax:{max:mi,actual:An}}},this._lastValueValid=!1,this._localeSubscription=ie.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(I){Ee(I,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(I){this._validatorOnChange=I}validate(I){return this._validator?this._validator(I):null}writeValue(I){this._assignValueProgrammatically(I)}registerOnChange(I){this._cvaOnChange=I}registerOnTouched(I){this._onTouched=I}setDisabledState(I){this.disabled=I}_onKeydown(I){(0,yt.Vb)(I,"altKey")&&I.keyCode===yt.JH&&["ctrlKey","shiftKey","metaKey"].every(et=>!(0,yt.Vb)(I,et))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),I.preventDefault())}_onInput(I){const ie=this._lastValueValid;let Se=this._dateAdapter.parse(I,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(Se),Se=this._dateAdapter.getValidDateOrNull(Se);const et=!this._dateAdapter.sameDate(Se,this.value);!Se||et?this._cvaOnChange(Se):(I&&!this.value&&this._cvaOnChange(Se),ie!==this._lastValueValid&&this._validatorOnChange()),et&&(this._assignValue(Se),this.dateInput.emit(new zn(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new zn(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(I){this._elementRef.nativeElement.value=null!=I?this._dateAdapter.format(I,this._dateFormats.display.dateInput):""}_assignValue(I){this._model?(this._assignValueToModel(I),this._pendingValue=null):this._pendingValue=I}_isValidValue(I){return!I||this._dateAdapter.isValid(I)}_parentDisabled(){return!1}_assignValueProgrammatically(I){I=this._dateAdapter.deserialize(I),this._lastValueValid=this._isValidValue(I),I=this._dateAdapter.getValidDateOrNull(I),this._assignValue(I),this._formatValue(I)}_matchesFilter(I){const ie=this._getDateFilter();return!ie||ie(I)}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.SBq),P.Y36(ke._A,8),P.Y36(ke.sG,8))},at.\u0275dir=P.lG2({type:at,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[P.TTD]}),at})();function Ee(at,vt){const I=Object.keys(at);for(let ie of I){const{previousValue:Se,currentValue:et}=at[ie];if(!vt.isDateInstance(Se)||!vt.isDateInstance(et))return!0;if(!vt.sameDate(Se,et))return!0}return!1}let Et=(()=>{class at{}return at.\u0275fac=function(I){return new(I||at)},at.\u0275dir=P.lG2({type:at,selectors:[["","matDatepickerToggleIcon",""]]}),at})(),rn=(()=>{class at{get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(I){this._disabled=(0,sn.Ig)(I)}constructor(I,ie,Se){this._intl=I,this._changeDetectorRef=ie,this._stateChanges=lt.w0.EMPTY;const et=Number(Se);this.tabIndex=et||0===et?et:null}ngOnChanges(I){I.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(I){this.datepicker&&!this.disabled&&(this.datepicker.open(),I.stopPropagation())}_watchStateChanges(){const I=this.datepicker?this.datepicker.stateChanges:(0,it.of)(),ie=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:(0,it.of)(),Se=this.datepicker?(0,wt.T)(this.datepicker.openedStream,this.datepicker.closedStream):(0,it.of)();this._stateChanges.unsubscribe(),this._stateChanges=(0,wt.T)(this._intl.changes,I,ie,Se).subscribe(()=>this._changeDetectorRef.markForCheck())}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(ft),P.Y36(P.sBO),P.$8M("tabindex"))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-datepicker-toggle"]],contentQueries:function(I,ie,Se){if(1&I&&P.Suo(Se,Et,5),2&I){let et;P.iGM(et=P.CRH())&&(ie._customIcon=et.first)}},viewQuery:function(I,ie){if(1&I&&P.Gf(Yt,5),2&I){let Se;P.iGM(Se=P.CRH())&&(ie._button=Se.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(I,ie){1&I&&P.NdJ("click",function(et){return ie._open(et)}),2&I&&(P.uIk("tabindex",null)("data-mat-calendar",ie.datepicker?ie.datepicker.id:null),P.ekj("mat-datepicker-toggle-active",ie.datepicker&&ie.datepicker.opened)("mat-accent",ie.datepicker&&"accent"===ie.datepicker.color)("mat-warn",ie.datepicker&&"warn"===ie.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[P.TTD],ngContentSelectors:Ge,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(I,ie){1&I&&(P.F$t(ze),P.TgZ(0,"button",0,1),P.YNc(2,Zt,2,0,"svg",2),P.Hsn(3),P.qZA()),2&I&&(P.Q6J("disabled",ie.disabled)("disableRipple",ie.disableRipple),P.uIk("aria-haspopup",ie.datepicker?"dialog":null)("aria-label",ie.ariaLabel||ie._intl.openCalendarLabel)("tabindex",ie.disabled?-1:ie.tabIndex),P.xp6(2),P.Q6J("ngIf",!ie._customIcon))},dependencies:[o.O5,st.RK],styles:[".mat-datepicker-toggle{pointer-events:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0}),at})();function Gn(at){return Wi(at,!0)}function Ai(at){return at.nodeType===Node.ELEMENT_NODE}function Wi(at,vt){if(Ai(at)&&vt){const ie=(at.getAttribute?.("aria-labelledby")?.split(/\s+/g)||[]).reduce((Se,et)=>{const An=document.getElementById(et);return An&&Se.push(An),Se},[]);if(ie.length)return ie.map(Se=>Wi(Se,!1)).join(" ")}if(Ai(at)){const I=at.getAttribute("aria-label")?.trim();if(I)return I}if(function yr(at){return"INPUT"===at.nodeName}(at)||function Rr(at){return"TEXTAREA"===at.nodeName}(at)){if(at.labels?.length)return Array.from(at.labels).map(Se=>Wi(Se,!1)).join(" ");const I=at.getAttribute("placeholder")?.trim();if(I)return I;const ie=at.getAttribute("title")?.trim();if(ie)return ie}return(at.textContent||"").replace(/\s+/g," ").trim()}const oo=new P.OlP("MAT_DATE_RANGE_INPUT_PARENT"),so=(0,ke.FD)((()=>{class at extends Rt{constructor(I,ie,Se,et,An,mi,fn,xi){super(ie,fn,xi),this._rangeInput=I,this._elementRef=ie,this._defaultErrorStateMatcher=Se,this._injector=et,this._parentForm=An,this._parentFormGroup=mi,this._dir=(0,P.f3M)(pt.Is,{optional:!0})}ngOnInit(){const I=this._injector.get(kt.a5,null,{optional:!0,self:!0});I&&(this.ngControl=I)}ngDoCheck(){this.ngControl&&this.updateErrorState()}isEmpty(){return 0===this._elementRef.nativeElement.value.length}_getPlaceholder(){return this._elementRef.nativeElement.placeholder}focus(){this._elementRef.nativeElement.focus()}getMirrorValue(){const I=this._elementRef.nativeElement,ie=I.value;return ie.length>0?ie:I.placeholder}_onInput(I){super._onInput(I),this._rangeInput._handleChildValueChange()}_openPopup(){this._rangeInput._openDatepicker()}_getMinDate(){return this._rangeInput.min}_getMaxDate(){return this._rangeInput.max}_getDateFilter(){return this._rangeInput.dateFilter}_parentDisabled(){return this._rangeInput._groupDisabled}_shouldHandleChangeEvent({source:I}){return I!==this._rangeInput._startInput&&I!==this._rangeInput._endInput}_assignValueProgrammatically(I){super._assignValueProgrammatically(I),(this===this._rangeInput._startInput?this._rangeInput._endInput:this._rangeInput._startInput)?._validatorOnChange()}_getAccessibleName(){return Gn(this._elementRef.nativeElement)}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(oo),P.Y36(P.SBq),P.Y36(ke.rD),P.Y36(P.zs3),P.Y36(kt.F,8),P.Y36(kt.sg,8),P.Y36(ke._A,8),P.Y36(ke.sG,8))},at.\u0275dir=P.lG2({type:at,features:[P.qOj]}),at})());let To=(()=>{class at extends so{constructor(I,ie,Se,et,An,mi,fn,xi){super(I,ie,Se,et,An,mi,fn,xi),this._startValidator=wi=>{const yi=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(wi.value)),xr=this._model?this._model.selection.end:null;return!yi||!xr||this._dateAdapter.compareDate(yi,xr)<=0?null:{matStartDateInvalid:{end:xr,actual:yi}}},this._validator=kt.kI.compose([...super._getValidators(),this._startValidator])}_getValueFromModel(I){return I.start}_shouldHandleChangeEvent(I){return!(!super._shouldHandleChangeEvent(I)||(I.oldValue?.start?I.selection.start&&!this._dateAdapter.compareDate(I.oldValue.start,I.selection.start):!I.selection.start))}_assignValueToModel(I){if(this._model){const ie=new Fn(I,this._model.selection.end);this._model.updateSelection(ie,this)}}_formatValue(I){super._formatValue(I),this._rangeInput._handleChildValueChange()}_onKeydown(I){const ie=this._rangeInput._endInput,Se=this._elementRef.nativeElement,et="rtl"!==this._dir?.value;(I.keyCode===yt.SV&&et||I.keyCode===yt.oh&&!et)&&Se.selectionStart===Se.value.length&&Se.selectionEnd===Se.value.length?(I.preventDefault(),ie._elementRef.nativeElement.setSelectionRange(0,0),ie.focus()):super._onKeydown(I)}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(oo),P.Y36(P.SBq),P.Y36(ke.rD),P.Y36(P.zs3),P.Y36(kt.F,8),P.Y36(kt.sg,8),P.Y36(ke._A,8),P.Y36(ke.sG,8))},at.\u0275dir=P.lG2({type:at,selectors:[["input","matStartDate",""]],hostAttrs:["type","text",1,"mat-start-date","mat-date-range-input-inner"],hostVars:5,hostBindings:function(I,ie){1&I&&P.NdJ("input",function(et){return ie._onInput(et.target.value)})("change",function(){return ie._onChange()})("keydown",function(et){return ie._onKeydown(et)})("blur",function(){return ie._onBlur()}),2&I&&(P.Ikx("disabled",ie.disabled),P.uIk("aria-haspopup",ie._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==ie._rangeInput.rangePicker?null:ie._rangeInput.rangePicker.opened)&&ie._rangeInput.rangePicker.id||null)("min",ie._getMinDate()?ie._dateAdapter.toIso8601(ie._getMinDate()):null)("max",ie._getMaxDate()?ie._dateAdapter.toIso8601(ie._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[P._Bn([{provide:kt.JU,useExisting:at,multi:!0},{provide:kt.Cf,useExisting:at,multi:!0}]),P.qOj]}),at})(),$i=(()=>{class at extends so{constructor(I,ie,Se,et,An,mi,fn,xi){super(I,ie,Se,et,An,mi,fn,xi),this._endValidator=wi=>{const yi=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(wi.value)),xr=this._model?this._model.selection.start:null;return!yi||!xr||this._dateAdapter.compareDate(yi,xr)>=0?null:{matEndDateInvalid:{start:xr,actual:yi}}},this._validator=kt.kI.compose([...super._getValidators(),this._endValidator])}_getValueFromModel(I){return I.end}_shouldHandleChangeEvent(I){return!(!super._shouldHandleChangeEvent(I)||(I.oldValue?.end?I.selection.end&&!this._dateAdapter.compareDate(I.oldValue.end,I.selection.end):!I.selection.end))}_assignValueToModel(I){if(this._model){const ie=new Fn(this._model.selection.start,I);this._model.updateSelection(ie,this)}}_onKeydown(I){const ie=this._rangeInput._startInput,Se=this._elementRef.nativeElement,et="rtl"!==this._dir?.value;if(I.keyCode!==yt.ZH||Se.value)if((I.keyCode===yt.oh&&et||I.keyCode===yt.SV&&!et)&&0===Se.selectionStart&&0===Se.selectionEnd){I.preventDefault();const An=ie._elementRef.nativeElement.value.length;ie._elementRef.nativeElement.setSelectionRange(An,An),ie.focus()}else super._onKeydown(I);else ie.focus()}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(oo),P.Y36(P.SBq),P.Y36(ke.rD),P.Y36(P.zs3),P.Y36(kt.F,8),P.Y36(kt.sg,8),P.Y36(ke._A,8),P.Y36(ke.sG,8))},at.\u0275dir=P.lG2({type:at,selectors:[["input","matEndDate",""]],hostAttrs:["type","text",1,"mat-end-date","mat-date-range-input-inner"],hostVars:5,hostBindings:function(I,ie){1&I&&P.NdJ("input",function(et){return ie._onInput(et.target.value)})("change",function(){return ie._onChange()})("keydown",function(et){return ie._onKeydown(et)})("blur",function(){return ie._onBlur()}),2&I&&(P.Ikx("disabled",ie.disabled),P.uIk("aria-haspopup",ie._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==ie._rangeInput.rangePicker?null:ie._rangeInput.rangePicker.opened)&&ie._rangeInput.rangePicker.id||null)("min",ie._getMinDate()?ie._dateAdapter.toIso8601(ie._getMinDate()):null)("max",ie._getMaxDate()?ie._dateAdapter.toIso8601(ie._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[P._Bn([{provide:kt.JU,useExisting:at,multi:!0},{provide:kt.Cf,useExisting:at,multi:!0}]),P.qOj]}),at})(),gr=0,br=(()=>{class at{get value(){return this._model?this._model.selection:null}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){const I=this._startInput?._getPlaceholder()||"",ie=this._endInput?._getPlaceholder()||"";return I||ie?`${I} ${this.separator} ${ie}`:""}get rangePicker(){return this._rangePicker}set rangePicker(I){I&&(this._model=I.registerInput(this),this._rangePicker=I,this._closedSubscription.unsubscribe(),this._closedSubscription=I.closedStream.subscribe(()=>{this._startInput?._onTouched(),this._endInput?._onTouched()}),this._registerModel(this._model))}get required(){return this._required??(this._isTargetRequired(this)||this._isTargetRequired(this._startInput)||this._isTargetRequired(this._endInput))??!1}set required(I){this._required=(0,sn.Ig)(I)}get dateFilter(){return this._dateFilter}set dateFilter(I){const ie=this._startInput,Se=this._endInput,et=ie&&ie._matchesFilter(ie.value),An=Se&&Se._matchesFilter(ie.value);this._dateFilter=I,ie&&ie._matchesFilter(ie.value)!==et&&ie._validatorOnChange(),Se&&Se._matchesFilter(Se.value)!==An&&Se._validatorOnChange()}get min(){return this._min}set min(I){const ie=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I));this._dateAdapter.sameDate(ie,this._min)||(this._min=ie,this._revalidate())}get max(){return this._max}set max(I){const ie=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(I));this._dateAdapter.sameDate(ie,this._max)||(this._max=ie,this._revalidate())}get disabled(){return this._startInput&&this._endInput?this._startInput.disabled&&this._endInput.disabled:this._groupDisabled}set disabled(I){const ie=(0,sn.Ig)(I);ie!==this._groupDisabled&&(this._groupDisabled=ie,this.stateChanges.next(void 0))}get errorState(){return!(!this._startInput||!this._endInput)&&(this._startInput.errorState||this._endInput.errorState)}get empty(){const I=!!this._startInput&&this._startInput.isEmpty(),ie=!!this._endInput&&this._endInput.isEmpty();return I&&ie}constructor(I,ie,Se,et,An){this._changeDetectorRef=I,this._elementRef=ie,this._dateAdapter=et,this._formField=An,this._closedSubscription=lt.w0.EMPTY,this.id="mat-date-range-input-"+gr++,this.focused=!1,this.controlType="mat-date-range-input",this._groupDisabled=!1,this._ariaDescribedBy=null,this.separator="\u2013",this.comparisonStart=null,this.comparisonEnd=null,this.stateChanges=new Ye.x,An?._elementRef.nativeElement.classList.contains("mat-mdc-form-field")&&ie.nativeElement.classList.add("mat-mdc-input-element","mat-mdc-form-field-input-control","mdc-text-field__input"),this.ngControl=Se}setDescribedByIds(I){this._ariaDescribedBy=I.length?I.join(" "):null}onContainerClick(){!this.focused&&!this.disabled&&(this._model&&this._model.selection.start?this._endInput.focus():this._startInput.focus())}ngAfterContentInit(){this._model&&this._registerModel(this._model),(0,wt.T)(this._startInput.stateChanges,this._endInput.stateChanges).subscribe(()=>{this.stateChanges.next(void 0)})}ngOnChanges(I){Ee(I,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._closedSubscription.unsubscribe(),this.stateChanges.complete()}getStartValue(){return this.value?this.value.start:null}getThemePalette(){return this._formField?this._formField.color:void 0}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():null}_getInputMirrorValue(I){const ie="start"===I?this._startInput:this._endInput;return ie?ie.getMirrorValue():""}_shouldHidePlaceholders(){return!!this._startInput&&!this._startInput.isEmpty()}_handleChildValueChange(){this.stateChanges.next(void 0),this._changeDetectorRef.markForCheck()}_openDatepicker(){this._rangePicker&&this._rangePicker.open()}_shouldHideSeparator(){return(!this._formField||this._formField.getLabelId()&&!this._formField._shouldLabelFloat())&&this.empty}_getAriaLabelledby(){const I=this._formField;return I&&I._hasFloatingLabel()?I._labelId:null}_getStartDateAccessibleName(){return this._startInput._getAccessibleName()}_getEndDateAccessibleName(){return this._endInput._getAccessibleName()}_updateFocus(I){this.focused=null!==I,this.stateChanges.next()}_revalidate(){this._startInput&&this._startInput._validatorOnChange(),this._endInput&&this._endInput._validatorOnChange()}_registerModel(I){this._startInput&&this._startInput._registerModel(I),this._endInput&&this._endInput._registerModel(I)}_isTargetRequired(I){return I?.ngControl?.control?.hasValidator(kt.kI.required)}}return at.\u0275fac=function(I){return new(I||at)(P.Y36(P.sBO),P.Y36(P.SBq),P.Y36(kt.gN,10),P.Y36(ke._A,8),P.Y36(Ae.G_,8))},at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-date-range-input"]],contentQueries:function(I,ie,Se){if(1&I&&(P.Suo(Se,To,5),P.Suo(Se,$i,5)),2&I){let et;P.iGM(et=P.CRH())&&(ie._startInput=et.first),P.iGM(et=P.CRH())&&(ie._endInput=et.first)}},hostAttrs:["role","group",1,"mat-date-range-input"],hostVars:8,hostBindings:function(I,ie){2&I&&(P.uIk("id",ie.id)("aria-labelledby",ie._getAriaLabelledby())("aria-describedby",ie._ariaDescribedBy)("data-mat-calendar",ie.rangePicker?ie.rangePicker.id:null),P.ekj("mat-date-range-input-hide-placeholders",ie._shouldHidePlaceholders())("mat-date-range-input-required",ie.required))},inputs:{rangePicker:"rangePicker",required:"required",dateFilter:"dateFilter",min:"min",max:"max",disabled:"disabled",separator:"separator",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},exportAs:["matDateRangeInput"],features:[P._Bn([{provide:Ae.Eo,useExisting:at},{provide:oo,useExisting:at}]),P.TTD],ngContentSelectors:We,decls:11,vars:5,consts:[["cdkMonitorSubtreeFocus","",1,"mat-date-range-input-container",3,"cdkFocusChange"],[1,"mat-date-range-input-wrapper"],["aria-hidden","true",1,"mat-date-range-input-mirror"],[1,"mat-date-range-input-separator"],[1,"mat-date-range-input-wrapper","mat-date-range-input-end-wrapper"]],template:function(I,ie){1&I&&(P.F$t(Nt),P.TgZ(0,"div",0),P.NdJ("cdkFocusChange",function(et){return ie._updateFocus(et)}),P.TgZ(1,"div",1),P.Hsn(2),P.TgZ(3,"span",2),P._uU(4),P.qZA()(),P.TgZ(5,"span",3),P._uU(6),P.qZA(),P.TgZ(7,"div",4),P.Hsn(8,1),P.TgZ(9,"span",2),P._uU(10),P.qZA()()()),2&I&&(P.xp6(4),P.Oqu(ie._getInputMirrorValue("start")),P.xp6(1),P.ekj("mat-date-range-input-separator-hidden",ie._shouldHideSeparator()),P.xp6(1),P.Oqu(ie.separator),P.xp6(4),P.Oqu(ie._getInputMirrorValue("end")))},dependencies:[p.kH],styles:[".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px}._mat-animation-noopable .mat-date-range-input-separator{transition:none}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-end-wrapper{flex-grow:1}.mat-date-range-input-inner{position:absolute;top:0;left:0;font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%;height:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-date-range-input-inner::placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-moz-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner:-ms-input-placeholder{transition:none}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-mdc-form-field-type-mat-date-range-input .mat-mdc-form-field-infix{width:200px}"],encapsulation:2,changeDetection:0}),at})(),Tr=(()=>{class at extends Hn{_forwardContentValues(I){super._forwardContentValues(I);const ie=this.datepickerInput;ie&&(I.comparisonStart=ie.comparisonStart,I.comparisonEnd=ie.comparisonEnd,I.startDateAccessibleName=ie._getStartDateAccessibleName(),I.endDateAccessibleName=ie._getEndDateAccessibleName())}}return at.\u0275fac=function(){let vt;return function(ie){return(vt||(vt=P.n5z(at)))(ie||at)}}(),at.\u0275cmp=P.Xpm({type:at,selectors:[["mat-date-range-picker"]],exportAs:["matDateRangePicker"],features:[P._Bn([Ft,ve,{provide:Hn,useExisting:at}]),P.qOj],decls:0,vars:0,template:function(I,ie){},encapsulation:2,changeDetection:0}),at})(),wn=(()=>{class at{}return at.\u0275fac=function(I){return new(I||at)},at.\u0275mod=P.oAB({type:at}),at.\u0275inj=P.cJS({providers:[ft,Jt],imports:[o.ez,st.ot,j.U8,p.rt,Q.eL,ke.BQ,_t.ZD]}),at})()},5412:(ni,Wt,F)=>{"use strict";F.d(Wt,{WI:()=>kn,uw:()=>Fn,ZT:()=>li,xY:()=>ce,Is:()=>Ft,so:()=>ft,uh:()=>je});var p=F(8184),j=F(6895),Q=F(4650),o=F(7253),P=F(3353),st=F(4080),_t=F(9521),ke=F(7579),Ye=F(9770),lt=F(9646),wt=F(445),it=F(8675);function yt(xe,ve){}class pt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let en=(()=>{class xe extends st.en{constructor(re,Me,Pe,Ut,Bn,En,Ue,ue){super(),this._elementRef=re,this._focusTrapFactory=Me,this._config=Ut,this._interactivityChecker=Bn,this._ngZone=En,this._overlayRef=Ue,this._focusMonitor=ue,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=Ce=>{this._portalOutlet.hasAttached();const Ke=this._portalOutlet.attachDomPortal(Ce);return this._contentAttached(),Ke},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=Pe}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(re){this._portalOutlet.hasAttached();const Me=this._portalOutlet.attachComponentPortal(re);return this._contentAttached(),Me}attachTemplatePortal(re){this._portalOutlet.hasAttached();const Me=this._portalOutlet.attachTemplatePortal(re);return this._contentAttached(),Me}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(re,Me){this._interactivityChecker.isFocusable(re)||(re.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const Pe=()=>{re.removeEventListener("blur",Pe),re.removeEventListener("mousedown",Pe),re.removeAttribute("tabindex")};re.addEventListener("blur",Pe),re.addEventListener("mousedown",Pe)})),re.focus(Me)}_focusByCssSelector(re,Me){let Pe=this._elementRef.nativeElement.querySelector(re);Pe&&this._forceFocus(Pe,Me)}_trapFocus(){const re=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||re.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(Me=>{Me||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const re=this._config.restoreFocus;let Me=null;if("string"==typeof re?Me=this._document.querySelector(re):"boolean"==typeof re?Me=re?this._elementFocusedBeforeDialogWasOpened:null:re&&(Me=re),this._config.restoreFocus&&Me&&"function"==typeof Me.focus){const Pe=(0,P.ht)(),Ut=this._elementRef.nativeElement;(!Pe||Pe===this._document.body||Pe===Ut||Ut.contains(Pe))&&(this._focusMonitor?(this._focusMonitor.focusVia(Me,this._closeInteractionType),this._closeInteractionType=null):Me.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const re=this._elementRef.nativeElement,Me=(0,P.ht)();return re===Me||re.contains(Me)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,P.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return xe.\u0275fac=function(re){return new(re||xe)(Q.Y36(Q.SBq),Q.Y36(o.qV),Q.Y36(j.K0,8),Q.Y36(pt),Q.Y36(o.ic),Q.Y36(Q.R0b),Q.Y36(p.Iu),Q.Y36(o.tE))},xe.\u0275cmp=Q.Xpm({type:xe,selectors:[["cdk-dialog-container"]],viewQuery:function(re,Me){if(1&re&&Q.Gf(st.Pl,7),2&re){let Pe;Q.iGM(Pe=Q.CRH())&&(Me._portalOutlet=Pe.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(re,Me){2&re&&Q.uIk("id",Me._config.id||null)("role",Me._config.role)("aria-modal",Me._config.ariaModal)("aria-labelledby",Me._config.ariaLabel?null:Me._ariaLabelledBy)("aria-label",Me._config.ariaLabel)("aria-describedby",Me._config.ariaDescribedBy||null)},features:[Q.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(re,Me){1&re&&Q.YNc(0,yt,0,0,"ng-template",0)},dependencies:[st.Pl],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),xe})();class Ct{constructor(ve,re){this.overlayRef=ve,this.config=re,this.closed=new ke.x,this.disableClose=re.disableClose,this.backdropClick=ve.backdropClick(),this.keydownEvents=ve.keydownEvents(),this.outsidePointerEvents=ve.outsidePointerEvents(),this.id=re.id,this.keydownEvents.subscribe(Me=>{Me.keyCode===_t.hY&&!this.disableClose&&!(0,_t.Vb)(Me)&&(Me.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=ve.detachments().subscribe(()=>{!1!==re.closeOnOverlayDetachments&&this.close()})}close(ve,re){if(this.containerInstance){const Me=this.closed;this.containerInstance._closeInteractionType=re?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),Me.next(ve),Me.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(ve="",re=""){return this.overlayRef.updateSize({width:ve,height:re}),this}addPanelClass(ve){return this.overlayRef.addPanelClass(ve),this}removePanelClass(ve){return this.overlayRef.removePanelClass(ve),this}}const nn=new Q.OlP("DialogScrollStrategy"),sn=new Q.OlP("DialogData"),Cn=new Q.OlP("DefaultDialogConfig"),Ae={provide:nn,deps:[p.aV],useFactory:function kt(xe){return()=>xe.scrollStrategies.block()}};let ct=0,ht=(()=>{class xe{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(re,Me,Pe,Ut,Bn,En){this._overlay=re,this._injector=Me,this._defaultOptions=Pe,this._parentDialog=Ut,this._overlayContainer=Bn,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke.x,this._afterOpenedAtThisLevel=new ke.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Ye.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,it.O)(void 0))),this._scrollStrategy=En}open(re,Me){(Me={...this._defaultOptions||new pt,...Me}).id=Me.id||"cdk-dialog-"+ct++,Me.id&&this.getDialogById(Me.id);const Ut=this._getOverlayConfig(Me),Bn=this._overlay.create(Ut),En=new Ct(Bn,Me),Ue=this._attachContainer(Bn,En,Me);return En.containerInstance=Ue,this._attachDialogContent(re,En,Ue,Me),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(En),En.closed.subscribe(()=>this._removeOpenDialog(En,!0)),this.afterOpened.next(En),En}closeAll(){mt(this.openDialogs,re=>re.close())}getDialogById(re){return this.openDialogs.find(Me=>Me.id===re)}ngOnDestroy(){mt(this._openDialogsAtThisLevel,re=>{!1===re.config.closeOnDestroy&&this._removeOpenDialog(re,!1)}),mt(this._openDialogsAtThisLevel,re=>re.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(re){const Me=new p.X_({positionStrategy:re.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:re.scrollStrategy||this._scrollStrategy(),panelClass:re.panelClass,hasBackdrop:re.hasBackdrop,direction:re.direction,minWidth:re.minWidth,minHeight:re.minHeight,maxWidth:re.maxWidth,maxHeight:re.maxHeight,width:re.width,height:re.height,disposeOnNavigation:re.closeOnNavigation});return re.backdropClass&&(Me.backdropClass=re.backdropClass),Me}_attachContainer(re,Me,Pe){const Ut=Pe.injector||Pe.viewContainerRef?.injector,Bn=[{provide:pt,useValue:Pe},{provide:Ct,useValue:Me},{provide:p.Iu,useValue:re}];let En;Pe.container?"function"==typeof Pe.container?En=Pe.container:(En=Pe.container.type,Bn.push(...Pe.container.providers(Pe))):En=en;const Ue=new st.C5(En,Pe.viewContainerRef,Q.zs3.create({parent:Ut||this._injector,providers:Bn}),Pe.componentFactoryResolver);return re.attach(Ue).instance}_attachDialogContent(re,Me,Pe,Ut){if(re instanceof Q.Rgc){const Bn=this._createInjector(Ut,Me,Pe,void 0);let En={$implicit:Ut.data,dialogRef:Me};Ut.templateContext&&(En={...En,..."function"==typeof Ut.templateContext?Ut.templateContext():Ut.templateContext}),Pe.attachTemplatePortal(new st.UE(re,null,En,Bn))}else{const Bn=this._createInjector(Ut,Me,Pe,this._injector),En=Pe.attachComponentPortal(new st.C5(re,Ut.viewContainerRef,Bn,Ut.componentFactoryResolver));Me.componentInstance=En.instance}}_createInjector(re,Me,Pe,Ut){const Bn=re.injector||re.viewContainerRef?.injector,En=[{provide:sn,useValue:re.data},{provide:Ct,useValue:Me}];return re.providers&&("function"==typeof re.providers?En.push(...re.providers(Me,re,Pe)):En.push(...re.providers)),re.direction&&(!Bn||!Bn.get(wt.Is,null,{optional:!0}))&&En.push({provide:wt.Is,useValue:{value:re.direction,change:(0,lt.of)()}}),Q.zs3.create({parent:Bn||Ut,providers:En})}_removeOpenDialog(re,Me){const Pe=this.openDialogs.indexOf(re);Pe>-1&&(this.openDialogs.splice(Pe,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Ut,Bn)=>{Ut?Bn.setAttribute("aria-hidden",Ut):Bn.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),Me&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const re=this._overlayContainer.getContainerElement();if(re.parentElement){const Me=re.parentElement.children;for(let Pe=Me.length-1;Pe>-1;Pe--){const Ut=Me[Pe];Ut!==re&&"SCRIPT"!==Ut.nodeName&&"STYLE"!==Ut.nodeName&&!Ut.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Ut,Ut.getAttribute("aria-hidden")),Ut.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const re=this._parentDialog;return re?re._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return xe.\u0275fac=function(re){return new(re||xe)(Q.LFG(p.aV),Q.LFG(Q.zs3),Q.LFG(Cn,8),Q.LFG(xe,12),Q.LFG(p.Xj),Q.LFG(nn))},xe.\u0275prov=Q.Yz7({token:xe,factory:xe.\u0275fac}),xe})();function mt(xe,ve){let re=xe.length;for(;re--;)ve(xe[re])}let Je=(()=>{class xe{}return xe.\u0275fac=function(re){return new(re||xe)},xe.\u0275mod=Q.oAB({type:xe}),xe.\u0275inj=Q.cJS({providers:[ht,Ae],imports:[p.U8,st.eL,o.rt,st.eL]}),xe})();var qt=F(1281),ln=F(6451),Dn=F(9300),ti=F(5698),_n=F(3238);function ii(xe,ve){}F(7340);class vi{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Ii="mdc-dialog--open",Yt="mdc-dialog--opening",Zt="mdc-dialog--closing";let Nt=(()=>{class xe extends en{constructor(re,Me,Pe,Ut,Bn,En,Ue,ue){super(re,Me,Pe,Ut,Bn,En,Ue,ue),this._animationStateChanged=new Q.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(re){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:re})}}return xe.\u0275fac=function(re){return new(re||xe)(Q.Y36(Q.SBq),Q.Y36(o.qV),Q.Y36(j.K0,8),Q.Y36(vi),Q.Y36(o.ic),Q.Y36(Q.R0b),Q.Y36(p.Iu),Q.Y36(o.tE))},xe.\u0275cmp=Q.Xpm({type:xe,selectors:[["ng-component"]],features:[Q.qOj],decls:0,vars:0,template:function(re,Me){},encapsulation:2}),xe})();const We="--mat-dialog-transition-duration";function Ot(xe){return null==xe?null:"number"==typeof xe?xe:xe.endsWith("ms")?(0,qt.su)(xe.substring(0,xe.length-2)):xe.endsWith("s")?1e3*(0,qt.su)(xe.substring(0,xe.length-1)):"0"===xe?0:null}let Re=(()=>{class xe extends Nt{constructor(re,Me,Pe,Ut,Bn,En,Ue,ue,Ce){super(re,Me,Pe,Ut,Bn,En,Ue,Ce),this._animationMode=ue,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?Ot(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?Ot(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(We,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Yt,Ii)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Ii),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(Ii),this._animationsEnabled?(this._hostElement.style.setProperty(We,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Zt)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(Yt,Zt)}_waitForAnimationToComplete(re,Me){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(Me,re)}_requestAnimationFrame(re){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(re):re()})}}return xe.\u0275fac=function(re){return new(re||xe)(Q.Y36(Q.SBq),Q.Y36(o.qV),Q.Y36(j.K0,8),Q.Y36(vi),Q.Y36(o.ic),Q.Y36(Q.R0b),Q.Y36(p.Iu),Q.Y36(Q.QbO,8),Q.Y36(o.tE))},xe.\u0275cmp=Q.Xpm({type:xe,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(re,Me){2&re&&(Q.Ikx("id",Me._config.id),Q.uIk("aria-modal",Me._config.ariaModal)("role",Me._config.role)("aria-labelledby",Me._config.ariaLabel?null:Me._ariaLabelledBy)("aria-label",Me._config.ariaLabel)("aria-describedby",Me._config.ariaDescribedBy||null),Q.ekj("_mat-animation-noopable",!Me._animationsEnabled))},features:[Q.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(re,Me){1&re&&(Q.TgZ(0,"div",0)(1,"div",1),Q.YNc(2,ii,0,0,"ng-template",2),Q.qZA()())},dependencies:[st.Pl],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),xe})();class ft{constructor(ve,re,Me){this._ref=ve,this._containerInstance=Me,this._afterOpened=new ke.x,this._beforeClosed=new ke.x,this._state=0,this.disableClose=re.disableClose,this.id=ve.id,Me._animationStateChanged.pipe((0,Dn.h)(Pe=>"opened"===Pe.state),(0,ti.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Me._animationStateChanged.pipe((0,Dn.h)(Pe=>"closed"===Pe.state),(0,ti.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),ve.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,ln.T)(this.backdropClick(),this.keydownEvents().pipe((0,Dn.h)(Pe=>Pe.keyCode===_t.hY&&!this.disableClose&&!(0,_t.Vb)(Pe)))).subscribe(Pe=>{this.disableClose||(Pe.preventDefault(),cn(this,"keydown"===Pe.type?"keyboard":"mouse"))})}close(ve){this._result=ve,this._containerInstance._animationStateChanged.pipe((0,Dn.h)(re=>"closing"===re.state),(0,ti.q)(1)).subscribe(re=>{this._beforeClosed.next(ve),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),re.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(ve){let re=this._ref.config.positionStrategy;return ve&&(ve.left||ve.right)?ve.left?re.left(ve.left):re.right(ve.right):re.centerHorizontally(),ve&&(ve.top||ve.bottom)?ve.top?re.top(ve.top):re.bottom(ve.bottom):re.centerVertically(),this._ref.updatePosition(),this}updateSize(ve="",re=""){return this._ref.updateSize(ve,re),this}addPanelClass(ve){return this._ref.addPanelClass(ve),this}removePanelClass(ve){return this._ref.removePanelClass(ve),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function cn(xe,ve,re){return xe._closeInteractionType=ve,xe.close(re)}const kn=new Q.OlP("MatMdcDialogData"),an=new Q.OlP("mat-mdc-dialog-default-options"),Mn=new Q.OlP("mat-mdc-dialog-scroll-strategy"),On={provide:Mn,deps:[p.aV],useFactory:function Gt(xe){return()=>xe.scrollStrategies.block()}};let zt=0,Wn=(()=>{class xe{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const re=this._parentDialog;return re?re._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(re,Me,Pe,Ut,Bn,En,Ue,ue,Ce,Ke){this._overlay=re,this._defaultOptions=Pe,this._parentDialog=Ut,this._dialogRefConstructor=Ue,this._dialogContainerType=ue,this._dialogDataToken=Ce,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke.x,this._afterOpenedAtThisLevel=new ke.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=vi,this.afterAllClosed=(0,Ye.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,it.O)(void 0))),this._scrollStrategy=En,this._dialog=Me.get(ht)}open(re,Me){let Pe;(Me={...this._defaultOptions||new vi,...Me}).id=Me.id||`${this._idPrefix}${zt++}`,Me.scrollStrategy=Me.scrollStrategy||this._scrollStrategy();const Ut=this._dialog.open(re,{...Me,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:Me},{provide:pt,useValue:Me}]},templateContext:()=>({dialogRef:Pe}),providers:(Bn,En,Ue)=>(Pe=new this._dialogRefConstructor(Bn,Me,Ue),Pe.updatePosition(Me?.position),[{provide:this._dialogContainerType,useValue:Ue},{provide:this._dialogDataToken,useValue:En.data},{provide:this._dialogRefConstructor,useValue:Pe}])});return Pe.componentInstance=Ut.componentInstance,this.openDialogs.push(Pe),this.afterOpened.next(Pe),Pe.afterClosed().subscribe(()=>{const Bn=this.openDialogs.indexOf(Pe);Bn>-1&&(this.openDialogs.splice(Bn,1),this.openDialogs.length||this._getAfterAllClosed().next())}),Pe}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(re){return this.openDialogs.find(Me=>Me.id===re)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(re){let Me=re.length;for(;Me--;)re[Me].close()}}return xe.\u0275fac=function(re){Q.$Z()},xe.\u0275prov=Q.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Fn=(()=>{class xe extends Wn{constructor(re,Me,Pe,Ut,Bn,En,Ue,ue){super(re,Me,Ut,En,Ue,Bn,ft,Re,kn,ue),this._idPrefix="mat-mdc-dialog-"}}return xe.\u0275fac=function(re){return new(re||xe)(Q.LFG(p.aV),Q.LFG(Q.zs3),Q.LFG(j.Ye,8),Q.LFG(an,8),Q.LFG(Mn),Q.LFG(xe,12),Q.LFG(p.Xj),Q.LFG(Q.QbO,8))},xe.\u0275prov=Q.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),It=0,li=(()=>{class xe{constructor(re,Me,Pe){this.dialogRef=re,this._elementRef=Me,this._dialog=Pe,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=$e(this._elementRef,this._dialog.openDialogs))}ngOnChanges(re){const Me=re._matDialogClose||re._matDialogCloseResult;Me&&(this.dialogResult=Me.currentValue)}_onButtonClick(re){cn(this.dialogRef,0===re.screenX&&0===re.screenY?"keyboard":"mouse",this.dialogResult)}}return xe.\u0275fac=function(re){return new(re||xe)(Q.Y36(ft,8),Q.Y36(Q.SBq),Q.Y36(Fn))},xe.\u0275dir=Q.lG2({type:xe,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(re,Me){1&re&&Q.NdJ("click",function(Ut){return Me._onButtonClick(Ut)}),2&re&&Q.uIk("aria-label",Me.ariaLabel||null)("type",Me.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Q.TTD]}),xe})(),je=(()=>{class xe{constructor(re,Me,Pe){this._dialogRef=re,this._elementRef=Me,this._dialog=Pe,this.id="mat-mdc-dialog-title-"+It++}ngOnInit(){this._dialogRef||(this._dialogRef=$e(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const re=this._dialogRef._containerInstance;re&&!re._ariaLabelledBy&&(re._ariaLabelledBy=this.id)})}}return xe.\u0275fac=function(re){return new(re||xe)(Q.Y36(ft,8),Q.Y36(Q.SBq),Q.Y36(Fn))},xe.\u0275dir=Q.lG2({type:xe,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(re,Me){2&re&&Q.Ikx("id",Me.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),xe})(),ce=(()=>{class xe{}return xe.\u0275fac=function(re){return new(re||xe)},xe.\u0275dir=Q.lG2({type:xe,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),xe})();function $e(xe,ve){let re=xe.nativeElement.parentElement;for(;re&&!re.classList.contains("mat-mdc-dialog-container");)re=re.parentElement;return re?ve.find(Me=>Me.id===re.id):null}let Ft=(()=>{class xe{}return xe.\u0275fac=function(re){return new(re||xe)},xe.\u0275mod=Q.oAB({type:xe}),xe.\u0275inj=Q.cJS({providers:[Fn,On],imports:[Je,p.U8,st.eL,_n.BQ,_n.BQ]}),xe})()},9549:(ni,Wt,F)=>{"use strict";F.d(Wt,{Eo:()=>Wn,G_:()=>je,KE:()=>xe,R9:()=>cn,TO:()=>Ge,hX:()=>Yt,lN:()=>ve});var p=F(4650),j=F(445),Q=F(3353),o=F(7579),P=F(6451),st=F(2722),_t=F(6895),ke=F(1281),Ye=F(7340),lt=F(9643),wt=F(3238);const it=["matFormFieldNotchedOutline",""],yt=["*"],pt=["textField"],jt=["iconPrefixContainer"],en=["textPrefixContainer"];function Ct(re,Me){1&re&&p._UZ(0,"span",19)}function nn(re,Me){if(1&re){const Pe=p.EpF();p.TgZ(0,"label",17),p.NdJ("cdkObserveContent",function(){p.CHM(Pe);const Bn=p.oxw(2);return p.KtG(Bn._refreshOutlineNotchWidth())}),p.Hsn(1,1),p.YNc(2,Ct,1,0,"span",18),p.qZA()}if(2&re){const Pe=p.oxw(2);p.Q6J("floating",Pe._shouldLabelFloat())("cdkObserveContentDisabled",!Pe._hasOutline())("id",Pe._labelId),p.uIk("for",Pe._control.id)("aria-owns",Pe._control.id),p.xp6(2),p.Q6J("ngIf",!Pe.hideRequiredMarker&&Pe._control.required)}}function sn(re,Me){if(1&re&&p.YNc(0,nn,3,6,"label",16),2&re){const Pe=p.oxw();p.Q6J("ngIf",Pe._hasFloatingLabel())}}function Cn(re,Me){1&re&&p._UZ(0,"div",20)}function kt(re,Me){}function Ae(re,Me){if(1&re&&p.YNc(0,kt,0,0,"ng-template",22),2&re){p.oxw(2);const Pe=p.MAs(1);p.Q6J("ngTemplateOutlet",Pe)}}function ct(re,Me){if(1&re&&(p.TgZ(0,"div",21),p.YNc(1,Ae,1,1,"ng-template",9),p.qZA()),2&re){const Pe=p.oxw();p.Q6J("matFormFieldNotchedOutlineOpen",Pe._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",Pe._labelWidth),p.xp6(1),p.Q6J("ngIf",!Pe._forceDisplayInfixLabel())}}function ht(re,Me){1&re&&(p.TgZ(0,"div",23,24),p.Hsn(2,2),p.qZA())}function mt(re,Me){1&re&&(p.TgZ(0,"div",25,26),p.Hsn(2,3),p.qZA())}function Je(re,Me){}function qt(re,Me){if(1&re&&p.YNc(0,Je,0,0,"ng-template",22),2&re){p.oxw();const Pe=p.MAs(1);p.Q6J("ngTemplateOutlet",Pe)}}function ln(re,Me){1&re&&(p.TgZ(0,"div",27),p.Hsn(1,4),p.qZA())}function Dn(re,Me){1&re&&(p.TgZ(0,"div",28),p.Hsn(1,5),p.qZA())}function ti(re,Me){1&re&&p._UZ(0,"div",29)}function _n(re,Me){if(1&re&&(p.TgZ(0,"div",30),p.Hsn(1,6),p.qZA()),2&re){const Pe=p.oxw();p.Q6J("@transitionMessages",Pe._subscriptAnimationState)}}function _i(re,Me){if(1&re&&(p.TgZ(0,"mat-hint",34),p._uU(1),p.qZA()),2&re){const Pe=p.oxw(2);p.Q6J("id",Pe._hintLabelId),p.xp6(1),p.Oqu(Pe.hintLabel)}}function ii(re,Me){if(1&re&&(p.TgZ(0,"div",31),p.YNc(1,_i,2,2,"mat-hint",32),p.Hsn(2,7),p._UZ(3,"div",33),p.Hsn(4,8),p.qZA()),2&re){const Pe=p.oxw();p.Q6J("@transitionMessages",Pe._subscriptAnimationState),p.xp6(1),p.Q6J("ngIf",Pe.hintLabel)}}const vi=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Ii=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Yt=(()=>{class re{}return re.\u0275fac=function(Pe){return new(Pe||re)},re.\u0275dir=p.lG2({type:re,selectors:[["mat-label"]]}),re})(),Zt=0;const ze=new p.OlP("MatError");let Ge=(()=>{class re{constructor(Pe,Ut){this.id="mat-mdc-error-"+Zt++,Pe||Ut.nativeElement.setAttribute("aria-live","polite")}}return re.\u0275fac=function(Pe){return new(Pe||re)(p.$8M("aria-live"),p.Y36(p.SBq))},re.\u0275dir=p.lG2({type:re,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(Pe,Ut){2&Pe&&p.Ikx("id",Ut.id)},inputs:{id:"id"},features:[p._Bn([{provide:ze,useExisting:re}])]}),re})(),Nt=0,We=(()=>{class re{constructor(){this.align="start",this.id="mat-mdc-hint-"+Nt++}}return re.\u0275fac=function(Pe){return new(Pe||re)},re.\u0275dir=p.lG2({type:re,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(Pe,Ut){2&Pe&&(p.Ikx("id",Ut.id),p.uIk("align",null),p.ekj("mat-mdc-form-field-hint-end","end"===Ut.align))},inputs:{align:"align",id:"id"}}),re})();const Ot=new p.OlP("MatPrefix"),ft=new p.OlP("MatSuffix");let cn=(()=>{class re{constructor(){this._isText=!1}set _isTextSelector(Pe){this._isText=!0}}return re.\u0275fac=function(Pe){return new(Pe||re)},re.\u0275dir=p.lG2({type:re,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[p._Bn([{provide:ft,useExisting:re}])]}),re})(),kn=(()=>{class re{constructor(Pe){this._elementRef=Pe,this.floating=!1}getWidth(){return function an(re){if(null!==re.offsetParent)return re.scrollWidth;const Pe=re.cloneNode(!0);Pe.style.setProperty("position","absolute"),Pe.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(Pe);const Ut=Pe.scrollWidth;return Pe.remove(),Ut}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return re.\u0275fac=function(Pe){return new(Pe||re)(p.Y36(p.SBq))},re.\u0275dir=p.lG2({type:re,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(Pe,Ut){2&Pe&&p.ekj("mdc-floating-label--float-above",Ut.floating)},inputs:{floating:"floating"}}),re})();const Mn="mdc-line-ripple--active",Gt="mdc-line-ripple--deactivating";let On=(()=>{class re{constructor(Pe,Ut){this._elementRef=Pe,this._handleTransitionEnd=Bn=>{const En=this._elementRef.nativeElement.classList,Ue=En.contains(Gt);"opacity"===Bn.propertyName&&Ue&&En.remove(Mn,Gt)},Ut.runOutsideAngular(()=>{Pe.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const Pe=this._elementRef.nativeElement.classList;Pe.remove(Gt),Pe.add(Mn)}deactivate(){this._elementRef.nativeElement.classList.add(Gt)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return re.\u0275fac=function(Pe){return new(Pe||re)(p.Y36(p.SBq),p.Y36(p.R0b))},re.\u0275dir=p.lG2({type:re,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),re})(),xt=(()=>{class re{constructor(Pe,Ut){this._elementRef=Pe,this._ngZone=Ut,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const Pe=this._elementRef.nativeElement.querySelector(".mdc-floating-label");Pe?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(Pe.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>Pe.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return re.\u0275fac=function(Pe){return new(Pe||re)(p.Y36(p.SBq),p.Y36(p.R0b))},re.\u0275cmp=p.Xpm({type:re,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(Pe,Ut){2&Pe&&p.ekj("mdc-notched-outline--notched",Ut.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:it,ngContentSelectors:yt,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(Pe,Ut){1&Pe&&(p.F$t(),p._UZ(0,"div",0),p.TgZ(1,"div",1),p.Hsn(2),p.qZA(),p._UZ(3,"div",2)),2&Pe&&(p.xp6(1),p.Udp("width",Ut._getNotchWidth()))},encapsulation:2,changeDetection:0}),re})();const zt={transitionMessages:(0,Ye.X$)("transitionMessages",[(0,Ye.SB)("enter",(0,Ye.oB)({opacity:1,transform:"translateY(0%)"})),(0,Ye.eR)("void => enter",[(0,Ye.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Ye.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Wn=(()=>{class re{}return re.\u0275fac=function(Pe){return new(Pe||re)},re.\u0275dir=p.lG2({type:re}),re})();const je=new p.OlP("MatFormField"),ce=new p.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let De=0,xe=(()=>{class re{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Pe){this._hideRequiredMarker=(0,ke.Ig)(Pe)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(Pe){Pe!==this._floatLabel&&(this._floatLabel=Pe,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(Pe){const Ut=this._appearance;this._appearance=Pe||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==Ut&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(Pe){this._subscriptSizing=Pe||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(Pe){this._hintLabel=Pe,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(Pe){this._explicitFormFieldControl=Pe}constructor(Pe,Ut,Bn,En,Ue,ue,Ce,Ke){this._elementRef=Pe,this._changeDetectorRef=Ut,this._ngZone=Bn,this._dir=En,this._platform=Ue,this._defaults=ue,this._animationMode=Ce,this._document=Ke,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+De++,this._hintLabelId="mat-mdc-hint-"+De++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new o.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,ue&&(ue.appearance&&(this.appearance=ue.appearance),this._hideRequiredMarker=Boolean(ue?.hideRequiredMarker),ue.color&&(this.color=ue.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const Pe=this._control;Pe.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${Pe.controlType}`),Pe.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Pe.ngControl&&Pe.ngControl.valueChanges&&Pe.ngControl.valueChanges.pipe((0,st.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(Pe=>!Pe._isText),this._hasTextPrefix=!!this._prefixChildren.find(Pe=>Pe._isText),this._hasIconSuffix=!!this._suffixChildren.find(Pe=>!Pe._isText),this._hasTextSuffix=!!this._suffixChildren.find(Pe=>Pe._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,P.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,st.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(Pe){const Ut=this._control?this._control.ngControl:null;return Ut&&Ut[Pe]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let Pe=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Pe.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Ut=this._hintChildren?this._hintChildren.find(En=>"start"===En.align):null,Bn=this._hintChildren?this._hintChildren.find(En=>"end"===En.align):null;Ut?Pe.push(Ut.id):this._hintLabel&&Pe.push(this._hintLabelId),Bn&&Pe.push(Bn.id)}else this._errorChildren&&Pe.push(...this._errorChildren.map(Ut=>Ut.id));this._control.setDescribedByIds(Pe)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const Pe=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(Pe.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const Ut=this._iconPrefixContainer?.nativeElement,Bn=this._textPrefixContainer?.nativeElement,En=Ut?.getBoundingClientRect().width??0,Ue=Bn?.getBoundingClientRect().width??0;Pe.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${En+Ue}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const Pe=this._elementRef.nativeElement;if(Pe.getRootNode){const Ut=Pe.getRootNode();return Ut&&Ut!==Pe}return document.documentElement.contains(Pe)}}return re.\u0275fac=function(Pe){return new(Pe||re)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(p.R0b),p.Y36(j.Is),p.Y36(Q.t4),p.Y36(ce,8),p.Y36(p.QbO,8),p.Y36(_t.K0))},re.\u0275cmp=p.Xpm({type:re,selectors:[["mat-form-field"]],contentQueries:function(Pe,Ut,Bn){if(1&Pe&&(p.Suo(Bn,Yt,5),p.Suo(Bn,Yt,7),p.Suo(Bn,Wn,5),p.Suo(Bn,Ot,5),p.Suo(Bn,ft,5),p.Suo(Bn,ze,5),p.Suo(Bn,We,5)),2&Pe){let En;p.iGM(En=p.CRH())&&(Ut._labelChildNonStatic=En.first),p.iGM(En=p.CRH())&&(Ut._labelChildStatic=En.first),p.iGM(En=p.CRH())&&(Ut._formFieldControl=En.first),p.iGM(En=p.CRH())&&(Ut._prefixChildren=En),p.iGM(En=p.CRH())&&(Ut._suffixChildren=En),p.iGM(En=p.CRH())&&(Ut._errorChildren=En),p.iGM(En=p.CRH())&&(Ut._hintChildren=En)}},viewQuery:function(Pe,Ut){if(1&Pe&&(p.Gf(pt,5),p.Gf(jt,5),p.Gf(en,5),p.Gf(kn,5),p.Gf(xt,5),p.Gf(On,5)),2&Pe){let Bn;p.iGM(Bn=p.CRH())&&(Ut._textField=Bn.first),p.iGM(Bn=p.CRH())&&(Ut._iconPrefixContainer=Bn.first),p.iGM(Bn=p.CRH())&&(Ut._textPrefixContainer=Bn.first),p.iGM(Bn=p.CRH())&&(Ut._floatingLabel=Bn.first),p.iGM(Bn=p.CRH())&&(Ut._notchedOutline=Bn.first),p.iGM(Bn=p.CRH())&&(Ut._lineRipple=Bn.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(Pe,Ut){2&Pe&&p.ekj("mat-mdc-form-field-label-always-float",Ut._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",Ut._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",Ut._hasIconSuffix)("mat-form-field-invalid",Ut._control.errorState)("mat-form-field-disabled",Ut._control.disabled)("mat-form-field-autofilled",Ut._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===Ut._animationMode)("mat-form-field-appearance-fill","fill"==Ut.appearance)("mat-form-field-appearance-outline","outline"==Ut.appearance)("mat-form-field-hide-placeholder",Ut._hasFloatingLabel()&&!Ut._shouldLabelFloat())("mat-focused",Ut._control.focused)("mat-primary","accent"!==Ut.color&&"warn"!==Ut.color)("mat-accent","accent"===Ut.color)("mat-warn","warn"===Ut.color)("ng-untouched",Ut._shouldForward("untouched"))("ng-touched",Ut._shouldForward("touched"))("ng-pristine",Ut._shouldForward("pristine"))("ng-dirty",Ut._shouldForward("dirty"))("ng-valid",Ut._shouldForward("valid"))("ng-invalid",Ut._shouldForward("invalid"))("ng-pending",Ut._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[p._Bn([{provide:je,useExisting:re}])],ngContentSelectors:Ii,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(Pe,Ut){1&Pe&&(p.F$t(vi),p.YNc(0,sn,1,1,"ng-template",null,0,p.W1O),p.TgZ(2,"div",1,2),p.NdJ("click",function(En){return Ut._control.onContainerClick&&Ut._control.onContainerClick(En)}),p.YNc(4,Cn,1,0,"div",3),p.TgZ(5,"div",4),p.YNc(6,ct,2,3,"div",5),p.YNc(7,ht,3,0,"div",6),p.YNc(8,mt,3,0,"div",7),p.TgZ(9,"div",8),p.YNc(10,qt,1,1,"ng-template",9),p.Hsn(11),p.qZA(),p.YNc(12,ln,2,0,"div",10),p.YNc(13,Dn,2,0,"div",11),p.qZA(),p.YNc(14,ti,1,0,"div",12),p.qZA(),p.TgZ(15,"div",13),p.YNc(16,_n,2,1,"div",14),p.YNc(17,ii,5,2,"div",15),p.qZA()),2&Pe&&(p.xp6(2),p.ekj("mdc-text-field--filled",!Ut._hasOutline())("mdc-text-field--outlined",Ut._hasOutline())("mdc-text-field--no-label",!Ut._hasFloatingLabel())("mdc-text-field--disabled",Ut._control.disabled)("mdc-text-field--invalid",Ut._control.errorState),p.xp6(2),p.Q6J("ngIf",!Ut._hasOutline()&&!Ut._control.disabled),p.xp6(2),p.Q6J("ngIf",Ut._hasOutline()),p.xp6(1),p.Q6J("ngIf",Ut._hasIconPrefix),p.xp6(1),p.Q6J("ngIf",Ut._hasTextPrefix),p.xp6(2),p.Q6J("ngIf",!Ut._hasOutline()||Ut._forceDisplayInfixLabel()),p.xp6(2),p.Q6J("ngIf",Ut._hasTextSuffix),p.xp6(1),p.Q6J("ngIf",Ut._hasIconSuffix),p.xp6(1),p.Q6J("ngIf",!Ut._hasOutline()),p.xp6(1),p.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===Ut.subscriptSizing),p.Q6J("ngSwitch",Ut._getDisplayedMessages()),p.xp6(1),p.Q6J("ngSwitchCase","error"),p.xp6(1),p.Q6J("ngSwitchCase","hint"))},dependencies:[_t.O5,_t.tP,_t.RF,_t.n9,lt.wD,We,kn,xt,On],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[zt.transitionMessages]},changeDetection:0}),re})(),ve=(()=>{class re{}return re.\u0275fac=function(Pe){return new(Pe||re)},re.\u0275mod=p.oAB({type:re}),re.\u0275inj=p.cJS({imports:[wt.BQ,_t.ez,lt.Q8,wt.BQ]}),re})()},7392:(ni,Wt,F)=>{"use strict";F.d(Wt,{Hw:()=>Ge,Ps:()=>Nt});var p=F(4650),j=F(3238),Q=F(1281),o=F(6895),P=F(9646),st=F(2843),_t=F(4128),ke=F(727),Ye=F(8505),lt=F(4004),wt=F(262),it=F(8746),yt=F(3099),pt=F(5698),jt=F(529),en=F(1481);const Ct=["*"];let nn;function Cn(We){return function sn(){if(void 0===nn&&(nn=null,typeof window<"u")){const We=window;void 0!==We.trustedTypes&&(nn=We.trustedTypes.createPolicy("angular#components",{createHTML:Ot=>Ot}))}return nn}()?.createHTML(We)||We}function kt(We){return Error(`Unable to find icon with the name "${We}"`)}function ct(We){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${We}".`)}function ht(We){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${We}".`)}class mt{constructor(Ot,Re,ft){this.url=Ot,this.svgText=Re,this.options=ft}}let Je=(()=>{class We{constructor(Re,ft,cn,kn){this._httpClient=Re,this._sanitizer=ft,this._errorHandler=kn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=cn}addSvgIcon(Re,ft,cn){return this.addSvgIconInNamespace("",Re,ft,cn)}addSvgIconLiteral(Re,ft,cn){return this.addSvgIconLiteralInNamespace("",Re,ft,cn)}addSvgIconInNamespace(Re,ft,cn,kn){return this._addSvgIconConfig(Re,ft,new mt(cn,null,kn))}addSvgIconResolver(Re){return this._resolvers.push(Re),this}addSvgIconLiteralInNamespace(Re,ft,cn,kn){const an=this._sanitizer.sanitize(p.q3G.HTML,cn);if(!an)throw ht(cn);const Mn=Cn(an);return this._addSvgIconConfig(Re,ft,new mt("",Mn,kn))}addSvgIconSet(Re,ft){return this.addSvgIconSetInNamespace("",Re,ft)}addSvgIconSetLiteral(Re,ft){return this.addSvgIconSetLiteralInNamespace("",Re,ft)}addSvgIconSetInNamespace(Re,ft,cn){return this._addSvgIconSetConfig(Re,new mt(ft,null,cn))}addSvgIconSetLiteralInNamespace(Re,ft,cn){const kn=this._sanitizer.sanitize(p.q3G.HTML,ft);if(!kn)throw ht(ft);const an=Cn(kn);return this._addSvgIconSetConfig(Re,new mt("",an,cn))}registerFontClassAlias(Re,ft=Re){return this._fontCssClassesByAlias.set(Re,ft),this}classNameForFontAlias(Re){return this._fontCssClassesByAlias.get(Re)||Re}setDefaultFontSetClass(...Re){return this._defaultFontSetClass=Re,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Re){const ft=this._sanitizer.sanitize(p.q3G.RESOURCE_URL,Re);if(!ft)throw ct(Re);const cn=this._cachedIconsByUrl.get(ft);return cn?(0,P.of)(Dn(cn)):this._loadSvgIconFromConfig(new mt(Re,null)).pipe((0,Ye.b)(kn=>this._cachedIconsByUrl.set(ft,kn)),(0,lt.U)(kn=>Dn(kn)))}getNamedSvgIcon(Re,ft=""){const cn=ti(ft,Re);let kn=this._svgIconConfigs.get(cn);if(kn)return this._getSvgFromConfig(kn);if(kn=this._getIconConfigFromResolvers(ft,Re),kn)return this._svgIconConfigs.set(cn,kn),this._getSvgFromConfig(kn);const an=this._iconSetConfigs.get(ft);return an?this._getSvgFromIconSetConfigs(Re,an):(0,st._)(kt(cn))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Re){return Re.svgText?(0,P.of)(Dn(this._svgElementFromConfig(Re))):this._loadSvgIconFromConfig(Re).pipe((0,lt.U)(ft=>Dn(ft)))}_getSvgFromIconSetConfigs(Re,ft){const cn=this._extractIconWithNameFromAnySet(Re,ft);if(cn)return(0,P.of)(cn);const kn=ft.filter(an=>!an.svgText).map(an=>this._loadSvgIconSetFromConfig(an).pipe((0,wt.K)(Mn=>{const On=`Loading icon set URL: ${this._sanitizer.sanitize(p.q3G.RESOURCE_URL,an.url)} failed: ${Mn.message}`;return this._errorHandler.handleError(new Error(On)),(0,P.of)(null)})));return(0,_t.D)(kn).pipe((0,lt.U)(()=>{const an=this._extractIconWithNameFromAnySet(Re,ft);if(!an)throw kt(Re);return an}))}_extractIconWithNameFromAnySet(Re,ft){for(let cn=ft.length-1;cn>=0;cn--){const kn=ft[cn];if(kn.svgText&&kn.svgText.toString().indexOf(Re)>-1){const an=this._svgElementFromConfig(kn),Mn=this._extractSvgIconFromSet(an,Re,kn.options);if(Mn)return Mn}}return null}_loadSvgIconFromConfig(Re){return this._fetchIcon(Re).pipe((0,Ye.b)(ft=>Re.svgText=ft),(0,lt.U)(()=>this._svgElementFromConfig(Re)))}_loadSvgIconSetFromConfig(Re){return Re.svgText?(0,P.of)(null):this._fetchIcon(Re).pipe((0,Ye.b)(ft=>Re.svgText=ft))}_extractSvgIconFromSet(Re,ft,cn){const kn=Re.querySelector(`[id="${ft}"]`);if(!kn)return null;const an=kn.cloneNode(!0);if(an.removeAttribute("id"),"svg"===an.nodeName.toLowerCase())return this._setSvgAttributes(an,cn);if("symbol"===an.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(an),cn);const Mn=this._svgElementFromString(Cn("<svg></svg>"));return Mn.appendChild(an),this._setSvgAttributes(Mn,cn)}_svgElementFromString(Re){const ft=this._document.createElement("DIV");ft.innerHTML=Re;const cn=ft.querySelector("svg");if(!cn)throw Error("<svg> tag not found");return cn}_toSvgElement(Re){const ft=this._svgElementFromString(Cn("<svg></svg>")),cn=Re.attributes;for(let kn=0;kn<cn.length;kn++){const{name:an,value:Mn}=cn[kn];"id"!==an&&ft.setAttribute(an,Mn)}for(let kn=0;kn<Re.childNodes.length;kn++)Re.childNodes[kn].nodeType===this._document.ELEMENT_NODE&&ft.appendChild(Re.childNodes[kn].cloneNode(!0));return ft}_setSvgAttributes(Re,ft){return Re.setAttribute("fit",""),Re.setAttribute("height","100%"),Re.setAttribute("width","100%"),Re.setAttribute("preserveAspectRatio","xMidYMid meet"),Re.setAttribute("focusable","false"),ft&&ft.viewBox&&Re.setAttribute("viewBox",ft.viewBox),Re}_fetchIcon(Re){const{url:ft,options:cn}=Re,kn=cn?.withCredentials??!1;if(!this._httpClient)throw function Ae(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==ft)throw Error(`Cannot fetch icon from URL "${ft}".`);const an=this._sanitizer.sanitize(p.q3G.RESOURCE_URL,ft);if(!an)throw ct(ft);const Mn=this._inProgressUrlFetches.get(an);if(Mn)return Mn;const Gt=this._httpClient.get(an,{responseType:"text",withCredentials:kn}).pipe((0,lt.U)(On=>Cn(On)),(0,it.x)(()=>this._inProgressUrlFetches.delete(an)),(0,yt.B)());return this._inProgressUrlFetches.set(an,Gt),Gt}_addSvgIconConfig(Re,ft,cn){return this._svgIconConfigs.set(ti(Re,ft),cn),this}_addSvgIconSetConfig(Re,ft){const cn=this._iconSetConfigs.get(Re);return cn?cn.push(ft):this._iconSetConfigs.set(Re,[ft]),this}_svgElementFromConfig(Re){if(!Re.svgElement){const ft=this._svgElementFromString(Re.svgText);this._setSvgAttributes(ft,Re.options),Re.svgElement=ft}return Re.svgElement}_getIconConfigFromResolvers(Re,ft){for(let cn=0;cn<this._resolvers.length;cn++){const kn=this._resolvers[cn](ft,Re);if(kn)return _n(kn)?new mt(kn.url,null,kn.options):new mt(kn,null)}}}return We.\u0275fac=function(Re){return new(Re||We)(p.LFG(jt.eN,8),p.LFG(en.H7),p.LFG(o.K0,8),p.LFG(p.qLn))},We.\u0275prov=p.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"}),We})();function Dn(We){return We.cloneNode(!0)}function ti(We,Ot){return We+":"+Ot}function _n(We){return!(!We.url||!We.options)}const _i=(0,j.pj)(class{constructor(We){this._elementRef=We}}),ii=new p.OlP("MAT_ICON_DEFAULT_OPTIONS"),vi=new p.OlP("mat-icon-location",{providedIn:"root",factory:function Ii(){const We=(0,p.f3M)(o.K0),Ot=We?We.location:null;return{getPathname:()=>Ot?Ot.pathname+Ot.search:""}}}),Yt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Zt=Yt.map(We=>`[${We}]`).join(", "),ze=/^url\(['"]?#(.*?)['"]?\)$/;let Ge=(()=>{class We extends _i{get inline(){return this._inline}set inline(Re){this._inline=(0,Q.Ig)(Re)}get svgIcon(){return this._svgIcon}set svgIcon(Re){Re!==this._svgIcon&&(Re?this._updateSvgIcon(Re):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Re)}get fontSet(){return this._fontSet}set fontSet(Re){const ft=this._cleanupFontValue(Re);ft!==this._fontSet&&(this._fontSet=ft,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Re){const ft=this._cleanupFontValue(Re);ft!==this._fontIcon&&(this._fontIcon=ft,this._updateFontIconClasses())}constructor(Re,ft,cn,kn,an,Mn){super(Re),this._iconRegistry=ft,this._location=kn,this._errorHandler=an,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ke.w0.EMPTY,Mn&&(Mn.color&&(this.color=this.defaultColor=Mn.color),Mn.fontSet&&(this.fontSet=Mn.fontSet)),cn||Re.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(Re){if(!Re)return["",""];const ft=Re.split(":");switch(ft.length){case 1:return["",ft[0]];case 2:return ft;default:throw Error(`Invalid icon name: "${Re}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Re=this._elementsWithExternalReferences;if(Re&&Re.size){const ft=this._location.getPathname();ft!==this._previousPath&&(this._previousPath=ft,this._prependPathToReferences(ft))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Re){this._clearSvgElement();const ft=this._location.getPathname();this._previousPath=ft,this._cacheChildrenWithExternalReferences(Re),this._prependPathToReferences(ft),this._elementRef.nativeElement.appendChild(Re)}_clearSvgElement(){const Re=this._elementRef.nativeElement;let ft=Re.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();ft--;){const cn=Re.childNodes[ft];(1!==cn.nodeType||"svg"===cn.nodeName.toLowerCase())&&cn.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Re=this._elementRef.nativeElement,ft=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(cn=>cn.length>0);this._previousFontSetClass.forEach(cn=>Re.classList.remove(cn)),ft.forEach(cn=>Re.classList.add(cn)),this._previousFontSetClass=ft,this.fontIcon!==this._previousFontIconClass&&!ft.includes("mat-ligature-font")&&(this._previousFontIconClass&&Re.classList.remove(this._previousFontIconClass),this.fontIcon&&Re.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Re){return"string"==typeof Re?Re.trim().split(" ")[0]:Re}_prependPathToReferences(Re){const ft=this._elementsWithExternalReferences;ft&&ft.forEach((cn,kn)=>{cn.forEach(an=>{kn.setAttribute(an.name,`url('${Re}#${an.value}')`)})})}_cacheChildrenWithExternalReferences(Re){const ft=Re.querySelectorAll(Zt),cn=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let kn=0;kn<ft.length;kn++)Yt.forEach(an=>{const Mn=ft[kn],Gt=Mn.getAttribute(an),On=Gt?Gt.match(ze):null;if(On){let xt=cn.get(Mn);xt||(xt=[],cn.set(Mn,xt)),xt.push({name:an,value:On[1]})}})}_updateSvgIcon(Re){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Re){const[ft,cn]=this._splitIconName(Re);ft&&(this._svgNamespace=ft),cn&&(this._svgName=cn),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(cn,ft).pipe((0,pt.q)(1)).subscribe(kn=>this._setSvgElement(kn),kn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${ft}:${cn}! ${kn.message}`))})}}}return We.\u0275fac=function(Re){return new(Re||We)(p.Y36(p.SBq),p.Y36(Je),p.$8M("aria-hidden"),p.Y36(vi),p.Y36(p.qLn),p.Y36(ii,8))},We.\u0275cmp=p.Xpm({type:We,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(Re,ft){2&Re&&(p.uIk("data-mat-icon-type",ft._usingFontIcon()?"font":"svg")("data-mat-icon-name",ft._svgName||ft.fontIcon)("data-mat-icon-namespace",ft._svgNamespace||ft.fontSet)("fontIcon",ft._usingFontIcon()?ft.fontIcon:null),p.ekj("mat-icon-inline",ft.inline)("mat-icon-no-color","primary"!==ft.color&&"accent"!==ft.color&&"warn"!==ft.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[p.qOj],ngContentSelectors:Ct,decls:1,vars:0,template:function(Re,ft){1&Re&&(p.F$t(),p.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),We})(),Nt=(()=>{class We{}return We.\u0275fac=function(Re){return new(Re||We)},We.\u0275mod=p.oAB({type:We}),We.\u0275inj=p.cJS({imports:[j.BQ,j.BQ]}),We})()},4144:(ni,Wt,F)=>{"use strict";F.d(Wt,{Jk:()=>jt,Nt:()=>sn,c:()=>Cn});var p=F(1281),j=F(3353),Q=F(4650),o=F(515),P=F(7579);const st=(0,j.i$)({passive:!0});let _t=(()=>{class kt{constructor(ct,ht){this._platform=ct,this._ngZone=ht,this._monitoredElements=new Map}monitor(ct){if(!this._platform.isBrowser)return o.E;const ht=(0,p.fI)(ct),mt=this._monitoredElements.get(ht);if(mt)return mt.subject;const Je=new P.x,qt="cdk-text-field-autofilled",ln=Dn=>{"cdk-text-field-autofill-start"!==Dn.animationName||ht.classList.contains(qt)?"cdk-text-field-autofill-end"===Dn.animationName&&ht.classList.contains(qt)&&(ht.classList.remove(qt),this._ngZone.run(()=>Je.next({target:Dn.target,isAutofilled:!1}))):(ht.classList.add(qt),this._ngZone.run(()=>Je.next({target:Dn.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{ht.addEventListener("animationstart",ln,st),ht.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(ht,{subject:Je,unlisten:()=>{ht.removeEventListener("animationstart",ln,st)}}),Je}stopMonitoring(ct){const ht=(0,p.fI)(ct),mt=this._monitoredElements.get(ht);mt&&(mt.unlisten(),mt.subject.complete(),ht.classList.remove("cdk-text-field-autofill-monitored"),ht.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(ht))}ngOnDestroy(){this._monitoredElements.forEach((ct,ht)=>this.stopMonitoring(ht))}}return kt.\u0275fac=function(ct){return new(ct||kt)(Q.LFG(j.t4),Q.LFG(Q.R0b))},kt.\u0275prov=Q.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})(),lt=(()=>{class kt{}return kt.\u0275fac=function(ct){return new(ct||kt)},kt.\u0275mod=Q.oAB({type:kt}),kt.\u0275inj=Q.cJS({}),kt})();var wt=F(4006),it=F(3238),yt=F(9549);const jt=new Q.OlP("MAT_INPUT_VALUE_ACCESSOR"),en=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Ct=0;const nn=(0,it.FD)(class{constructor(kt,Ae,ct,ht){this._defaultErrorStateMatcher=kt,this._parentForm=Ae,this._parentFormGroup=ct,this.ngControl=ht,this.stateChanges=new P.x}});let sn=(()=>{class kt extends nn{get disabled(){return this._disabled}set disabled(ct){this._disabled=(0,p.Ig)(ct),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(ct){this._id=ct||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(wt.kI.required)??!1}set required(ct){this._required=(0,p.Ig)(ct)}get type(){return this._type}set type(ct){this._type=ct||"text",this._validateType(),!this._isTextarea&&(0,j.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(ct){ct!==this.value&&(this._inputValueAccessor.value=ct,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(ct){this._readonly=(0,p.Ig)(ct)}constructor(ct,ht,mt,Je,qt,ln,Dn,ti,_n,_i){super(ln,Je,qt,mt),this._elementRef=ct,this._platform=ht,this._autofillMonitor=ti,this._formField=_i,this._uid="mat-input-"+Ct++,this.focused=!1,this.stateChanges=new P.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Ii=>(0,j.qK)().has(Ii)),this._iOSKeyupListener=Ii=>{const Yt=Ii.target;!Yt.value&&0===Yt.selectionStart&&0===Yt.selectionEnd&&(Yt.setSelectionRange(1,1),Yt.setSelectionRange(0,0))};const ii=this._elementRef.nativeElement,vi=ii.nodeName.toLowerCase();this._inputValueAccessor=Dn||ii,this._previousNativeValue=this.value,this.id=this.id,ht.IOS&&_n.runOutsideAngular(()=>{ct.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===vi,this._isTextarea="textarea"===vi,this._isInFormField=!!_i,this._isNativeSelect&&(this.controlType=ii.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(ct=>{this.autofilled=ct.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(ct){this._elementRef.nativeElement.focus(ct)}_focusChanged(ct){ct!==this.focused&&(this.focused=ct,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const ct=this._elementRef.nativeElement.value;this._previousNativeValue!==ct&&(this._previousNativeValue=ct,this.stateChanges.next())}_dirtyCheckPlaceholder(){const ct=this._getPlaceholder();if(ct!==this._previousPlaceholder){const ht=this._elementRef.nativeElement;this._previousPlaceholder=ct,ct?ht.setAttribute("placeholder",ct):ht.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){en.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let ct=this._elementRef.nativeElement.validity;return ct&&ct.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const ct=this._elementRef.nativeElement,ht=ct.options[0];return this.focused||ct.multiple||!this.empty||!!(ct.selectedIndex>-1&&ht&&ht.label)}return this.focused||!this.empty}setDescribedByIds(ct){ct.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ct.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const ct=this._elementRef.nativeElement;return this._isNativeSelect&&(ct.multiple||ct.size>1)}}return kt.\u0275fac=function(ct){return new(ct||kt)(Q.Y36(Q.SBq),Q.Y36(j.t4),Q.Y36(wt.a5,10),Q.Y36(wt.F,8),Q.Y36(wt.sg,8),Q.Y36(it.rD),Q.Y36(jt,10),Q.Y36(_t),Q.Y36(Q.R0b),Q.Y36(yt.G_,8))},kt.\u0275dir=Q.lG2({type:kt,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(ct,ht){1&ct&&Q.NdJ("focus",function(){return ht._focusChanged(!0)})("blur",function(){return ht._focusChanged(!1)})("input",function(){return ht._onInput()}),2&ct&&(Q.Ikx("id",ht.id)("disabled",ht.disabled)("required",ht.required),Q.uIk("name",ht.name||null)("readonly",ht.readonly&&!ht._isNativeSelect||null)("aria-invalid",ht.empty&&ht.required?null:ht.errorState)("aria-required",ht.required)("id",ht.id),Q.ekj("mat-input-server",ht._isServer)("mat-mdc-form-field-textarea-control",ht._isInFormField&&ht._isTextarea)("mat-mdc-form-field-input-control",ht._isInFormField)("mdc-text-field__input",ht._isInFormField)("mat-mdc-native-select-inline",ht._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Q._Bn([{provide:yt.Eo,useExisting:kt}]),Q.qOj,Q.TTD]}),kt})(),Cn=(()=>{class kt{}return kt.\u0275fac=function(ct){return new(ct||kt)},kt.\u0275mod=Q.oAB({type:kt}),kt.\u0275inj=Q.cJS({imports:[it.BQ,yt.lN,yt.lN,lt,it.BQ]}),kt})()},3162:(ni,Wt,F)=>{"use strict";F.d(Wt,{Cv:()=>wt,pW:()=>Ye});var p=F(4650),Q=(F(6895),F(3238)),o=F(1281);const P=new p.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),ke=(0,Q.pj)(class{constructor(it){this._elementRef=it}},"primary");let Ye=(()=>{class it extends ke{constructor(pt,jt,en,Ct,nn){super(pt),this._ngZone=jt,this._changeDetectorRef=en,this._animationMode=Ct,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new p.vpe,this._mode="determinate",this._transitionendHandler=sn=>{0===this.animationEnd.observers.length||!sn.target||!sn.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===Ct,nn&&(nn.color&&(this.color=this.defaultColor=nn.color),this.mode=nn.mode||this.mode)}get value(){return this._value}set value(pt){this._value=lt((0,o.su)(pt)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(pt){this._bufferValue=lt((0,o.su)(pt)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(pt){this._mode=pt,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return it.\u0275fac=function(pt){return new(pt||it)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(p.QbO,8),p.Y36(P,8))},it.\u0275cmp=p.Xpm({type:it,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(pt,jt){2&pt&&(p.uIk("aria-valuenow",jt._isIndeterminate()?null:jt.value)("mode",jt.mode),p.ekj("_mat-animation-noopable",jt._isNoopAnimation)("mdc-linear-progress--animation-ready",!jt._isNoopAnimation)("mdc-linear-progress--indeterminate",jt._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[p.qOj],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(pt,jt){1&pt&&(p.TgZ(0,"div",0),p._UZ(1,"div",1)(2,"div",2),p.qZA(),p.TgZ(3,"div",3),p._UZ(4,"span",4),p.qZA(),p.TgZ(5,"div",5),p._UZ(6,"span",4),p.qZA()),2&pt&&(p.xp6(1),p.Udp("flex-basis",jt._getBufferBarFlexBasis()),p.xp6(2),p.Udp("transform",jt._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress{height:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height, 4px)}.mat-mdc-progress-bar{display:block}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),it})();function lt(it,yt=0,pt=100){return Math.max(yt,Math.min(pt,it))}let wt=(()=>{class it{}return it.\u0275fac=function(pt){return new(pt||it)},it.\u0275mod=p.oAB({type:it}),it.\u0275inj=p.cJS({imports:[Q.BQ]}),it})()},4385:(ni,Wt,F)=>{"use strict";F.d(Wt,{LD:()=>Mn,gD:()=>an});var p=F(8184),j=F(6895),Q=F(4650),o=F(3238),P=F(9549),st=F(8605),_t=F(7253),ke=F(445),Ye=F(1281),lt=F(5017),wt=F(9521),it=F(4006),yt=F(7579),pt=F(9770),jt=F(6451),en=F(8675),Ct=F(3900),nn=F(5698),sn=F(9300),Cn=F(4004),kt=F(1884),Ae=F(2722),ct=F(7340);const ht=["trigger"],mt=["panel"];function Je(Gt,On){if(1&Gt&&(Q.TgZ(0,"span",10),Q._uU(1),Q.qZA()),2&Gt){const xt=Q.oxw();Q.xp6(1),Q.Oqu(xt.placeholder)}}function qt(Gt,On){if(1&Gt&&(Q.TgZ(0,"span",14),Q._uU(1),Q.qZA()),2&Gt){const xt=Q.oxw(2);Q.xp6(1),Q.Oqu(xt.triggerValue)}}function ln(Gt,On){1&Gt&&Q.Hsn(0,0,["*ngSwitchCase","true"])}function Dn(Gt,On){if(1&Gt&&(Q.TgZ(0,"span",11),Q.YNc(1,qt,2,1,"span",12),Q.YNc(2,ln,1,0,"ng-content",13),Q.qZA()),2&Gt){const xt=Q.oxw();Q.Q6J("ngSwitch",!!xt.customTrigger),Q.xp6(2),Q.Q6J("ngSwitchCase",!0)}}function ti(Gt,On){if(1&Gt){const xt=Q.EpF();Q.O4$(),Q.kcU(),Q.TgZ(0,"div",15,16),Q.NdJ("@transformPanel.done",function(Wn){Q.CHM(xt);const Fn=Q.oxw();return Q.KtG(Fn._panelDoneAnimatingStream.next(Wn.toState))})("keydown",function(Wn){Q.CHM(xt);const Fn=Q.oxw();return Q.KtG(Fn._handleKeydown(Wn))}),Q.Hsn(2,1),Q.qZA()}if(2&Gt){const xt=Q.oxw();Q.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",xt._getPanelTheme(),""),Q.Q6J("ngClass",xt.panelClass)("@transformPanel","showing"),Q.uIk("id",xt.id+"-panel")("aria-multiselectable",xt.multiple)("aria-label",xt.ariaLabel||null)("aria-labelledby",xt._getPanelAriaLabelledby())}}const _n=[[["mat-select-trigger"]],"*"],_i=["mat-select-trigger","*"],ii={transformPanelWrap:(0,ct.X$)("transformPanelWrap",[(0,ct.eR)("* => void",(0,ct.IO)("@transformPanel",[(0,ct.pV)()],{optional:!0}))]),transformPanel:(0,ct.X$)("transformPanel",[(0,ct.SB)("void",(0,ct.oB)({opacity:0,transform:"scale(1, 0.8)"})),(0,ct.eR)("void => showing",(0,ct.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,ct.oB)({opacity:1,transform:"scale(1, 1)"}))),(0,ct.eR)("* => void",(0,ct.jt)("100ms linear",(0,ct.oB)({opacity:0})))])};let Zt=0;const ze=new Q.OlP("mat-select-scroll-strategy"),Nt=new Q.OlP("MAT_SELECT_CONFIG"),We={provide:ze,deps:[p.aV],useFactory:function Ge(Gt){return()=>Gt.scrollStrategies.reposition()}},Ot=new Q.OlP("MatSelectTrigger");class Re{constructor(On,xt){this.source=On,this.value=xt}}const ft=(0,o.Kr)((0,o.sb)((0,o.Id)((0,o.FD)(class{constructor(Gt,On,xt,zt,Wn){this._elementRef=Gt,this._defaultErrorStateMatcher=On,this._parentForm=xt,this._parentFormGroup=zt,this.ngControl=Wn,this.stateChanges=new yt.x}}))));let cn=(()=>{class Gt extends ft{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(xt){this._placeholder=xt,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(it.kI.required)??!1}set required(xt){this._required=(0,Ye.Ig)(xt),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(xt){this._multiple=(0,Ye.Ig)(xt)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(xt){this._disableOptionCentering=(0,Ye.Ig)(xt)}get compareWith(){return this._compareWith}set compareWith(xt){this._compareWith=xt,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(xt){this._assignValue(xt)&&this._onChange(xt)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(xt){this._typeaheadDebounceInterval=(0,Ye.su)(xt)}get id(){return this._id}set id(xt){this._id=xt||this._uid,this.stateChanges.next()}constructor(xt,zt,Wn,Fn,It,li,je,ce,De,$e,Ft,Qe,Te,xe){super(It,Fn,je,ce,$e),this._viewportRuler=xt,this._changeDetectorRef=zt,this._ngZone=Wn,this._dir=li,this._parentFormField=De,this._liveAnnouncer=Te,this._defaultOptions=xe,this._panelOpen=!1,this._compareWith=(ve,re)=>ve===re,this._uid="mat-select-"+Zt++,this._triggerAriaLabelledBy=null,this._destroy=new yt.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Zt++,this._panelDoneAnimatingStream=new yt.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,pt.P)(()=>{const ve=this.options;return ve?ve.changes.pipe((0,en.O)(ve),(0,Ct.w)(()=>(0,jt.T)(...ve.map(re=>re.onSelectionChange)))):this._ngZone.onStable.pipe((0,nn.q)(1),(0,Ct.w)(()=>this.optionSelectionChanges))}),this.openedChange=new Q.vpe,this._openedStream=this.openedChange.pipe((0,sn.h)(ve=>ve),(0,Cn.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,sn.h)(ve=>!ve),(0,Cn.U)(()=>{})),this.selectionChange=new Q.vpe,this.valueChange=new Q.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=xe?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=xe.typeaheadDebounceInterval),this._scrollStrategyFactory=Qe,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Ft)||0,this.id=this.id}ngOnInit(){this._selectionModel=new lt.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,kt.x)(),(0,Ae.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Ae.R)(this._destroy)).subscribe(xt=>{xt.added.forEach(zt=>zt.select()),xt.removed.forEach(zt=>zt.deselect())}),this.options.changes.pipe((0,en.O)(null),(0,Ae.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const xt=this._getTriggerAriaLabelledby(),zt=this.ngControl;if(xt!==this._triggerAriaLabelledBy){const Wn=this._elementRef.nativeElement;this._triggerAriaLabelledBy=xt,xt?Wn.setAttribute("aria-labelledby",xt):Wn.removeAttribute("aria-labelledby")}zt&&(this._previousControl!==zt.control&&(void 0!==this._previousControl&&null!==zt.disabled&&zt.disabled!==this.disabled&&(this.disabled=zt.disabled),this._previousControl=zt.control),this.updateErrorState())}ngOnChanges(xt){(xt.disabled||xt.userAriaDescribedBy)&&this.stateChanges.next(),xt.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(xt){this._assignValue(xt)}registerOnChange(xt){this._onChange=xt}registerOnTouched(xt){this._onTouched=xt}setDisabledState(xt){this.disabled=xt,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const xt=this._selectionModel.selected.map(zt=>zt.viewValue);return this._isRtl()&&xt.reverse(),xt.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(xt){this.disabled||(this.panelOpen?this._handleOpenKeydown(xt):this._handleClosedKeydown(xt))}_handleClosedKeydown(xt){const zt=xt.keyCode,Wn=zt===wt.JH||zt===wt.LH||zt===wt.oh||zt===wt.SV,Fn=zt===wt.K5||zt===wt.L_,It=this._keyManager;if(!It.isTyping()&&Fn&&!(0,wt.Vb)(xt)||(this.multiple||xt.altKey)&&Wn)xt.preventDefault(),this.open();else if(!this.multiple){const li=this.selected;It.onKeydown(xt);const je=this.selected;je&&li!==je&&this._liveAnnouncer.announce(je.viewValue,1e4)}}_handleOpenKeydown(xt){const zt=this._keyManager,Wn=xt.keyCode,Fn=Wn===wt.JH||Wn===wt.LH,It=zt.isTyping();if(Fn&&xt.altKey)xt.preventDefault(),this.close();else if(It||Wn!==wt.K5&&Wn!==wt.L_||!zt.activeItem||(0,wt.Vb)(xt))if(!It&&this._multiple&&Wn===wt.A&&xt.ctrlKey){xt.preventDefault();const li=this.options.some(je=>!je.disabled&&!je.selected);this.options.forEach(je=>{je.disabled||(li?je.select():je.deselect())})}else{const li=zt.activeItemIndex;zt.onKeydown(xt),this._multiple&&Fn&&xt.shiftKey&&zt.activeItem&&zt.activeItemIndex!==li&&zt.activeItem._selectViaInteraction()}else xt.preventDefault(),zt.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,nn.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(xt){if(this.options.forEach(zt=>zt.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&xt)Array.isArray(xt),xt.forEach(zt=>this._selectOptionByValue(zt)),this._sortValues();else{const zt=this._selectOptionByValue(xt);zt?this._keyManager.updateActiveItem(zt):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(xt){const zt=this.options.find(Wn=>{if(this._selectionModel.isSelected(Wn))return!1;try{return null!=Wn.value&&this._compareWith(Wn.value,xt)}catch{return!1}});return zt&&this._selectionModel.select(zt),zt}_assignValue(xt){return!!(xt!==this._value||this._multiple&&Array.isArray(xt))&&(this.options&&this._setSelectionByValue(xt),this._value=xt,!0)}_initKeyManager(){this._keyManager=new _t.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const xt=(0,jt.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Ae.R)(xt)).subscribe(zt=>{this._onSelect(zt.source,zt.isUserInput),zt.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,jt.T)(...this.options.map(zt=>zt._stateChanges)).pipe((0,Ae.R)(xt)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(xt,zt){const Wn=this._selectionModel.isSelected(xt);null!=xt.value||this._multiple?(Wn!==xt.selected&&(xt.selected?this._selectionModel.select(xt):this._selectionModel.deselect(xt)),zt&&this._keyManager.setActiveItem(xt),this.multiple&&(this._sortValues(),zt&&this.focus())):(xt.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(xt.value)),Wn!==this._selectionModel.isSelected(xt)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const xt=this.options.toArray();this._selectionModel.sort((zt,Wn)=>this.sortComparator?this.sortComparator(zt,Wn,xt):xt.indexOf(zt)-xt.indexOf(Wn)),this.stateChanges.next()}}_propagateChanges(xt){let zt=null;zt=this.multiple?this.selected.map(Wn=>Wn.value):this.selected?this.selected.value:xt,this._value=zt,this.valueChange.emit(zt),this._onChange(zt),this.selectionChange.emit(this._getChangeEvent(zt)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(xt){this._elementRef.nativeElement.focus(xt)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const xt=this._parentFormField?.getLabelId();return this.ariaLabelledby?(xt?xt+" ":"")+this.ariaLabelledby:xt}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const xt=this._parentFormField?.getLabelId();let zt=(xt?xt+" ":"")+this._valueId;return this.ariaLabelledby&&(zt+=" "+this.ariaLabelledby),zt}_panelDoneAnimating(xt){this.openedChange.emit(xt)}setDescribedByIds(xt){xt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",xt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Gt.\u0275fac=function(xt){return new(xt||Gt)(Q.Y36(st.rL),Q.Y36(Q.sBO),Q.Y36(Q.R0b),Q.Y36(o.rD),Q.Y36(Q.SBq),Q.Y36(ke.Is,8),Q.Y36(it.F,8),Q.Y36(it.sg,8),Q.Y36(P.G_,8),Q.Y36(it.a5,10),Q.$8M("tabindex"),Q.Y36(ze),Q.Y36(_t.Kd),Q.Y36(Nt,8))},Gt.\u0275dir=Q.lG2({type:Gt,viewQuery:function(xt,zt){if(1&xt&&(Q.Gf(ht,5),Q.Gf(mt,5),Q.Gf(p.pI,5)),2&xt){let Wn;Q.iGM(Wn=Q.CRH())&&(zt.trigger=Wn.first),Q.iGM(Wn=Q.CRH())&&(zt.panel=Wn.first),Q.iGM(Wn=Q.CRH())&&(zt._overlayDir=Wn.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Q.qOj,Q.TTD]}),Gt})(),an=(()=>{class Gt extends cn{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Ae.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(xt){const zt=this.options.toArray()[xt];if(zt){const Wn=this.panel.nativeElement,Fn=(0,o.CB)(xt,this.options,this.optionGroups),It=zt._getHostElement();Wn.scrollTop=0===xt&&1===Fn?0:(0,o.jH)(It.offsetTop,It.offsetHeight,Wn.scrollTop,Wn.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(xt){return new Re(this,xt)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof p.xu?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(xt){this._hideSingleSelectionIndicator=(0,Ye.Ig)(xt),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const xt of this.options)xt._changeDetectorRef.markForCheck()}}return Gt.\u0275fac=function(){let On;return function(zt){return(On||(On=Q.n5z(Gt)))(zt||Gt)}}(),Gt.\u0275cmp=Q.Xpm({type:Gt,selectors:[["mat-select"]],contentQueries:function(xt,zt,Wn){if(1&xt&&(Q.Suo(Wn,Ot,5),Q.Suo(Wn,o.ey,5),Q.Suo(Wn,o.K7,5)),2&xt){let Fn;Q.iGM(Fn=Q.CRH())&&(zt.customTrigger=Fn.first),Q.iGM(Fn=Q.CRH())&&(zt.options=Fn),Q.iGM(Fn=Q.CRH())&&(zt.optionGroups=Fn)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(xt,zt){1&xt&&Q.NdJ("keydown",function(Fn){return zt._handleKeydown(Fn)})("focus",function(){return zt._onFocus()})("blur",function(){return zt._onBlur()}),2&xt&&(Q.uIk("id",zt.id)("tabindex",zt.tabIndex)("aria-controls",zt.panelOpen?zt.id+"-panel":null)("aria-expanded",zt.panelOpen)("aria-label",zt.ariaLabel||null)("aria-required",zt.required.toString())("aria-disabled",zt.disabled.toString())("aria-invalid",zt.errorState)("aria-activedescendant",zt._getAriaActiveDescendant()),Q.ekj("mat-mdc-select-disabled",zt.disabled)("mat-mdc-select-invalid",zt.errorState)("mat-mdc-select-required",zt.required)("mat-mdc-select-empty",zt.empty)("mat-mdc-select-multiple",zt.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[Q._Bn([{provide:P.Eo,useExisting:Gt},{provide:o.HF,useExisting:Gt}]),Q.qOj],ngContentSelectors:_i,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(xt,zt){if(1&xt&&(Q.F$t(_n),Q.TgZ(0,"div",0,1),Q.NdJ("click",function(){return zt.toggle()}),Q.TgZ(3,"div",2),Q.YNc(4,Je,2,1,"span",3),Q.YNc(5,Dn,3,2,"span",4),Q.qZA(),Q.TgZ(6,"div",5)(7,"div",6),Q.O4$(),Q.TgZ(8,"svg",7),Q._UZ(9,"path",8),Q.qZA()()()(),Q.YNc(10,ti,3,9,"ng-template",9),Q.NdJ("backdropClick",function(){return zt.close()})("attach",function(){return zt._onAttached()})("detach",function(){return zt.close()})),2&xt){const Wn=Q.MAs(1);Q.uIk("aria-owns",zt.panelOpen?zt.id+"-panel":null),Q.xp6(3),Q.Q6J("ngSwitch",zt.empty),Q.uIk("id",zt._valueId),Q.xp6(1),Q.Q6J("ngSwitchCase",!0),Q.xp6(1),Q.Q6J("ngSwitchCase",!1),Q.xp6(5),Q.Q6J("cdkConnectedOverlayPanelClass",zt._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",zt._scrollStrategy)("cdkConnectedOverlayOrigin",zt._preferredOverlayOrigin||Wn)("cdkConnectedOverlayOpen",zt.panelOpen)("cdkConnectedOverlayPositions",zt._positions)("cdkConnectedOverlayWidth",zt._overlayWidth)}},dependencies:[j.mk,j.RF,j.n9,j.ED,p.pI,p.xu],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[ii.transformPanel]},changeDetection:0}),Gt})(),Mn=(()=>{class Gt{}return Gt.\u0275fac=function(xt){return new(xt||Gt)},Gt.\u0275mod=Q.oAB({type:Gt}),Gt.\u0275inj=Q.cJS({providers:[We],imports:[j.ez,p.U8,o.Ng,o.BQ,st.ZD,P.lN,o.Ng,o.BQ]}),Gt})()},1481:(ni,Wt,F)=>{"use strict";F.d(Wt,{Dx:()=>Qe,H7:()=>Yn,b2:()=>je,q6:()=>Wn,se:()=>_n});var p=F(6895),j=F(4650);class Q extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends Q{static makeCurrent(){(0,p.HT)(new o)}onAndCancel(Ee,se,le){return Ee.addEventListener(se,le,!1),()=>{Ee.removeEventListener(se,le,!1)}}dispatchEvent(Ee,se){Ee.dispatchEvent(se)}remove(Ee){Ee.parentNode&&Ee.parentNode.removeChild(Ee)}createElement(Ee,se){return(se=se||this.getDefaultDocument()).createElement(Ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ee){return Ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ee){return Ee instanceof DocumentFragment}getGlobalEventTarget(Ee,se){return"window"===se?window:"document"===se?Ee:"body"===se?Ee.body:null}getBaseHref(Ee){const se=function st(){return P=P||document.querySelector("base"),P?P.getAttribute("href"):null}();return null==se?null:function ke(Rt){_t=_t||document.createElement("a"),_t.setAttribute("href",Rt);const Ee=_t.pathname;return"/"===Ee.charAt(0)?Ee:`/${Ee}`}(se)}resetBaseElement(){P=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ee){return(0,p.Mx)(document.cookie,Ee)}}let _t,P=null;const Ye=new j.OlP("TRANSITION_ID"),wt=[{provide:j.ip1,useFactory:function lt(Rt,Ee,se){return()=>{se.get(j.CZH).donePromise.then(()=>{const le=(0,p.q)(),Fe=Ee.querySelectorAll(`style[ng-transition="${Rt}"]`);for(let Et=0;Et<Fe.length;Et++)le.remove(Fe[Et])})}},deps:[Ye,p.K0,j.zs3],multi:!0}];let yt=(()=>{class Rt{build(){return new XMLHttpRequest}}return Rt.\u0275fac=function(se){return new(se||Rt)},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();const pt=new j.OlP("EventManagerPlugins");let jt=(()=>{class Rt{constructor(se,le){this._zone=le,this._eventNameToPlugin=new Map,se.forEach(Fe=>{Fe.manager=this}),this._plugins=se.slice().reverse()}addEventListener(se,le,Fe){return this._findPluginFor(le).addEventListener(se,le,Fe)}addGlobalEventListener(se,le,Fe){return this._findPluginFor(le).addGlobalEventListener(se,le,Fe)}getZone(){return this._zone}_findPluginFor(se){const le=this._eventNameToPlugin.get(se);if(le)return le;const Fe=this._plugins;for(let Et=0;Et<Fe.length;Et++){const rn=Fe[Et];if(rn.supports(se))return this._eventNameToPlugin.set(se,rn),rn}throw new Error(`No event manager plugin found for event ${se}`)}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(pt),j.LFG(j.R0b))},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();class en{constructor(Ee){this._doc=Ee}addGlobalEventListener(Ee,se,le){const Fe=(0,p.q)().getGlobalEventTarget(this._doc,Ee);if(!Fe)throw new Error(`Unsupported event target ${Fe} for event ${se}`);return this.addEventListener(Fe,se,le)}}let Ct=(()=>{class Rt{constructor(){this.usageCount=new Map}addStyles(se){for(const le of se)1===this.changeUsageCount(le,1)&&this.onStyleAdded(le)}removeStyles(se){for(const le of se)0===this.changeUsageCount(le,-1)&&this.onStyleRemoved(le)}onStyleRemoved(se){}onStyleAdded(se){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(se,le){const Fe=this.usageCount;let Et=Fe.get(se)??0;return Et+=le,Et>0?Fe.set(se,Et):Fe.delete(se),Et}ngOnDestroy(){for(const se of this.getAllStyles())this.onStyleRemoved(se);this.usageCount.clear()}}return Rt.\u0275fac=function(se){return new(se||Rt)},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})(),nn=(()=>{class Rt extends Ct{constructor(se){super(),this.doc=se,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(se){for(const le of this.hostNodes)this.addStyleToHost(le,se)}onStyleRemoved(se){const le=this.styleRef;le.get(se)?.forEach(Et=>Et.remove()),le.delete(se)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(se){this.hostNodes.add(se);for(const le of this.getAllStyles())this.addStyleToHost(se,le)}removeHost(se){this.hostNodes.delete(se)}addStyleToHost(se,le){const Fe=this.doc.createElement("style");Fe.textContent=le,se.appendChild(Fe);const Et=this.styleRef.get(le);Et?Et.push(Fe):this.styleRef.set(le,[Fe])}resetHostNodes(){const se=this.hostNodes;se.clear(),se.add(this.doc.head)}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(p.K0))},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();const sn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cn=/%COMP%/g,Je=new j.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Dn(Rt,Ee){return Ee.flat(100).map(se=>se.replace(Cn,Rt))}function ti(Rt){return Ee=>{if("__ngUnwrap__"===Ee)return Rt;!1===Rt(Ee)&&(Ee.preventDefault(),Ee.returnValue=!1)}}let _n=(()=>{class Rt{constructor(se,le,Fe,Et){this.eventManager=se,this.sharedStylesHost=le,this.appId=Fe,this.removeStylesOnCompDestory=Et,this.rendererByCompId=new Map,this.defaultRenderer=new _i(se)}createRenderer(se,le){if(!se||!le)return this.defaultRenderer;const Fe=this.getOrCreateRenderer(se,le);return Fe instanceof ze?Fe.applyToHost(se):Fe instanceof Zt&&Fe.applyStyles(),Fe}getOrCreateRenderer(se,le){const Fe=this.rendererByCompId;let Et=Fe.get(le.id);if(!Et){const rn=this.eventManager,Gn=this.sharedStylesHost,Ai=this.removeStylesOnCompDestory;switch(le.encapsulation){case j.ifc.Emulated:Et=new ze(rn,Gn,le,this.appId,Ai);break;case j.ifc.ShadowDom:return new Yt(rn,Gn,se,le);default:Et=new Zt(rn,Gn,le,Ai)}Et.onDestroy=()=>Fe.delete(le.id),Fe.set(le.id,Et)}return Et}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(jt),j.LFG(nn),j.LFG(j.AFp),j.LFG(Je))},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();class _i{constructor(Ee){this.eventManager=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ee,se){return se?document.createElementNS(sn[se]||se,Ee):document.createElement(Ee)}createComment(Ee){return document.createComment(Ee)}createText(Ee){return document.createTextNode(Ee)}appendChild(Ee,se){(Ii(Ee)?Ee.content:Ee).appendChild(se)}insertBefore(Ee,se,le){Ee&&(Ii(Ee)?Ee.content:Ee).insertBefore(se,le)}removeChild(Ee,se){Ee&&Ee.removeChild(se)}selectRootElement(Ee,se){let le="string"==typeof Ee?document.querySelector(Ee):Ee;if(!le)throw new Error(`The selector "${Ee}" did not match any elements`);return se||(le.textContent=""),le}parentNode(Ee){return Ee.parentNode}nextSibling(Ee){return Ee.nextSibling}setAttribute(Ee,se,le,Fe){if(Fe){se=Fe+":"+se;const Et=sn[Fe];Et?Ee.setAttributeNS(Et,se,le):Ee.setAttribute(se,le)}else Ee.setAttribute(se,le)}removeAttribute(Ee,se,le){if(le){const Fe=sn[le];Fe?Ee.removeAttributeNS(Fe,se):Ee.removeAttribute(`${le}:${se}`)}else Ee.removeAttribute(se)}addClass(Ee,se){Ee.classList.add(se)}removeClass(Ee,se){Ee.classList.remove(se)}setStyle(Ee,se,le,Fe){Fe&(j.JOm.DashCase|j.JOm.Important)?Ee.style.setProperty(se,le,Fe&j.JOm.Important?"important":""):Ee.style[se]=le}removeStyle(Ee,se,le){le&j.JOm.DashCase?Ee.style.removeProperty(se):Ee.style[se]=""}setProperty(Ee,se,le){Ee[se]=le}setValue(Ee,se){Ee.nodeValue=se}listen(Ee,se,le){return"string"==typeof Ee?this.eventManager.addGlobalEventListener(Ee,se,ti(le)):this.eventManager.addEventListener(Ee,se,ti(le))}}function Ii(Rt){return"TEMPLATE"===Rt.tagName&&void 0!==Rt.content}class Yt extends _i{constructor(Ee,se,le,Fe){super(Ee),this.sharedStylesHost=se,this.hostEl=le,this.shadowRoot=le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Et=Dn(Fe.id,Fe.styles);for(const rn of Et){const Gn=document.createElement("style");Gn.textContent=rn,this.shadowRoot.appendChild(Gn)}}nodeOrShadowRoot(Ee){return Ee===this.hostEl?this.shadowRoot:Ee}appendChild(Ee,se){return super.appendChild(this.nodeOrShadowRoot(Ee),se)}insertBefore(Ee,se,le){return super.insertBefore(this.nodeOrShadowRoot(Ee),se,le)}removeChild(Ee,se){return super.removeChild(this.nodeOrShadowRoot(Ee),se)}parentNode(Ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ee)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zt extends _i{constructor(Ee,se,le,Fe,Et=le.id){super(Ee),this.sharedStylesHost=se,this.removeStylesOnCompDestory=Fe,this.rendererUsageCount=0,this.styles=Dn(Et,le.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ze extends Zt{constructor(Ee,se,le,Fe,Et){const rn=Fe+"-"+le.id;super(Ee,se,le,Et,rn),this.contentAttr=function qt(Rt){return"_ngcontent-%COMP%".replace(Cn,Rt)}(rn),this.hostAttr=function ln(Rt){return"_nghost-%COMP%".replace(Cn,Rt)}(rn)}applyToHost(Ee){this.applyStyles(),this.setAttribute(Ee,this.hostAttr,"")}createElement(Ee,se){const le=super.createElement(Ee,se);return super.setAttribute(le,this.contentAttr,""),le}}let Ge=(()=>{class Rt extends en{constructor(se){super(se)}supports(se){return!0}addEventListener(se,le,Fe){return se.addEventListener(le,Fe,!1),()=>this.removeEventListener(se,le,Fe)}removeEventListener(se,le,Fe){return se.removeEventListener(le,Fe)}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(p.K0))},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();const Nt=["alt","control","meta","shift"],We={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ot={alt:Rt=>Rt.altKey,control:Rt=>Rt.ctrlKey,meta:Rt=>Rt.metaKey,shift:Rt=>Rt.shiftKey};let Re=(()=>{class Rt extends en{constructor(se){super(se)}supports(se){return null!=Rt.parseEventName(se)}addEventListener(se,le,Fe){const Et=Rt.parseEventName(le),rn=Rt.eventCallback(Et.fullKey,Fe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(se,Et.domEventName,rn))}static parseEventName(se){const le=se.toLowerCase().split("."),Fe=le.shift();if(0===le.length||"keydown"!==Fe&&"keyup"!==Fe)return null;const Et=Rt._normalizeKey(le.pop());let rn="",Gn=le.indexOf("code");if(Gn>-1&&(le.splice(Gn,1),rn="code."),Nt.forEach(yr=>{const Rr=le.indexOf(yr);Rr>-1&&(le.splice(Rr,1),rn+=yr+".")}),rn+=Et,0!=le.length||0===Et.length)return null;const Ai={};return Ai.domEventName=Fe,Ai.fullKey=rn,Ai}static matchEventFullKeyCode(se,le){let Fe=We[se.key]||se.key,Et="";return le.indexOf("code.")>-1&&(Fe=se.code,Et="code."),!(null==Fe||!Fe)&&(Fe=Fe.toLowerCase()," "===Fe?Fe="space":"."===Fe&&(Fe="dot"),Nt.forEach(rn=>{rn!==Fe&&(0,Ot[rn])(se)&&(Et+=rn+".")}),Et+=Fe,Et===le)}static eventCallback(se,le,Fe){return Et=>{Rt.matchEventFullKeyCode(Et,se)&&Fe.runGuarded(()=>le(Et))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(p.K0))},Rt.\u0275prov=j.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();const Wn=(0,j.eFA)(j._c5,"browser",[{provide:j.Lbi,useValue:p.bD},{provide:j.g9A,useValue:function Gt(){o.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function xt(){return(0,j.RDi)(document),document},deps:[]}]),Fn=new j.OlP(""),It=[{provide:j.rWj,useClass:class it{addToWindow(Ee){j.dqk.getAngularTestability=(le,Fe=!0)=>{const Et=Ee.findTestabilityInTree(le,Fe);if(null==Et)throw new Error("Could not find testability for element.");return Et},j.dqk.getAllAngularTestabilities=()=>Ee.getAllTestabilities(),j.dqk.getAllAngularRootElements=()=>Ee.getAllRootElements(),j.dqk.frameworkStabilizers||(j.dqk.frameworkStabilizers=[]),j.dqk.frameworkStabilizers.push(le=>{const Fe=j.dqk.getAllAngularTestabilities();let Et=Fe.length,rn=!1;const Gn=function(Ai){rn=rn||Ai,Et--,0==Et&&le(rn)};Fe.forEach(function(Ai){Ai.whenStable(Gn)})})}findTestabilityInTree(Ee,se,le){return null==se?null:Ee.getTestability(se)??(le?(0,p.q)().isShadowRoot(se)?this.findTestabilityInTree(Ee,se.host,!0):this.findTestabilityInTree(Ee,se.parentElement,!0):null)}},deps:[]},{provide:j.lri,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]},{provide:j.dDg,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]}],li=[{provide:j.zSh,useValue:"root"},{provide:j.qLn,useFactory:function On(){return new j.qLn},deps:[]},{provide:pt,useClass:Ge,multi:!0,deps:[p.K0,j.R0b,j.Lbi]},{provide:pt,useClass:Re,multi:!0,deps:[p.K0]},{provide:_n,useClass:_n,deps:[jt,nn,j.AFp,Je]},{provide:j.FYo,useExisting:_n},{provide:Ct,useExisting:nn},{provide:nn,useClass:nn,deps:[p.K0]},{provide:jt,useClass:jt,deps:[pt,j.R0b]},{provide:p.JF,useClass:yt,deps:[]},[]];let je=(()=>{class Rt{constructor(se){}static withServerTransition(se){return{ngModule:Rt,providers:[{provide:j.AFp,useValue:se.appId},{provide:Ye,useExisting:j.AFp},wt]}}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(Fn,12))},Rt.\u0275mod=j.oAB({type:Rt}),Rt.\u0275inj=j.cJS({providers:[...li,...It],imports:[p.ez,j.hGG]}),Rt})(),Qe=(()=>{class Rt{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(p.K0))},Rt.\u0275prov=j.Yz7({token:Rt,factory:function(se){let le=null;return le=se?new se:function Ft(){return new Qe((0,j.LFG)(p.K0))}(),le},providedIn:"root"}),Rt})();typeof window<"u"&&window;let Yn=(()=>{class Rt{}return Rt.\u0275fac=function(se){return new(se||Rt)},Rt.\u0275prov=j.Yz7({token:Rt,factory:function(se){let le=null;return le=se?new(se||Rt):j.LFG(ri),le},providedIn:"root"}),Rt})(),ri=(()=>{class Rt extends Yn{constructor(se){super(),this._doc=se}sanitize(se,le){if(null==le)return null;switch(se){case j.q3G.NONE:return le;case j.q3G.HTML:return(0,j.qzn)(le,"HTML")?(0,j.z3N)(le):(0,j.EiD)(this._doc,String(le)).toString();case j.q3G.STYLE:return(0,j.qzn)(le,"Style")?(0,j.z3N)(le):le;case j.q3G.SCRIPT:if((0,j.qzn)(le,"Script"))return(0,j.z3N)(le);throw new Error("unsafe value used in a script context");case j.q3G.URL:return(0,j.qzn)(le,"URL")?(0,j.z3N)(le):(0,j.mCW)(String(le));case j.q3G.RESOURCE_URL:if((0,j.qzn)(le,"ResourceURL"))return(0,j.z3N)(le);throw new Error(`unsafe value used in a resource URL context (see ${j.JZr})`);default:throw new Error(`Unexpected SecurityContext ${se} (see ${j.JZr})`)}}bypassSecurityTrustHtml(se){return(0,j.JVY)(se)}bypassSecurityTrustStyle(se){return(0,j.L6k)(se)}bypassSecurityTrustScript(se){return(0,j.eBb)(se)}bypassSecurityTrustUrl(se){return(0,j.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,j.pB0)(se)}}return Rt.\u0275fac=function(se){return new(se||Rt)(j.LFG(p.K0))},Rt.\u0275prov=j.Yz7({token:Rt,factory:function(se){let le=null;return le=se?new se:function Hn(Rt){return new ri(Rt.get(p.K0))}(j.LFG(j.zs3)),le},providedIn:"root"}),Rt})()},9299:(ni,Wt,F)=>{"use strict";F.d(Wt,{gz:()=>ns,F0:()=>Vo,Bz:()=>hi,lC:()=>qs});var p=F(4650),j=F(2076),Q=F(9646),o=F(1135);const st=(0,F(3888).d)(O=>function(){O(this),this.name="EmptyError",this.message="no elements in sequence"});var _t=F(9841),ke=F(7272),Ye=F(9770),lt=F(9635),wt=F(2843),it=F(9751),yt=F(515),pt=F(4033),jt=F(7579),en=F(6895),Ct=F(4004),nn=F(3900),sn=F(5698),Cn=F(8675),kt=F(9300),Ae=F(5577),ct=F(4482),ht=F(5403);function mt(O){return(0,ct.e)((L,T)=>{let G=!1;L.subscribe((0,ht.x)(T,u=>{G=!0,T.next(u)},()=>{G||T.next(O),T.complete()}))})}function Je(O=qt){return(0,ct.e)((L,T)=>{let G=!1;L.subscribe((0,ht.x)(T,u=>{G=!0,T.next(u)},()=>G?T.complete():T.error(O())))})}function qt(){return new st}var ln=F(4671);function Dn(O,L){const T=arguments.length>=2;return G=>G.pipe(O?(0,kt.h)((u,t)=>O(u,t,G)):ln.y,(0,sn.q)(1),T?mt(L):Je(()=>new st))}var ti=F(4351),_n=F(8505),_i=F(262);function vi(O,L){return(0,ct.e)(function ii(O,L,T,G,u){return(t,l)=>{let h=T,_=L,b=0;t.subscribe((0,ht.x)(l,D=>{const A=b++;_=h?O(_,D,A):(h=!0,D),G&&l.next(_)},u&&(()=>{h&&l.next(_),l.complete()})))}}(O,L,arguments.length>=2,!0))}function Ii(O){return O<=0?()=>yt.E:(0,ct.e)((L,T)=>{let G=[];L.subscribe((0,ht.x)(T,u=>{G.push(u),O<G.length&&G.shift()},()=>{for(const u of G)T.next(u);T.complete()},void 0,()=>{G=null}))})}function Yt(O,L){const T=arguments.length>=2;return G=>G.pipe(O?(0,kt.h)((u,t)=>O(u,t,G)):ln.y,Ii(1),T?mt(L):Je(()=>new st))}var Zt=F(2529),ze=F(9718),Ge=F(8746),Nt=F(8343),We=F(8189),Ot=F(1481);const Re="primary",ft=Symbol("RouteTitle");class cn{constructor(L){this.params=L||{}}has(L){return Object.prototype.hasOwnProperty.call(this.params,L)}get(L){if(this.has(L)){const T=this.params[L];return Array.isArray(T)?T[0]:T}return null}getAll(L){if(this.has(L)){const T=this.params[L];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function kn(O){return new cn(O)}function an(O,L,T){const G=T.path.split("/");if(G.length>O.length||"full"===T.pathMatch&&(L.hasChildren()||G.length<O.length))return null;const u={};for(let t=0;t<G.length;t++){const l=G[t],h=O[t];if(l.startsWith(":"))u[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:O.slice(0,G.length),posParams:u}}function Gt(O,L){const T=O?Object.keys(O):void 0,G=L?Object.keys(L):void 0;if(!T||!G||T.length!=G.length)return!1;let u;for(let t=0;t<T.length;t++)if(u=T[t],!On(O[u],L[u]))return!1;return!0}function On(O,L){if(Array.isArray(O)&&Array.isArray(L)){if(O.length!==L.length)return!1;const T=[...O].sort(),G=[...L].sort();return T.every((u,t)=>G[t]===u)}return O===L}function xt(O){return Array.prototype.concat.apply([],O)}function zt(O){return O.length>0?O[O.length-1]:null}function Fn(O,L){for(const T in O)O.hasOwnProperty(T)&&L(O[T],T)}function It(O){return(0,p.CqO)(O)?O:(0,p.QGY)(O)?(0,j.D)(Promise.resolve(O)):(0,Q.of)(O)}const li=!1,je={exact:function Ft(O,L,T){if(!Bn(O.segments,L.segments)||!ve(O.segments,L.segments,T)||O.numberOfChildren!==L.numberOfChildren)return!1;for(const G in L.children)if(!O.children[G]||!Ft(O.children[G],L.children[G],T))return!1;return!0},subset:Te},ce={exact:function $e(O,L){return Gt(O,L)},subset:function Qe(O,L){return Object.keys(L).length<=Object.keys(O).length&&Object.keys(L).every(T=>On(O[T],L[T]))},ignored:()=>!0};function De(O,L,T){return je[T.paths](O.root,L.root,T.matrixParams)&&ce[T.queryParams](O.queryParams,L.queryParams)&&!("exact"===T.fragment&&O.fragment!==L.fragment)}function Te(O,L,T){return xe(O,L,L.segments,T)}function xe(O,L,T,G){if(O.segments.length>T.length){const u=O.segments.slice(0,T.length);return!(!Bn(u,T)||L.hasChildren()||!ve(u,T,G))}if(O.segments.length===T.length){if(!Bn(O.segments,T)||!ve(O.segments,T,G))return!1;for(const u in L.children)if(!O.children[u]||!Te(O.children[u],L.children[u],G))return!1;return!0}{const u=T.slice(0,O.segments.length),t=T.slice(O.segments.length);return!!(Bn(O.segments,u)&&ve(O.segments,u,G)&&O.children[Re])&&xe(O.children[Re],L,t,G)}}function ve(O,L,T){return L.every((G,u)=>ce[T](O[u].parameters,G.parameters))}class re{constructor(L=new Me([],{}),T={},G=null){this.root=L,this.queryParams=T,this.fragment=G}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return Ce.serialize(this)}}class Me{constructor(L,T){this.segments=L,this.children=T,this.parent=null,Fn(T,(G,u)=>G.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class Pe{constructor(L,T){this.path=L,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=kn(this.parameters)),this._parameterMap}toString(){return Jt(this)}}function Bn(O,L){return O.length===L.length&&O.every((T,G)=>T.path===L[G].path)}let Ue=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return new ue},providedIn:"root"}),O})();class ue{parse(L){const T=new le(L);return new re(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(L){const T=`/${bt(L.root,!0)}`,G=function Yn(O){const L=Object.keys(O).map(T=>{const G=O[T];return Array.isArray(G)?G.map(u=>`${me(T)}=${me(u)}`).join("&"):`${me(T)}=${me(G)}`}).filter(T=>!!T);return L.length?`?${L.join("&")}`:""}(L.queryParams);return`${T}${G}${"string"==typeof L.fragment?`#${function ee(O){return encodeURI(O)}(L.fragment)}`:""}`}}const Ce=new ue;function Ke(O){return O.segments.map(L=>Jt(L)).join("/")}function bt(O,L){if(!O.hasChildren())return Ke(O);if(L){const T=O.children[Re]?bt(O.children[Re],!1):"",G=[];return Fn(O.children,(u,t)=>{t!==Re&&G.push(`${t}:${bt(u,!1)}`)}),G.length>0?`${T}(${G.join("//")})`:T}{const T=function En(O,L){let T=[];return Fn(O.children,(G,u)=>{u===Re&&(T=T.concat(L(G,u)))}),Fn(O.children,(G,u)=>{u!==Re&&(T=T.concat(L(G,u)))}),T}(O,(G,u)=>u===Re?[bt(O.children[Re],!1)]:[`${u}:${bt(G,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[Re]?`${Ke(O)}/${T[0]}`:`${Ke(O)}/(${T.join("//")})`}}function Pt(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(O){return Pt(O).replace(/%3B/gi,";")}function U(O){return Pt(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function we(O){return decodeURIComponent(O)}function nt(O){return we(O.replace(/\+/g,"%20"))}function Jt(O){return`${U(O.path)}${function Kt(O){return Object.keys(O).map(L=>`;${U(L)}=${U(O[L])}`).join("")}(O.parameters)}`}const Hn=/^[^\/()?;=#]+/;function ri(O){const L=O.match(Hn);return L?L[0]:""}const zn=/^[^=?&#]+/,Ee=/^[^&#]+/;class le{constructor(L){this.url=L,this.remaining=L}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const L={};if(this.consumeOptional("?"))do{this.parseQueryParam(L)}while(this.consumeOptional("&"));return L}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const L=[];for(this.peekStartsWith("(")||L.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),L.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let G={};return this.peekStartsWith("(")&&(G=this.parseParens(!1)),(L.length>0||Object.keys(T).length>0)&&(G[Re]=new Me(L,T)),G}parseSegment(){const L=ri(this.remaining);if(""===L&&this.peekStartsWith(";"))throw new p.vHH(4009,li);return this.capture(L),new Pe(we(L),this.parseMatrixParams())}parseMatrixParams(){const L={};for(;this.consumeOptional(";");)this.parseParam(L);return L}parseParam(L){const T=ri(this.remaining);if(!T)return;this.capture(T);let G="";if(this.consumeOptional("=")){const u=ri(this.remaining);u&&(G=u,this.capture(G))}L[we(T)]=we(G)}parseQueryParam(L){const T=function Rt(O){const L=O.match(zn);return L?L[0]:""}(this.remaining);if(!T)return;this.capture(T);let G="";if(this.consumeOptional("=")){const l=function se(O){const L=O.match(Ee);return L?L[0]:""}(this.remaining);l&&(G=l,this.capture(G))}const u=nt(T),t=nt(G);if(L.hasOwnProperty(u)){let l=L[u];Array.isArray(l)||(l=[l],L[u]=l),l.push(t)}else L[u]=t}parseParens(L){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const G=ri(this.remaining),u=this.remaining[G.length];if("/"!==u&&")"!==u&&";"!==u)throw new p.vHH(4010,li);let t;G.indexOf(":")>-1?(t=G.slice(0,G.indexOf(":")),this.capture(t),this.capture(":")):L&&(t=Re);const l=this.parseChildren();T[t]=1===Object.keys(l).length?l[Re]:new Me([],l),this.consumeOptional("//")}return T}peekStartsWith(L){return this.remaining.startsWith(L)}consumeOptional(L){return!!this.peekStartsWith(L)&&(this.remaining=this.remaining.substring(L.length),!0)}capture(L){if(!this.consumeOptional(L))throw new p.vHH(4011,li)}}function Fe(O){return O.segments.length>0?new Me([],{[Re]:O}):O}function Et(O){const L={};for(const G of Object.keys(O.children)){const t=Et(O.children[G]);(t.segments.length>0||t.hasChildren())&&(L[G]=t)}return function rn(O){if(1===O.numberOfChildren&&O.children[Re]){const L=O.children[Re];return new Me(O.segments.concat(L.segments),L.children)}return O}(new Me(O.segments,L))}function Gn(O){return O instanceof re}const Ai=!1;function oo(O,L,T,G,u){if(0===T.length)return To(L.root,L.root,L.root,G,u);const t=function br(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new gr(!0,0,O);let L=0,T=!1;const G=O.reduce((u,t,l)=>{if("object"==typeof t&&null!=t){if(t.outlets){const h={};return Fn(t.outlets,(_,b)=>{h[b]="string"==typeof _?_.split("/"):_}),[...u,{outlets:h}]}if(t.segmentPath)return[...u,t.segmentPath]}return"string"!=typeof t?[...u,t]:0===l?(t.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?T=!0:".."===h?L++:""!=h&&u.push(h))}),u):[...u,t]},[]);return new gr(T,L,G)}(T);return t.toRoot()?To(L.root,L.root,new Me([],{}),G,u):function l(_){const b=function Ho(O,L,T,G){if(O.isAbsolute)return new Tr(L.root,!0,0);if(-1===G)return new Tr(T,T===L.root,0);return function wo(O,L,T){let G=O,u=L,t=T;for(;t>u;){if(t-=u,G=G.parent,!G)throw new p.vHH(4005,Ai&&"Invalid number of '../'");u=G.segments.length}return new Tr(G,!1,u-t)}(T,G+(vr(O.commands[0])?0:1),O.numberOfDoubleDots)}(t,L,O.snapshot?._urlSegment,_),D=b.processChildren?vt(b.segmentGroup,b.index,t.commands):at(b.segmentGroup,b.index,t.commands);return To(L.root,b.segmentGroup,D,G,u)}(O.snapshot?._lastPathIndex)}function vr(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function so(O){return"object"==typeof O&&null!=O&&O.outlets}function To(O,L,T,G,u){let l,t={};G&&Fn(G,(_,b)=>{t[b]=Array.isArray(_)?_.map(D=>`${D}`):`${_}`}),l=O===L?T:$i(O,L,T);const h=Fe(Et(l));return new re(h,t,u)}function $i(O,L,T){const G={};return Fn(O.children,(u,t)=>{G[t]=u===L?T:$i(u,L,T)}),new Me(O.segments,G)}class gr{constructor(L,T,G){if(this.isAbsolute=L,this.numberOfDoubleDots=T,this.commands=G,L&&G.length>0&&vr(G[0]))throw new p.vHH(4003,Ai&&"Root segment cannot have matrix parameters");const u=G.find(so);if(u&&u!==zt(G))throw new p.vHH(4004,Ai&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tr{constructor(L,T,G){this.segmentGroup=L,this.processChildren=T,this.index=G}}function at(O,L,T){if(O||(O=new Me([],{})),0===O.segments.length&&O.hasChildren())return vt(O,L,T);const G=function I(O,L,T){let G=0,u=L;const t={match:!1,pathIndex:0,commandIndex:0};for(;u<O.segments.length;){if(G>=T.length)return t;const l=O.segments[u],h=T[G];if(so(h))break;const _=`${h}`,b=G<T.length-1?T[G+1]:null;if(u>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!An(_,b,l))return t;G+=2}else{if(!An(_,{},l))return t;G++}u++}return{match:!0,pathIndex:u,commandIndex:G}}(O,L,T),u=T.slice(G.commandIndex);if(G.match&&G.pathIndex<O.segments.length){const t=new Me(O.segments.slice(0,G.pathIndex),{});return t.children[Re]=new Me(O.segments.slice(G.pathIndex),O.children),vt(t,0,u)}return G.match&&0===u.length?new Me(O.segments,{}):G.match&&!O.hasChildren()?ie(O,L,T):G.match?vt(O,0,u):ie(O,L,T)}function vt(O,L,T){if(0===T.length)return new Me(O.segments,{});{const G=function wn(O){return so(O[0])?O[0].outlets:{[Re]:O}}(T),u={};if(!G[Re]&&O.children[Re]&&1===O.numberOfChildren&&0===O.children[Re].segments.length){const t=vt(O.children[Re],L,T);return new Me(O.segments,t.children)}return Fn(G,(t,l)=>{"string"==typeof t&&(t=[t]),null!==t&&(u[l]=at(O.children[l],L,t))}),Fn(O.children,(t,l)=>{void 0===G[l]&&(u[l]=t)}),new Me(O.segments,u)}}function ie(O,L,T){const G=O.segments.slice(0,L);let u=0;for(;u<T.length;){const t=T[u];if(so(t)){const _=Se(t.outlets);return new Me(G,_)}if(0===u&&vr(T[0])){G.push(new Pe(O.segments[L].path,et(T[0]))),u++;continue}const l=so(t)?t.outlets[Re]:`${t}`,h=u<T.length-1?T[u+1]:null;l&&h&&vr(h)?(G.push(new Pe(l,et(h))),u+=2):(G.push(new Pe(l,{})),u++)}return new Me(G,{})}function Se(O){const L={};return Fn(O,(T,G)=>{"string"==typeof T&&(T=[T]),null!==T&&(L[G]=ie(new Me([],{}),0,T))}),L}function et(O){const L={};return Fn(O,(T,G)=>L[G]=`${T}`),L}function An(O,L,T){return O==T.path&&Gt(L,T.parameters)}const mi="imperative";class fn{constructor(L,T){this.id=L,this.url=T}}class xi extends fn{constructor(L,T,G="imperative",u=null){super(L,T),this.type=0,this.navigationTrigger=G,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wi extends fn{constructor(L,T,G){super(L,T),this.urlAfterRedirects=G,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yi extends fn{constructor(L,T,G,u){super(L,T),this.reason=G,this.code=u,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xr extends fn{constructor(L,T,G,u){super(L,T),this.reason=G,this.code=u,this.type=16}}class Ni extends fn{constructor(L,T,G,u){super(L,T),this.error=G,this.target=u,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qr extends fn{constructor(L,T,G,u){super(L,T),this.urlAfterRedirects=G,this.state=u,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ao extends fn{constructor(L,T,G,u){super(L,T),this.urlAfterRedirects=G,this.state=u,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends fn{constructor(L,T,G,u,t){super(L,T),this.urlAfterRedirects=G,this.state=u,this.shouldActivate=t,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mo extends fn{constructor(L,T,G,u){super(L,T),this.urlAfterRedirects=G,this.state=u,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends fn{constructor(L,T,G,u){super(L,T),this.urlAfterRedirects=G,this.state=u,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cr{constructor(L){this.route=L,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Co{constructor(L){this.route=L,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Es{constructor(L){this.snapshot=L,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fr{constructor(L){this.snapshot=L,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Go{constructor(L){this.snapshot=L,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ma{constructor(L){this.snapshot=L,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gs{constructor(L,T,G){this.routerEvent=L,this.position=T,this.anchor=G,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ko=(()=>{class O{createUrlTree(T,G,u,t,l,h){return oo(T||G.root,u,t,l,h)}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})(),Fr=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:function(L){return ko.\u0275fac(L)},providedIn:"root"}),O})();class go{constructor(L){this._root=L}get root(){return this._root.value}parent(L){const T=this.pathFromRoot(L);return T.length>1?T[T.length-2]:null}children(L){const T=_o(L,this._root);return T?T.children.map(G=>G.value):[]}firstChild(L){const T=_o(L,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(L){const T=ao(L,this._root);return T.length<2?[]:T[T.length-2].children.map(u=>u.value).filter(u=>u!==L)}pathFromRoot(L){return ao(L,this._root).map(T=>T.value)}}function _o(O,L){if(O===L.value)return L;for(const T of L.children){const G=_o(O,T);if(G)return G}return null}function ao(O,L){if(O===L.value)return[L];for(const T of L.children){const G=ao(O,T);if(G.length)return G.unshift(L),G}return[]}class Ar{constructor(L,T){this.value=L,this.children=T}toString(){return`TreeNode(${this.value})`}}function _s(O){const L={};return O&&O.children.forEach(T=>L[T.value.outlet]=T),L}class zr extends go{constructor(L,T){super(L),this.snapshot=T,Ms(this,L)}toString(){return this.snapshot.toString()}}function Sr(O,L){const T=function Ds(O,L){const l=new cs([],{},{},"",{},Re,L,null,O.root,-1,{});return new Zs("",new Ar(l,[]))}(O,L),G=new o.X([new Pe("",{})]),u=new o.X({}),t=new o.X({}),l=new o.X({}),h=new o.X(""),_=new ns(G,u,l,h,t,Re,L,T.root);return _.snapshot=T.root,new zr(new Ar(_,[]),T)}class ns{constructor(L,T,G,u,t,l,h,_){this.url=L,this.params=T,this.queryParams=G,this.fragment=u,this.data=t,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,Ct.U)(b=>b[ft]))??(0,Q.of)(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(L=>kn(L)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(L=>kn(L)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $o(O,L="emptyOnly"){const T=O.pathFromRoot;let G=0;if("always"!==L)for(G=T.length-1;G>=1;){const u=T[G],t=T[G-1];if(u.routeConfig&&""===u.routeConfig.path)G--;else{if(t.component)break;G--}}return function yo(O){return O.reduce((L,T)=>({params:{...L.params,...T.params},data:{...L.data,...T.data},resolve:{...T.data,...L.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(G))}class cs{get title(){return this.data?.[ft]}constructor(L,T,G,u,t,l,h,_,b,D,A){this.url=L,this.params=T,this.queryParams=G,this.fragment=u,this.data=t,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=D,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(G=>G.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zs extends go{constructor(L,T){super(T),this.url=L,Ms(this,T)}toString(){return Zo(this._root)}}function Ms(O,L){L.value._routerState=O,L.children.forEach(T=>Ms(O,T))}function Zo(O){const L=O.children.length>0?` { ${O.children.map(Zo).join(", ")} } `:"";return`${O.value}${L}`}function ga(O){if(O.snapshot){const L=O.snapshot,T=O._futureSnapshot;O.snapshot=T,Gt(L.queryParams,T.queryParams)||O.queryParams.next(T.queryParams),L.fragment!==T.fragment&&O.fragment.next(T.fragment),Gt(L.params,T.params)||O.params.next(T.params),function Mn(O,L){if(O.length!==L.length)return!1;for(let T=0;T<O.length;++T)if(!Gt(O[T],L[T]))return!1;return!0}(L.url,T.url)||O.url.next(T.url),Gt(L.data,T.data)||O.data.next(T.data)}else O.snapshot=O._futureSnapshot,O.data.next(O._futureSnapshot.data)}function Ws(O,L){const T=Gt(O.params,L.params)&&function Ut(O,L){return Bn(O,L)&&O.every((T,G)=>Gt(T.parameters,L[G].parameters))}(O.url,L.url);return T&&!(!O.parent!=!L.parent)&&(!O.parent||Ws(O.parent,L.parent))}function us(O,L,T){if(T&&O.shouldReuseRoute(L.value,T.value.snapshot)){const G=T.value;G._futureSnapshot=L.value;const u=function ds(O,L,T){return L.children.map(G=>{for(const u of T.children)if(O.shouldReuseRoute(G.value,u.value.snapshot))return us(O,G,u);return us(O,G)})}(O,L,T);return new Ar(G,u)}{if(O.shouldAttach(L.value)){const t=O.retrieve(L.value);if(null!==t){const l=t.route;return l.value._futureSnapshot=L.value,l.children=L.children.map(h=>us(O,h)),l}}const G=function Fa(O){return new ns(new o.X(O.url),new o.X(O.params),new o.X(O.queryParams),new o.X(O.fragment),new o.X(O.data),O.outlet,O.component,O)}(L.value),u=L.children.map(t=>us(O,t));return new Ar(G,u)}}const Ys="ngNavigationCancelingError";function lo(O,L){const{redirectTo:T,navigationBehaviorOptions:G}=Gn(L)?{redirectTo:L,navigationBehaviorOptions:void 0}:L,u=Ps(!1,0,L);return u.url=T,u.navigationBehaviorOptions=G,u}function Ps(O,L,T){const G=new Error("NavigationCancelingError: "+(O||""));return G[Ys]=!0,G.cancellationCode=L,T&&(G.url=T),G}function hs(O){return sa(O)&&Gn(O.url)}function sa(O){return O&&O[Ys]}class ys{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ro,this.attachRef=null}}let Ro=(()=>{class O{constructor(){this.contexts=new Map}onChildOutletCreated(T,G){const u=this.getOrCreateContext(T);u.outlet=G,this.contexts.set(T,u)}onChildOutletDestroyed(T){const G=this.getContext(T);G&&(G.outlet=null,G.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let G=this.getContext(T);return G||(G=new ys,this.contexts.set(T,G)),G}getContext(T){return this.contexts.get(T)||null}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const aa=!1;let qs=(()=>{class O{constructor(){this.activated=null,this._activatedRoute=null,this.name=Re,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Ro),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(T){if(T.name){const{firstChange:G,previousValue:u}=T.name;if(G)return;this.isTrackedInParentContexts(u)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(u)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,aa);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,aa);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,aa);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,G){this.activated=T,this._activatedRoute=G,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,G){if(this.isActivated)throw new p.vHH(4013,aa);this._activatedRoute=T;const u=this.location,l=T.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new ya(T,h,u.injector);if(G&&function Ea(O){return!!O.resolveComponentFactory}(G)){const b=G.resolveComponentFactory(l);this.activated=u.createComponent(b,u.length,_)}else this.activated=u.createComponent(l,{index:u.length,injector:_,environmentInjector:G??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275dir=p.lG2({type:O,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),O})();class ya{constructor(L,T,G){this.route=L,this.childContexts=T,this.parent=G}get(L,T){return L===ns?this.route:L===Ro?this.childContexts:this.parent.get(L,T)}}let Ts=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275cmp=p.Xpm({type:O,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(T,G){1&T&&p._UZ(0,"router-outlet")},dependencies:[qs],encapsulation:2}),O})();function Zi(O,L){return O.providers&&!O._injector&&(O._injector=(0,p.MMx)(O.providers,L,`Route: ${O.path}`)),O._injector??L}function Eo(O){const L=O.children&&O.children.map(Eo),T=L?{...O,children:L}:{...O};return!T.component&&!T.loadComponent&&(L||T.loadChildren)&&T.outlet&&T.outlet!==Re&&(T.component=Ts),T}function Lr(O){return O.outlet||Re}function Vr(O,L){const T=O.filter(G=>Lr(G)===L);return T.push(...O.filter(G=>Lr(G)!==L)),T}function Os(O){if(!O)return null;if(O.routeConfig?._injector)return O.routeConfig._injector;for(let L=O.parent;L;L=L.parent){const T=L.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class vs{constructor(L,T,G,u){this.routeReuseStrategy=L,this.futureState=T,this.currState=G,this.forwardEvent=u}activate(L){const T=this.futureState._root,G=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,G,L),ga(this.futureState.root),this.activateChildRoutes(T,G,L)}deactivateChildRoutes(L,T,G){const u=_s(T);L.children.forEach(t=>{const l=t.value.outlet;this.deactivateRoutes(t,u[l],G),delete u[l]}),Fn(u,(t,l)=>{this.deactivateRouteAndItsChildren(t,G)})}deactivateRoutes(L,T,G){const u=L.value,t=T?T.value:null;if(u===t)if(u.component){const l=G.getContext(u.outlet);l&&this.deactivateChildRoutes(L,T,l.children)}else this.deactivateChildRoutes(L,T,G);else t&&this.deactivateRouteAndItsChildren(T,G)}deactivateRouteAndItsChildren(L,T){L.value.component&&this.routeReuseStrategy.shouldDetach(L.value.snapshot)?this.detachAndStoreRouteSubtree(L,T):this.deactivateRouteAndOutlet(L,T)}detachAndStoreRouteSubtree(L,T){const G=T.getContext(L.value.outlet),u=G&&L.value.component?G.children:T,t=_s(L);for(const l of Object.keys(t))this.deactivateRouteAndItsChildren(t[l],u);if(G&&G.outlet){const l=G.outlet.detach(),h=G.children.onOutletDeactivated();this.routeReuseStrategy.store(L.value.snapshot,{componentRef:l,route:L,contexts:h})}}deactivateRouteAndOutlet(L,T){const G=T.getContext(L.value.outlet),u=G&&L.value.component?G.children:T,t=_s(L);for(const l of Object.keys(t))this.deactivateRouteAndItsChildren(t[l],u);G&&(G.outlet&&(G.outlet.deactivate(),G.children.onOutletDeactivated()),G.attachRef=null,G.resolver=null,G.route=null)}activateChildRoutes(L,T,G){const u=_s(T);L.children.forEach(t=>{this.activateRoutes(t,u[t.value.outlet],G),this.forwardEvent(new ma(t.value.snapshot))}),L.children.length&&this.forwardEvent(new fr(L.value.snapshot))}activateRoutes(L,T,G){const u=L.value,t=T?T.value:null;if(ga(u),u===t)if(u.component){const l=G.getOrCreateContext(u.outlet);this.activateChildRoutes(L,T,l.children)}else this.activateChildRoutes(L,T,G);else if(u.component){const l=G.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const h=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),ga(h.route.value),this.activateChildRoutes(L,null,l.children)}else{const h=Os(u.snapshot),_=h?.get(p._Vd)??null;l.attachRef=null,l.route=u,l.resolver=_,l.injector=h,l.outlet&&l.outlet.activateWith(u,l.injector),this.activateChildRoutes(L,null,l.children)}}else this.activateChildRoutes(L,null,G)}}class Do{constructor(L){this.path=L,this.route=this.path[this.path.length-1]}}class ks{constructor(L,T){this.component=L,this.route=T}}function Rs(O,L,T){const G=O._root;return Yi(G,L?L._root:null,T,[G.value])}function Fo(O,L){const T=Symbol(),G=L.get(O,T);return G===T?"function"!=typeof O||(0,p.Z0I)(O)?L.get(O):O:G}function Yi(O,L,T,G,u={canDeactivateChecks:[],canActivateChecks:[]}){const t=_s(L);return O.children.forEach(l=>{(function vo(O,L,T,G,u={canDeactivateChecks:[],canActivateChecks:[]}){const t=O.value,l=L?L.value:null,h=T?T.getContext(O.value.outlet):null;if(l&&t.routeConfig===l.routeConfig){const _=function zi(O,L,T){if("function"==typeof T)return T(O,L);switch(T){case"pathParamsChange":return!Bn(O.url,L.url);case"pathParamsOrQueryParamsChange":return!Bn(O.url,L.url)||!Gt(O.queryParams,L.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ws(O,L)||!Gt(O.queryParams,L.queryParams);default:return!Ws(O,L)}}(l,t,t.routeConfig.runGuardsAndResolvers);_?u.canActivateChecks.push(new Do(G)):(t.data=l.data,t._resolvedData=l._resolvedData),Yi(O,L,t.component?h?h.children:null:T,G,u),_&&h&&h.outlet&&h.outlet.isActivated&&u.canDeactivateChecks.push(new ks(h.outlet.component,l))}else l&&Fs(L,h,u),u.canActivateChecks.push(new Do(G)),Yi(O,null,t.component?h?h.children:null:T,G,u)})(l,t[l.value.outlet],T,G.concat([l.value]),u),delete t[l.value.outlet]}),Fn(t,(l,h)=>Fs(l,T.getContext(h),u)),u}function Fs(O,L,T){const G=_s(O),u=O.value;Fn(G,(t,l)=>{Fs(t,u.component?L?L.children.getContext(l):null:L,T)}),T.canDeactivateChecks.push(new ks(u.component&&L&&L.outlet&&L.outlet.isActivated?L.outlet.component:null,u))}function oe(O){return"function"==typeof O}function bs(O){return O instanceof st||"EmptyError"===O?.name}const Aa=Symbol("INITIAL_VALUE");function Ir(){return(0,nn.w)(O=>(0,_t.a)(O.map(L=>L.pipe((0,sn.q)(1),(0,Cn.O)(Aa)))).pipe((0,Ct.U)(L=>{for(const T of L)if(!0!==T){if(T===Aa)return Aa;if(!1===T||T instanceof re)return T}return!0}),(0,kt.h)(L=>L!==Aa),(0,sn.q)(1)))}function Bo(O){return(0,lt.z)((0,_n.b)(L=>{if(Gn(L))throw lo(0,L)}),(0,Ct.U)(L=>!0===L))}const is={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ks(O,L,T,G,u){const t=Ia(O,L,T);return t.matched?function ua(O,L,T,G){const u=L.canMatch;if(!u||0===u.length)return(0,Q.of)(!0);const t=u.map(l=>{const h=Fo(l,O);return It(function Ur(O){return O&&oe(O.canMatch)}(h)?h.canMatch(L,T):O.runInContext(()=>h(L,T)))});return(0,Q.of)(t).pipe(Ir(),Bo())}(G=Zi(L,G),L,T).pipe((0,Ct.U)(l=>!0===l?t:{...is})):(0,Q.of)(t)}function Ia(O,L,T){if(""===L.path)return"full"===L.pathMatch&&(O.hasChildren()||T.length>0)?{...is}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const u=(L.matcher||an)(T,O,L);if(!u)return{...is};const t={};Fn(u.posParams,(h,_)=>{t[_]=h.path});const l=u.consumed.length>0?{...t,...u.consumed[u.consumed.length-1].parameters}:t;return{matched:!0,consumedSegments:u.consumed,remainingSegments:T.slice(u.consumed.length),parameters:l,positionalParamSegments:u.posParams??{}}}function Bs(O,L,T,G){if(T.length>0&&function Pa(O,L,T){return T.some(G=>La(O,L,G)&&Lr(G)!==Re)}(O,T,G)){const t=new Me(L,function cl(O,L,T,G){const u={};u[Re]=G,G._sourceSegment=O,G._segmentIndexShift=L.length;for(const t of T)if(""===t.path&&Lr(t)!==Re){const l=new Me([],{});l._sourceSegment=O,l._segmentIndexShift=L.length,u[Lr(t)]=l}return u}(O,L,G,new Me(T,O.children)));return t._sourceSegment=O,t._segmentIndexShift=L.length,{segmentGroup:t,slicedSegments:[]}}if(0===T.length&&function ul(O,L,T){return T.some(G=>La(O,L,G))}(O,T,G)){const t=new Me(O.segments,function ba(O,L,T,G,u){const t={};for(const l of G)if(La(O,T,l)&&!u[Lr(l)]){const h=new Me([],{});h._sourceSegment=O,h._segmentIndexShift=L.length,t[Lr(l)]=h}return{...u,...t}}(O,L,T,G,O.children));return t._sourceSegment=O,t._segmentIndexShift=L.length,{segmentGroup:t,slicedSegments:T}}const u=new Me(O.segments,O.children);return u._sourceSegment=O,u._segmentIndexShift=L.length,{segmentGroup:u,slicedSegments:T}}function La(O,L,T){return(!(O.hasChildren()||L.length>0)||"full"!==T.pathMatch)&&""===T.path}function dl(O,L,T,G){return!!(Lr(O)===G||G!==Re&&La(L,T,O))&&("**"===O.path||Ia(L,O,T).matched)}function Ba(O,L,T){return 0===L.length&&!O.children[T]}const Oa=!1;class Xs{constructor(L){this.segmentGroup=L||null}}class Ka{constructor(L){this.urlTree=L}}function Ns(O){return(0,wt._)(new Xs(O))}function hl(O){return(0,wt._)(new Ka(O))}class pc{constructor(L,T,G,u,t){this.injector=L,this.configLoader=T,this.urlSerializer=G,this.urlTree=u,this.config=t,this.allowRedirects=!0}apply(){const L=Bs(this.urlTree.root,[],[],this.config).segmentGroup,T=new Me(L.segments,L.children);return this.expandSegmentGroup(this.injector,this.config,T,Re).pipe((0,Ct.U)(t=>this.createUrlTree(Et(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,_i.K)(t=>{if(t instanceof Ka)return this.allowRedirects=!1,this.match(t.urlTree);throw t instanceof Xs?this.noMatchError(t):t}))}match(L){return this.expandSegmentGroup(this.injector,this.config,L.root,Re).pipe((0,Ct.U)(u=>this.createUrlTree(Et(u),L.queryParams,L.fragment))).pipe((0,_i.K)(u=>{throw u instanceof Xs?this.noMatchError(u):u}))}noMatchError(L){return new p.vHH(4002,Oa)}createUrlTree(L,T,G){const u=Fe(L);return new re(u,T,G)}expandSegmentGroup(L,T,G,u){return 0===G.segments.length&&G.hasChildren()?this.expandChildren(L,T,G).pipe((0,Ct.U)(t=>new Me([],t))):this.expandSegment(L,G,T,G.segments,u,!0)}expandChildren(L,T,G){const u=[];for(const t of Object.keys(G.children))"primary"===t?u.unshift(t):u.push(t);return(0,j.D)(u).pipe((0,ti.b)(t=>{const l=G.children[t],h=Vr(T,t);return this.expandSegmentGroup(L,h,l,t).pipe((0,Ct.U)(_=>({segment:_,outlet:t})))}),vi((t,l)=>(t[l.outlet]=l.segment,t),{}),Yt())}expandSegment(L,T,G,u,t,l){return(0,j.D)(G).pipe((0,ti.b)(h=>this.expandSegmentAgainstRoute(L,T,G,h,u,t,l).pipe((0,_i.K)(b=>{if(b instanceof Xs)return(0,Q.of)(null);throw b}))),Dn(h=>!!h),(0,_i.K)((h,_)=>{if(bs(h))return Ba(T,u,t)?(0,Q.of)(new Me([],{})):Ns(T);throw h}))}expandSegmentAgainstRoute(L,T,G,u,t,l,h){return dl(u,T,t,l)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(L,T,u,t,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(L,T,G,u,t,l):Ns(T):Ns(T)}expandSegmentAgainstRouteUsingRedirect(L,T,G,u,t,l){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(L,G,u,l):this.expandRegularSegmentAgainstRouteUsingRedirect(L,T,G,u,t,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(L,T,G,u){const t=this.applyRedirectCommands([],G.redirectTo,{});return G.redirectTo.startsWith("/")?hl(t):this.lineralizeSegments(G,t).pipe((0,Ae.z)(l=>{const h=new Me(l,{});return this.expandSegment(L,h,T,l,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(L,T,G,u,t,l){const{matched:h,consumedSegments:_,remainingSegments:b,positionalParamSegments:D}=Ia(T,u,t);if(!h)return Ns(T);const A=this.applyRedirectCommands(_,u.redirectTo,D);return u.redirectTo.startsWith("/")?hl(A):this.lineralizeSegments(u,A).pipe((0,Ae.z)(B=>this.expandSegment(L,T,G,B.concat(b),l,!1)))}matchSegmentAgainstRoute(L,T,G,u,t){return"**"===G.path?(L=Zi(G,L),G.loadChildren?(G._loadedRoutes?(0,Q.of)({routes:G._loadedRoutes,injector:G._loadedInjector}):this.configLoader.loadChildren(L,G)).pipe((0,Ct.U)(h=>(G._loadedRoutes=h.routes,G._loadedInjector=h.injector,new Me(u,{})))):(0,Q.of)(new Me(u,{}))):Ks(T,G,u,L).pipe((0,nn.w)(({matched:l,consumedSegments:h,remainingSegments:_})=>l?this.getChildConfig(L=G._injector??L,G,u).pipe((0,Ae.z)(D=>{const A=D.injector??L,B=D.routes,{segmentGroup:J,slicedSegments:K}=Bs(T,h,_,B),de=new Me(J.segments,J.children);if(0===K.length&&de.hasChildren())return this.expandChildren(A,B,de).pipe((0,Ct.U)(qe=>new Me(h,qe)));if(0===B.length&&0===K.length)return(0,Q.of)(new Me(h,{}));const Ie=Lr(G)===t;return this.expandSegment(A,de,B,K,Ie?Re:t,!0).pipe((0,Ct.U)(Xe=>new Me(h.concat(Xe.segments),Xe.children)))})):Ns(T)))}getChildConfig(L,T,G){return T.children?(0,Q.of)({routes:T.children,injector:L}):T.loadChildren?void 0!==T._loadedRoutes?(0,Q.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Mo(O,L,T,G){const u=L.canLoad;if(void 0===u||0===u.length)return(0,Q.of)(!0);const t=u.map(l=>{const h=Fo(l,O);return It(function q(O){return O&&oe(O.canLoad)}(h)?h.canLoad(L,T):O.runInContext(()=>h(L,T)))});return(0,Q.of)(t).pipe(Ir(),Bo())}(L,T,G).pipe((0,Ae.z)(u=>u?this.configLoader.loadChildren(L,T).pipe((0,_n.b)(t=>{T._loadedRoutes=t.routes,T._loadedInjector=t.injector})):function Il(O){return(0,wt._)(Ps(Oa,3))}())):(0,Q.of)({routes:[],injector:L})}lineralizeSegments(L,T){let G=[],u=T.root;for(;;){if(G=G.concat(u.segments),0===u.numberOfChildren)return(0,Q.of)(G);if(u.numberOfChildren>1||!u.children[Re])return L.redirectTo,(0,wt._)(new p.vHH(4e3,Oa));u=u.children[Re]}}applyRedirectCommands(L,T,G){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),L,G)}applyRedirectCreateUrlTree(L,T,G,u){const t=this.createSegmentGroup(L,T.root,G,u);return new re(t,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(L,T){const G={};return Fn(L,(u,t)=>{if("string"==typeof u&&u.startsWith(":")){const h=u.substring(1);G[t]=T[h]}else G[t]=u}),G}createSegmentGroup(L,T,G,u){const t=this.createSegments(L,T.segments,G,u);let l={};return Fn(T.children,(h,_)=>{l[_]=this.createSegmentGroup(L,h,G,u)}),new Me(t,l)}createSegments(L,T,G,u){return T.map(t=>t.path.startsWith(":")?this.findPosParam(L,t,u):this.findOrReturn(t,G))}findPosParam(L,T,G){const u=G[T.path.substring(1)];if(!u)throw new p.vHH(4001,Oa);return u}findOrReturn(L,T){let G=0;for(const u of T){if(u.path===L.path)return T.splice(G),u;G++}return L}}class Pr{}class da{constructor(L,T,G,u,t,l,h){this.injector=L,this.rootComponentType=T,this.config=G,this.urlTree=u,this.url=t,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const L=Bs(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,L,Re).pipe((0,Ct.U)(T=>{if(null===T)return null;const G=new cs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Re,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new Ar(G,T),t=new Zs(this.url,u);return this.inheritParamsAndData(t._root),t}))}inheritParamsAndData(L){const T=L.value,G=$o(T,this.paramsInheritanceStrategy);T.params=Object.freeze(G.params),T.data=Object.freeze(G.data),L.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(L,T,G,u){return 0===G.segments.length&&G.hasChildren()?this.processChildren(L,T,G):this.processSegment(L,T,G,G.segments,u)}processChildren(L,T,G){return(0,j.D)(Object.keys(G.children)).pipe((0,ti.b)(u=>{const t=G.children[u],l=Vr(T,u);return this.processSegmentGroup(L,l,t,u)}),vi((u,t)=>u&&t?(u.push(...t),u):null),(0,Zt.o)(u=>null!==u),mt(null),Yt(),(0,Ct.U)(u=>{if(null===u)return null;const t=Na(u);return function Ja(O){O.sort((L,T)=>L.value.outlet===Re?-1:T.value.outlet===Re?1:L.value.outlet.localeCompare(T.value.outlet))}(t),t}))}processSegment(L,T,G,u,t){return(0,j.D)(T).pipe((0,ti.b)(l=>this.processSegmentAgainstRoute(l._injector??L,l,G,u,t)),Dn(l=>!!l),(0,_i.K)(l=>{if(bs(l))return Ba(G,u,t)?(0,Q.of)([]):(0,Q.of)(null);throw l}))}processSegmentAgainstRoute(L,T,G,u,t){if(T.redirectTo||!dl(T,G,u,t))return(0,Q.of)(null);let l;if("**"===T.path){const h=u.length>0?zt(u).parameters:{},_=H(G)+u.length,b=new cs(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W(T),Lr(T),T.component??T._loadedComponent??null,T,zs(G),_,Oe(T));l=(0,Q.of)({snapshot:b,consumedSegments:[],remainingSegments:[]})}else l=Ks(G,T,u,L).pipe((0,Ct.U)(({matched:h,consumedSegments:_,remainingSegments:b,parameters:D})=>{if(!h)return null;const A=H(G)+_.length;return{snapshot:new cs(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W(T),Lr(T),T.component??T._loadedComponent??null,T,zs(G),A,Oe(T)),consumedSegments:_,remainingSegments:b}}));return l.pipe((0,nn.w)(h=>{if(null===h)return(0,Q.of)(null);const{snapshot:_,consumedSegments:b,remainingSegments:D}=h;L=T._injector??L;const A=T._loadedInjector??L,B=function Ss(O){return O.children?O.children:O.loadChildren?O._loadedRoutes:[]}(T),{segmentGroup:J,slicedSegments:K}=Bs(G,b,D,B.filter(Ie=>void 0===Ie.redirectTo));if(0===K.length&&J.hasChildren())return this.processChildren(A,B,J).pipe((0,Ct.U)(Ie=>null===Ie?null:[new Ar(_,Ie)]));if(0===B.length&&0===K.length)return(0,Q.of)([new Ar(_,[])]);const de=Lr(T)===t;return this.processSegment(A,B,J,K,de?Re:t).pipe((0,Ct.U)(Ie=>null===Ie?null:[new Ar(_,Ie)]))}))}}function Qa(O){const L=O.value.routeConfig;return L&&""===L.path&&void 0===L.redirectTo}function Na(O){const L=[],T=new Set;for(const G of O){if(!Qa(G)){L.push(G);continue}const u=L.find(t=>G.value.routeConfig===t.value.routeConfig);void 0!==u?(u.children.push(...G.children),T.add(u)):L.push(G)}for(const G of T){const u=Na(G.children);L.push(new Ar(G.value,u))}return L.filter(G=>!T.has(G))}function zs(O){let L=O;for(;L._sourceSegment;)L=L._sourceSegment;return L}function H(O){let L=O,T=L._segmentIndexShift??0;for(;L._sourceSegment;)L=L._sourceSegment,T+=L._segmentIndexShift??0;return T-1}function W(O){return O.data||{}}function Oe(O){return O.resolve||{}}function Mt(O){return"string"==typeof O.title||null===O.title}function Tt(O){return(0,nn.w)(L=>{const T=O(L);return T?(0,j.D)(T).pipe((0,Ct.U)(()=>L)):(0,Q.of)(L)})}const pn=new p.OlP("ROUTES");let si=(()=>{class O{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,Q.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const G=It(T.loadComponent()).pipe((0,Ct.U)(Ri),(0,_n.b)(t=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=t}),(0,Ge.x)(()=>{this.componentLoaders.delete(T)})),u=new pt.c(G,()=>new jt.x).pipe((0,Nt.x)());return this.componentLoaders.set(T,u),u}loadChildren(T,G){if(this.childrenLoaders.get(G))return this.childrenLoaders.get(G);if(G._loadedRoutes)return(0,Q.of)({routes:G._loadedRoutes,injector:G._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(G);const t=this.loadModuleFactoryOrRoutes(G.loadChildren).pipe((0,Ct.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(G);let _,b,D=!1;Array.isArray(h)?b=h:(_=h.create(T).injector,b=xt(_.get(pn,[],p.XFs.Self|p.XFs.Optional)));return{routes:b.map(Eo),injector:_}}),(0,Ge.x)(()=>{this.childrenLoaders.delete(G)})),l=new pt.c(t,()=>new jt.x).pipe((0,Nt.x)());return this.childrenLoaders.set(G,l),l}loadModuleFactoryOrRoutes(T){return It(T()).pipe((0,Ct.U)(Ri),(0,Ae.z)(G=>G instanceof p.YKP||Array.isArray(G)?(0,Q.of)(G):(0,j.D)(this.compiler.compileModuleAsync(G))))}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function Ri(O){return function di(O){return O&&"object"==typeof O&&"default"in O}(O)?O.default:O}let Ei=(()=>{class O{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new jt.x,this.configLoader=(0,p.f3M)(si),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(Ue),this.rootContexts=(0,p.f3M)(Ro),this.navigationId=0,this.afterPreactivation=()=>(0,Q.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=u=>this.events.next(new Co(u)),this.configLoader.onLoadStartListener=u=>this.events.next(new cr(u))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const G=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:G})}setupNavigations(T){return this.transitions=new o.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mi,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,kt.h)(G=>0!==G.id),(0,Ct.U)(G=>({...G,extractedUrl:T.urlHandlingStrategy.extract(G.rawUrl)})),(0,nn.w)(G=>{let u=!1,t=!1;return(0,Q.of)(G).pipe((0,_n.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,nn.w)(l=>{const h=T.browserUrlTree.toString(),_=!T.navigated||l.extractedUrl.toString()!==h||h!==T.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const D="";return this.events.next(new xr(l.id,T.serializeUrl(G.rawUrl),D,0)),T.rawUrlTree=l.rawUrl,l.resolve(null),yt.E}if(T.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return In(l.source)&&(T.browserUrlTree=l.extractedUrl),(0,Q.of)(l).pipe((0,nn.w)(D=>{const A=this.transitions?.getValue();return this.events.next(new xi(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),A!==this.transitions?.getValue()?yt.E:Promise.resolve(D)}),function Wo(O,L,T,G){return(0,nn.w)(u=>function Kl(O,L,T,G,u){return new pc(O,L,T,G,u).apply()}(O,L,T,u.extractedUrl,G).pipe((0,Ct.U)(t=>({...u,urlAfterRedirects:t}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,_n.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},G.urlAfterRedirects=D.urlAfterRedirects}),function V(O,L,T,G,u){return(0,Ae.z)(t=>function Xl(O,L,T,G,u,t,l="emptyOnly"){return new da(O,L,T,G,u,l,t).recognize().pipe((0,nn.w)(h=>null===h?function Pl(O){return new it.y(L=>L.error(O))}(new Pr):(0,Q.of)(h)))}(O,L,T,t.urlAfterRedirects,G.serialize(t.urlAfterRedirects),G,u).pipe((0,Ct.U)(l=>({...t,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,_n.b)(D=>{if(G.targetSnapshot=D.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!D.extras.skipLocationChange){const B=T.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);T.setBrowserUrl(B,D)}T.browserUrlTree=D.urlAfterRedirects}const A=new Qr(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(A)}));if(_&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:D,extractedUrl:A,source:B,restoredState:J,extras:K}=l,de=new xi(D,this.urlSerializer.serialize(A),B,J);this.events.next(de);const Ie=Sr(A,this.rootComponentType).snapshot;return G={...l,targetSnapshot:Ie,urlAfterRedirects:A,extras:{...K,skipLocationChange:!1,replaceUrl:!1}},(0,Q.of)(G)}{const D="";return this.events.next(new xr(l.id,T.serializeUrl(G.extractedUrl),D,1)),T.rawUrlTree=l.rawUrl,l.resolve(null),yt.E}}),(0,_n.b)(l=>{const h=new Ao(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,Ct.U)(l=>G={...l,guards:Rs(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Ya(O,L){return(0,Ae.z)(T=>{const{targetSnapshot:G,currentSnapshot:u,guards:{canActivateChecks:t,canDeactivateChecks:l}}=T;return 0===l.length&&0===t.length?(0,Q.of)({...T,guardsResult:!0}):function ca(O,L,T,G){return(0,j.D)(O).pipe((0,Ae.z)(u=>function va(O,L,T,G,u){const t=L&&L.routeConfig?L.routeConfig.canDeactivate:null;if(!t||0===t.length)return(0,Q.of)(!0);const l=t.map(h=>{const _=Os(L)??u,b=Fo(h,_);return It(function Ti(O){return O&&oe(O.canDeactivate)}(b)?b.canDeactivate(O,L,T,G):_.runInContext(()=>b(O,L,T,G))).pipe(Dn())});return(0,Q.of)(l).pipe(Ir())}(u.component,u.route,T,L,G)),Dn(u=>!0!==u,!0))}(l,G,u,O).pipe((0,Ae.z)(h=>h&&function te(O){return"boolean"==typeof O}(h)?function Lo(O,L,T,G){return(0,j.D)(L).pipe((0,ti.b)(u=>(0,ke.z)(function Ls(O,L){return null!==O&&L&&L(new Es(O)),(0,Q.of)(!0)}(u.route.parent,G),function Sa(O,L){return null!==O&&L&&L(new Go(O)),(0,Q.of)(!0)}(u.route,G),function As(O,L,T){const G=L[L.length-1],t=L.slice(0,L.length-1).reverse().map(l=>function la(O){const L=O.routeConfig?O.routeConfig.canActivateChild:null;return L&&0!==L.length?{node:O,guards:L}:null}(l)).filter(l=>null!==l).map(l=>(0,Ye.P)(()=>{const h=l.guards.map(_=>{const b=Os(l.node)??T,D=Fo(_,b);return It(function xn(O){return O&&oe(O.canActivateChild)}(D)?D.canActivateChild(G,O):b.runInContext(()=>D(G,O))).pipe(Dn())});return(0,Q.of)(h).pipe(Ir())}));return(0,Q.of)(t).pipe(Ir())}(O,u.path,T),function qa(O,L,T){const G=L.routeConfig?L.routeConfig.canActivate:null;if(!G||0===G.length)return(0,Q.of)(!0);const u=G.map(t=>(0,Ye.P)(()=>{const l=Os(L)??T,h=Fo(t,l);return It(function Le(O){return O&&oe(O.canActivate)}(h)?h.canActivate(L,O):l.runInContext(()=>h(L,O))).pipe(Dn())}));return(0,Q.of)(u).pipe(Ir())}(O,u.route,T))),Dn(u=>!0!==u,!0))}(G,t,O,L):(0,Q.of)(h)),(0,Ct.U)(h=>({...T,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,_n.b)(l=>{if(G.guardsResult=l.guardsResult,Gn(l.guardsResult))throw lo(0,l.guardsResult);const h=new _r(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),(0,kt.h)(l=>!!l.guardsResult||(T.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Tt(l=>{if(l.guards.canActivateChecks.length)return(0,Q.of)(l).pipe((0,_n.b)(h=>{const _=new mo(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),(0,nn.w)(h=>{let _=!1;return(0,Q.of)(h).pipe(function C(O,L){return(0,Ae.z)(T=>{const{targetSnapshot:G,guards:{canActivateChecks:u}}=T;if(!u.length)return(0,Q.of)(T);let t=0;return(0,j.D)(u).pipe((0,ti.b)(l=>function M(O,L,T,G){const u=O.routeConfig,t=O._resolve;return void 0!==u?.title&&!Mt(u)&&(t[ft]=u.title),function $(O,L,T,G){const u=function be(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}(O);if(0===u.length)return(0,Q.of)({});const t={};return(0,j.D)(u).pipe((0,Ae.z)(l=>function Ve(O,L,T,G){const u=Os(L)??G,t=Fo(O,u);return It(t.resolve?t.resolve(L,T):u.runInContext(()=>t(L,T)))}(O[l],L,T,G).pipe(Dn(),(0,_n.b)(h=>{t[l]=h}))),Ii(1),(0,ze.h)(t),(0,_i.K)(l=>bs(l)?yt.E:(0,wt._)(l)))}(t,O,L,G).pipe((0,Ct.U)(l=>(O._resolvedData=l,O.data=$o(O,T).resolve,u&&Mt(u)&&(O.data[ft]=u.title),null)))}(l.route,G,O,L)),(0,_n.b)(()=>t++),Ii(1),(0,Ae.z)(l=>t===u.length?(0,Q.of)(T):yt.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,_n.b)({next:()=>_=!0,complete:()=>{_||(T.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,_n.b)(h=>{const _=new rr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),Tt(l=>{const h=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,_n.b)(D=>{_.component=D}),(0,Ct.U)(()=>{})));for(const D of _.children)b.push(...h(D));return b};return(0,_t.a)(h(l.targetSnapshot.root)).pipe(mt(),(0,sn.q)(1))}),Tt(()=>this.afterPreactivation()),(0,Ct.U)(l=>{const h=function _a(O,L,T){const G=us(O,L._root,T?T._root:void 0);return new zr(G,L)}(T.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return G={...l,targetRouterState:h}}),(0,_n.b)(l=>{T.currentUrlTree=l.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),T.routerState=l.targetRouterState,"deferred"===T.urlUpdateStrategy&&(l.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,l),T.browserUrlTree=l.urlAfterRedirects)}),((O,L,T)=>(0,Ct.U)(G=>(new vs(L,G.targetRouterState,G.currentRouterState,T).activate(O),G)))(this.rootContexts,T.routeReuseStrategy,l=>this.events.next(l)),(0,sn.q)(1),(0,_n.b)({next:l=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new wi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{u=!0}}),(0,Ge.x)(()=>{u||t||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),(0,_i.K)(l=>{if(t=!0,sa(l)){hs(l)||(T.navigated=!0,T.restoreHistory(G,!0));const h=new yi(G.id,this.urlSerializer.serialize(G.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),hs(l)){const _=T.urlHandlingStrategy.merge(l.url,T.rawUrlTree),b={skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||In(G.source)};T.scheduleNavigation(_,mi,null,b,{resolve:G.resolve,reject:G.reject,promise:G.promise})}else G.resolve(!1)}else{T.restoreHistory(G,!0);const h=new Ni(G.id,this.urlSerializer.serialize(G.extractedUrl),l,G.targetSnapshot??void 0);this.events.next(h);try{G.resolve(T.errorHandler(l))}catch(_){G.reject(_)}}return yt.E}))}))}cancelNavigationTransition(T,G,u){const t=new yi(T.id,this.urlSerializer.serialize(T.extractedUrl),G,u);this.events.next(t),T.resolve(!1)}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function In(O){return O!==mi}let Ui=(()=>{class O{buildTitle(T){let G,u=T.root;for(;void 0!==u;)G=this.getResolvedTitleForRoute(u)??G,u=u.children.find(t=>t.outlet===Re);return G}getResolvedTitleForRoute(T){return T.data[ft]}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return(0,p.f3M)(sr)},providedIn:"root"}),O})(),sr=(()=>{class O extends Ui{constructor(T){super(),this.title=T}updateTitle(T){const G=this.buildTitle(T);void 0!==G&&this.title.setTitle(G)}}return O.\u0275fac=function(T){return new(T||O)(p.LFG(Ot.Dx))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Wr=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return(0,p.f3M)(mr)},providedIn:"root"}),O})();class co{shouldDetach(L){return!1}store(L,T){}shouldAttach(L){return!1}retrieve(L){return null}shouldReuseRoute(L,T){return L.routeConfig===T.routeConfig}}let mr=(()=>{class O extends co{}return O.\u0275fac=function(){let L;return function(G){return(L||(L=p.n5z(O)))(G||O)}}(),O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const Yo=new p.OlP("",{providedIn:"root",factory:()=>({})});let No=(()=>{class O{}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:function(){return(0,p.f3M)(bo)},providedIn:"root"}),O})(),bo=(()=>{class O{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,G){return T}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function fs(O){throw O}function zo(O,L,T){return L.parse("/")}const ea={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Or={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vo=(()=>{class O{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(Yo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||fs,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zo,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(No),this.routeReuseStrategy=(0,p.f3M)(Wr),this.urlCreationStrategy=(0,p.f3M)(Fr),this.titleStrategy=(0,p.f3M)(Ui),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xt((0,p.f3M)(pn,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(Ei),this.urlSerializer=(0,p.f3M)(Ue),this.location=(0,p.f3M)(en.Ye),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new re,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sr(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId??0},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),mi,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const G="popstate"===T.type?"popstate":"hashchange";"popstate"===G&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,G,T.state)},0)}))}navigateToSyncWithBrowser(T,G,u){const t={replaceUrl:!0},l=u?.navigationId?u:null;if(u){const _={...u};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(t.state=_)}const h=this.parseUrl(T);this.scheduleNavigation(h,G,l,t)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(Eo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,G={}){const{relativeTo:u,queryParams:t,fragment:l,queryParamsHandling:h,preserveFragment:_}=G,b=_?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...t};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=t||null}return null!==D&&(D=this.removeEmptyProps(D)),this.urlCreationStrategy.createUrlTree(u,this.routerState,this.currentUrlTree,T,D,b??null)}navigateByUrl(T,G={skipLocationChange:!1}){const u=Gn(T)?T:this.parseUrl(T),t=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(t,mi,null,G)}navigate(T,G={skipLocationChange:!1}){return function za(O){for(let L=0;L<O.length;L++){const T=O[L];if(null==T)throw new p.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,G),G)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let G;try{G=this.urlSerializer.parse(T)}catch(u){G=this.malformedUriErrorHandler(u,this.urlSerializer,T)}return G}isActive(T,G){let u;if(u=!0===G?{...ea}:!1===G?{...Or}:G,Gn(T))return De(this.currentUrlTree,T,u);const t=this.parseUrl(T);return De(this.currentUrlTree,t,u)}removeEmptyProps(T){return Object.keys(T).reduce((G,u)=>{const t=T[u];return null!=t&&(G[u]=t),G},{})}scheduleNavigation(T,G,u,t,l){if(this.disposed)return Promise.resolve(!1);let h,_,b,D;return l?(h=l.resolve,_=l.reject,b=l.promise):b=new Promise((A,B)=>{h=A,_=B}),D="computed"===this.canceledNavigationResolution?u&&u.\u0275routerPageId?u.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:D,source:G,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:t,resolve:h,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(A=>Promise.reject(A))}setBrowserUrl(T,G){const u=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(u)||G.extras.replaceUrl){const l={...G.extras.state,...this.generateNgRouterState(G.id,this.browserPageId)};this.location.replaceState(u,"",l)}else{const t={...G.extras.state,...this.generateNgRouterState(G.id,G.targetPageId)};this.location.go(u,"",t)}}restoreHistory(T,G=!1){if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-(this.browserPageId??this.currentPageId);0!==t?this.location.historyGo(t):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===t&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(G&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,G){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:G}:{navigationId:T}}}return O.\u0275fac=function(T){return new(T||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();class ar{}let uo=(()=>{class O{constructor(T,G,u,t,l){this.router=T,this.injector=u,this.preloadingStrategy=t,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe((0,kt.h)(T=>T instanceof wi),(0,ti.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,G){const u=[];for(const t of G){t.providers&&!t._injector&&(t._injector=(0,p.MMx)(t.providers,T,`Route: ${t.path}`));const l=t._injector??T,h=t._loadedInjector??l;(t.loadChildren&&!t._loadedRoutes&&void 0===t.canLoad||t.loadComponent&&!t._loadedComponent)&&u.push(this.preloadConfig(l,t)),(t.children||t._loadedRoutes)&&u.push(this.processRoutes(h,t.children??t._loadedRoutes))}return(0,j.D)(u).pipe((0,We.J)())}preloadConfig(T,G){return this.preloadingStrategy.preload(G,()=>{let u;u=G.loadChildren&&void 0===G.canLoad?this.loader.loadChildren(T,G):(0,Q.of)(null);const t=u.pipe((0,Ae.z)(l=>null===l?(0,Q.of)(void 0):(G._loadedRoutes=l.routes,G._loadedInjector=l.injector,this.processRoutes(l.injector??T,l.routes))));if(G.loadComponent&&!G._loadedComponent){const l=this.loader.loadComponent(G);return(0,j.D)([t,l]).pipe((0,We.J)())}return t})}}return O.\u0275fac=function(T){return new(T||O)(p.LFG(Vo),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(ar),p.LFG(si))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const xs=new p.OlP("");let he=(()=>{class O{constructor(T,G,u,t,l={}){this.urlSerializer=T,this.transitions=G,this.viewportScroller=u,this.zone=t,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof wi&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Gs&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,G){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Gs(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,G))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return O.\u0275fac=function(T){p.$Z()},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac}),O})();var k=(()=>((k=k||{})[k.COMPLETE=0]="COMPLETE",k[k.FAILED=1]="FAILED",k[k.REDIRECTING=2]="REDIRECTING",k))();const pe=!1;function ui(O,L){return{\u0275kind:O,\u0275providers:L}}const Gi=new p.OlP("",{providedIn:"root",factory:()=>!1});function Ol(){const O=(0,p.f3M)(p.zs3);return L=>{const T=O.get(p.z2F);if(L!==T.components[0])return;const G=O.get(Vo),u=O.get(Oc);1===O.get(fc)&&G.initialNavigation(),O.get(eo,null,p.XFs.Optional)?.setUpPreloading(),O.get(xs,null,p.XFs.Optional)?.init(),G.resetRootComponentType(T.componentTypes[0]),u.closed||(u.next(),u.complete(),u.unsubscribe())}}const Oc=new p.OlP(pe?"bootstrap done indicator":"",{factory:()=>new jt.x}),fc=new p.OlP(pe?"initial navigation":"",{providedIn:"root",factory:()=>1});function Bu(){let O=[];return O=pe?[{provide:p.Xts,multi:!0,useFactory:()=>{const L=(0,p.f3M)(Vo);return()=>L.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function $s(O){if(!("type"in O))return`Unknown Router Event: ${O.constructor.name}`;switch(O.type){case 14:return`ActivationEnd(path: '${O.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${O.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${O.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${O.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}', state: ${O.state}, shouldActivate: ${O.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}', state: ${O.state})`;case 2:return`NavigationCancel(id: ${O.id}, url: '${O.url}')`;case 16:return`NavigationSkipped(id: ${O.id}, url: '${O.url}')`;case 1:return`NavigationEnd(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${O.id}, url: '${O.url}', error: ${O.error})`;case 0:return`NavigationStart(id: ${O.id}, url: '${O.url}')`;case 6:return`ResolveEnd(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}', state: ${O.state})`;case 5:return`ResolveStart(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}', state: ${O.state})`;case 10:return`RouteConfigLoadEnd(path: ${O.route.path})`;case 9:return`RouteConfigLoadStart(path: ${O.route.path})`;case 4:return`RoutesRecognized(id: ${O.id}, url: '${O.url}', urlAfterRedirects: '${O.urlAfterRedirects}', state: ${O.state})`;case 15:return`Scroll(anchor: '${O.anchor}', position: '${O.position?`${O.position[0]}, ${O.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],ui(1,O)}const eo=new p.OlP(pe?"router preloader":"");function el(O){return ui(0,[{provide:eo,useExisting:uo},{provide:ar,useExisting:O}])}const gi=!1,su=new p.OlP(gi?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),tl=[en.Ye,{provide:Ue,useClass:ue},Vo,Ro,{provide:ns,useFactory:function Tn(O){return O.routerState.root},deps:[Vo]},si,gi?{provide:Gi,useValue:!0}:[]];function Ql(){return new p.PXZ("Router",Vo)}let hi=(()=>{class O{constructor(T){}static forRoot(T,G){return{ngModule:O,providers:[tl,gi&&G?.enableTracing?Bu().\u0275providers:[],{provide:pn,multi:!0,useValue:T},{provide:su,useFactory:lu,deps:[[Vo,new p.FiY,new p.tp0]]},{provide:Yo,useValue:G||{}},G?.useHash?{provide:en.S$,useClass:en.Do}:{provide:en.S$,useClass:en.b0},{provide:xs,useFactory:()=>{const O=(0,p.f3M)(en.EM),L=(0,p.f3M)(p.R0b),T=(0,p.f3M)(Yo),G=(0,p.f3M)(Ei),u=(0,p.f3M)(Ue);return T.scrollOffset&&O.setOffset(T.scrollOffset),new he(u,G,O,L,T)}},G?.preloadingStrategy?el(G.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Ql},G?.initialNavigation?xa(G):[],[{provide:pl,useFactory:Ol},{provide:p.tb,multi:!0,useExisting:pl}]]}}static forChild(T){return{ngModule:O,providers:[{provide:pn,multi:!0,useValue:T}]}}}return O.\u0275fac=function(T){return new(T||O)(p.LFG(su,8))},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[Ts]}),O})();function lu(O){if(gi&&O)throw new p.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function xa(O){return["disabled"===O.initialNavigation?ui(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const L=(0,p.f3M)(Vo);return()=>{L.setUpLocationChangeListener()}}},{provide:fc,useValue:2}]).\u0275providers:[],"enabledBlocking"===O.initialNavigation?ui(2,[{provide:fc,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:L=>{const T=L.get(en.V_,Promise.resolve());return()=>T.then(()=>new Promise(G=>{const u=L.get(Vo),t=L.get(Oc);(function Z(O,L){O.events.pipe((0,kt.h)(T=>T instanceof wi||T instanceof yi||T instanceof Ni||T instanceof xr),(0,Ct.U)(T=>T instanceof wi||T instanceof xr?k.COMPLETE:T instanceof yi&&(0===T.code||1===T.code)?k.REDIRECTING:k.FAILED),(0,kt.h)(T=>T!==k.REDIRECTING),(0,sn.q)(1)).subscribe(()=>{L()})})(u,()=>{G(!0)}),L.get(Ei).afterPreactivation=()=>(G(!0),t.closed?(0,Q.of)(void 0):t),u.initialNavigation()}))}}]).\u0275providers:[]]}const pl=new p.OlP(gi?"Router Initializer":"")},8423:(ni,Wt,F)=>{"use strict";F.d(Wt,{Ro:()=>Ae,ef:()=>ct,t2:()=>sn});var p=F(4650),j=F(1135),Q=F(7579),o=F(9300),P=F(2722),st=F(7340),_t=F(6895),ke=F(1481);const Ye=["overlay"];function lt(ht,mt){1&ht&&p._UZ(0,"div")}function wt(ht,mt){if(1&ht&&(p.TgZ(0,"div"),p.YNc(1,lt,1,0,"div",6),p.qZA()),2&ht){const Je=p.oxw(2);p.Tol(Je.spinner.class),p.Udp("color",Je.spinner.color),p.xp6(1),p.Q6J("ngForOf",Je.spinner.divArray)}}function it(ht,mt){if(1&ht&&(p._UZ(0,"div",7),p.ALo(1,"safeHtml")),2&ht){const Je=p.oxw(2);p.Q6J("innerHTML",p.lcZ(1,1,Je.template),p.oJD)}}function yt(ht,mt){if(1&ht&&(p.TgZ(0,"div",1,2),p.YNc(2,wt,2,5,"div",3),p.YNc(3,it,2,3,"div",4),p.TgZ(4,"div",5),p.Hsn(5),p.qZA()()),2&ht){const Je=p.oxw();p.Udp("background-color",Je.spinner.bdColor)("z-index",Je.spinner.zIndex)("position",Je.spinner.fullScreen?"fixed":"absolute"),p.Q6J("@.disabled",Je.disableAnimation)("@fadeIn","in"),p.xp6(2),p.Q6J("ngIf",!Je.template),p.xp6(1),p.Q6J("ngIf",Je.template),p.xp6(1),p.Udp("z-index",Je.spinner.zIndex)}}const pt=["*"],jt={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},Ct="primary";class nn{constructor(mt){Object.assign(this,mt)}static create(mt){return!mt?.template&&(null==mt?.type||0===mt.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new nn(mt)}}let sn=(()=>{class ht{constructor(){this.spinnerObservable=new j.X(null)}getSpinner(Je){return this.spinnerObservable.asObservable().pipe((0,o.h)(qt=>qt&&qt.name===Je))}show(Je=Ct,qt){return new Promise((ln,Dn)=>{setTimeout(()=>{qt&&Object.keys(qt).length?(qt.name=Je,this.spinnerObservable.next(new nn({...qt,show:!0})),ln(!0)):(this.spinnerObservable.next(new nn({name:Je,show:!0})),ln(!0))},10)})}hide(Je=Ct,qt=10){return new Promise((ln,Dn)=>{setTimeout(()=>{this.spinnerObservable.next(new nn({name:Je,show:!1})),ln(!0)},qt)})}}return ht.\u0275fac=function(Je){return new(Je||ht)},ht.\u0275prov=p.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})();const Cn=new p.OlP("NGX_SPINNER_CONFIG");let kt=(()=>{class ht{constructor(Je){this._sanitizer=Je}transform(Je){if(Je)return this._sanitizer.bypassSecurityTrustHtml(Je)}}return ht.\u0275fac=function(Je){return new(Je||ht)(p.Y36(ke.H7,16))},ht.\u0275pipe=p.Yjl({name:"safeHtml",type:ht,pure:!0}),ht})(),Ae=(()=>{class ht{constructor(Je,qt,ln,Dn){this.spinnerService=Je,this.changeDetector=qt,this.elementRef=ln,this.globalConfig=Dn,this.disableAnimation=!1,this.spinner=new nn,this.ngUnsubscribe=new Q.x,this.setDefaultOptions=()=>{const{type:ti}=this.globalConfig??{};this.spinner=nn.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??ti,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=Ct,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(Je){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(Je.target))&&(Je.returnValue=!1,Je.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,P.R)(this.ngUnsubscribe)).subscribe(Je=>{this.setDefaultOptions(),Object.assign(this.spinner,Je),Je.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(Je){return Je===this.elementRef.nativeElement.parentElement||Je.parentNode&&this.isSpinnerZone(Je.parentNode)}ngOnChanges(Je){for(const qt in Je)if(qt){const ln=Je[qt];if(ln.isFirstChange())return;typeof ln.currentValue<"u"&&ln.currentValue!==ln.previousValue&&""!==ln.currentValue&&(this.spinner[qt]=ln.currentValue,"showSpinner"===qt&&(ln.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===qt&&this.initObservable())}}getClass(Je,qt){this.spinner.divCount=jt[Je],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((Dn,ti)=>ti);let ln="";switch(qt.toLowerCase()){case"small":ln="la-sm";break;case"medium":ln="la-2x";break;case"large":ln="la-3x"}return"la-"+Je+" "+ln}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return ht.\u0275fac=function(Je){return new(Je||ht)(p.Y36(sn),p.Y36(p.sBO),p.Y36(p.SBq),p.Y36(Cn,8))},ht.\u0275cmp=p.Xpm({type:ht,selectors:[["ngx-spinner"]],viewQuery:function(Je,qt){if(1&Je&&p.Gf(Ye,5),2&Je){let ln;p.iGM(ln=p.CRH())&&(qt.spinnerDOM=ln.first)}},hostBindings:function(Je,qt){1&Je&&p.NdJ("keydown",function(Dn){return qt.handleKeyboardEvent(Dn)},!1,p.evT)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[p.TTD],ngContentSelectors:pt,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(Je,qt){1&Je&&(p.F$t(),p.YNc(0,yt,6,12,"div",0)),2&Je&&p.Q6J("ngIf",qt.spinner.show)},dependencies:[_t.sg,_t.O5,kt],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,st.X$)("fadeIn",[(0,st.SB)("in",(0,st.oB)({opacity:1})),(0,st.eR)(":enter",[(0,st.oB)({opacity:0}),(0,st.jt)(300)]),(0,st.eR)(":leave",(0,st.jt)(200,(0,st.oB)({opacity:0})))])]},changeDetection:0}),ht})(),ct=(()=>{class ht{static forRoot(Je){return{ngModule:ht,providers:[{provide:Cn,useValue:Je}]}}}return ht.\u0275fac=function(Je){return new(Je||ht)},ht.\u0275mod=p.oAB({type:ht}),ht.\u0275inj=p.cJS({imports:[_t.ez]}),ht})()},3648:(ni,Wt,F)=>{"use strict";F.d(Wt,{Rh:()=>vi,_W:()=>ti});var p=F(4650),j=F(7340),Q=F(6895),o=F(7579),P=F(1481);const st=["toast-component",""];function _t(Ge,Nt){if(1&Ge){const We=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){p.CHM(We);const Re=p.oxw();return p.KtG(Re.remove())}),p.TgZ(1,"span",6),p._uU(2,"\xd7"),p.qZA()()}}function ke(Ge,Nt){if(1&Ge&&(p.ynx(0),p._uU(1),p.BQk()),2&Ge){const We=p.oxw(2);p.xp6(1),p.hij("[",We.duplicatesCount+1,"]")}}function Ye(Ge,Nt){if(1&Ge&&(p.TgZ(0,"div"),p._uU(1),p.YNc(2,ke,2,1,"ng-container",4),p.qZA()),2&Ge){const We=p.oxw();p.Tol(We.options.titleClass),p.uIk("aria-label",We.title),p.xp6(1),p.hij(" ",We.title," "),p.xp6(1),p.Q6J("ngIf",We.duplicatesCount)}}function lt(Ge,Nt){if(1&Ge&&p._UZ(0,"div",7),2&Ge){const We=p.oxw();p.Tol(We.options.messageClass),p.Q6J("innerHTML",We.message,p.oJD)}}function wt(Ge,Nt){if(1&Ge&&(p.TgZ(0,"div",8),p._uU(1),p.qZA()),2&Ge){const We=p.oxw();p.Tol(We.options.messageClass),p.uIk("aria-label",We.message),p.xp6(1),p.hij(" ",We.message," ")}}function it(Ge,Nt){if(1&Ge&&(p.TgZ(0,"div"),p._UZ(1,"div",9),p.qZA()),2&Ge){const We=p.oxw();p.xp6(1),p.Udp("width",We.width+"%")}}class Cn{_attachedHost;component;viewContainerRef;injector;constructor(Nt,We){this.component=Nt,this.injector=We}attach(Nt,We){return this._attachedHost=Nt,Nt.attach(this,We)}detach(){const Nt=this._attachedHost;if(Nt)return this._attachedHost=void 0,Nt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Nt){this._attachedHost=Nt}}class kt{_attachedPortal;_disposeFn;attach(Nt,We){return this._attachedPortal=Nt,this.attachComponentPortal(Nt,We)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Nt){this._disposeFn=Nt}}class Ae{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new o.x;_activate=new o.x;_manualClose=new o.x;_resetTimeout=new o.x;_countDuplicate=new o.x;constructor(Nt){this._overlayRef=Nt}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Nt,We){Nt&&this._resetTimeout.next(),We&&this._countDuplicate.next(++this.duplicatesCount)}}class ct{toastId;config;message;title;toastType;toastRef;_onTap=new o.x;_onAction=new o.x;constructor(Nt,We,Ot,Re,ft,cn){this.toastId=Nt,this.config=We,this.message=Ot,this.title=Re,this.toastType=ft,this.toastRef=cn,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Nt){this._onAction.next(Nt)}onAction(){return this._onAction.asObservable()}}const mt=new p.OlP("ToastConfig");class Je extends kt{_hostDomElement;_componentFactoryResolver;_appRef;constructor(Nt,We,Ot){super(),this._hostDomElement=Nt,this._componentFactoryResolver=We,this._appRef=Ot}attachComponentPortal(Nt,We){const Ot=this._componentFactoryResolver.resolveComponentFactory(Nt.component);let Re;return Re=Ot.create(Nt.injector),this._appRef.attachView(Re.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Re.hostView),Re.destroy()}),We?this._hostDomElement.insertBefore(this._getComponentRootNode(Re),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Re)),Re}_getComponentRootNode(Nt){return Nt.hostView.rootNodes[0]}}let qt=(()=>{class Ge{_document=(0,p.f3M)(Q.K0);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const We=this._document.createElement("div");We.classList.add("overlay-container"),We.setAttribute("aria-live","polite"),this._document.body.appendChild(We),this._containerElement=We}static \u0275fac=function(Ot){return new(Ot||Ge)};static \u0275prov=p.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();class ln{_portalHost;constructor(Nt){this._portalHost=Nt}attach(Nt,We=!0){return this._portalHost.attach(Nt,We)}detach(){return this._portalHost.detach()}}let Dn=(()=>{class Ge{_overlayContainer=(0,p.f3M)(qt);_componentFactoryResolver=(0,p.f3M)(p._Vd);_appRef=(0,p.f3M)(p.z2F);_document=(0,p.f3M)(Q.K0);_paneElements=new Map;create(We,Ot){return this._createOverlayRef(this.getPaneElement(We,Ot))}getPaneElement(We="",Ot){return this._paneElements.get(Ot)||this._paneElements.set(Ot,{}),this._paneElements.get(Ot)[We]||(this._paneElements.get(Ot)[We]=this._createPaneElement(We,Ot)),this._paneElements.get(Ot)[We]}_createPaneElement(We,Ot){const Re=this._document.createElement("div");return Re.id="toast-container",Re.classList.add(We),Re.classList.add("toast-container"),Ot?Ot.getContainerElement().appendChild(Re):this._overlayContainer.getContainerElement().appendChild(Re),Re}_createPortalHost(We){return new Je(We,this._componentFactoryResolver,this._appRef)}_createOverlayRef(We){return new ln(this._createPortalHost(We))}static \u0275fac=function(Ot){return new(Ot||Ge)};static \u0275prov=p.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})(),ti=(()=>{class Ge{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(We,Ot,Re,ft,cn){this.overlay=Ot,this._injector=Re,this.sanitizer=ft,this.ngZone=cn,this.toastrConfig={...We.default,...We.config},We.config.iconClasses&&(this.toastrConfig.iconClasses={...We.default.iconClasses,...We.config.iconClasses})}show(We,Ot,Re={},ft=""){return this._preBuildNotification(ft,We,Ot,this.applyConfig(Re))}success(We,Ot,Re={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",We,Ot,this.applyConfig(Re))}error(We,Ot,Re={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",We,Ot,this.applyConfig(Re))}info(We,Ot,Re={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",We,Ot,this.applyConfig(Re))}warning(We,Ot,Re={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",We,Ot,this.applyConfig(Re))}clear(We){for(const Ot of this.toasts)if(void 0!==We){if(Ot.toastId===We)return void Ot.toastRef.manualClose()}else Ot.toastRef.manualClose()}remove(We){const Ot=this._findToast(We);if(!Ot||(Ot.activeToast.toastRef.close(),this.toasts.splice(Ot.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Re=this.toasts[this.currentlyActive].toastRef;Re.isInactive()||(this.currentlyActive=this.currentlyActive+1,Re.activate())}return!0}findDuplicate(We="",Ot="",Re,ft){const{includeTitleDuplicates:cn}=this.toastrConfig;for(const kn of this.toasts)if((!cn||cn&&kn.title===We)&&kn.message===Ot)return kn.toastRef.onDuplicate(Re,ft),kn;return null}applyConfig(We={}){return{...this.toastrConfig,...We}}_findToast(We){for(let Ot=0;Ot<this.toasts.length;Ot++)if(this.toasts[Ot].toastId===We)return{index:Ot,activeToast:this.toasts[Ot]};return null}_preBuildNotification(We,Ot,Re,ft){return ft.onActivateTick?this.ngZone.run(()=>this._buildNotification(We,Ot,Re,ft)):this._buildNotification(We,Ot,Re,ft)}_buildNotification(We,Ot,Re,ft){if(!ft.toastComponent)throw new Error("toastComponent required");const cn=this.findDuplicate(Re,Ot,this.toastrConfig.resetTimeoutOnDuplicate&&ft.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Re||Ot)&&this.toastrConfig.preventDuplicates&&null!==cn)return cn;this.previousToastMessage=Ot;let kn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(kn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const an=this.overlay.create(ft.positionClass,this.overlayContainer);this.index=this.index+1;let Mn=Ot;Ot&&ft.enableHtml&&(Mn=this.sanitizer.sanitize(p.q3G.HTML,Ot));const Gt=new Ae(an),On=new ct(this.index,ft,Mn,Re,We,Gt),zt=p.zs3.create({providers:[{provide:ct,useValue:On}],parent:this._injector}),Wn=new Cn(ft.toastComponent,zt),Fn=an.attach(Wn,ft.newestOnTop);Gt.componentInstance=Fn.instance;const It={toastId:this.index,title:Re||"",message:Ot||"",toastRef:Gt,onShown:Gt.afterActivate(),onHidden:Gt.afterClosed(),onTap:On.onTap(),onAction:On.onAction(),portal:Fn};return kn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{It.toastRef.activate()})),this.toasts.push(It),It}static \u0275fac=function(Ot){return new(Ot||Ge)(p.LFG(mt),p.LFG(Dn),p.LFG(p.zs3),p.LFG(P.H7),p.LFG(p.R0b))};static \u0275prov=p.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();const _i={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class Ge{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(We,Ot,Re){this.toastrService=We,this.toastPackage=Ot,this.ngZone=Re,this.message=Ot.message,this.title=Ot.title,this.options=Ot.config,this.originalTimeout=Ot.config.timeOut,this.toastClasses=`${Ot.toastType} ${Ot.config.toastClass}`,this.sub=Ot.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ot.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ot.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ot.toastRef.countDuplicate().subscribe(ft=>{this.duplicatesCount=ft}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const We=(new Date).getTime();this.width=(this.hideTime-We)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(We,Ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(We),Ot)):this.timeout=setTimeout(()=>We(),Ot)}outsideInterval(We,Ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(We),Ot)):this.intervalId=setInterval(()=>We(),Ot)}runInsideAngular(We){this.ngZone?this.ngZone.run(()=>We()):We()}static \u0275fac=function(Ot){return new(Ot||Ge)(p.Y36(ti),p.Y36(ct),p.Y36(p.R0b))};static \u0275cmp=p.Xpm({type:Ge,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ot,Re){1&Ot&&p.NdJ("click",function(){return Re.tapToast()})("mouseenter",function(){return Re.stickAround()})("mouseleave",function(){return Re.delayedHideToast()}),2&Ot&&(p.d8E("@flyInOut",Re.state),p.Tol(Re.toastClasses),p.Udp("display",Re.displayStyle))},standalone:!0,features:[p.jDz],attrs:st,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ot,Re){1&Ot&&(p.YNc(0,_t,3,0,"button",0),p.YNc(1,Ye,3,5,"div",1),p.YNc(2,lt,1,3,"div",2),p.YNc(3,wt,2,4,"div",3),p.YNc(4,it,2,2,"div",4)),2&Ot&&(p.Q6J("ngIf",Re.options.closeButton),p.xp6(1),p.Q6J("ngIf",Re.title),p.xp6(1),p.Q6J("ngIf",Re.message&&Re.options.enableHtml),p.xp6(1),p.Q6J("ngIf",Re.message&&!Re.options.enableHtml),p.xp6(1),p.Q6J("ngIf",Re.options.progressBar))},dependencies:[Q.O5],encapsulation:2,data:{animation:[(0,j.X$)("flyInOut",[(0,j.SB)("inactive",(0,j.oB)({opacity:0})),(0,j.SB)("active",(0,j.oB)({opacity:1})),(0,j.SB)("removed",(0,j.oB)({opacity:0})),(0,j.eR)("inactive => active",(0,j.jt)("{{ easeTime }}ms {{ easing }}")),(0,j.eR)("active => removed",(0,j.jt)("{{ easeTime }}ms {{ easing }}"))])]}})}return Ge})()},ii=(Ge={})=>(0,p.MR2)([{provide:mt,useValue:{default:_i,config:Ge}}]);let vi=(()=>{class Ge{static forRoot(We={}){return{ngModule:Ge,providers:[ii(We)]}}static \u0275fac=function(Ot){return new(Ot||Ge)};static \u0275mod=p.oAB({type:Ge});static \u0275inj=p.cJS({})}return Ge})()},7582:(ni,Wt,F)=>{"use strict";function it(Yt,Zt,ze,Ge){return new(ze||(ze=Promise))(function(We,Ot){function Re(kn){try{cn(Ge.next(kn))}catch(an){Ot(an)}}function ft(kn){try{cn(Ge.throw(kn))}catch(an){Ot(an)}}function cn(kn){kn.done?We(kn.value):function Nt(We){return We instanceof ze?We:new ze(function(Ot){Ot(We)})}(kn.value).then(Re,ft)}cn((Ge=Ge.apply(Yt,Zt||[])).next())})}function kt(Yt){return this instanceof kt?(this.v=Yt,this):new kt(Yt)}function Ae(Yt,Zt,ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Nt,Ge=ze.apply(Yt,Zt||[]),We=[];return Nt={},Ot("next"),Ot("throw"),Ot("return"),Nt[Symbol.asyncIterator]=function(){return this},Nt;function Ot(Mn){Ge[Mn]&&(Nt[Mn]=function(Gt){return new Promise(function(On,xt){We.push([Mn,Gt,On,xt])>1||Re(Mn,Gt)})})}function Re(Mn,Gt){try{!function ft(Mn){Mn.value instanceof kt?Promise.resolve(Mn.value.v).then(cn,kn):an(We[0][2],Mn)}(Ge[Mn](Gt))}catch(On){an(We[0][3],On)}}function cn(Mn){Re("next",Mn)}function kn(Mn){Re("throw",Mn)}function an(Mn,Gt){Mn(Gt),We.shift(),We.length&&Re(We[0][0],We[0][1])}}function ht(Yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Zt=Yt[Symbol.asyncIterator];return Zt?Zt.call(Yt):(Yt=function en(Yt){var Zt="function"==typeof Symbol&&Symbol.iterator,ze=Zt&&Yt[Zt],Ge=0;if(ze)return ze.call(Yt);if(Yt&&"number"==typeof Yt.length)return{next:function(){return Yt&&Ge>=Yt.length&&(Yt=void 0),{value:Yt&&Yt[Ge++],done:!Yt}}};throw new TypeError(Zt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Yt),ze={},Ge("next"),Ge("throw"),Ge("return"),ze[Symbol.asyncIterator]=function(){return this},ze);function Ge(We){ze[We]=Yt[We]&&function(Ot){return new Promise(function(Re,ft){!function Nt(We,Ot,Re,ft){Promise.resolve(ft).then(function(cn){We({value:cn,done:Re})},Ot)}(Re,ft,(Ot=Yt[We](Ot)).done,Ot.value)})}}}F.d(Wt,{FC:()=>Ae,KL:()=>ht,mG:()=>it,qq:()=>kt}),"function"==typeof SuppressedError&&SuppressedError}},ni=>{ni(ni.s=9254)}]);